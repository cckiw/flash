var Al=Object.defineProperty;var El=(l,e,t)=>e in l?Al(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var xe=(l,e,t)=>El(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function be(){}function Tl(l){return l()}function Nt(){return Object.create(null)}function Je(l){l.forEach(Tl)}function Il(l){return typeof l=="function"}function at(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let vt;function Ve(l,e){return l===e?!0:(vt||(vt=document.createElement("a")),vt.href=e,l===vt.href)}function Ol(l){return Object.keys(l).length===0}function Ul(l,...e){if(l==null){for(const i of e)i(void 0);return be}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Qe(l,e,t){l.$$.on_destroy.push(Ul(e,t))}function s(l,e){l.appendChild(e)}function M(l,e,t){l.insertBefore(e,t||null)}function I(l){l.parentNode&&l.parentNode.removeChild(l)}function Hl(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function f(l){return document.createElement(l)}function P(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function R(l){return document.createTextNode(l)}function g(){return R(" ")}function nt(){return R("")}function U(l,e,t,i){return l.addEventListener(e,t,i),()=>l.removeEventListener(e,t,i)}function Rl(l){return function(e){return e.preventDefault(),l.call(this,e)}}function $e(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function n(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Jl(l){return Array.from(l.childNodes)}function $(l,e){e=""+e,l.data!==e&&(l.data=e)}function Oe(l,e){l.value=e??""}function Pl(l,e,t,i){l.style.setProperty(e,t,"")}function B(l,e,t){l.classList.toggle(e,!!t)}class ql{constructor(e=!1){xe(this,"is_svg",!1);xe(this,"e");xe(this,"n");xe(this,"t");xe(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=P(t.nodeName):this.e=f(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)M(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(I)}}let pt;function dt(l){pt=l}function Ml(){if(!pt)throw new Error("Function called outside component initialization");return pt}function Dl(l){Ml().$$.on_mount.push(l)}function Fl(l){Ml().$$.on_destroy.push(l)}function tt(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const rt=[],jt=[];let ot=[];const Bt=[],Wl=Promise.resolve();let Lt=!1;function zl(){Lt||(Lt=!0,Wl.then(Nl))}function Tt(l){ot.push(l)}const St=new Set;let it=0;function Nl(){if(it!==0)return;const l=pt;do{try{for(;it<rt.length;){const e=rt[it];it++,dt(e),Vl(e.$$)}}catch(e){throw rt.length=0,it=0,e}for(dt(null),rt.length=0,it=0;jt.length;)jt.pop()();for(let e=0;e<ot.length;e+=1){const t=ot[e];St.has(t)||(St.add(t),t())}ot.length=0}while(rt.length);for(;Bt.length;)Bt.pop()();Lt=!1,St.clear(),dt(l)}function Vl(l){if(l.fragment!==null){l.update(),Je(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Tt)}}function Gl(l){const e=[],t=[];ot.forEach(i=>l.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),ot=e}const mt=new Set;let et;function Kl(){et={r:0,c:[],p:et}}function Xl(){et.r||Je(et.c),et=et.p}function lt(l,e){l&&l.i&&(mt.delete(l),l.i(e))}function ht(l,e,t,i){if(l&&l.o){if(mt.has(l))return;mt.add(l),et.c.push(()=>{mt.delete(l),i&&(t&&l.d(1),i())}),l.o(e)}else i&&i()}function _t(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Yl(l,e){l.d(1),e.delete(l.key)}function Ql(l,e,t,i,r,o,c,d,a,u,p,v){let h=l.length,k=o.length,w=h;const m={};for(;w--;)m[l[w].key]=w;const _=[],b=new Map,C=new Map,L=[];for(w=k;w--;){const S=v(r,o,w),T=t(S);let y=c.get(T);y?L.push(()=>y.p(S,e)):(y=u(T,S),y.c()),b.set(T,_[w]=y),T in m&&C.set(T,Math.abs(w-m[T]))}const j=new Set,D=new Set;function E(S){lt(S,1),S.m(d,p),c.set(S.key,S),p=S.first,k--}for(;h&&k;){const S=_[k-1],T=l[h-1],y=S.key,N=T.key;S===T?(p=S.first,h--,k--):b.has(N)?!c.has(y)||j.has(y)?E(S):D.has(N)?h--:C.get(y)>C.get(N)?(D.add(y),E(S)):(j.add(N),h--):(a(T,c),h--)}for(;h--;){const S=l[h];b.has(S.key)||a(S,c)}for(;k;)E(_[k-1]);return Je(L),_}function Mt(l){l&&l.c()}function gt(l,e,t){const{fragment:i,after_update:r}=l.$$;i&&i.m(e,t),Tt(()=>{const o=l.$$.on_mount.map(Tl).filter(Il);l.$$.on_destroy?l.$$.on_destroy.push(...o):Je(o),l.$$.on_mount=[]}),r.forEach(Tt)}function yt(l,e){const t=l.$$;t.fragment!==null&&(Gl(t.after_update),Je(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Zl(l,e){l.$$.dirty[0]===-1&&(rt.push(l),zl(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function kt(l,e,t,i,r,o,c=null,d=[-1]){const a=pt;dt(l);const u=l.$$={fragment:null,ctx:[],props:o,update:be,not_equal:r,bound:Nt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Nt(),dirty:d,skip_bound:!1,root:e.target||a.$$.root};c&&c(u.root);let p=!1;if(u.ctx=t?t(l,e.props||{},(v,h,...k)=>{const w=k.length?k[0]:h;return u.ctx&&r(u.ctx[v],u.ctx[v]=w)&&(!u.skip_bound&&u.bound[v]&&u.bound[v](w),p&&Zl(l,v)),h}):[],u.update(),p=!0,Je(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const v=Jl(e.target);u.fragment&&u.fragment.l(v),v.forEach(I)}else u.fragment&&u.fragment.c();e.intro&&lt(l.$$.fragment),gt(l,e.target,e.anchor),Nl()}dt(a)}class wt{constructor(){xe(this,"$$");xe(this,"$$set")}$destroy(){yt(this,1),this.$destroy=be}$on(e,t){if(!Il(t))return be;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Ol(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xl);const st=[];function bt(l,e=be){let t;const i=new Set;function r(d){if(at(l,d)&&(l=d,t)){const a=!st.length;for(const u of i)u[1](),st.push(u,l);if(a){for(let u=0;u<st.length;u+=2)st[u][0](st[u+1]);st.length=0}}}function o(d){r(d(l))}function c(d,a=be){const u=[d,a];return i.add(u),i.size===1&&(t=e(r,o)||be),d(l),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:r,update:o,subscribe:c}}const ze="flash-cards-data";function $l(){const l=typeof localStorage<"u"?localStorage.getItem(ze):null,e=l?JSON.parse(l):{learned:[],unlearned:[],draft:[]};e.cards&&e.cards.length>0&&(e.unlearned=[...e.unlearned,...e.cards],delete e.cards),e.draft||(e.draft=[]);const t=a=>a.map(u=>({...u,dictionaryId:u.dictionaryId||"default"}));e.learned=t(e.learned),e.unlearned=t(e.unlearned),e.draft=t(e.draft);const i=new Set,r=a=>a.filter(u=>i.has(u.id)?!1:(i.add(u.id),!0));e.learned=r(e.learned),e.unlearned=r(e.unlearned),e.draft=r(e.draft),typeof localStorage<"u"&&l&&localStorage.setItem(ze,JSON.stringify(e));const{subscribe:o,set:c,update:d}=bt(e);return{subscribe:o,addCard:(a,u,p="",v="",h="default")=>{d(k=>{const w={id:Date.now(),word:a,translation:u,association:p,imageUrl:v,dictionaryId:h,createdAt:new Date().toISOString()},m={...k,unlearned:[...k.unlearned,w]};return localStorage.setItem(ze,JSON.stringify(m)),m})},markAsLearned:a=>{d(u=>{const p=u.unlearned.find(h=>h.id===a);if(!p)return u;const v={...u,unlearned:u.unlearned.filter(h=>h.id!==a),learned:[...u.learned,{...p,learnedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(v)),v})},markAsUnlearned:a=>{d(u=>{const p=u.unlearned.find(h=>h.id===a);if(!p)return u;const v={...u,unlearned:[...u.unlearned.filter(h=>h.id!==a),{...p,reviewedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(v)),v})},moveToStudy:a=>{d(u=>{const p=u.learned.find(h=>h.id===a);if(!p)return u;const v={...u,learned:u.learned.filter(h=>h.id!==a),unlearned:[...u.unlearned,p]};return localStorage.setItem(ze,JSON.stringify(v)),v})},moveAllToStudy:()=>{d(a=>{if(a.learned.length===0)return a;const u={...a,learned:[],unlearned:[...a.unlearned,...a.learned]};return localStorage.setItem(ze,JSON.stringify(u)),u})},deleteCard:(a,u="unlearned")=>{d(p=>{const v={...p,[u]:p[u].filter(h=>h.id!==a)};return localStorage.setItem(ze,JSON.stringify(v)),v})},editCard:(a,u,p)=>{d(v=>{const h={...v,[u]:v[u].map(k=>k.id===a?{...k,...p,updatedAt:new Date().toISOString()}:k)};return localStorage.setItem(ze,JSON.stringify(h)),h})},addDraftCards:(a,u="default")=>{d(p=>{const v=new Set([...p.unlearned.map(m=>m.word.toLowerCase()),...p.learned.map(m=>m.word.toLowerCase()),...p.draft.map(m=>m.word.toLowerCase())]);let h=0;const k=a.filter(m=>m.trim()&&!v.has(m.trim().toLowerCase())).map(m=>({id:`draft_${Date.now()}_${h++}_${Math.random().toString(36).substr(2,9)}`,word:m.trim(),translation:"",association:"",imageUrl:"",dictionaryId:u,createdAt:new Date().toISOString(),isDraft:!0})),w={...p,draft:[...p.draft,...k]};return localStorage.setItem(ze,JSON.stringify(w)),w})},activateCard:a=>{d(u=>{const p=u.draft.find(w=>w.id===a);if(!p)return u;const{isDraft:v,...h}=p,k={...u,draft:u.draft.filter(w=>w.id!==a),unlearned:[...u.unlearned,{...h,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(k)),k})},editDraftCard:(a,u)=>{d(p=>{var w,m;const v=p.draft.find(_=>_.id===a);if(!v)return p;const h={...v,...u,updatedAt:new Date().toISOString()};if(((w=h.translation)==null?void 0:w.trim())&&((m=h.imageUrl)==null?void 0:m.trim())){const{isDraft:_,...b}=h,C={...p,draft:p.draft.filter(L=>L.id!==a),unlearned:[...p.unlearned,{...b,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(C)),C}else{const _={...p,draft:p.draft.map(b=>b.id===a?h:b)};return localStorage.setItem(ze,JSON.stringify(_)),_}})},reset:()=>{const a={learned:[],unlearned:[],draft:[]};localStorage.setItem(ze,JSON.stringify(a)),c(a)},resetDictionary:a=>{d(u=>{const p={learned:u.learned.filter(v=>(v.dictionaryId||"default")!==a),unlearned:u.unlearned.filter(v=>(v.dictionaryId||"default")!==a),draft:u.draft.filter(v=>(v.dictionaryId||"default")!==a)};return localStorage.setItem(ze,JSON.stringify(p)),p})},importCards:(a,u)=>{d(p=>{const v=a.unlearned||[],h=a.learned||[],k=a.draft||[],w=S=>S.map(T=>({...T,dictionaryId:u||"default"})),m=w(v),_=w(h),b=w(k),C=new Set([...p.unlearned.map(S=>S.word.toLowerCase()),...p.learned.map(S=>S.word.toLowerCase()),...p.draft.map(S=>S.word.toLowerCase())]),L=m.filter(S=>!C.has(S.word.toLowerCase())),j=_.filter(S=>!C.has(S.word.toLowerCase())),D=b.filter(S=>!C.has(S.word.toLowerCase())),E={learned:[...p.learned,...j],unlearned:[...p.unlearned,...L],draft:[...p.draft,...D]};return localStorage.setItem(ze,JSON.stringify(E)),E})}}}const Re=$l(),en={en:"Английский",pt:"Португальский",es:"Испанский"},tn={en:"English",pt:"Portuguese",es:"Spanish"},ln=typeof localStorage<"u"&&localStorage.getItem("target_language")||"en",Ze=bt(ln);Ze.subscribe(l=>{typeof localStorage<"u"&&localStorage.setItem("target_language",l)});function Ye(l){return en[l]||l}function nn(l){return tn[l]||l}const ut="loaded-dictionaries",It="current_dictionary",sn=typeof localStorage<"u"&&localStorage.getItem(It)||"",We=bt(sn);We.subscribe(l=>{typeof localStorage<"u"&&(l?localStorage.setItem(It,l):localStorage.removeItem(It))});function rn(){const l=typeof localStorage<"u"?localStorage.getItem(ut):null,e=l?JSON.parse(l):[],{subscribe:t,set:i,update:r}=bt(e);return{subscribe:t,addDictionary:(o,c,d,a=!1)=>{r(u=>{if(u.find(k=>k.id===o))return u.map(k=>k.id===o?{...k,name:c,language:d,isImported:a}:k);const v={id:o,name:c,language:d,isImported:a},h=[...u,v];return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(h)),h})},removeDictionary:o=>{r(c=>{const d=c.filter(a=>a.id!==o);return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(d)),d})},clear:()=>{typeof localStorage<"u"&&localStorage.removeItem(ut),i([])},updateDictionaryData:(o,c)=>{r(d=>{const a=d.map(u=>u.id===o?{...u,data:c}:u);return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(a)),a})}}}const Xe=rn();function on(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-1wg5uvi"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg> <span class="svelte-1wg5uvi">Нажмите, чтобы добавить изображение</span>',n(e,"class","image-placeholder svelte-1wg5uvi")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function an(l){let e,t,i,r;return{c(){e=f("img"),Ve(e.src,t=l[4])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","preview-image svelte-1wg5uvi")},m(o,c){M(o,e,c),i||(r=U(e,"error",l[21]),i=!0)},p(o,c){c[0]&16&&!Ve(e.src,t=o[4])&&n(e,"src",t)},d(o){o&&I(e),i=!1,r()}}}function At(l){let e;return{c(){e=f("div"),e.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
      Карточка добавлена!`,n(e,"class","success-toast svelte-1wg5uvi")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Et(l){let e,t,i,r,o,c=l[9]>0?`Импортировано ${l[9]} карточек!`:"Новых карточек не найдено",d;return{c(){e=f("div"),t=P("svg"),i=P("polyline"),r=P("line"),o=g(),d=R(c),n(i,"points","17 8 12 3 7 8"),n(r,"x1","12"),n(r,"y1","3"),n(r,"x2","12"),n(r,"y2","15"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast import svelte-1wg5uvi")},m(a,u){M(a,e,u),s(e,t),s(t,i),s(t,r),s(e,o),s(e,d)},p(a,u){u[0]&512&&c!==(c=a[9]>0?`Импортировано ${a[9]} карточек!`:"Новых карточек не найдено")&&$(d,c)},d(a){a&&I(e)}}}function Ot(l){let e,t,i,r,o,c,d,a,u,p=l[12]>0?`Добавлено ${l[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)",v;return{c(){e=f("div"),t=P("svg"),i=P("line"),r=P("line"),o=P("line"),c=P("line"),d=P("line"),a=P("line"),u=g(),v=R(p),n(i,"x1","8"),n(i,"y1","6"),n(i,"x2","21"),n(i,"y2","6"),n(r,"x1","8"),n(r,"y1","12"),n(r,"x2","21"),n(r,"y2","12"),n(o,"x1","8"),n(o,"y1","18"),n(o,"x2","21"),n(o,"y2","18"),n(c,"x1","3"),n(c,"y1","6"),n(c,"x2","3.01"),n(c,"y2","6"),n(d,"x1","3"),n(d,"y1","12"),n(d,"x2","3.01"),n(d,"y2","12"),n(a,"x1","3"),n(a,"y1","18"),n(a,"x2","3.01"),n(a,"y2","18"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast bulk svelte-1wg5uvi")},m(h,k){M(h,e,k),s(e,t),s(t,i),s(t,r),s(t,o),s(t,c),s(t,d),s(t,a),s(e,u),s(e,v)},p(h,k){k[0]&4096&&p!==(p=h[12]>0?`Добавлено ${h[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)")&&$(v,p)},d(h){h&&I(e)}}}function Ut(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b,C,L,j,D,E,S,T=l[7]&&Ht(l),y=l[4]&&Rt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="Добавить изображение",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("div"),p=f("label"),p.textContent="Ссылка на изображение",v=g(),h=f("input"),k=g(),T&&T.c(),w=g(),m=f("div"),y&&y.c(),_=g(),b=f("button"),b.textContent="Отмена",C=g(),L=f("button"),j=R("Сохранить"),n(r,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(p,"for","imageUrl"),n(p,"class","svelte-1wg5uvi"),n(h,"id","imageUrl"),n(h,"type","url"),n(h,"placeholder","https://example.com/image.jpg"),n(h,"class","svelte-1wg5uvi"),n(u,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(b,"class","btn-secondary svelte-1wg5uvi"),n(L,"class","btn-primary svelte-1wg5uvi"),L.disabled=D=l[8]&&l[7],n(m,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(N,H){M(N,e,H),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(u,p),s(u,v),s(u,h),Oe(h,l[7]),s(a,k),T&&T.m(a,null),s(t,w),s(t,m),y&&y.m(m,null),s(m,_),s(m,b),s(m,C),s(m,L),s(L,j),E||(S=[U(c,"click",l[35]),U(h,"input",l[36]),U(b,"click",l[37]),U(L,"click",l[19]),U(t,"click",$e(l[30])),U(e,"click",l[38]),U(e,"keydown",l[39])],E=!0)},p(N,H){H[0]&128&&h.value!==N[7]&&Oe(h,N[7]),N[7]?T?T.p(N,H):(T=Ht(N),T.c(),T.m(a,null)):T&&(T.d(1),T=null),N[4]?y?y.p(N,H):(y=Rt(N),y.c(),y.m(m,_)):y&&(y.d(1),y=null),H[0]&384&&D!==(D=N[8]&&N[7])&&(L.disabled=D)},d(N){N&&I(e),T&&T.d(),y&&y.d(),E=!1,Je(S)}}}function Ht(l){let e;function t(o,c){return o[8]?fn:cn}let i=t(l),r=i(l);return{c(){e=f("div"),r.c(),n(e,"class","image-preview-container svelte-1wg5uvi")},m(o,c){M(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null)))},d(o){o&&I(e),r.d()}}}function cn(l){let e,t,i,r;return{c(){e=f("img"),Ve(e.src,t=l[7])||n(e,"src",t),n(e,"alt","Превью изображения"),n(e,"class","modal-image-preview svelte-1wg5uvi")},m(o,c){M(o,e,c),i||(r=[U(e,"error",l[21]),U(e,"load",l[22])],i=!0)},p(o,c){c[0]&128&&!Ve(e.src,t=o[7])&&n(e,"src",t)},d(o){o&&I(e),i=!1,Je(r)}}}function fn(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Не удалось загрузить изображение</span>',n(e,"class","image-error svelte-1wg5uvi")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function Rt(l){let e,t,i;return{c(){e=f("button"),e.textContent="Удалить",n(e,"class","btn-secondary danger svelte-1wg5uvi")},m(r,o){M(r,e,o),t||(i=U(e,"click",l[20]),t=!0)},p:be,d(r){r&&I(e),t=!1,i()}}}function Jt(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b,C,L,j,D,E,S,T,y=(l[15]>0?l[15]:"")+"",N,H,A=l[15]===1?"слово":l[15]>1&&l[15]<5?"слова":l[15]>=5?"слов":"",q,W,z,O,J=l[15]>0&&Pt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="Загрузить список слов",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("div"),u.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg> <p class="svelte-1wg5uvi">Введите слова списком — каждое слово на новой строке. Слова будут добавлены в раздел &quot;На проработку&quot;, где вы сможете добавить перевод и изображение.</p>',p=g(),v=f("div"),h=f("label"),k=R(`Слова
            `),J&&J.c(),w=g(),m=f("textarea"),_=g(),b=f("div"),C=f("button"),C.textContent="Отмена",L=g(),j=f("button"),D=P("svg"),E=P("line"),S=P("line"),T=R(`
          Добавить `),N=R(y),H=g(),q=R(A),n(r,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(u,"class","bulk-info svelte-1wg5uvi"),n(h,"for","bulkWords"),n(h,"class","svelte-1wg5uvi"),n(m,"id","bulkWords"),n(m,"placeholder",`serendipity
ephemeral
ubiquitous
eloquent
resilient`),n(m,"rows","10"),n(m,"class","bulk-textarea svelte-1wg5uvi"),n(v,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(C,"class","btn-secondary svelte-1wg5uvi"),n(E,"x1","12"),n(E,"y1","5"),n(E,"x2","12"),n(E,"y2","19"),n(S,"x1","5"),n(S,"y1","12"),n(S,"x2","19"),n(S,"y2","12"),n(D,"width","18"),n(D,"height","18"),n(D,"viewBox","0 0 24 24"),n(D,"fill","none"),n(D,"stroke","currentColor"),n(D,"stroke-width","2"),n(j,"class","btn-primary svelte-1wg5uvi"),j.disabled=W=l[15]===0,n(b,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal bulk-modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(re,oe){M(re,e,oe),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(a,p),s(a,v),s(v,h),s(h,k),J&&J.m(h,null),s(v,w),s(v,m),Oe(m,l[0]),s(t,_),s(t,b),s(b,C),s(b,L),s(b,j),s(j,D),s(D,E),s(D,S),s(j,T),s(j,N),s(j,H),s(j,q),z||(O=[U(c,"click",l[26]),U(m,"input",l[40]),U(C,"click",l[26]),U(j,"click",l[27]),U(t,"click",$e(l[29])),U(e,"click",l[26]),U(e,"keydown",l[41])],z=!0)},p(re,oe){re[15]>0?J?J.p(re,oe):(J=Pt(re),J.c(),J.m(h,null)):J&&(J.d(1),J=null),oe[0]&1&&Oe(m,re[0]),oe[0]&32768&&y!==(y=(re[15]>0?re[15]:"")+"")&&$(N,y),oe[0]&32768&&A!==(A=re[15]===1?"слово":re[15]>1&&re[15]<5?"слова":re[15]>=5?"слов":"")&&$(q,A),oe[0]&32768&&W!==(W=re[15]===0)&&(j.disabled=W)},d(re){re&&I(e),J&&J.d(),z=!1,Je(O)}}}function Pt(l){let e,t,i,r=l[15]===1?"слово":l[15]<5?"слова":"слов",o;return{c(){e=f("span"),t=R(l[15]),i=g(),o=R(r),n(e,"class","word-count svelte-1wg5uvi")},m(c,d){M(c,e,d),s(e,t),s(e,i),s(e,o)},p(c,d){d[0]&32768&&$(t,c[15]),d[0]&32768&&r!==(r=c[15]===1?"слово":c[15]<5?"слова":"слов")&&$(o,r)},d(c){c&&I(e)}}}function un(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b,C,L,j=l[16].toLowerCase()+"",D,E,S,T=l[1].length+"",y,N,H,A,q,W,z,O,J,re=l[2].length+"",oe,he,fe,de,ye,ie,X,ae,ge,Ie,Ne,Ce=l[3].length+"",V,pe,ve,ce,ke,Le,G,Z,K,we,ee,Me,me,te,ne=(l[1]||"Слово")+"",Q,ue,F,Be=(l[2]||"Перевод")+"",De,Ge,Te,le,_e,se,Ae,ct,Y;function Fe(x,je){return x[4]?an:on}let Ke=Fe(l),Pe=Ke(l),qe=l[5]&&At(),Se=l[10]&&Et(l),He=l[13]&&Ot(l),Ee=l[6]&&Ut(l),Ue=l[11]&&Jt(l);return{c(){e=f("input"),t=g(),i=f("div"),r=f("div"),o=f("div"),c=f("h1"),c.textContent="Новая карточка",d=g(),a=f("div"),u=f("button"),u.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',p=g(),v=f("button"),v.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>',h=g(),k=f("p"),k.textContent="Добавьте слово для изучения",w=g(),m=f("div"),_=f("form"),b=f("div"),C=f("label"),L=R("Слово ("),D=R(j),E=R(`)
          `),S=f("span"),y=R(T),N=R("/35"),H=g(),A=f("input"),q=g(),W=f("div"),z=f("label"),O=R(`Перевод
          `),J=f("span"),oe=R(re),he=R("/50"),fe=g(),de=f("input"),ye=g(),ie=f("div"),X=f("label"),ae=R(`Ассоциация 
          `),ge=f("span"),ge.textContent="(необязательно)",Ie=g(),Ne=f("span"),V=R(Ce),pe=R("/95"),ve=g(),ce=f("textarea"),ke=g(),Le=f("button"),Le.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        Добавить карточку`,G=g(),Z=f("div"),K=f("span"),K.textContent="Превью карточки",we=g(),ee=f("button"),Pe.c(),Me=g(),me=f("div"),te=f("div"),Q=R(ne),ue=g(),F=f("div"),De=R(Be),Ge=g(),qe&&qe.c(),Te=g(),Se&&Se.c(),le=g(),He&&He.c(),_e=g(),Ee&&Ee.c(),se=g(),Ue&&Ue.c(),Ae=nt(),n(e,"type","file"),n(e,"accept",".json"),Pl(e,"display","none"),n(e,"class","svelte-1wg5uvi"),n(c,"class","svelte-1wg5uvi"),n(u,"type","button"),n(u,"class","import-btn bulk svelte-1wg5uvi"),n(u,"title","Загрузить список слов"),n(v,"type","button"),n(v,"class","import-btn svelte-1wg5uvi"),n(v,"title","Импорт из JSON"),n(a,"class","header-actions svelte-1wg5uvi"),n(o,"class","header-top svelte-1wg5uvi"),n(k,"class","subtitle svelte-1wg5uvi"),n(r,"class","header svelte-1wg5uvi"),n(S,"class","char-count svelte-1wg5uvi"),B(S,"limit",l[1].length>=35),n(C,"for","word"),n(C,"class","svelte-1wg5uvi"),n(A,"id","word"),n(A,"type","text"),n(A,"placeholder","например: serendipity"),n(A,"maxlength","35"),A.required=!0,n(A,"class","svelte-1wg5uvi"),n(b,"class","input-group svelte-1wg5uvi"),n(J,"class","char-count svelte-1wg5uvi"),B(J,"limit",l[2].length>=50),n(z,"for","translation"),n(z,"class","svelte-1wg5uvi"),n(de,"id","translation"),n(de,"type","text"),n(de,"placeholder","например: счастливая случайность"),n(de,"maxlength","50"),de.required=!0,n(de,"class","svelte-1wg5uvi"),n(W,"class","input-group svelte-1wg5uvi"),n(ge,"class","optional svelte-1wg5uvi"),n(Ne,"class","char-count svelte-1wg5uvi"),B(Ne,"limit",l[3].length>=95),n(X,"for","association"),n(X,"class","svelte-1wg5uvi"),n(ce,"id","association"),n(ce,"placeholder","например: представьте, как вы случайно находите клад под деревом"),n(ce,"maxlength","95"),n(ce,"rows","2"),n(ce,"class","svelte-1wg5uvi"),n(ie,"class","input-group svelte-1wg5uvi"),n(Le,"type","submit"),n(Le,"class","submit-btn svelte-1wg5uvi"),n(_,"class","form svelte-1wg5uvi"),n(K,"class","preview-label svelte-1wg5uvi"),n(te,"class","preview-word svelte-1wg5uvi"),n(F,"class","preview-translation svelte-1wg5uvi"),n(me,"class","card-content-preview svelte-1wg5uvi"),n(ee,"type","button"),n(ee,"class","card-preview svelte-1wg5uvi"),B(ee,"has-image",l[4]),n(Z,"class","card-preview-wrapper svelte-1wg5uvi"),n(m,"class","card-editor svelte-1wg5uvi"),n(i,"class","add-card-container svelte-1wg5uvi")},m(x,je){M(x,e,je),l[31](e),M(x,t,je),M(x,i,je),s(i,r),s(r,o),s(o,c),s(o,d),s(o,a),s(a,u),s(a,p),s(a,v),s(r,h),s(r,k),s(i,w),s(i,m),s(m,_),s(_,b),s(b,C),s(C,L),s(C,D),s(C,E),s(C,S),s(S,y),s(S,N),s(b,H),s(b,A),Oe(A,l[1]),s(_,q),s(_,W),s(W,z),s(z,O),s(z,J),s(J,oe),s(J,he),s(W,fe),s(W,de),Oe(de,l[2]),s(_,ye),s(_,ie),s(ie,X),s(X,ae),s(X,ge),s(X,Ie),s(X,Ne),s(Ne,V),s(Ne,pe),s(ie,ve),s(ie,ce),Oe(ce,l[3]),s(_,ke),s(_,Le),s(m,G),s(m,Z),s(Z,K),s(Z,we),s(Z,ee),Pe.m(ee,null),s(ee,Me),s(ee,me),s(me,te),s(te,Q),s(me,ue),s(me,F),s(F,De),s(i,Ge),qe&&qe.m(i,null),s(i,Te),Se&&Se.m(i,null),s(i,le),He&&He.m(i,null),M(x,_e,je),Ee&&Ee.m(x,je),M(x,se,je),Ue&&Ue.m(x,je),M(x,Ae,je),ct||(Y=[U(e,"change",l[24]),U(u,"click",l[25]),U(v,"click",l[23]),U(A,"input",l[32]),U(de,"input",l[33]),U(ce,"input",l[34]),U(_,"submit",Rl(l[17])),U(ee,"click",l[18])],ct=!0)},p(x,je){je[0]&65536&&j!==(j=x[16].toLowerCase()+"")&&$(D,j),je[0]&2&&T!==(T=x[1].length+"")&&$(y,T),je[0]&2&&B(S,"limit",x[1].length>=35),je[0]&2&&A.value!==x[1]&&Oe(A,x[1]),je[0]&4&&re!==(re=x[2].length+"")&&$(oe,re),je[0]&4&&B(J,"limit",x[2].length>=50),je[0]&4&&de.value!==x[2]&&Oe(de,x[2]),je[0]&8&&Ce!==(Ce=x[3].length+"")&&$(V,Ce),je[0]&8&&B(Ne,"limit",x[3].length>=95),je[0]&8&&Oe(ce,x[3]),Ke===(Ke=Fe(x))&&Pe?Pe.p(x,je):(Pe.d(1),Pe=Ke(x),Pe&&(Pe.c(),Pe.m(ee,Me))),je[0]&2&&ne!==(ne=(x[1]||"Слово")+"")&&$(Q,ne),je[0]&4&&Be!==(Be=(x[2]||"Перевод")+"")&&$(De,Be),je[0]&16&&B(ee,"has-image",x[4]),x[5]?qe||(qe=At(),qe.c(),qe.m(i,Te)):qe&&(qe.d(1),qe=null),x[10]?Se?Se.p(x,je):(Se=Et(x),Se.c(),Se.m(i,le)):Se&&(Se.d(1),Se=null),x[13]?He?He.p(x,je):(He=Ot(x),He.c(),He.m(i,null)):He&&(He.d(1),He=null),x[6]?Ee?Ee.p(x,je):(Ee=Ut(x),Ee.c(),Ee.m(se.parentNode,se)):Ee&&(Ee.d(1),Ee=null),x[11]?Ue?Ue.p(x,je):(Ue=Jt(x),Ue.c(),Ue.m(Ae.parentNode,Ae)):Ue&&(Ue.d(1),Ue=null)},i:be,o:be,d(x){x&&(I(e),I(t),I(i),I(_e),I(se),I(Ae)),l[31](null),Pe.d(),qe&&qe.d(),Se&&Se.d(),He&&He.d(),Ee&&Ee.d(x),Ue&&Ue.d(x),ct=!1,Je(Y)}}}function dn(l,e,t){let i,r,o,c,d;Qe(l,Re,V=>t(42,o=V)),Qe(l,Xe,V=>t(43,c=V)),Qe(l,Ze,V=>t(28,d=V));let a="",u="",p="",v="",h=!1,k=!1,w="",m=!1,_=0,b=!1,C=!1,L="",j=0,D=!1;function E(){if(a.trim()&&u.trim()){let V=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"";if(!(c.length>0)||!V||V===""){const ce=`${Ye("en")} (default)`;Xe.addDictionary("default",ce,"en",!1),We.set("default"),V="default"}const ve=V||"default";Re.addCard(a.trim(),u.trim(),p.trim(),v.trim(),ve),t(1,a=""),t(2,u=""),t(3,p=""),t(4,v=""),t(5,h=!0),setTimeout(()=>t(5,h=!1),2e3)}}function S(){t(7,w=v),t(8,m=!1),t(6,k=!0)}function T(){w.trim()&&t(4,v=w.trim()),t(6,k=!1)}function y(){t(4,v=""),t(7,w=""),t(6,k=!1)}function N(){t(8,m=!0)}function H(){t(8,m=!1)}let A;function q(){A.click()}function W(V){const pe=V.target.files[0];if(!pe)return;const ve=new FileReader;ve.onload=ce=>{var ke,Le,G;try{const Z=JSON.parse(ce.target.result),K=pe.name.replace(/\.json$/i,""),we=Z.language||"en";Z.language&&Ze.set(Z.language);let ee;we==="en"?ee="default":(ee=K,Re.resetDictionary(ee));const Me=(((ke=o.learned)==null?void 0:ke.length)||0)+(((Le=o.unlearned)==null?void 0:Le.length)||0)+(((G=o.draft)==null?void 0:G.length)||0);if(Re.importCards(Z,ee),we==="en"){if(!c.find(te=>te.id==="default")){const te=`${Ye("en")} (default)`;Xe.addDictionary("default",te,"en",!0)}We.set("default")}else{const me=`${K} (${Ye(we)})`;Xe.addDictionary(K,me,we,!0),We.set(K)}setTimeout(()=>{var te,ne,Q;const me=(((te=o.learned)==null?void 0:te.length)||0)+(((ne=o.unlearned)==null?void 0:ne.length)||0)+(((Q=o.draft)==null?void 0:Q.length)||0);t(9,_=me-Me),t(10,b=!0),setTimeout(()=>t(10,b=!1),3e3)},100)}catch{alert("Ошибка чтения файла. Убедитесь, что это корректный JSON файл.")}},ve.readAsText(pe),V.target.value=""}function z(){t(0,L=""),t(11,C=!0)}function O(){t(11,C=!1),t(0,L="")}function J(){var pe;const V=L.split(`
`).map(ve=>ve.trim()).filter(ve=>ve.length>0);if(V.length>0){const ve=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"default";if(ve===""){const Le=`${Ye("en")} (default)`;Xe.addDictionary("default",Le,"en",!1),We.set("default")}const ce=ve,ke=((pe=o.draft)==null?void 0:pe.length)||0;Re.addDraftCards(V,ce),setTimeout(()=>{var G;const Le=((G=o.draft)==null?void 0:G.length)||0;t(12,j=Le-ke),t(13,D=!0),setTimeout(()=>t(13,D=!1),3e3)},100)}O()}function re(V){tt.call(this,l,V)}function oe(V){tt.call(this,l,V)}function he(V){jt[V?"unshift":"push"](()=>{A=V,t(14,A)})}function fe(){a=this.value,t(1,a)}function de(){u=this.value,t(2,u)}function ye(){p=this.value,t(3,p)}const ie=()=>t(6,k=!1);function X(){w=this.value,t(7,w)}const ae=()=>t(6,k=!1),ge=()=>t(6,k=!1),Ie=V=>V.key==="Escape"&&t(6,k=!1);function Ne(){L=this.value,t(0,L)}const Ce=V=>V.key==="Escape"&&O();return l.$$.update=()=>{l.$$.dirty[0]&268435456&&t(16,i=Ye(d)),l.$$.dirty[0]&1&&t(15,r=L.split(`
`).filter(V=>V.trim().length>0).length)},[L,a,u,p,v,h,k,w,m,_,b,C,j,D,A,r,i,E,S,T,y,N,H,q,W,z,O,J,d,re,oe,he,fe,de,ye,ie,X,ae,ge,Ie,Ne,Ce]}class pn extends wt{constructor(e){super(),kt(this,e,dn,un,at,{},null,[-1,-1])}}function hn(l){let e;return{c(){e=R("Добавьте карточки для начала")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function vn(l){let e;return{c(){e=R("Нет карточек с изображениями")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function mn(l){let e,t,i=l[2].length+"",r,o,c,d=l[0]&&l[2].length<l[3].length&&qt();return{c(){e=R("Осталось карточек: "),t=f("span"),r=R(i),o=g(),d&&d.c(),c=nt(),n(t,"class","count svelte-jt9nyi")},m(a,u){M(a,e,u),M(a,t,u),s(t,r),M(a,o,u),d&&d.m(a,u),M(a,c,u)},p(a,u){u[0]&4&&i!==(i=a[2].length+"")&&$(r,i),a[0]&&a[2].length<a[3].length?d||(d=qt(),d.c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null)},d(a){a&&(I(e),I(t),I(o),I(c)),d&&d.d(a)}}}function qt(l){let e;return{c(){e=f("span"),e.textContent="(с изображениями)",n(e,"class","filter-note svelte-jt9nyi")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Ft(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b,C,L,j,D,E,S,T,y,N,H,A=!l[4]&&Wt();function q(O,J){return O[4]?_n:gn}let W=q(l),z=W(l);return{c(){e=f("div"),t=f("div"),i=f("button"),i.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',r=g(),o=f("h2"),o.textContent="Выбери тип упражнения",c=g(),d=f("div"),a=f("button"),u=f("span"),p=g(),v=f("div"),v.innerHTML='<span class="option-title svelte-jt9nyi">Flash Cards</span> <span class="option-desc svelte-jt9nyi">Классические карточки с переворотом</span>',h=g(),k=f("button"),w=f("span"),m=g(),_=f("div"),_.innerHTML='<span class="option-title svelte-jt9nyi">Только изображения</span> <span class="option-desc svelte-jt9nyi">Введите слово по изображению</span>',b=g(),C=f("button"),L=f("span"),j=g(),D=f("div"),E=f("span"),S=R(`Перевод предложения
                `),A&&A.c(),T=g(),y=f("span"),z.c(),n(i,"class","modal-close-btn svelte-jt9nyi"),n(o,"class","modal-title svelte-jt9nyi"),n(u,"class","option-radio svelte-jt9nyi"),B(u,"checked",l[26]),n(v,"class","option-content svelte-jt9nyi"),n(a,"class","exercise-option svelte-jt9nyi"),B(a,"active",l[26]),n(w,"class","option-radio svelte-jt9nyi"),B(w,"checked",l[0]),n(_,"class","option-content svelte-jt9nyi"),n(k,"class","exercise-option svelte-jt9nyi"),B(k,"active",l[0]),n(L,"class","option-radio svelte-jt9nyi"),B(L,"checked",l[1]),B(L,"disabled",!l[4]),n(E,"class","option-title svelte-jt9nyi"),n(y,"class","option-desc svelte-jt9nyi"),n(D,"class","option-content svelte-jt9nyi"),n(C,"class","exercise-option svelte-jt9nyi"),B(C,"active",l[1]),B(C,"disabled",!l[4]),n(d,"class","settings-options svelte-jt9nyi"),n(t,"class","settings-modal svelte-jt9nyi"),n(t,"role","dialog"),n(t,"aria-modal","true"),n(e,"class","settings-overlay svelte-jt9nyi"),n(e,"role","button"),n(e,"tabindex","-1")},m(O,J){M(O,e,J),s(e,t),s(t,i),s(t,r),s(t,o),s(t,c),s(t,d),s(d,a),s(a,u),s(a,p),s(a,v),s(d,h),s(d,k),s(k,w),s(k,m),s(k,_),s(d,b),s(d,C),s(C,L),s(C,j),s(C,D),s(D,E),s(E,S),A&&A.m(E,null),s(D,T),s(D,y),z.m(y,null),N||(H=[U(i,"click",l[55]),U(a,"click",l[28]),U(k,"click",l[29]),U(C,"click",l[30]),U(t,"click",$e(l[53])),U(e,"click",l[56]),U(e,"keydown",l[57])],N=!0)},p(O,J){J[0]&67108864&&B(u,"checked",O[26]),J[0]&67108864&&B(a,"active",O[26]),J[0]&1&&B(w,"checked",O[0]),J[0]&1&&B(k,"active",O[0]),J[0]&2&&B(L,"checked",O[1]),J[0]&16&&B(L,"disabled",!O[4]),O[4]?A&&(A.d(1),A=null):A||(A=Wt(),A.c(),A.m(E,null)),W===(W=q(O))&&z?z.p(O,J):(z.d(1),z=W(O),z&&(z.c(),z.m(y,null))),J[0]&2&&B(C,"active",O[1]),J[0]&16&&B(C,"disabled",!O[4])},d(O){O&&I(e),A&&A.d(),z.d(),N=!1,Je(H)}}}function Wt(l){let e;return{c(){e=f("span"),e.textContent="AI",n(e,"class","ai-badge svelte-jt9nyi")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function _n(l){let e,t=l[27].toLowerCase()+"",i;return{c(){e=R("Переведите предложение на "),i=R(t)},m(r,o){M(r,e,o),M(r,i,o)},p(r,o){o[0]&134217728&&t!==(t=r[27].toLowerCase()+"")&&$(i,t)},d(r){r&&(I(e),I(i))}}}function gn(l){let e;return{c(){e=R("Требуется AI токен")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function yn(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="empty-icon svelte-jt9nyi"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line></svg></div> <h2 class="svelte-jt9nyi">Нет карточек для изучения</h2> <p class="svelte-jt9nyi">Добавьте новые слова или верните карточки из списков</p>',n(e,"class","empty-state svelte-jt9nyi")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function kn(l){let e;function t(o,c){return o[1]?Cn:o[0]?bn:wn}let i=t(l),r=i(l);return{c(){e=f("div"),r.c(),n(e,"class","card-area svelte-jt9nyi"),B(e,"translation-mode",l[1]&&l[12])},m(o,c){M(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),c[0]&4098&&B(e,"translation-mode",o[1]&&o[12])},d(o){o&&I(e),r.d()}}}function wn(l){let e=l[24].id,t,i,r,o,c,d,a,u=Gt(l);return{c(){u.c(),t=g(),i=f("div"),r=f("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',o=g(),c=f("button"),c.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(r,"class","action-btn unknown svelte-jt9nyi"),n(c,"class","action-btn known svelte-jt9nyi"),n(i,"class","action-buttons svelte-jt9nyi")},m(p,v){u.m(p,v),M(p,t,v),M(p,i,v),s(i,r),s(i,o),s(i,c),d||(a=[U(r,"click",l[36]),U(c,"click",l[35])],d=!0)},p(p,v){v[0]&16777216&&at(e,e=p[24].id)?(u.d(1),u=Gt(p),u.c(),u.m(t.parentNode,t)):u.p(p,v)},d(p){p&&(I(t),I(i)),u.d(p),d=!1,Je(a)}}}function bn(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b=l[24].imageUrl&&Kt(l),C=l[10]&&Xt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),b&&b.c(),r=g(),C&&C.c(),o=g(),c=f("div"),d=f("input"),u=g(),p=f("button"),v=P("svg"),h=P("polyline"),k=P("path"),n(i,"class","card-front has-image image-only svelte-jt9nyi"),n(t,"class","card-inner svelte-jt9nyi"),n(e,"class","card image-only-card svelte-jt9nyi"),B(e,"correct",l[10]==="correct"),B(e,"incorrect",l[10]==="incorrect"),n(d,"type","text"),n(d,"class","answer-input svelte-jt9nyi"),n(d,"placeholder","Введите слово..."),d.disabled=a=l[10]!==null,B(d,"correct",l[10]==="correct"),B(d,"incorrect",l[10]==="incorrect"),n(h,"points","9 11 12 14 22 4"),n(k,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(v,"width","24"),n(v,"height","24"),n(v,"viewBox","0 0 24 24"),n(v,"fill","none"),n(v,"stroke","currentColor"),n(v,"stroke-width","2"),n(p,"class","check-btn svelte-jt9nyi"),p.disabled=w=!l[9].trim()||l[10]!==null,n(c,"class","answer-input-area svelte-jt9nyi")},m(L,j){M(L,e,j),s(e,t),s(t,i),b&&b.m(i,null),s(i,r),C&&C.m(i,null),M(L,o,j),M(L,c,j),s(c,d),Oe(d,l[9]),s(c,u),s(c,p),s(p,v),s(v,h),s(v,k),m||(_=[U(d,"input",l[60]),U(d,"keydown",l[44]),U(p,"click",l[43])],m=!0)},p(L,j){L[24].imageUrl?b?b.p(L,j):(b=Kt(L),b.c(),b.m(i,r)):b&&(b.d(1),b=null),L[10]?C?C.p(L,j):(C=Xt(L),C.c(),C.m(i,null)):C&&(C.d(1),C=null),j[0]&1024&&B(e,"correct",L[10]==="correct"),j[0]&1024&&B(e,"incorrect",L[10]==="incorrect"),j[0]&1024&&a!==(a=L[10]!==null)&&(d.disabled=a),j[0]&512&&d.value!==L[9]&&Oe(d,L[9]),j[0]&1024&&B(d,"correct",L[10]==="correct"),j[0]&1024&&B(d,"incorrect",L[10]==="incorrect"),j[0]&1536&&w!==(w=!L[9].trim()||L[10]!==null)&&(p.disabled=w)},d(L){L&&(I(e),I(o),I(c)),b&&b.d(),C&&C.d(),m=!1,Je(_)}}}function Cn(l){let e,t,i,r,o,c,d,a,u=l[24].translation+"",p,v,h,k,w,m,_,b,C,L,j,D=l[24].word+"",E,S,T,y=l[14]&&l[14]!=="grammar_error"&&Yt(l),N=l[19]&&Qt(),H=l[24].imageUrl&&Zt(l),A=l[24].association&&xt(l);function q(O,J){return O[18]?Dn:O[12]?Mn:In}let W=q(l),z=W(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("div"),o=f("div"),c=f("span"),c.textContent="Перевод",d=g(),a=f("h2"),p=R(u),v=g(),y&&y.c(),h=g(),N&&N.c(),k=g(),w=f("div"),H&&H.c(),m=g(),_=f("div"),b=f("span"),C=R(l[27]),L=g(),j=f("h2"),E=R(D),S=g(),A&&A.c(),T=g(),z.c(),n(c,"class","card-label svelte-jt9nyi"),n(a,"class","card-word svelte-jt9nyi"),n(o,"class","card-text-content svelte-jt9nyi"),n(r,"class","card-front translation-front svelte-jt9nyi"),n(b,"class","card-label svelte-jt9nyi"),n(j,"class","card-word svelte-jt9nyi"),n(_,"class","card-text-content svelte-jt9nyi"),n(w,"class","card-back translation-back svelte-jt9nyi"),B(w,"has-image",l[24].imageUrl),n(i,"class","card-inner svelte-jt9nyi"),n(t,"class","card translation-card svelte-jt9nyi"),B(t,"correct",l[14]==="correct"),B(t,"incorrect",l[14]==="incorrect"),B(t,"flipped",l[18]),n(e,"class","translation-exercise-layout svelte-jt9nyi"),B(e,"with-input",l[12]),B(e,"card-flipped",l[18])},m(O,J){M(O,e,J),s(e,t),s(t,i),s(i,r),s(r,o),s(o,c),s(o,d),s(o,a),s(a,p),s(r,v),y&&y.m(r,null),s(r,h),N&&N.m(r,null),s(i,k),s(i,w),H&&H.m(w,null),s(w,m),s(w,_),s(_,b),s(b,C),s(_,L),s(_,j),s(j,E),s(_,S),A&&A.m(_,null),s(e,T),z.m(e,null)},p(O,J){J[0]&16777216&&u!==(u=O[24].translation+"")&&$(p,u),O[14]&&O[14]!=="grammar_error"?y?y.p(O,J):(y=Yt(O),y.c(),y.m(r,h)):y&&(y.d(1),y=null),O[19]?N||(N=Qt(),N.c(),N.m(r,null)):N&&(N.d(1),N=null),O[24].imageUrl?H?H.p(O,J):(H=Zt(O),H.c(),H.m(w,m)):H&&(H.d(1),H=null),J[0]&134217728&&$(C,O[27]),J[0]&16777216&&D!==(D=O[24].word+"")&&$(E,D),O[24].association?A?A.p(O,J):(A=xt(O),A.c(),A.m(_,null)):A&&(A.d(1),A=null),J[0]&16777216&&B(w,"has-image",O[24].imageUrl),J[0]&16384&&B(t,"correct",O[14]==="correct"),J[0]&16384&&B(t,"incorrect",O[14]==="incorrect"),J[0]&262144&&B(t,"flipped",O[18]),W===(W=q(O))&&z?z.p(O,J):(z.d(1),z=W(O),z&&(z.c(),z.m(e,null))),J[0]&4096&&B(e,"with-input",O[12]),J[0]&262144&&B(e,"card-flipped",O[18])},d(O){O&&I(e),y&&y.d(),N&&N.d(),H&&H.d(),A&&A.d(),z.d()}}}function zt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-jt9nyi")},m(i,r){M(i,e,r)},p(i,r){r[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&I(e)}}}function Vt(l){let e,t,i,r,o=l[24].association+"",c;return{c(){e=f("div"),t=f("span"),t.textContent="Ассоциация:",i=g(),r=f("p"),c=R(o),n(t,"class","association-label svelte-jt9nyi"),n(r,"class","svelte-jt9nyi"),n(e,"class","association svelte-jt9nyi")},m(d,a){M(d,e,a),s(e,t),s(e,i),s(e,r),s(r,c)},p(d,a){a[0]&16777216&&o!==(o=d[24].association+"")&&$(c,o)},d(d){d&&I(e)}}}function Gt(l){let e,t,i,r,o,c,d,a,u=l[24].word+"",p,v,h,k,w,m,_,b,C,L,j=l[24].translation+"",D,E,S,T,y=l[24].imageUrl&&zt(l),N=l[24].association&&Vt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("div"),o=f("span"),c=R(l[27]),d=g(),a=f("h2"),p=R(u),v=g(),h=f("p"),h.textContent="Нажмите, чтобы увидеть перевод",k=g(),w=f("div"),y&&y.c(),m=g(),_=f("div"),b=f("span"),b.textContent="Перевод",C=g(),L=f("h2"),D=R(j),E=g(),N&&N.c(),n(o,"class","card-label svelte-jt9nyi"),n(a,"class","card-word svelte-jt9nyi"),n(h,"class","card-hint svelte-jt9nyi"),n(r,"class","card-text-content svelte-jt9nyi"),n(i,"class","card-front svelte-jt9nyi"),n(b,"class","card-label svelte-jt9nyi"),n(L,"class","card-word svelte-jt9nyi"),n(_,"class","card-text-content svelte-jt9nyi"),n(w,"class","card-back svelte-jt9nyi"),B(w,"has-image",l[24].imageUrl),n(t,"class","card-inner svelte-jt9nyi"),n(e,"class","card svelte-jt9nyi"),n(e,"style",l[42]()),n(e,"role","button"),n(e,"tabindex","0"),B(e,"flipped",l[6]),B(e,"dragging",l[7]),B(e,"swipe-left",l[8]==="left"),B(e,"swipe-right",l[8]==="right")},m(H,A){M(H,e,A),s(e,t),s(t,i),s(i,r),s(r,o),s(o,c),s(r,d),s(r,a),s(a,p),s(r,v),s(r,h),s(t,k),s(t,w),y&&y.m(w,null),s(w,m),s(w,_),s(_,b),s(_,C),s(_,L),s(L,D),s(_,E),N&&N.m(_,null),S||(T=[U(e,"mousedown",l[32]),U(e,"mousemove",l[33]),U(e,"mouseup",l[34]),U(e,"mouseleave",l[34]),U(e,"touchstart",l[32]),U(e,"touchmove",l[33]),U(e,"touchend",l[34],{passive:!0}),U(e,"click",l[41]),U(e,"keydown",l[61])],S=!0)},p(H,A){A[0]&134217728&&$(c,H[27]),A[0]&16777216&&u!==(u=H[24].word+"")&&$(p,u),H[24].imageUrl?y?y.p(H,A):(y=zt(H),y.c(),y.m(w,m)):y&&(y.d(1),y=null),A[0]&16777216&&j!==(j=H[24].translation+"")&&$(D,j),H[24].association?N?N.p(H,A):(N=Vt(H),N.c(),N.m(_,null)):N&&(N.d(1),N=null),A[0]&16777216&&B(w,"has-image",H[24].imageUrl),A[0]&64&&B(e,"flipped",H[6]),A[0]&128&&B(e,"dragging",H[7]),A[0]&256&&B(e,"swipe-left",H[8]==="left"),A[0]&256&&B(e,"swipe-right",H[8]==="right")},d(H){H&&I(e),y&&y.d(),N&&N.d(),S=!1,Je(T)}}}function Kt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image-full svelte-jt9nyi")},m(i,r){M(i,e,r)},p(i,r){r[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&I(e)}}}function Xt(l){let e;function t(o,c){return o[10]==="correct"?jn:Sn}let i=t(l),r=i(l);return{c(){e=f("div"),r.c(),n(e,"class","answer-overlay svelte-jt9nyi"),B(e,"correct",l[10]==="correct"),B(e,"incorrect",l[10]==="incorrect")},m(o,c){M(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),c[0]&1024&&B(e,"correct",o[10]==="correct"),c[0]&1024&&B(e,"incorrect",o[10]==="incorrect")},d(o){o&&I(e),r.d()}}}function Sn(l){let e,t,i,r,o,c=l[24].word+"",d;return{c(){e=P("svg"),t=P("line"),i=P("line"),r=g(),o=f("span"),d=R(c),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-jt9nyi"),n(o,"class","svelte-jt9nyi")},m(a,u){M(a,e,u),s(e,t),s(e,i),M(a,r,u),M(a,o,u),s(o,d)},p(a,u){u[0]&16777216&&c!==(c=a[24].word+"")&&$(d,c)},d(a){a&&(I(e),I(r),I(o))}}}function jn(l){let e,t,i,r;return{c(){e=P("svg"),t=P("polyline"),i=g(),r=f("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-jt9nyi"),n(r,"class","svelte-jt9nyi")},m(o,c){M(o,e,c),s(e,t),M(o,i,c),M(o,r,c)},p:be,d(o){o&&(I(e),I(i),I(r))}}}function Yt(l){let e;function t(o,c){if(o[14]==="correct")return Tn;if(o[14]==="word_error")return Ln}let i=t(l),r=i&&i(l);return{c(){e=f("div"),r&&r.c(),n(e,"class","answer-overlay svelte-jt9nyi"),B(e,"correct",l[14]==="correct"),B(e,"incorrect",l[14]==="word_error")},m(o,c){M(o,e,c),r&&r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r&&r.d(1),r=i&&i(o),r&&(r.c(),r.m(e,null))),c[0]&16384&&B(e,"correct",o[14]==="correct"),c[0]&16384&&B(e,"incorrect",o[14]==="word_error")},d(o){o&&I(e),r&&r.d()}}}function Ln(l){let e,t,i,r,o,c,d,a,u,p,v;return{c(){e=P("svg"),t=P("line"),i=P("line"),r=g(),o=f("div"),c=f("span"),c.textContent="Ошибка в слове",d=g(),a=f("span"),u=R("Ожидалось: "),p=f("strong"),v=R(l[20]),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-jt9nyi"),n(c,"class","error-title svelte-jt9nyi"),n(p,"class","svelte-jt9nyi"),n(a,"class","expected-word svelte-jt9nyi"),n(o,"class","error-details svelte-jt9nyi")},m(h,k){M(h,e,k),s(e,t),s(e,i),M(h,r,k),M(h,o,k),s(o,c),s(o,d),s(o,a),s(a,u),s(a,p),s(p,v)},p(h,k){k[0]&1048576&&$(v,h[20])},d(h){h&&(I(e),I(r),I(o))}}}function Tn(l){let e,t,i,r;return{c(){e=P("svg"),t=P("polyline"),i=g(),r=f("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-jt9nyi"),n(r,"class","svelte-jt9nyi")},m(o,c){M(o,e,c),s(e,t),M(o,i,c),M(o,r,c)},p:be,d(o){o&&(I(e),I(i),I(r))}}}function Qt(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="checking-spinner svelte-jt9nyi"></div> <span class="svelte-jt9nyi">Проверка...</span>',n(e,"class","answer-overlay checking svelte-jt9nyi")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Zt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-jt9nyi")},m(i,r){M(i,e,r)},p(i,r){r[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&I(e)}}}function xt(l){let e,t,i,r,o=l[24].association+"",c;return{c(){e=f("div"),t=f("span"),t.textContent="Ассоциация:",i=g(),r=f("p"),c=R(o),n(t,"class","association-label svelte-jt9nyi"),n(r,"class","svelte-jt9nyi"),n(e,"class","association svelte-jt9nyi")},m(d,a){M(d,e,a),s(e,t),s(e,i),s(e,r),s(r,c)},p(d,a){a[0]&16777216&&o!==(o=d[24].association+"")&&$(c,o)},d(d){d&&I(e)}}}function In(l){let e,t,i,r,o,c;return{c(){e=f("div"),t=f("button"),t.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',i=g(),r=f("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(t,"class","action-btn unknown svelte-jt9nyi"),n(r,"class","action-btn known svelte-jt9nyi"),n(e,"class","action-buttons svelte-jt9nyi")},m(d,a){M(d,e,a),s(e,t),s(e,i),s(e,r),o||(c=[U(t,"click",l[37]),U(r,"click",l[35])],o=!0)},p:be,d(d){d&&I(e),o=!1,Je(c)}}}function Mn(l){let e,t,i,r,o=l[27].toLowerCase()+"",c,d,a,u,p,v,h,k,w,m;function _(j,D){return j[16]?An:j[17]?Bn:Nn}let b=_(l),C=b(l),L=!l[16]&&!l[17]&&$t(l);return{c(){e=f("div"),t=f("div"),i=f("span"),r=R("Переведите на "),c=R(o),d=R(":"),a=g(),C.c(),u=g(),L&&L.c(),p=g(),v=f("button"),h=R("Пропустить"),n(i,"class","sentence-label svelte-jt9nyi"),n(t,"class","sentence-prompt svelte-jt9nyi"),B(t,"loading",l[16]),B(t,"error",l[17]),n(v,"class","skip-sentence-btn svelte-jt9nyi"),v.disabled=k=l[14]!==null||l[16]||l[19],n(e,"class","sentence-exercise svelte-jt9nyi")},m(j,D){M(j,e,D),s(e,t),s(t,i),s(i,r),s(i,c),s(i,d),s(t,a),C.m(t,null),s(e,u),L&&L.m(e,null),s(e,p),s(e,v),s(v,h),w||(m=U(v,"click",l[37]),w=!0)},p(j,D){D[0]&134217728&&o!==(o=j[27].toLowerCase()+"")&&$(c,o),b===(b=_(j))&&C?C.p(j,D):(C.d(1),C=b(j),C&&(C.c(),C.m(t,null))),D[0]&65536&&B(t,"loading",j[16]),D[0]&131072&&B(t,"error",j[17]),!j[16]&&!j[17]?L?L.p(j,D):(L=$t(j),L.c(),L.m(e,p)):L&&(L.d(1),L=null),D[0]&606208&&k!==(k=j[14]!==null||j[16]||j[19])&&(v.disabled=k)},d(j){j&&I(e),C.d(),L&&L.d(),w=!1,m()}}}function Dn(l){let e,t,i,r;return{c(){e=f("div"),t=f("button"),t.textContent="Продолжить",n(t,"class","continue-btn svelte-jt9nyi"),n(e,"class","card-back-actions svelte-jt9nyi")},m(o,c){M(o,e,c),s(e,t),i||(r=U(t,"click",l[37]),i=!0)},p:be,d(o){o&&I(e),i=!1,r()}}}function Nn(l){let e,t;return{c(){e=f("p"),t=R(l[15]),n(e,"class","sentence-text svelte-jt9nyi")},m(i,r){M(i,e,r),s(e,t)},p(i,r){r[0]&32768&&$(t,i[15])},d(i){i&&I(e)}}}function Bn(l){let e,t,i,r,o,c;return{c(){e=f("p"),t=R(l[17]),i=g(),r=f("button"),r.textContent="Попробовать снова",n(e,"class","sentence-error svelte-jt9nyi"),n(r,"class","retry-btn svelte-jt9nyi")},m(d,a){M(d,e,a),s(e,t),M(d,i,a),M(d,r,a),o||(c=U(r,"click",l[58]),o=!0)},p(d,a){a[0]&131072&&$(t,d[17])},d(d){d&&(I(e),I(i),I(r)),o=!1,c()}}}function An(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="loading-spinner svelte-jt9nyi"></div> <span>Генерация предложения...</span>',n(e,"class","sentence-loading svelte-jt9nyi")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function $t(l){let e;function t(o,c){return o[14]==="grammar_error"?On:En}let i=t(l),r=i(l);return{c(){r.c(),e=nt()},m(o,c){r.m(o,c),M(o,e,c)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&I(e),r.d(o)}}}function En(l){let e,t,i,r,o,c,d,a,u,p,v;return{c(){e=f("div"),t=f("input"),r=g(),o=f("button"),c=P("svg"),d=P("polyline"),a=P("path"),n(t,"type","text"),n(t,"class","answer-input sentence-input svelte-jt9nyi"),n(t,"placeholder","Введите перевод..."),t.disabled=i=l[14]!==null||l[19],B(t,"correct",l[14]==="correct"),B(t,"incorrect",l[14]==="incorrect"),n(d,"points","9 11 12 14 22 4"),n(a,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(c,"width","24"),n(c,"height","24"),n(c,"viewBox","0 0 24 24"),n(c,"fill","none"),n(c,"stroke","currentColor"),n(c,"stroke-width","2"),n(o,"class","check-btn svelte-jt9nyi"),o.disabled=u=!l[13].trim()||l[14]!==null||l[19],n(e,"class","answer-input-area svelte-jt9nyi")},m(h,k){M(h,e,k),s(e,t),Oe(t,l[13]),s(e,r),s(e,o),s(o,c),s(c,d),s(c,a),p||(v=[U(t,"input",l[59]),U(t,"keydown",l[39]),U(o,"click",l[38])],p=!0)},p(h,k){k[0]&540672&&i!==(i=h[14]!==null||h[19])&&(t.disabled=i),k[0]&8192&&t.value!==h[13]&&Oe(t,h[13]),k[0]&16384&&B(t,"correct",h[14]==="correct"),k[0]&16384&&B(t,"incorrect",h[14]==="incorrect"),k[0]&548864&&u!==(u=!h[13].trim()||h[14]!==null||h[19])&&(o.disabled=u)},d(h){h&&I(e),p=!1,Je(v)}}}function On(l){let e,t,i,r,o,c,d,a,u,p,v,h;function k(_,b){return _[21]?Hn:Un}let w=k(l),m=w(l);return{c(){e=f("div"),t=f("div"),m.c(),i=g(),r=f("div"),o=f("span"),o.textContent="Правильный вариант:",c=g(),d=f("p"),a=R(l[22]),u=g(),p=f("button"),p.textContent="Продолжить",n(t,"class","user-sentence-error svelte-jt9nyi"),n(o,"class","correction-label svelte-jt9nyi"),n(d,"class","correction-text svelte-jt9nyi"),n(r,"class","correction-block svelte-jt9nyi"),n(p,"class","continue-btn svelte-jt9nyi"),n(e,"class","grammar-error-block svelte-jt9nyi")},m(_,b){M(_,e,b),s(e,t),m.m(t,null),s(e,i),s(e,r),s(r,o),s(r,c),s(r,d),s(d,a),s(e,u),s(e,p),v||(h=U(p,"click",l[40]),v=!0)},p(_,b){w===(w=k(_))&&m?m.p(_,b):(m.d(1),m=w(_),m&&(m.c(),m.m(t,null))),b[0]&4194304&&$(a,_[22])},d(_){_&&I(e),m.d(),v=!1,h()}}}function Un(l){let e,t;return{c(){e=f("span"),t=R(l[23]),n(e,"class","error-text svelte-jt9nyi")},m(i,r){M(i,e,r),s(e,t)},p(i,r){r[0]&8388608&&$(t,i[23])},d(i){i&&I(e)}}}function Hn(l){let e,t=el(l[23],l[21])+"",i;return{c(){e=new ql(!1),i=nt(),e.a=i},m(r,o){e.m(t,r,o),M(r,i,o)},p(r,o){o[0]&10485760&&t!==(t=el(r[23],r[21])+"")&&e.p(t)},d(r){r&&(I(i),e.d())}}}function Rn(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b,C,L=l[5].learned.length+"",j,D,E,S,T,y,N,H,A,q,W=l[5].unlearned.length+"",z,O,J;function re(X,ae){return X[25]?mn:X[0]?vn:hn}let oe=re(l),he=oe(l),fe=l[11]&&Ft(l);function de(X,ae){return X[25]&&X[24]?kn:yn}let ye=de(l),ie=ye(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h1"),r.textContent="Изучение",o=g(),c=f("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-jt9nyi"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',d=g(),a=f("p"),he.c(),u=g(),fe&&fe.c(),p=g(),ie.c(),v=g(),h=f("div"),k=f("div"),w=P("svg"),m=P("polyline"),_=g(),b=f("span"),C=R("Изучено: "),j=R(L),D=g(),E=f("div"),S=P("svg"),T=P("circle"),y=P("line"),N=P("line"),H=g(),A=f("span"),q=R("На повторение: "),z=R(W),n(r,"class","svelte-jt9nyi"),n(c,"class","settings-btn svelte-jt9nyi"),B(c,"active",l[11]),n(i,"class","header-top svelte-jt9nyi"),n(a,"class","subtitle svelte-jt9nyi"),n(t,"class","header svelte-jt9nyi"),n(m,"points","20 6 9 17 4 12"),n(w,"width","20"),n(w,"height","20"),n(w,"viewBox","0 0 24 24"),n(w,"fill","none"),n(w,"stroke","currentColor"),n(w,"stroke-width","2"),n(k,"class","stat-item learned svelte-jt9nyi"),n(T,"cx","12"),n(T,"cy","12"),n(T,"r","10"),n(y,"x1","12"),n(y,"y1","8"),n(y,"x2","12"),n(y,"y2","12"),n(N,"x1","12"),n(N,"y1","16"),n(N,"x2","12.01"),n(N,"y2","16"),n(S,"width","20"),n(S,"height","20"),n(S,"viewBox","0 0 24 24"),n(S,"fill","none"),n(S,"stroke","currentColor"),n(S,"stroke-width","2"),n(E,"class","stat-item unlearned svelte-jt9nyi"),n(h,"class","stats svelte-jt9nyi"),n(e,"class","flashcards-container svelte-jt9nyi")},m(X,ae){M(X,e,ae),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),he.m(a,null),s(e,u),fe&&fe.m(e,null),s(e,p),ie.m(e,null),s(e,v),s(e,h),s(h,k),s(k,w),s(w,m),s(k,_),s(k,b),s(b,C),s(b,j),s(h,D),s(h,E),s(E,S),s(S,T),s(S,y),s(S,N),s(E,H),s(E,A),s(A,q),s(A,z),O||(J=U(c,"click",l[54]),O=!0)},p(X,ae){ae[0]&2048&&B(c,"active",X[11]),oe===(oe=re(X))&&he?he.p(X,ae):(he.d(1),he=oe(X),he&&(he.c(),he.m(a,null))),X[11]?fe?fe.p(X,ae):(fe=Ft(X),fe.c(),fe.m(e,p)):fe&&(fe.d(1),fe=null),ye===(ye=de(X))&&ie?ie.p(X,ae):(ie.d(1),ie=ye(X),ie&&(ie.c(),ie.m(e,v))),ae[0]&32&&L!==(L=X[5].learned.length+"")&&$(j,L),ae[0]&32&&W!==(W=X[5].unlearned.length+"")&&$(z,W)},i:be,o:be,d(X){X&&I(e),he.d(),fe&&fe.d(),ie.d(),O=!1,J()}}}function Jn(l){const e=[...l];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function el(l,e){if(!e)return l;const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${t})`,"gi");return l.replace(i,'<span class="highlighted-error">$1</span>')}function Pn(l,e,t){let i,r,o,c,d,a,u,p,v,h,k,w;Qe(l,Re,Y=>t(5,h=Y)),Qe(l,We,Y=>t(51,k=Y)),Qe(l,Ze,Y=>t(52,w=Y));let m=0,_=!1,b=0,C=0,L=!1,j=null,D=!1,E=!1,S="",T=null,y=!1;function N(){t(0,D=!1),t(1,E=!1),K()}function H(){D?t(0,D=!1):(t(0,D=!0),t(1,E=!1)),K()}function A(){c&&(E?t(1,E=!1):(t(1,E=!0),t(0,D=!1)),K())}let q=!1,W="",z=null,O="",J=!1,re=null,oe=!1,he=!1,fe=null,de=null,ye=null,ie=null,X="";function ae(){t(46,X=localStorage.getItem("ai_token")||"")}function ge(){ae()}function Ie(Y){Y.key==="ai_token"&&ae()}let Ne;Dl(()=>{ae(),window.addEventListener("focus",ge),window.addEventListener("storage",Ie),Ne=setInterval(()=>{y&&ae()},500)}),Fl(()=>{window.removeEventListener("focus",ge),window.removeEventListener("storage",Ie),Ne&&clearInterval(Ne)});async function Ce(Y,Fe){var Pe,qe,Se,He;t(16,J=!0),t(17,re=null),t(15,O="");const Ke=`You are a ${r} language learning assistant. Student level: A1-A2 (beginner).

Task: Create ONE short and simple sentence in RUSSIAN that will need to be translated into ${r}.

${r} word: "${Y}"
Russian translation: "${Fe}"

Requirements:
- The sentence must be in Russian
- The sentence must contain the word "${Fe}" (or its form)
- Length: 3-10 words
- Simple A1-A2 level grammar
- Use simple tenses (Present Simple, Past Simple, Future Simple, Present Continuous, Present Perfect)
- Avoid complex constructions

Reply ONLY with the sentence in Russian, without quotes or explanations.`;try{const Ee=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Ke}],max_tokens:100,temperature:.7})});if(!Ee.ok){const x=await Ee.json().catch(()=>({}));throw new Error(((Pe=x.error)==null?void 0:Pe.message)||`Ошибка API: ${Ee.status}`)}const Ue=await Ee.json();if(t(15,O=((He=(Se=(qe=Ue.choices[0])==null?void 0:qe.message)==null?void 0:Se.content)==null?void 0:He.trim())||""),!O)throw new Error("Пустой ответ от AI");if(Ue.usage){const x=Ue.usage.prompt_tokens/1e6*.15,je=Ue.usage.completion_tokens/1e6*.6,ft=x+je,Ct=parseFloat(localStorage.getItem("ai_total_cost")||"0")+ft;localStorage.setItem("ai_total_cost",Ct.toString())}}catch(Ee){console.error("Ошибка генерации:",Ee),t(17,re=Ee.message),t(15,O="")}finally{t(16,J=!1)}}let V=[],pe=new Set,ve=d;function ce(Y){D||(t(7,L=!0),b=Y.type==="touchstart"?Y.touches[0].clientX:Y.clientX,t(8,j=null))}function ke(Y){if(!L||D)return;C=(Y.type==="touchmove"?Y.touches[0].clientX:Y.clientX)-b,C>50?t(8,j="right"):C<-50?t(8,j="left"):t(8,j=null)}function Le(){!L||D||(t(7,L=!1),Math.abs(C)>100&&p&&(C>0?G():Z()),C=0,t(8,j=null))}async function G(){if(p){if(E&&!q){t(12,q=!0),t(13,W=""),t(14,z=null),await Ce(p.word,p.translation);return}Re.markAsLearned(p.id),K(),m>=u.length-1&&t(45,m=Math.max(0,u.length-2))}}function Z(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Re.markAsUnlearned(Y.id),K(),m>=u.length-1&&t(45,m=0)}}function K(){t(6,_=!1),t(9,S=""),t(10,T=null),t(12,q=!1),t(13,W=""),t(14,z=null),t(15,O=""),t(17,re=null),t(19,he=!1),t(20,fe=null),t(21,de=null),t(22,ye=null),t(23,ie=null),t(18,oe=!1)}function we(){if(p){if(E&&!oe){t(18,oe=!0);return}const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Re.markAsUnlearned(Y.id),K(),m>=u.length-1&&t(45,m=0)}}async function ee(Y,Fe,Ke){var qe,Se,He,Ee;const Pe=`You are a ${r} language teacher. Check the translation of a sentence from Russian to ${r}.

Russian sentence: "${Fe}"
Student's translation: "${Y}"
Key word that must be used: "${Ke}"

Task: check the grammar of the sentence and its correspondence to the translation.
- DO NOT check punctuation (commas, periods)
- Check only grammatical errors (tenses, articles, word order, word forms)
- Check that the meaning matches the translation

Response format:
- If the sentence is grammatically correct and conveys the meaning — reply only: 0
- If there are errors — reply in this format:
ERROR: [part of the sentence with the error]
CORRECTION: [correct version of the entire sentence]

Reply ONLY in the specified format, without additional explanations.`;try{const Ue=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Pe}],max_tokens:200,temperature:.3})});if(!Ue.ok){const ft=await Ue.json().catch(()=>({}));throw new Error(((qe=ft.error)==null?void 0:qe.message)||`Ошибка API: ${Ue.status}`)}const x=await Ue.json(),je=((Ee=(He=(Se=x.choices[0])==null?void 0:Se.message)==null?void 0:He.content)==null?void 0:Ee.trim())||"";if(x.usage){const ft=x.usage.prompt_tokens/1e6*.15,Dt=x.usage.completion_tokens/1e6*.6,Ct=ft+Dt,Bl=parseFloat(localStorage.getItem("ai_total_cost")||"0");localStorage.setItem("ai_total_cost",(Bl+Ct).toString())}return je}catch(Ue){throw console.error("Ошибка проверки грамматики:",Ue),Ue}}async function Me(){if(!p||!W.trim())return;const Y=W.trim(),Fe=p.word.toLowerCase(),Ke=Y.toLowerCase();if(!new RegExp(`\\b${Fe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\w*\\b`,"i").test(Ke)){t(14,z="word_error"),t(20,fe=p.word),t(21,de=null),t(22,ye=null),setTimeout(()=>{const Se=p;t(47,V=[...V.filter(He=>He.id!==Se.id),Se]),Re.markAsUnlearned(Se.id),m>=u.length-1&&t(45,m=0),K()},3e3);return}t(19,he=!0),t(20,fe=null),t(21,de=null),t(22,ye=null);try{const Se=await ee(Y,O,p.word);if(Se==="0")t(14,z="correct"),setTimeout(()=>{Re.markAsLearned(p.id),m>=u.length-1&&t(45,m=Math.max(0,u.length-2)),K()},1500);else{t(14,z="grammar_error"),t(23,ie=Y);const He=Se.match(/ERROR:\s*(.+)/i),Ee=Se.match(/CORRECTION:\s*(.+)/i);t(21,de=He?He[1].trim():null),t(22,ye=Ee?Ee[1].trim():Se)}}catch{t(14,z="correct"),setTimeout(()=>{Re.markAsLearned(p.id),m>=u.length-1&&t(45,m=Math.max(0,u.length-2)),K()},1500)}finally{t(19,he=!1)}}function me(Y){Y.key==="Enter"&&q&&!he&&z!=="grammar_error"&&Me()}function te(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Re.markAsUnlearned(Y.id),m>=u.length-1&&t(45,m=0),K()}}function ne(){D||t(6,_=!_)}function Q(){if(!L)return"";const Y=C*.05;return`transform: translateX(${C}px) rotate(${Y}deg);`}function ue(){if(!p||!S.trim())return;const Y=S.trim().toLowerCase()===p.word.toLowerCase();t(10,T=Y?"correct":"incorrect"),setTimeout(()=>{Y?G():Z()},1e3)}function F(Y){Y.key==="Enter"&&D&&ue()}function Be(Y){tt.call(this,l,Y)}const De=()=>t(11,y=!y),Ge=()=>t(11,y=!1),Te=()=>t(11,y=!1),le=Y=>Y.key==="Escape"&&t(11,y=!1),_e=()=>Ce(p.word,p.translation);function se(){W=this.value,t(13,W)}function Ae(){S=this.value,t(9,S)}const ct=Y=>Y.key==="Enter"&&ne();return l.$$.update=()=>{if(l.$$.dirty[1]&2097152&&t(27,i=Ye(w)),l.$$.dirty[1]&2097152&&(r=nn(w)),l.$$.dirty[1]&32768&&t(4,c=X&&X.length>0),l.$$.dirty[0]&18&&!c&&E&&t(1,E=!1),l.$$.dirty[0]&3&&t(26,o=!D&&!E),l.$$.dirty[1]&1048576&&t(50,d=k||"default"),l.$$.dirty[0]&32|l.$$.dirty[1]&524288&&t(3,a=h.unlearned.filter(Y=>(Y.dictionaryId||"default")===d)),l.$$.dirty[0]&8|l.$$.dirty[1]&983040){const Y=new Set(a.map(Pe=>Pe.id)),Fe=ve!==d,Ke=Y.size!==pe.size||![...Y].every(Pe=>pe.has(Pe));Fe||Ke?(t(47,V=Jn(a)),t(48,pe=Y),t(45,m=0),t(49,ve=d)):t(47,V=V.map(Pe=>a.find(Se=>Se.id===Pe.id)||Pe))}l.$$.dirty[0]&1|l.$$.dirty[1]&65536&&t(2,u=D?V.filter(Y=>Y.imageUrl):V),l.$$.dirty[0]&4|l.$$.dirty[1]&16384&&t(24,p=u[m]),l.$$.dirty[0]&4&&t(25,v=u.length>0)},[D,E,u,a,c,h,_,L,j,S,T,y,q,W,z,O,J,re,oe,he,fe,de,ye,ie,p,v,o,i,N,H,A,Ce,ce,ke,Le,G,Z,we,Me,me,te,ne,Q,ue,F,m,X,V,pe,ve,d,k,w,Be,De,Ge,Te,le,_e,se,Ae,ct]}class qn extends wt{constructor(e){super(),kt(this,e,Pn,Rn,at,{},null,[-1,-1,-1])}}function tl(l,e,t){const i=l.slice();return i[61]=e[t],i}function ll(l){let e,t,i,r,o=l[7].length+"",c,d,a,u,p,v=l[8].length+"",h,k,w,m,_,b=l[6].length+"",C,L,j;return{c(){e=f("div"),t=f("button"),i=R(`На проработку
          `),r=f("span"),c=R(o),d=g(),a=f("button"),u=R(`На повторение
          `),p=f("span"),h=R(v),k=g(),w=f("button"),m=R(`Изученные
          `),_=f("span"),C=R(b),n(r,"class","badge svelte-1rdpxoy"),n(t,"class","dropdown-item svelte-1rdpxoy"),B(t,"active",l[0]==="draft"),n(p,"class","badge svelte-1rdpxoy"),n(a,"class","dropdown-item svelte-1rdpxoy"),B(a,"active",l[0]==="unlearned"),n(_,"class","badge svelte-1rdpxoy"),n(w,"class","dropdown-item svelte-1rdpxoy"),B(w,"active",l[0]==="learned"),n(e,"class","tab-dropdown-menu svelte-1rdpxoy")},m(D,E){M(D,e,E),s(e,t),s(t,i),s(t,r),s(r,c),s(e,d),s(e,a),s(a,u),s(a,p),s(p,h),s(e,k),s(e,w),s(w,m),s(w,_),s(_,C),L||(j=[U(t,"click",l[39]),U(a,"click",l[40]),U(w,"click",l[41])],L=!0)},p(D,E){E[0]&128&&o!==(o=D[7].length+"")&&$(c,o),E[0]&1&&B(t,"active",D[0]==="draft"),E[0]&256&&v!==(v=D[8].length+"")&&$(h,v),E[0]&1&&B(a,"active",D[0]==="unlearned"),E[0]&64&&b!==(b=D[6].length+"")&&$(C,b),E[0]&1&&B(w,"active",D[0]==="learned")},d(D){D&&I(e),L=!1,Je(j)}}}function nl(l){let e,t,i;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","search-clear svelte-1rdpxoy")},m(r,o){M(r,e,o),t||(i=U(e,"click",l[46]),t=!0)},p:be,d(r){r&&I(e),t=!1,i()}}}function il(l){let e,t,i,r;return{c(){e=f("div"),t=f("button"),t.innerHTML=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
        Отправить все на повторение`,n(t,"class","bulk-action-btn svelte-1rdpxoy"),n(e,"class","bulk-actions svelte-1rdpxoy")},m(o,c){M(o,e,c),s(e,t),i||(r=U(t,"click",l[26]),i=!0)},p:be,d(o){o&&I(e),i=!1,r()}}}function Fn(l){let e,t,i,r,o,c;function d(_,b){return _[0]==="learned"?Gn:_[0]==="draft"?Vn:zn}let a=d(l),u=a(l);function p(_,b){return _[0]==="learned"?Yn:_[0]==="draft"?Xn:Kn}let v=p(l),h=v(l);function k(_,b){return _[0]==="learned"?xn:_[0]==="draft"?Zn:Qn}let w=k(l),m=w(l);return{c(){e=f("div"),t=f("div"),u.c(),i=g(),r=f("h2"),h.c(),o=g(),c=f("p"),m.c(),n(t,"class","empty-icon svelte-1rdpxoy"),n(r,"class","svelte-1rdpxoy"),n(c,"class","svelte-1rdpxoy"),n(e,"class","empty-state svelte-1rdpxoy")},m(_,b){M(_,e,b),s(e,t),u.m(t,null),s(e,i),s(e,r),h.m(r,null),s(e,o),s(e,c),m.m(c,null)},p(_,b){a!==(a=d(_))&&(u.d(1),u=a(_),u&&(u.c(),u.m(t,null))),v!==(v=p(_))&&(h.d(1),h=v(_),h&&(h.c(),h.m(r,null))),w!==(w=k(_))&&(m.d(1),m=w(_),m&&(m.c(),m.m(c,null)))},d(_){_&&I(e),u.d(),h.d(),m.d()}}}function Wn(l){let e=[],t=new Map,i,r=_t(l[12]);const o=c=>c[61].id;for(let c=0;c<r.length;c+=1){let d=tl(l,r,c),a=o(d);t.set(a,e[c]=al(a,d))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=nt()},m(c,d){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,d);M(c,i,d)},p(c,d){d[0]&921601&&(r=_t(c[12]),e=Ql(e,d,o,1,c,r,t,i.parentNode,Yl,al,i,tl))},d(c){c&&I(i);for(let d=0;d<e.length;d+=1)e[d].d(c)}}}function zn(l){let e,t,i,r;return{c(){e=P("svg"),t=P("circle"),i=P("line"),r=P("line"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"x1","12"),n(i,"y1","8"),n(i,"x2","12"),n(i,"y2","12"),n(r,"x1","12"),n(r,"y1","16"),n(r,"x2","12.01"),n(r,"y2","16"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(o,c){M(o,e,c),s(e,t),s(e,i),s(e,r)},d(o){o&&I(e)}}}function Vn(l){let e,t,i;return{c(){e=P("svg"),t=P("path"),i=P("path"),n(t,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(i,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){M(r,e,o),s(e,t),s(e,i)},d(r){r&&I(e)}}}function Gn(l){let e,t,i;return{c(){e=P("svg"),t=P("circle"),i=P("polyline"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"points","16 10 11 15 8 12"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){M(r,e,o),s(e,t),s(e,i)},d(r){r&&I(e)}}}function Kn(l){let e;return{c(){e=R("Нет слов на повторение")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Xn(l){let e;return{c(){e=R("Нет слов на проработку")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Yn(l){let e;return{c(){e=R("Пока нет изученных слов")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Qn(l){let e;return{c(){e=R("Все слова успешно изучены!")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Zn(l){let e;return{c(){e=R("Загрузите список слов на странице добавления")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function xn(l){let e;return{c(){e=R("Изучайте карточки, чтобы они появились здесь")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function $n(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',n(e,"class","card-thumbnail missing svelte-1rdpxoy")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function ei(l){let e,t,i;return{c(){e=f("div"),t=f("img"),Ve(t.src,i=l[61].imageUrl)||n(t,"src",i),n(t,"alt",""),n(t,"class","svelte-1rdpxoy"),n(e,"class","card-thumbnail svelte-1rdpxoy")},m(r,o){M(r,e,o),s(e,t)},p(r,o){o[0]&4096&&!Ve(t.src,i=r[61].imageUrl)&&n(t,"src",i)},d(r){r&&I(e)}}}function ti(l){let e;return{c(){e=f("p"),e.textContent="Добавьте перевод",n(e,"class","card-translation missing-text svelte-1rdpxoy")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function li(l){let e,t=l[61].translation+"",i;return{c(){e=f("p"),i=R(t),n(e,"class","card-translation svelte-1rdpxoy")},m(r,o){M(r,e,o),s(e,i)},p(r,o){o[0]&4096&&t!==(t=r[61].translation+"")&&$(i,t)},d(r){r&&I(e)}}}function sl(l){let e,t=l[61].association+"",i;return{c(){e=f("p"),i=R(t),n(e,"class","card-association svelte-1rdpxoy")},m(r,o){M(r,e,o),s(e,i)},p(r,o){o[0]&4096&&t!==(t=r[61].association+"")&&$(i,t)},d(r){r&&I(e)}}}function rl(l){let e,t,i,r,o,c,d,a,u,p;function v(b,C){var L;return C[0]&4096&&(r=null),r==null&&(r=!!((L=b[61].translation)!=null&&L.trim())),r?ii:ni}let h=v(l,[-1,-1,-1]),k=h(l);function w(b,C){var L;return C[0]&4096&&(u=null),u==null&&(u=!!((L=b[61].imageUrl)!=null&&L.trim())),u?ri:si}let m=w(l,[-1,-1,-1]),_=m(l);return{c(){var b,C;e=f("div"),t=f("span"),i=P("svg"),k.c(),o=R(`
                  Перевод`),c=g(),d=f("span"),a=P("svg"),_.c(),p=R(`
                  Картинка`),n(i,"width","12"),n(i,"height","12"),n(i,"viewBox","0 0 24 24"),n(i,"fill","none"),n(i,"stroke","currentColor"),n(i,"stroke-width","2"),n(t,"class","status-item svelte-1rdpxoy"),B(t,"complete",(b=l[61].translation)==null?void 0:b.trim()),n(a,"width","12"),n(a,"height","12"),n(a,"viewBox","0 0 24 24"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-width","2"),n(d,"class","status-item svelte-1rdpxoy"),B(d,"complete",(C=l[61].imageUrl)==null?void 0:C.trim()),n(e,"class","draft-status svelte-1rdpxoy")},m(b,C){M(b,e,C),s(e,t),s(t,i),k.m(i,null),s(t,o),s(e,c),s(e,d),s(d,a),_.m(a,null),s(d,p)},p(b,C){var L,j;h!==(h=v(b,C))&&(k.d(1),k=h(b),k&&(k.c(),k.m(i,null))),C[0]&4096&&B(t,"complete",(L=b[61].translation)==null?void 0:L.trim()),m!==(m=w(b,C))&&(_.d(1),_=m(b),_&&(_.c(),_.m(a,null))),C[0]&4096&&B(d,"complete",(j=b[61].imageUrl)==null?void 0:j.trim())},d(b){b&&I(e),k.d(),_.d()}}}function ni(l){let e;return{c(){e=P("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function ii(l){let e;return{c(){e=P("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function si(l){let e;return{c(){e=P("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function ri(l){let e;return{c(){e=P("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function ol(l){let e,t,i;function r(){return l[48](l[61])}return{c(){e=f("button"),e.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',n(e,"class","action-btn return svelte-1rdpxoy"),n(e,"title","Вернуть на повторение")},m(o,c){M(o,e,c),t||(i=U(e,"click",r),t=!0)},p(o,c){l=o},d(o){o&&I(e),t=!1,i()}}}function al(l,e){let t,i,r,o,c=e[61].word+"",d,a,u,p,v,h,k,w,m,_,b,C,L;function j(z,O){if(z[61].imageUrl)return ei;if(z[0]==="draft")return $n}let D=j(e),E=D&&D(e);function S(z,O){if(z[61].translation)return li;if(z[0]==="draft")return ti}let T=S(e),y=T&&T(e),N=e[61].association&&sl(e),H=e[0]==="draft"&&rl(e);function A(){return e[47](e[61])}let q=e[0]==="learned"&&ol(e);function W(){return e[49](e[61])}return{key:l,first:null,c(){t=f("div"),E&&E.c(),i=g(),r=f("div"),o=f("h3"),d=R(c),a=g(),y&&y.c(),u=g(),N&&N.c(),p=g(),H&&H.c(),v=g(),h=f("div"),k=f("button"),k.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',w=g(),q&&q.c(),m=g(),_=f("button"),_.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>',b=g(),n(o,"class","card-word svelte-1rdpxoy"),n(r,"class","card-content svelte-1rdpxoy"),n(k,"class","action-btn edit svelte-1rdpxoy"),n(k,"title","Редактировать"),n(_,"class","action-btn delete svelte-1rdpxoy"),n(_,"title","Удалить"),n(h,"class","card-actions svelte-1rdpxoy"),n(t,"class","card-item svelte-1rdpxoy"),B(t,"draft-card",e[0]==="draft"),this.first=t},m(z,O){M(z,t,O),E&&E.m(t,null),s(t,i),s(t,r),s(r,o),s(o,d),s(r,a),y&&y.m(r,null),s(r,u),N&&N.m(r,null),s(r,p),H&&H.m(r,null),s(t,v),s(t,h),s(h,k),s(h,w),q&&q.m(h,null),s(h,m),s(h,_),s(t,b),C||(L=[U(k,"click",A),U(_,"click",W)],C=!0)},p(z,O){e=z,D===(D=j(e))&&E?E.p(e,O):(E&&E.d(1),E=D&&D(e),E&&(E.c(),E.m(t,i))),O[0]&4096&&c!==(c=e[61].word+"")&&$(d,c),T===(T=S(e))&&y?y.p(e,O):(y&&y.d(1),y=T&&T(e),y&&(y.c(),y.m(r,u))),e[61].association?N?N.p(e,O):(N=sl(e),N.c(),N.m(r,p)):N&&(N.d(1),N=null),e[0]==="draft"?H?H.p(e,O):(H=rl(e),H.c(),H.m(r,null)):H&&(H.d(1),H=null),e[0]==="learned"?q?q.p(e,O):(q=ol(e),q.c(),q.m(h,m)):q&&(q.d(1),q=null),O[0]&1&&B(t,"draft-card",e[0]==="draft")},d(z){z&&I(t),E&&E.d(),y&&y.d(),N&&N.d(),H&&H.d(),q&&q.d(),C=!1,Je(L)}}}function cl(l){let e,t,i,r,o,c,d,a,u,p,v,h=l[15].toLowerCase()+"",k,w,m,_=l[2].length+"",b,C,L,j,D,E,S,T,y,N=l[3].length+"",H,A,q,W,z,O,J,re,oe,he,fe,de=l[4].length+"",ye,ie,X,ae,ge,Ie,Ne,Ce,V,pe,ve,ce,ke=l[0]==="draft"&&l[3].trim()&&l[5].trim(),Le,G,Z,K,we,ee,Me,me,te=l[5]&&fl(l),ne=ke&&ul();return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="Редактировать карточку",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("div"),p=f("label"),v=R("Слово ("),k=R(h),w=R(`)
            `),m=f("span"),b=R(_),C=R("/35"),L=g(),j=f("input"),D=g(),E=f("div"),S=f("label"),T=R(`Перевод
            `),y=f("span"),H=R(N),A=R("/50"),q=g(),W=f("input"),z=g(),O=f("div"),J=f("label"),re=R(`Ассоциация 
            `),oe=f("span"),oe.textContent="(необязательно)",he=g(),fe=f("span"),ye=R(de),ie=R("/95"),X=g(),ae=f("textarea"),ge=g(),Ie=f("div"),Ne=f("label"),Ne.innerHTML=`Изображение 
            <span class="optional svelte-1rdpxoy">(URL)</span>`,Ce=g(),V=f("input"),pe=g(),te&&te.c(),ve=g(),ce=f("div"),ne&&ne.c(),Le=g(),G=f("button"),G.textContent="Отмена",Z=g(),K=f("button"),we=R("Сохранить"),n(r,"class","svelte-1rdpxoy"),n(c,"class","modal-close svelte-1rdpxoy"),n(i,"class","modal-header svelte-1rdpxoy"),n(m,"class","char-count svelte-1rdpxoy"),B(m,"limit",l[2].length>=35),n(p,"for","editWord"),n(p,"class","svelte-1rdpxoy"),n(j,"id","editWord"),n(j,"type","text"),n(j,"placeholder","например: serendipity"),n(j,"maxlength","35"),j.required=!0,n(j,"class","svelte-1rdpxoy"),n(u,"class","input-group svelte-1rdpxoy"),n(y,"class","char-count svelte-1rdpxoy"),B(y,"limit",l[3].length>=50),n(S,"for","editTranslation"),n(S,"class","svelte-1rdpxoy"),n(W,"id","editTranslation"),n(W,"type","text"),n(W,"placeholder","например: счастливая случайность"),n(W,"maxlength","50"),W.required=!0,n(W,"class","svelte-1rdpxoy"),n(E,"class","input-group svelte-1rdpxoy"),n(oe,"class","optional svelte-1rdpxoy"),n(fe,"class","char-count svelte-1rdpxoy"),B(fe,"limit",l[4].length>=95),n(J,"for","editAssociation"),n(J,"class","svelte-1rdpxoy"),n(ae,"id","editAssociation"),n(ae,"placeholder","например: представьте, как вы случайно находите клад"),n(ae,"maxlength","95"),n(ae,"rows","2"),n(ae,"class","svelte-1rdpxoy"),n(O,"class","input-group svelte-1rdpxoy"),n(Ne,"for","editImageUrl"),n(Ne,"class","svelte-1rdpxoy"),n(V,"id","editImageUrl"),n(V,"type","url"),n(V,"placeholder","https://example.com/image.jpg"),n(V,"class","svelte-1rdpxoy"),n(Ie,"class","input-group svelte-1rdpxoy"),n(a,"class","modal-body svelte-1rdpxoy"),n(G,"class","btn-secondary svelte-1rdpxoy"),n(K,"class","btn-primary svelte-1rdpxoy"),K.disabled=ee=!l[2].trim()||l[0]!=="draft"&&!l[3].trim(),n(ce,"class","modal-actions svelte-1rdpxoy"),n(t,"class","modal svelte-1rdpxoy"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1rdpxoy"),n(e,"role","button"),n(e,"tabindex","-1")},m(Q,ue){M(Q,e,ue),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(u,p),s(p,v),s(p,k),s(p,w),s(p,m),s(m,b),s(m,C),s(u,L),s(u,j),Oe(j,l[2]),s(a,D),s(a,E),s(E,S),s(S,T),s(S,y),s(y,H),s(y,A),s(E,q),s(E,W),Oe(W,l[3]),s(a,z),s(a,O),s(O,J),s(J,re),s(J,oe),s(J,he),s(J,fe),s(fe,ye),s(fe,ie),s(O,X),s(O,ae),Oe(ae,l[4]),s(a,ge),s(a,Ie),s(Ie,Ne),s(Ie,Ce),s(Ie,V),Oe(V,l[5]),s(a,pe),te&&te.m(a,null),s(t,ve),s(t,ce),ne&&ne.m(ce,null),s(ce,Le),s(ce,G),s(ce,Z),s(ce,K),s(K,we),Me||(me=[U(c,"click",l[50]),U(j,"input",l[51]),U(W,"input",l[52]),U(ae,"input",l[53]),U(V,"input",l[54]),U(G,"click",l[55]),U(K,"click",l[21]),U(t,"click",$e(l[37])),U(e,"click",l[56]),U(e,"keydown",l[57])],Me=!0)},p(Q,ue){ue[0]&32768&&h!==(h=Q[15].toLowerCase()+"")&&$(k,h),ue[0]&4&&_!==(_=Q[2].length+"")&&$(b,_),ue[0]&4&&B(m,"limit",Q[2].length>=35),ue[0]&4&&j.value!==Q[2]&&Oe(j,Q[2]),ue[0]&8&&N!==(N=Q[3].length+"")&&$(H,N),ue[0]&8&&B(y,"limit",Q[3].length>=50),ue[0]&8&&W.value!==Q[3]&&Oe(W,Q[3]),ue[0]&16&&de!==(de=Q[4].length+"")&&$(ye,de),ue[0]&16&&B(fe,"limit",Q[4].length>=95),ue[0]&16&&Oe(ae,Q[4]),ue[0]&32&&V.value!==Q[5]&&Oe(V,Q[5]),Q[5]?te?te.p(Q,ue):(te=fl(Q),te.c(),te.m(a,null)):te&&(te.d(1),te=null),ue[0]&41&&(ke=Q[0]==="draft"&&Q[3].trim()&&Q[5].trim()),ke?ne||(ne=ul(),ne.c(),ne.m(ce,Le)):ne&&(ne.d(1),ne=null),ue[0]&13&&ee!==(ee=!Q[2].trim()||Q[0]!=="draft"&&!Q[3].trim())&&(K.disabled=ee)},d(Q){Q&&I(e),te&&te.d(),ne&&ne.d(),Me=!1,Je(me)}}}function fl(l){let e,t,i,r,o;function c(u,p){return u[11]?ai:oi}let d=c(l),a=d(l);return{c(){e=f("div"),a.c(),t=g(),i=f("button"),i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(i,"class","remove-image-btn svelte-1rdpxoy"),n(i,"title","Удалить изображение"),n(e,"class","image-preview-container svelte-1rdpxoy")},m(u,p){M(u,e,p),a.m(e,null),s(e,t),s(e,i),r||(o=U(i,"click",l[24]),r=!0)},p(u,p){d===(d=c(u))&&a?a.p(u,p):(a.d(1),a=d(u),a&&(a.c(),a.m(e,t)))},d(u){u&&I(e),a.d(),r=!1,o()}}}function oi(l){let e,t,i,r;return{c(){e=f("img"),Ve(e.src,t=l[5])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","modal-image-preview svelte-1rdpxoy")},m(o,c){M(o,e,c),i||(r=[U(e,"error",l[22]),U(e,"load",l[23])],i=!0)},p(o,c){c[0]&32&&!Ve(e.src,t=o[5])&&n(e,"src",t)},d(o){o&&I(e),i=!1,Je(r)}}}function ai(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Ошибка загрузки</span>',n(e,"class","image-error svelte-1rdpxoy")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function ul(l){let e;return{c(){e=f("span"),e.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
            Карточка будет активирована`,n(e,"class","ready-hint svelte-1rdpxoy")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function ci(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b,C,L,j,D,E,S,T,y,N,H,A,q=l[7].length+"",W,z,O,J,re,oe,he,fe,de,ye=l[8].length+"",ie,X,ae,ge,Ie,Ne,Ce,V=l[6].length+"",pe,ve,ce,ke,Le,G,Z,K,we,ee,Me,me,te,ne,Q,ue,F=l[9]&&ll(l),Be=l[1]&&nl(l),De=l[0]==="learned"&&l[6].length>0&&il(l);function Ge(se,Ae){return se[12].length>0?Wn:Fn}let Te=Ge(l),le=Te(l),_e=l[10]&&cl(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h1"),r.textContent="Мои карточки",o=g(),c=f("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',d=g(),a=f("p"),a.textContent="Управляйте вашими словами",u=g(),p=f("div"),v=f("button"),h=f("span"),k=R(l[14]),w=g(),m=f("span"),_=R(l[13]),b=g(),C=P("svg"),L=P("polyline"),j=g(),F&&F.c(),D=g(),E=f("div"),S=f("button"),T=P("svg"),y=P("path"),N=P("path"),H=R(`
      На проработку
      `),A=f("span"),W=R(q),z=g(),O=f("button"),J=P("svg"),re=P("circle"),oe=P("line"),he=P("line"),fe=R(`
      На повторение
      `),de=f("span"),ie=R(ye),X=g(),ae=f("button"),ge=P("svg"),Ie=P("polyline"),Ne=R(`
      Изученные
      `),Ce=f("span"),pe=R(V),ve=g(),ce=f("div"),ke=P("svg"),Le=P("circle"),G=P("line"),Z=g(),K=f("input"),we=g(),Be&&Be.c(),ee=g(),De&&De.c(),Me=g(),me=f("div"),le.c(),te=g(),_e&&_e.c(),ne=nt(),n(r,"class","svelte-1rdpxoy"),n(c,"class","export-btn svelte-1rdpxoy"),n(c,"title","Экспорт в JSON"),n(i,"class","header-top svelte-1rdpxoy"),n(a,"class","subtitle svelte-1rdpxoy"),n(t,"class","header svelte-1rdpxoy"),n(h,"class","dropdown-label svelte-1rdpxoy"),n(m,"class","dropdown-badge svelte-1rdpxoy"),n(L,"points","6 9 12 15 18 9"),n(C,"class","dropdown-arrow svelte-1rdpxoy"),n(C,"width","16"),n(C,"height","16"),n(C,"viewBox","0 0 24 24"),n(C,"fill","none"),n(C,"stroke","currentColor"),n(C,"stroke-width","2"),B(C,"open",l[9]),n(v,"class","tab-dropdown-btn svelte-1rdpxoy"),n(p,"class","tabs-mobile svelte-1rdpxoy"),n(y,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(N,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(T,"width","18"),n(T,"height","18"),n(T,"viewBox","0 0 24 24"),n(T,"fill","none"),n(T,"stroke","currentColor"),n(T,"stroke-width","2"),n(A,"class","badge svelte-1rdpxoy"),n(S,"class","tab svelte-1rdpxoy"),B(S,"active",l[0]==="draft"),n(re,"cx","12"),n(re,"cy","12"),n(re,"r","10"),n(oe,"x1","12"),n(oe,"y1","8"),n(oe,"x2","12"),n(oe,"y2","12"),n(he,"x1","12"),n(he,"y1","16"),n(he,"x2","12.01"),n(he,"y2","16"),n(J,"width","18"),n(J,"height","18"),n(J,"viewBox","0 0 24 24"),n(J,"fill","none"),n(J,"stroke","currentColor"),n(J,"stroke-width","2"),n(de,"class","badge svelte-1rdpxoy"),n(O,"class","tab svelte-1rdpxoy"),B(O,"active",l[0]==="unlearned"),n(Ie,"points","20 6 9 17 4 12"),n(ge,"width","18"),n(ge,"height","18"),n(ge,"viewBox","0 0 24 24"),n(ge,"fill","none"),n(ge,"stroke","currentColor"),n(ge,"stroke-width","2"),n(Ce,"class","badge svelte-1rdpxoy"),n(ae,"class","tab svelte-1rdpxoy"),B(ae,"active",l[0]==="learned"),n(E,"class","tabs-desktop svelte-1rdpxoy"),n(Le,"cx","11"),n(Le,"cy","11"),n(Le,"r","8"),n(G,"x1","21"),n(G,"y1","21"),n(G,"x2","16.65"),n(G,"y2","16.65"),n(ke,"class","search-icon svelte-1rdpxoy"),n(ke,"width","18"),n(ke,"height","18"),n(ke,"viewBox","0 0 24 24"),n(ke,"fill","none"),n(ke,"stroke","currentColor"),n(ke,"stroke-width","2"),n(K,"type","text"),n(K,"class","search-input svelte-1rdpxoy"),n(K,"placeholder","Поиск слова..."),n(ce,"class","search-box svelte-1rdpxoy"),n(me,"class","cards-list svelte-1rdpxoy"),n(e,"class","lists-container svelte-1rdpxoy")},m(se,Ae){M(se,e,Ae),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(e,u),s(e,p),s(p,v),s(v,h),s(h,k),s(v,w),s(v,m),s(m,_),s(v,b),s(v,C),s(C,L),s(p,j),F&&F.m(p,null),s(e,D),s(e,E),s(E,S),s(S,T),s(T,y),s(T,N),s(S,H),s(S,A),s(A,W),s(E,z),s(E,O),s(O,J),s(J,re),s(J,oe),s(J,he),s(O,fe),s(O,de),s(de,ie),s(E,X),s(E,ae),s(ae,ge),s(ge,Ie),s(ae,Ne),s(ae,Ce),s(Ce,pe),s(e,ve),s(e,ce),s(ce,ke),s(ke,Le),s(ke,G),s(ce,Z),s(ce,K),Oe(K,l[1]),s(ce,we),Be&&Be.m(ce,null),s(e,ee),De&&De.m(e,null),s(e,Me),s(e,me),le.m(me,null),M(se,te,Ae),_e&&_e.m(se,Ae),M(se,ne,Ae),Q||(ue=[U(c,"click",l[25]),U(v,"click",l[38]),U(S,"click",l[42]),U(O,"click",l[43]),U(ae,"click",l[44]),U(K,"input",l[45])],Q=!0)},p(se,Ae){Ae[0]&16384&&$(k,se[14]),Ae[0]&8192&&$(_,se[13]),Ae[0]&512&&B(C,"open",se[9]),se[9]?F?F.p(se,Ae):(F=ll(se),F.c(),F.m(p,null)):F&&(F.d(1),F=null),Ae[0]&128&&q!==(q=se[7].length+"")&&$(W,q),Ae[0]&1&&B(S,"active",se[0]==="draft"),Ae[0]&256&&ye!==(ye=se[8].length+"")&&$(ie,ye),Ae[0]&1&&B(O,"active",se[0]==="unlearned"),Ae[0]&64&&V!==(V=se[6].length+"")&&$(pe,V),Ae[0]&1&&B(ae,"active",se[0]==="learned"),Ae[0]&2&&K.value!==se[1]&&Oe(K,se[1]),se[1]?Be?Be.p(se,Ae):(Be=nl(se),Be.c(),Be.m(ce,null)):Be&&(Be.d(1),Be=null),se[0]==="learned"&&se[6].length>0?De?De.p(se,Ae):(De=il(se),De.c(),De.m(e,Me)):De&&(De.d(1),De=null),Te===(Te=Ge(se))&&le?le.p(se,Ae):(le.d(1),le=Te(se),le&&(le.c(),le.m(me,null))),se[10]?_e?_e.p(se,Ae):(_e=cl(se),_e.c(),_e.m(ne.parentNode,ne)):_e&&(_e.d(1),_e=null)},i:be,o:be,d(se){se&&(I(e),I(te),I(ne)),F&&F.d(),Be&&Be.d(),De&&De.d(),le.d(),_e&&_e.d(se),Q=!1,Je(ue)}}}function fi(l,e,t){let i,r,o,c,d,a,u,p,v,h,k,w,m;Qe(l,Ze,F=>t(34,k=F)),Qe(l,Re,F=>t(35,w=F)),Qe(l,We,F=>t(36,m=F));let _="draft",b="",C=!1;const L={draft:"На проработку",unlearned:"На повторение",learned:"Изученные"};function j(F){t(0,_=F),t(9,C=!1)}let D=!1,E=null,S="",T="",y="",N="",H=!1,A="",q="",W="",z="";function O(F){Re.moveToStudy(F)}function J(F){Re.deleteCard(F,_)}function re(F){t(27,E=F),t(2,S=F.word),t(3,T=F.translation||""),t(4,y=F.association||""),t(5,N=F.imageUrl||""),t(28,A=F.word),t(29,q=F.translation||""),t(30,W=F.association||""),t(31,z=F.imageUrl||""),t(11,H=!1),t(10,D=!0)}function oe(F=!1){!F&&c&&!confirm("У вас есть несохранённые изменения. Закрыть без сохранения?")||(t(10,D=!1),t(27,E=null))}function he(){t(10,D=!1),t(27,E=null)}function fe(){S.trim()&&E&&(_==="draft"?Re.editDraftCard(E.id,{word:S.trim(),translation:T.trim(),association:y.trim(),imageUrl:N.trim()}):T.trim()&&Re.editCard(E.id,_,{word:S.trim(),translation:T.trim(),association:y.trim(),imageUrl:N.trim()}),he())}function de(){t(11,H=!0)}function ye(){t(11,H=!1)}function ie(){t(5,N="")}function X(){const F={learned:a,unlearned:u,draft:p,language:k||"en",exportedAt:new Date().toISOString()},Be=JSON.stringify(F,null,2),De=new Blob([Be],{type:"application/json"}),Ge=URL.createObjectURL(De),Te=document.createElement("a");Te.href=Ge,Te.download=`flash-words-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Te),Te.click(),document.body.removeChild(Te),URL.revokeObjectURL(Ge)}function ae(){a.length>0&&confirm(`Отправить все ${a.length} слов на повторение?`)&&Re.moveAllToStudy()}function ge(F){tt.call(this,l,F)}const Ie=()=>t(9,C=!C),Ne=()=>j("draft"),Ce=()=>j("unlearned"),V=()=>j("learned"),pe=()=>t(0,_="draft"),ve=()=>t(0,_="unlearned"),ce=()=>t(0,_="learned");function ke(){b=this.value,t(1,b)}const Le=()=>t(1,b=""),G=F=>re(F),Z=F=>O(F.id),K=F=>J(F.id),we=()=>oe();function ee(){S=this.value,t(2,S)}function Me(){T=this.value,t(3,T)}function me(){y=this.value,t(4,y)}function te(){N=this.value,t(5,N)}const ne=()=>oe(),Q=()=>oe(),ue=F=>F.key==="Escape"&&oe();return l.$$.update=()=>{l.$$.dirty[1]&8&&t(15,i=Ye(k)),l.$$.dirty[0]&1&&t(14,r=L[_]),l.$$.dirty[1]&32&&t(33,d=m||"default"),l.$$.dirty[1]&20&&t(7,p=(w.draft||[]).filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(8,u=w.unlearned.filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(6,a=w.learned.filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[0]&449&&t(13,o=_==="draft"?p.length:_==="unlearned"?u.length:a.length),l.$$.dirty[0]&2013265980|l.$$.dirty[1]&1&&(c=E&&(S!==A||T!==q||y!==W||N!==z)),l.$$.dirty[0]&449&&t(32,v=_==="learned"?a:_==="unlearned"?u:p),l.$$.dirty[0]&2|l.$$.dirty[1]&2&&t(12,h=b.trim()?v.filter(F=>F.word.toLowerCase().includes(b.toLowerCase())||F.translation&&F.translation.toLowerCase().includes(b.toLowerCase())):v)},[_,b,S,T,y,N,a,p,u,C,D,H,h,o,r,i,j,O,J,re,oe,fe,de,ye,ie,X,ae,E,A,q,W,z,v,d,k,w,m,ge,Ie,Ne,Ce,V,pe,ve,ce,ke,Le,G,Z,K,we,ee,Me,me,te,ne,Q,ue]}class ui extends wt{constructor(e){super(),kt(this,e,fi,ci,at,{},null,[-1,-1,-1])}}function dl(l,e,t){const i=l.slice();return i[52]=e[t],i}function pl(l){let e;return{c(){e=f("span"),n(e,"class","user-indicator svelte-kfa3ws")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function hl(l){let e;return{c(){e=f("span"),n(e,"class","token-indicator svelte-kfa3ws")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function vl(l){let e,t,i;function r(d,a){return d[3].length===0?pi:di}let o=r(l),c=o(l);return{c(){e=f("div"),c.c(),n(e,"class","dictionary-dropdown svelte-kfa3ws")},m(d,a){M(d,e,a),c.m(e,null),t||(i=U(e,"click",$e(l[33])),t=!0)},p(d,a){o===(o=r(d))&&c?c.p(d,a):(c.d(1),c=o(d),c&&(c.c(),c.m(e,null)))},d(d){d&&I(e),c.d(),t=!1,i()}}}function di(l){let e,t=_t(l[3]),i=[];for(let r=0;r<t.length;r+=1)i[r]=_l(dl(l,t,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=nt()},m(r,o){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,o);M(r,e,o)},p(r,o){if(o[0]&4194316){t=_t(r[3]);let c;for(c=0;c<t.length;c+=1){const d=dl(r,t,c);i[c]?i[c].p(d,o):(i[c]=_l(d),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=t.length}},d(r){r&&I(e),Hl(i,r)}}}function pi(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> <p class="svelte-kfa3ws">Загрузите словарь или добавьте карточку слова</p>',n(e,"class","dropdown-empty svelte-kfa3ws")},m(t,i){M(t,e,i)},p:be,d(t){t&&I(e)}}}function ml(l){let e,t;return{c(){e=P("svg"),t=P("polyline"),n(t,"points","20 6 9 17 4 12"),n(e,"width","16"),n(e,"height","16"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(i,r){M(i,e,r),s(e,t)},d(i){i&&I(e)}}}function _l(l){let e,t,i=l[52].name+"",r,o,c,d,a,u=l[2]===l[52].id&&ml();function p(){return l[35](l[52])}return{c(){e=f("button"),t=f("span"),r=R(i),o=g(),u&&u.c(),c=g(),n(e,"class","dropdown-item svelte-kfa3ws"),B(e,"active",l[2]===l[52].id)},m(v,h){M(v,e,h),s(e,t),s(t,r),s(e,o),u&&u.m(e,null),s(e,c),d||(a=U(e,"click",p),d=!0)},p(v,h){l=v,h[0]&8&&i!==(i=l[52].name+"")&&$(r,i),l[2]===l[52].id?u||(u=ml(),u.c(),u.m(e,c)):u&&(u.d(1),u=null),h[0]&12&&B(e,"active",l[2]===l[52].id)},d(v){v&&I(e),u&&u.d(),d=!1,a()}}}function gl(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b,C,L,j,D,E,S=l[16]&&yl(l),T=l[7]>0&&kl(l);function y(A,q){return A[6]?vi:hi}let N=y(l),H=N(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="AI Токен",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("p"),u.textContent="Введите ваш API ключ для использования AI-функций",p=g(),v=f("div"),h=f("input"),k=g(),S&&S.c(),w=g(),T&&T.c(),m=g(),_=f("div"),b=f("button"),b.textContent="Отмена",C=g(),L=f("button"),H.c(),n(r,"class","svelte-kfa3ws"),n(c,"class","modal-close svelte-kfa3ws"),n(i,"class","modal-header svelte-kfa3ws"),n(u,"class","modal-description svelte-kfa3ws"),n(h,"type","password"),n(h,"class","token-input svelte-kfa3ws"),n(h,"placeholder","sk-..."),n(v,"class","token-input-wrapper svelte-kfa3ws"),n(a,"class","modal-body svelte-kfa3ws"),n(b,"class","cancel-btn svelte-kfa3ws"),n(L,"class","save-btn svelte-kfa3ws"),L.disabled=j=!l[0].trim(),B(L,"saved",l[6]),n(_,"class","modal-footer svelte-kfa3ws"),n(t,"class","modal svelte-kfa3ws"),n(e,"class","modal-overlay svelte-kfa3ws")},m(A,q){M(A,e,q),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(a,p),s(a,v),s(v,h),Oe(h,l[0]),s(v,k),S&&S.m(v,null),s(a,w),T&&T.m(a,null),s(t,m),s(t,_),s(_,b),s(_,C),s(_,L),H.m(L,null),D||(E=[U(c,"click",l[36]),U(h,"input",l[37]),U(b,"click",l[38]),U(L,"click",l[18]),U(t,"click",$e(l[32])),U(e,"click",l[39])],D=!0)},p(A,q){q[0]&1&&h.value!==A[0]&&Oe(h,A[0]),A[16]?S?S.p(A,q):(S=yl(A),S.c(),S.m(v,null)):S&&(S.d(1),S=null),A[7]>0?T?T.p(A,q):(T=kl(A),T.c(),T.m(a,null)):T&&(T.d(1),T=null),N!==(N=y(A))&&(H.d(1),H=N(A),H&&(H.c(),H.m(L,null))),q[0]&1&&j!==(j=!A[0].trim())&&(L.disabled=j),q[0]&64&&B(L,"saved",A[6])},d(A){A&&I(e),S&&S.d(),T&&T.d(),H.d(),D=!1,Je(E)}}}function yl(l){let e,t,i;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-kfa3ws"),n(e,"title","Очистить токен")},m(r,o){M(r,e,o),t||(i=U(e,"click",l[19]),t=!0)},p:be,d(r){r&&I(e),t=!1,i()}}}function kl(l){let e,t,i,r,o,c=Ll(l[7])+"",d;return{c(){e=f("div"),t=f("div"),i=f("span"),i.textContent="Стоимость всех запросов:",r=g(),o=f("span"),d=R(c),n(i,"class","cost-label svelte-kfa3ws"),n(o,"class","cost-value svelte-kfa3ws"),n(t,"class","cost-row svelte-kfa3ws"),n(e,"class","cost-info svelte-kfa3ws")},m(a,u){M(a,e,u),s(e,t),s(t,i),s(t,r),s(t,o),s(o,d)},p(a,u){u[0]&128&&c!==(c=Ll(a[7])+"")&&$(d,c)},d(a){a&&I(e)}}}function hi(l){let e;return{c(){e=R("Сохранить")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function vi(l){let e,t,i;return{c(){e=P("svg"),t=P("polyline"),i=R(`
              Сохранено`),n(t,"points","20 6 9 17 4 12"),n(e,"width","18"),n(e,"height","18"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(r,o){M(r,e,o),s(e,t),M(r,i,o)},d(r){r&&(I(e),I(i))}}}function wl(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b,C,L,j,D,E,S=l[9]&&bl(l),T=l[10]&&Cl(l),y=l[1]&&Sl(l);function N(q,W){return q[11]?_i:mi}let H=N(l),A=H(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="Загрузить слова",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("p"),u.textContent="Введите имя для загрузки персональных слов из файла",p=g(),v=f("div"),h=f("input"),k=g(),S&&S.c(),w=g(),T&&T.c(),m=g(),y&&y.c(),_=g(),b=f("div"),C=f("button"),C.textContent="Отмена",L=g(),j=f("button"),A.c(),n(r,"class","svelte-kfa3ws"),n(c,"class","modal-close svelte-kfa3ws"),n(i,"class","modal-header svelte-kfa3ws"),n(u,"class","modal-description svelte-kfa3ws"),n(h,"type","text"),n(h,"class","token-input user-input svelte-kfa3ws"),n(h,"placeholder","например: mycode"),B(h,"error",l[10]),n(v,"class","token-input-wrapper svelte-kfa3ws"),n(a,"class","modal-body svelte-kfa3ws"),n(C,"class","cancel-btn svelte-kfa3ws"),n(j,"class","save-btn svelte-kfa3ws"),j.disabled=l[11],n(b,"class","modal-footer svelte-kfa3ws"),n(t,"class","modal svelte-kfa3ws"),n(e,"class","modal-overlay svelte-kfa3ws")},m(q,W){M(q,e,W),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(a,p),s(a,v),s(v,h),Oe(h,l[9]),s(v,k),S&&S.m(v,null),s(a,w),T&&T.m(a,null),s(a,m),y&&y.m(a,null),s(t,_),s(t,b),s(b,C),s(b,L),s(b,j),A.m(j,null),D||(E=[U(c,"click",l[40]),U(h,"input",l[41]),U(h,"keydown",l[42]),U(C,"click",l[43]),U(j,"click",l[21]),U(t,"click",$e(l[31])),U(e,"click",l[44])],D=!0)},p(q,W){W[0]&512&&h.value!==q[9]&&Oe(h,q[9]),W[0]&1024&&B(h,"error",q[10]),q[9]?S?S.p(q,W):(S=bl(q),S.c(),S.m(v,null)):S&&(S.d(1),S=null),q[10]?T?T.p(q,W):(T=Cl(q),T.c(),T.m(a,m)):T&&(T.d(1),T=null),q[1]?y?y.p(q,W):(y=Sl(q),y.c(),y.m(a,null)):y&&(y.d(1),y=null),H!==(H=N(q))&&(A.d(1),A=H(q),A&&(A.c(),A.m(j,null))),W[0]&2048&&(j.disabled=q[11])},d(q){q&&I(e),S&&S.d(),T&&T.d(),y&&y.d(),A.d(),D=!1,Je(E)}}}function bl(l){let e,t,i;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-kfa3ws"),n(e,"title","Очистить")},m(r,o){M(r,e,o),t||(i=U(e,"click",l[24]),t=!0)},p:be,d(r){r&&I(e),t=!1,i()}}}function Cl(l){let e,t;return{c(){e=f("p"),t=R(l[10]),n(e,"class","error-text svelte-kfa3ws")},m(i,r){M(i,e,r),s(e,t)},p(i,r){r[0]&1024&&$(t,i[10])},d(i){i&&I(e)}}}function Sl(l){let e,t,i,r,o,c,d,a;return{c(){e=f("div"),t=P("svg"),i=P("polyline"),r=g(),o=f("span"),c=R("Загружены слова: "),d=f("strong"),a=R(l[1]),n(i,"points","20 6 9 17 4 12"),n(t,"width","16"),n(t,"height","16"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(d,"class","svelte-kfa3ws"),n(e,"class","current-user-info svelte-kfa3ws")},m(u,p){M(u,e,p),s(e,t),s(t,i),s(e,r),s(e,o),s(o,c),s(o,d),s(d,a)},p(u,p){p[0]&2&&$(a,u[1])},d(u){u&&I(e)}}}function mi(l){let e;return{c(){e=R("Загрузить")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function _i(l){let e,t;return{c(){e=f("span"),t=R(`
              Загрузка...`),n(e,"class","loading-spinner-small svelte-kfa3ws")},m(i,r){M(i,e,r),M(i,t,r)},d(i){i&&(I(e),I(t))}}}function gi(l){let e,t;return e=new ui({}),{c(){Mt(e.$$.fragment)},m(i,r){gt(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){ht(e.$$.fragment,i),t=!1},d(i){yt(e,i)}}}function yi(l){let e,t;return e=new qn({}),{c(){Mt(e.$$.fragment)},m(i,r){gt(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){ht(e.$$.fragment,i),t=!1},d(i){yt(e,i)}}}function ki(l){let e,t;return e=new pn({}),{c(){Mt(e.$$.fragment)},m(i,r){gt(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){ht(e.$$.fragment,i),t=!1},d(i){yt(e,i)}}}function jl(l){let e,t;return{c(){e=f("span"),t=R(l[13]),n(e,"class","study-badge svelte-kfa3ws")},m(i,r){M(i,e,r),s(e,t)},p(i,r){r[0]&8192&&$(t,i[13])},d(i){i&&I(e)}}}function wi(l){let e,t,i,r,o,c,d,a,u,p,v,h,k,w,m,_,b,C,L,j,D,E,S,T,y,N,H,A,q,W,z,O,J,re,oe,he,fe,de,ye,ie,X,ae,ge,Ie,Ne,Ce,V,pe,ve,ce,ke,Le,G,Z,K,we,ee,Me,me,te=l[15]&&pl(),ne=l[16]&&hl(),Q=l[12]&&vl(l),ue=l[5]&&gl(l),F=l[8]&&wl(l);const Be=[ki,yi,gi],De=[];function Ge(le,_e){return le[4]==="add"?0:le[4]==="study"?1:le[4]==="lists"?2:-1}~(ie=Ge(l))&&(X=De[ie]=Be[ie](l));let Te=l[13]>0&&jl(l);return{c(){e=f("div"),t=f("div"),i=g(),r=f("nav"),o=f("div"),o.innerHTML='<svg width="32" height="32" viewBox="0 0 100 100"><defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#6366f1"></stop><stop offset="100%" style="stop-color:#a855f7"></stop></linearGradient></defs><rect width="100" height="100" rx="20" fill="url(#logoGrad)"></rect><text x="50" y="65" font-family="Arial" font-size="50" font-weight="bold" fill="white" text-anchor="middle">F</text></svg> <span class="brand-name svelte-kfa3ws">Flash Words</span>',c=g(),d=f("div"),a=f("button"),u=P("svg"),p=P("path"),v=P("circle"),h=g(),te&&te.c(),k=g(),w=f("button"),m=P("svg"),_=P("path"),b=P("polyline"),C=P("polyline"),L=P("polyline"),j=P("polyline"),D=P("line"),E=g(),ne&&ne.c(),S=g(),T=f("div"),y=f("button"),N=P("svg"),H=P("path"),A=P("path"),q=g(),W=f("span"),z=R(l[14]),O=g(),J=P("svg"),re=P("polyline"),oe=g(),Q&&Q.c(),he=g(),ue&&ue.c(),fe=g(),F&&F.c(),de=g(),ye=f("main"),X&&X.c(),ae=g(),ge=f("nav"),Ie=f("button"),Ie.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg> <span class="svelte-kfa3ws">Добавить</span>',Ne=g(),Ce=f("button"),V=f("div"),pe=P("svg"),ve=P("rect"),ce=P("path"),ke=P("path"),Le=g(),Te&&Te.c(),G=g(),Z=f("span"),Z.textContent="Изучать",K=g(),we=f("button"),we.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> <span class="svelte-kfa3ws">Списки</span>',n(t,"class","background-pattern svelte-kfa3ws"),n(o,"class","nav-brand svelte-kfa3ws"),n(p,"d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"),n(v,"cx","12"),n(v,"cy","7"),n(v,"r","4"),n(u,"width","20"),n(u,"height","20"),n(u,"viewBox","0 0 24 24"),n(u,"fill","none"),n(u,"stroke","currentColor"),n(u,"stroke-width","2"),n(a,"class","user-btn svelte-kfa3ws"),n(a,"title","Загрузить слова пользователя"),B(a,"has-user",l[15]),n(_,"d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"),n(b,"points","7.5 4.21 12 6.81 16.5 4.21"),n(C,"points","7.5 19.79 7.5 14.6 3 12"),n(L,"points","21 12 16.5 14.6 16.5 19.79"),n(j,"points","3.27 6.96 12 12.01 20.73 6.96"),n(D,"x1","12"),n(D,"y1","22.08"),n(D,"x2","12"),n(D,"y2","12"),n(m,"width","20"),n(m,"height","20"),n(m,"viewBox","0 0 24 24"),n(m,"fill","none"),n(m,"stroke","currentColor"),n(m,"stroke-width","2"),n(w,"class","ai-token-btn svelte-kfa3ws"),n(w,"title","Настройка AI токена"),B(w,"has-token",l[16]),n(H,"d","M4 19.5A2.5 2.5 0 0 1 6.5 17H20"),n(A,"d","M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"),n(N,"width","18"),n(N,"height","18"),n(N,"viewBox","0 0 24 24"),n(N,"fill","none"),n(N,"stroke","currentColor"),n(N,"stroke-width","2"),n(W,"class","dictionary-label svelte-kfa3ws"),n(re,"points","6 9 12 15 18 9"),n(J,"class","dropdown-arrow svelte-kfa3ws"),n(J,"width","14"),n(J,"height","14"),n(J,"viewBox","0 0 24 24"),n(J,"fill","none"),n(J,"stroke","currentColor"),n(J,"stroke-width","2"),B(J,"open",l[12]),n(y,"class","dictionary-btn svelte-kfa3ws"),n(y,"title","Выбрать словарь"),B(y,"has-dictionary",l[2]),n(T,"class","dictionary-selector svelte-kfa3ws"),n(d,"class","nav-stats svelte-kfa3ws"),n(r,"class","navbar svelte-kfa3ws"),n(ye,"class","main-content svelte-kfa3ws"),n(Ie,"class","nav-item svelte-kfa3ws"),B(Ie,"active",l[4]==="add"),n(ve,"x","2"),n(ve,"y","4"),n(ve,"width","20"),n(ve,"height","16"),n(ve,"rx","2"),n(ce,"d","M12 8v8"),n(ke,"d","M8 12h8"),n(pe,"width","28"),n(pe,"height","28"),n(pe,"viewBox","0 0 24 24"),n(pe,"fill","none"),n(pe,"stroke","currentColor"),n(pe,"stroke-width","2"),n(pe,"class","svelte-kfa3ws"),n(V,"class","study-btn-inner svelte-kfa3ws"),n(Z,"class","svelte-kfa3ws"),n(Ce,"class","nav-item study svelte-kfa3ws"),B(Ce,"active",l[4]==="study"),n(we,"class","nav-item svelte-kfa3ws"),B(we,"active",l[4]==="lists"),n(ge,"class","bottom-nav svelte-kfa3ws"),n(e,"class","app svelte-kfa3ws")},m(le,_e){M(le,e,_e),s(e,t),s(e,i),s(e,r),s(r,o),s(r,c),s(r,d),s(d,a),s(a,u),s(u,p),s(u,v),s(a,h),te&&te.m(a,null),s(d,k),s(d,w),s(w,m),s(m,_),s(m,b),s(m,C),s(m,L),s(m,j),s(m,D),s(w,E),ne&&ne.m(w,null),s(d,S),s(d,T),s(T,y),s(y,N),s(N,H),s(N,A),s(y,q),s(y,W),s(W,z),s(y,O),s(y,J),s(J,re),s(T,oe),Q&&Q.m(T,null),s(e,he),ue&&ue.m(e,null),s(e,fe),F&&F.m(e,null),s(e,de),s(e,ye),~ie&&De[ie].m(ye,null),s(e,ae),s(e,ge),s(ge,Ie),s(ge,Ne),s(ge,Ce),s(Ce,V),s(V,pe),s(pe,ve),s(pe,ce),s(pe,ke),s(V,Le),Te&&Te.m(V,null),s(Ce,G),s(Ce,Z),s(ge,K),s(ge,we),ee=!0,Me||(me=[U(a,"click",l[20]),U(w,"click",l[17]),U(y,"click",$e(l[34])),U(Ie,"click",l[45]),U(Ce,"click",l[46]),U(we,"click",l[47]),U(e,"click",l[23])],Me=!0)},p(le,_e){le[15]?te||(te=pl(),te.c(),te.m(a,null)):te&&(te.d(1),te=null),(!ee||_e[0]&32768)&&B(a,"has-user",le[15]),le[16]?ne||(ne=hl(),ne.c(),ne.m(w,null)):ne&&(ne.d(1),ne=null),(!ee||_e[0]&65536)&&B(w,"has-token",le[16]),(!ee||_e[0]&16384)&&$(z,le[14]),(!ee||_e[0]&4096)&&B(J,"open",le[12]),(!ee||_e[0]&4)&&B(y,"has-dictionary",le[2]),le[12]?Q?Q.p(le,_e):(Q=vl(le),Q.c(),Q.m(T,null)):Q&&(Q.d(1),Q=null),le[5]?ue?ue.p(le,_e):(ue=gl(le),ue.c(),ue.m(e,fe)):ue&&(ue.d(1),ue=null),le[8]?F?F.p(le,_e):(F=wl(le),F.c(),F.m(e,de)):F&&(F.d(1),F=null);let se=ie;ie=Ge(le),ie!==se&&(X&&(Kl(),ht(De[se],1,1,()=>{De[se]=null}),Xl()),~ie?(X=De[ie],X||(X=De[ie]=Be[ie](le),X.c()),lt(X,1),X.m(ye,null)):X=null),(!ee||_e[0]&16)&&B(Ie,"active",le[4]==="add"),le[13]>0?Te?Te.p(le,_e):(Te=jl(le),Te.c(),Te.m(V,null)):Te&&(Te.d(1),Te=null),(!ee||_e[0]&16)&&B(Ce,"active",le[4]==="study"),(!ee||_e[0]&16)&&B(we,"active",le[4]==="lists")},i(le){ee||(lt(X),ee=!0)},o(le){ht(X),ee=!1},d(le){le&&I(e),te&&te.d(),ne&&ne.d(),Q&&Q.d(),ue&&ue.d(),F&&F.d(),~ie&&De[ie].d(),Te&&Te.d(),Me=!1,Je(me)}}}function Ll(l){return l<.01?`$${l.toFixed(6)}`:l<1?`$${l.toFixed(4)}`:`$${l.toFixed(2)}`}function bi(l,e,t){let i,r,o,c,d,a,u,p,v,h,k,w;Qe(l,Re,G=>t(28,h=G)),Qe(l,We,G=>t(29,k=G)),Qe(l,Xe,G=>t(30,w=G));let m="study",_=!1,b="",C=!1,L=0,j=!1,D="",E="",S=!1,T="",y=!1;function N(){typeof localStorage<"u"&&t(7,L=parseFloat(localStorage.getItem("ai_total_cost")||"0")),t(5,_=!0)}function H(){typeof localStorage<"u"&&(localStorage.setItem("ai_token",b),t(6,C=!0),setTimeout(()=>{t(6,C=!1),t(5,_=!1)},1e3))}function A(){t(0,b=""),typeof localStorage<"u"&&localStorage.removeItem("ai_token")}function q(){t(9,D=T),t(10,E=""),t(8,j=!0)}async function W(){if(!D.trim()){t(1,T=""),typeof localStorage<"u"&&localStorage.removeItem("user_name"),t(8,j=!1);return}t(11,S=!0),t(10,E="");try{const Z=await fetch(`/flash/words/${D.trim()}.json`);if(!Z.ok)throw new Error("Файл не найден");const K=await Z.json(),we=K.language||"en";K.language&&Ze.set(K.language),t(1,T=D.trim()),typeof localStorage<"u"&&localStorage.setItem("user_name",T);let ee;if(we==="en"?ee="default":(ee=T,Re.resetDictionary(ee)),Re.importCards(K,ee),we==="en"){if(!i.find(me=>me.id==="default")){const me=`${Ye("en")} (default)`;Xe.addDictionary("default",me,"en",!1)}We.set("default")}else{const Me=`${T} (${Ye(we)})`;Xe.addDictionary(T,Me,we,!1),We.set(T)}t(8,j=!1)}catch{t(10,E=`Файл "${D.trim()}.json" не найден`)}finally{t(11,S=!1)}}async function z(G){if(!G){We.set(""),t(12,y=!1);return}const Z=i.find(K=>K.id===G);if(Z){We.set(G),Z.language&&Ze.set(Z.language),t(12,y=!1);return}t(11,S=!0);try{const we=await fetch(`/flash/words/${G}.json`);if(!we.ok)throw new Error("Файл не найден");const ee=await we.json(),Me=ee.language||"en";ee.language&&Ze.set(ee.language);let me;if(Me==="en"?me="default":(me=G,Re.resetDictionary(me)),Re.importCards(ee,me),Me==="en"){if(!i.find(ne=>ne.id==="default")){const ne=`${Ye("en")} (default)`;Xe.addDictionary("default",ne,"en",!1)}We.set("default")}else{const te=`${G} (${Ye(Me)})`;Xe.addDictionary(G,te,Me,!1),We.set(G)}t(12,y=!1)}catch(K){console.error("Ошибка загрузки словаря:",K),alert(`Ошибка загрузки словаря "${G}"`)}finally{t(11,S=!1)}}function O(G){if(G===r){t(12,y=!1);return}z(G)}Dl(()=>{if(!i.find(Z=>Z.id==="default")){const Z=`${Ye("en")} (default)`;Xe.addDictionary("default",Z,"en",!1),(!r||r==="")&&We.set("default")}if(r){const Z=i.find(K=>K.id===r);Z&&(Z.isImported||r==="default")?Z.language&&Ze.set(Z.language):z(r)}else{We.set("default");const Z=i.find(K=>K.id==="default");Z&&Z.language&&Ze.set(Z.language)}});function J(G){y&&!G.target.closest(".dictionary-selector")&&t(12,y=!1)}function re(){t(9,D=""),t(1,T=""),typeof localStorage<"u"&&localStorage.removeItem("user_name")}const oe=(G,Z)=>G.filter(K=>(K.dictionaryId||"default")===Z);function he(G){tt.call(this,l,G)}function fe(G){tt.call(this,l,G)}function de(G){tt.call(this,l,G)}const ye=()=>t(12,y=!y),ie=G=>O(G.id),X=()=>t(5,_=!1);function ae(){b=this.value,t(0,b)}const ge=()=>t(5,_=!1),Ie=()=>t(5,_=!1),Ne=()=>t(8,j=!1);function Ce(){D=this.value,t(9,D)}const V=G=>G.key==="Enter"&&W(),pe=()=>t(8,j=!1),ve=()=>t(8,j=!1),ce=()=>t(4,m="add"),ke=()=>t(4,m="study"),Le=()=>t(4,m="lists");return l.$$.update=()=>{var G;if(l.$$.dirty[0]&536870912&&t(2,r=k),l.$$.dirty[0]&268435460&&r){const Z={learned:h.learned.filter(K=>(K.dictionaryId||"default")===r),unlearned:h.unlearned.filter(K=>(K.dictionaryId||"default")===r),draft:(h.draft||[]).filter(K=>(K.dictionaryId||"default")===r)};Xe.updateDictionaryData(r,Z)}l.$$.dirty[0]&1073741824&&t(3,i=w),l.$$.dirty[0]&1&&t(16,o=b&&b.length>0),l.$$.dirty[0]&2&&t(15,c=T&&T.length>0),l.$$.dirty[0]&12&&i.length>0&&(!r||r==="")&&(i.find(K=>K.id==="default")?We.set("default"):i.length>0&&We.set(i[0].id)),l.$$.dirty[0]&12&&t(14,d=((G=i.find(Z=>Z.id===r))==null?void 0:G.name)||(i.length>0?"Выберите словарь":"Нет словарей")),l.$$.dirty[0]&268435460&&t(27,a=oe(h.learned,r)),l.$$.dirty[0]&268435460&&t(26,u=oe(h.unlearned,r)),l.$$.dirty[0]&268435460&&t(25,p=oe(h.draft||[],r)),l.$$.dirty[0]&234881024&&a.length+u.length+p.length,l.$$.dirty[0]&67108864&&t(13,v=u.length),l.$$.dirty[0]&33554432&&p.length},[b,T,r,i,m,_,C,L,j,D,E,S,y,v,d,c,o,N,H,A,q,W,O,J,re,p,u,a,h,k,w,he,fe,de,ye,ie,X,ae,ge,Ie,Ne,Ce,V,pe,ve,ce,ke,Le]}class Ci extends wt{constructor(e){super(),kt(this,e,bi,wi,at,{},null,[-1,-1])}}new Ci({target:document.getElementById("app")});
