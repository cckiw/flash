var El=Object.defineProperty;var Ol=(l,e,t)=>e in l?El(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var xe=(l,e,t)=>Ol(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function ye(){}function Il(l){return l()}function Bt(){return Object.create(null)}function je(l){l.forEach(Il)}function Ml(l){return typeof l=="function"}function at(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let ht;function Ve(l,e){return l===e?!0:(ht||(ht=document.createElement("a")),ht.href=e,l===ht.href)}function Ul(l){return Object.keys(l).length===0}function Hl(l,...e){if(l==null){for(const i of e)i(void 0);return ye}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Qe(l,e,t){l.$$.on_destroy.push(Hl(e,t))}function s(l,e){l.appendChild(e)}function D(l,e,t){l.insertBefore(e,t||null)}function M(l){l.parentNode&&l.parentNode.removeChild(l)}function Rl(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function d(l){return document.createElement(l)}function P(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function J(l){return document.createTextNode(l)}function g(){return J(" ")}function nt(){return J("")}function H(l,e,t,i){return l.addEventListener(e,t,i),()=>l.removeEventListener(e,t,i)}function Jl(l){return function(e){return e.preventDefault(),l.call(this,e)}}function $e(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function n(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function jl(l){return Array.from(l.childNodes)}function $(l,e){e=""+e,l.data!==e&&(l.data=e)}function Ue(l,e){l.value=e??""}function Pl(l,e,t,i){l.style.setProperty(e,t,"")}function A(l,e,t){l.classList.toggle(e,!!t)}class ql{constructor(e=!1){xe(this,"is_svg",!1);xe(this,"e");xe(this,"n");xe(this,"t");xe(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=P(t.nodeName):this.e=d(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)D(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(M)}}let pt;function ut(l){pt=l}function Dl(){if(!pt)throw new Error("Function called outside component initialization");return pt}function Nl(l){Dl().$$.on_mount.push(l)}function Fl(l){Dl().$$.on_destroy.push(l)}function tt(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const rt=[],Lt=[];let ot=[];const At=[],Wl=Promise.resolve();let Tt=!1;function zl(){Tt||(Tt=!0,Wl.then(Bl))}function It(l){ot.push(l)}const St=new Set;let it=0;function Bl(){if(it!==0)return;const l=pt;do{try{for(;it<rt.length;){const e=rt[it];it++,ut(e),Vl(e.$$)}}catch(e){throw rt.length=0,it=0,e}for(ut(null),rt.length=0,it=0;Lt.length;)Lt.pop()();for(let e=0;e<ot.length;e+=1){const t=ot[e];St.has(t)||(St.add(t),t())}ot.length=0}while(rt.length);for(;At.length;)At.pop()();Tt=!1,St.clear(),ut(l)}function Vl(l){if(l.fragment!==null){l.update(),je(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(It)}}function Gl(l){const e=[],t=[];ot.forEach(i=>l.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),ot=e}const mt=new Set;let et;function Kl(){et={r:0,c:[],p:et}}function Xl(){et.r||je(et.c),et=et.p}function lt(l,e){l&&l.i&&(mt.delete(l),l.i(e))}function vt(l,e,t,i){if(l&&l.o){if(mt.has(l))return;mt.add(l),et.c.push(()=>{mt.delete(l),i&&(t&&l.d(1),i())}),l.o(e)}else i&&i()}function _t(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Yl(l,e){l.d(1),e.delete(l.key)}function Ql(l,e,t,i,r,o,c,u,a,f,p,h){let v=l.length,k=o.length,b=v;const m={};for(;b--;)m[l[b].key]=b;const _=[],y=new Map,C=new Map,T=[];for(b=k;b--;){const S=h(r,o,b),I=t(S);let w=c.get(I);w?T.push(()=>w.p(S,e)):(w=f(I,S),w.c()),y.set(I,_[b]=w),I in m&&C.set(I,Math.abs(b-m[I]))}const L=new Set,N=new Set;function O(S){lt(S,1),S.m(u,p),c.set(S.key,S),p=S.first,k--}for(;v&&k;){const S=_[k-1],I=l[v-1],w=S.key,B=I.key;S===I?(p=S.first,v--,k--):y.has(B)?!c.has(w)||L.has(w)?O(S):N.has(B)?v--:C.get(w)>C.get(B)?(N.add(w),O(S)):(L.add(B),v--):(a(I,c),v--)}for(;v--;){const S=l[v];y.has(S.key)||a(S,c)}for(;k;)O(_[k-1]);return je(T),_}function Dt(l){l&&l.c()}function gt(l,e,t){const{fragment:i,after_update:r}=l.$$;i&&i.m(e,t),It(()=>{const o=l.$$.on_mount.map(Il).filter(Ml);l.$$.on_destroy?l.$$.on_destroy.push(...o):je(o),l.$$.on_mount=[]}),r.forEach(It)}function wt(l,e){const t=l.$$;t.fragment!==null&&(Gl(t.after_update),je(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Zl(l,e){l.$$.dirty[0]===-1&&(rt.push(l),zl(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function kt(l,e,t,i,r,o,c=null,u=[-1]){const a=pt;ut(l);const f=l.$$={fragment:null,ctx:[],props:o,update:ye,not_equal:r,bound:Bt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Bt(),dirty:u,skip_bound:!1,root:e.target||a.$$.root};c&&c(f.root);let p=!1;if(f.ctx=t?t(l,e.props||{},(h,v,...k)=>{const b=k.length?k[0]:v;return f.ctx&&r(f.ctx[h],f.ctx[h]=b)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](b),p&&Zl(l,h)),v}):[],f.update(),p=!0,je(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const h=jl(e.target);f.fragment&&f.fragment.l(h),h.forEach(M)}else f.fragment&&f.fragment.c();e.intro&&lt(l.$$.fragment),gt(l,e.target,e.anchor),Bl()}ut(a)}class bt{constructor(){xe(this,"$$");xe(this,"$$set")}$destroy(){wt(this,1),this.$destroy=ye}$on(e,t){if(!Ml(t))return ye;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Ul(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xl);const st=[];function yt(l,e=ye){let t;const i=new Set;function r(u){if(at(l,u)&&(l=u,t)){const a=!st.length;for(const f of i)f[1](),st.push(f,l);if(a){for(let f=0;f<st.length;f+=2)st[f][0](st[f+1]);st.length=0}}}function o(u){r(u(l))}function c(u,a=ye){const f=[u,a];return i.add(f),i.size===1&&(t=e(r,o)||ye),u(l),()=>{i.delete(f),i.size===0&&t&&(t(),t=null)}}return{set:r,update:o,subscribe:c}}const ze="flash-cards-data";function $l(){const l=typeof localStorage<"u"?localStorage.getItem(ze):null,e=l?JSON.parse(l):{learned:[],unlearned:[],draft:[]};e.cards&&e.cards.length>0&&(e.unlearned=[...e.unlearned,...e.cards],delete e.cards),e.draft||(e.draft=[]);const t=a=>a.map(f=>({...f,dictionaryId:f.dictionaryId||"default"}));e.learned=t(e.learned),e.unlearned=t(e.unlearned),e.draft=t(e.draft);const i=new Set,r=a=>a.filter(f=>i.has(f.id)?!1:(i.add(f.id),!0));e.learned=r(e.learned),e.unlearned=r(e.unlearned),e.draft=r(e.draft),typeof localStorage<"u"&&l&&localStorage.setItem(ze,JSON.stringify(e));const{subscribe:o,set:c,update:u}=yt(e);return{subscribe:o,addCard:(a,f,p="",h="",v="default")=>{u(k=>{const b={id:Date.now(),word:a,translation:f,association:p,imageUrl:h,dictionaryId:v,createdAt:new Date().toISOString()},m={...k,unlearned:[...k.unlearned,b]};return localStorage.setItem(ze,JSON.stringify(m)),m})},markAsLearned:a=>{u(f=>{const p=f.unlearned.find(v=>v.id===a);if(!p)return f;const h={...f,unlearned:f.unlearned.filter(v=>v.id!==a),learned:[...f.learned,{...p,learnedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(h)),h})},markAsUnlearned:a=>{u(f=>{const p=f.unlearned.find(v=>v.id===a);if(!p)return f;const h={...f,unlearned:[...f.unlearned.filter(v=>v.id!==a),{...p,reviewedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(h)),h})},moveToStudy:a=>{u(f=>{const p=f.learned.find(v=>v.id===a);if(!p)return f;const h={...f,learned:f.learned.filter(v=>v.id!==a),unlearned:[...f.unlearned,p]};return localStorage.setItem(ze,JSON.stringify(h)),h})},moveAllToStudy:()=>{u(a=>{if(a.learned.length===0)return a;const f={...a,learned:[],unlearned:[...a.unlearned,...a.learned]};return localStorage.setItem(ze,JSON.stringify(f)),f})},deleteCard:(a,f="unlearned")=>{u(p=>{const h={...p,[f]:p[f].filter(v=>v.id!==a)};return localStorage.setItem(ze,JSON.stringify(h)),h})},editCard:(a,f,p)=>{u(h=>{const v={...h,[f]:h[f].map(k=>k.id===a?{...k,...p,updatedAt:new Date().toISOString()}:k)};return localStorage.setItem(ze,JSON.stringify(v)),v})},addDraftCards:(a,f="default")=>{u(p=>{const h=new Set([...p.unlearned.map(m=>m.word.toLowerCase()),...p.learned.map(m=>m.word.toLowerCase()),...p.draft.map(m=>m.word.toLowerCase())]);let v=0;const k=a.filter(m=>m.trim()&&!h.has(m.trim().toLowerCase())).map(m=>({id:`draft_${Date.now()}_${v++}_${Math.random().toString(36).substr(2,9)}`,word:m.trim(),translation:"",association:"",imageUrl:"",dictionaryId:f,createdAt:new Date().toISOString(),isDraft:!0})),b={...p,draft:[...p.draft,...k]};return localStorage.setItem(ze,JSON.stringify(b)),b})},activateCard:a=>{u(f=>{const p=f.draft.find(b=>b.id===a);if(!p)return f;const{isDraft:h,...v}=p,k={...f,draft:f.draft.filter(b=>b.id!==a),unlearned:[...f.unlearned,{...v,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(k)),k})},editDraftCard:(a,f)=>{u(p=>{var b,m;const h=p.draft.find(_=>_.id===a);if(!h)return p;const v={...h,...f,updatedAt:new Date().toISOString()};if(((b=v.translation)==null?void 0:b.trim())&&((m=v.imageUrl)==null?void 0:m.trim())){const{isDraft:_,...y}=v,C={...p,draft:p.draft.filter(T=>T.id!==a),unlearned:[...p.unlearned,{...y,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(C)),C}else{const _={...p,draft:p.draft.map(y=>y.id===a?v:y)};return localStorage.setItem(ze,JSON.stringify(_)),_}})},reset:()=>{const a={learned:[],unlearned:[],draft:[]};localStorage.setItem(ze,JSON.stringify(a)),c(a)},resetDictionary:a=>{u(f=>{const p={learned:f.learned.filter(h=>(h.dictionaryId||"default")!==a),unlearned:f.unlearned.filter(h=>(h.dictionaryId||"default")!==a),draft:f.draft.filter(h=>(h.dictionaryId||"default")!==a)};return localStorage.setItem(ze,JSON.stringify(p)),p})},importCards:(a,f)=>{u(p=>{const h=a.unlearned||[],v=a.learned||[],k=a.draft||[],b=S=>S.map(I=>({...I,dictionaryId:f||"default"})),m=b(h),_=b(v),y=b(k),C=new Set([...p.unlearned.map(S=>S.word.toLowerCase()),...p.learned.map(S=>S.word.toLowerCase()),...p.draft.map(S=>S.word.toLowerCase())]),T=m.filter(S=>!C.has(S.word.toLowerCase())),L=_.filter(S=>!C.has(S.word.toLowerCase())),N=y.filter(S=>!C.has(S.word.toLowerCase())),O={learned:[...p.learned,...L],unlearned:[...p.unlearned,...T],draft:[...p.draft,...N]};return localStorage.setItem(ze,JSON.stringify(O)),O})}}}const Je=$l(),en={en:"Английский",pt:"Португальский",es:"Испанский"},tn={en:"English",pt:"Portuguese",es:"Spanish"},ln=typeof localStorage<"u"&&localStorage.getItem("target_language")||"en",Ze=yt(ln);Ze.subscribe(l=>{typeof localStorage<"u"&&localStorage.setItem("target_language",l)});function Ye(l){return en[l]||l}function nn(l){return tn[l]||l}const ft="loaded-dictionaries",Mt="current_dictionary",sn=typeof localStorage<"u"&&localStorage.getItem(Mt)||"",We=yt(sn);We.subscribe(l=>{typeof localStorage<"u"&&(l?localStorage.setItem(Mt,l):localStorage.removeItem(Mt))});function rn(){const l=typeof localStorage<"u"?localStorage.getItem(ft):null,e=l?JSON.parse(l):[],{subscribe:t,set:i,update:r}=yt(e);return{subscribe:t,addDictionary:(o,c,u,a=!1)=>{r(f=>{if(f.find(k=>k.id===o))return f.map(k=>k.id===o?{...k,name:c,language:u,isImported:a}:k);const h={id:o,name:c,language:u,isImported:a},v=[...f,h];return typeof localStorage<"u"&&localStorage.setItem(ft,JSON.stringify(v)),v})},removeDictionary:o=>{r(c=>{const u=c.filter(a=>a.id!==o);return typeof localStorage<"u"&&localStorage.setItem(ft,JSON.stringify(u)),u})},clear:()=>{typeof localStorage<"u"&&localStorage.removeItem(ft),i([])},updateDictionaryData:(o,c)=>{r(u=>{const a=u.map(f=>f.id===o?{...f,data:c}:f);return typeof localStorage<"u"&&localStorage.setItem(ft,JSON.stringify(a)),a})}}}const Xe=rn();function on(l){let e;return{c(){e=d("div"),e.innerHTML='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-1wg5uvi"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg> <span class="svelte-1wg5uvi">Нажмите, чтобы добавить изображение</span>',n(e,"class","image-placeholder svelte-1wg5uvi")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function an(l){let e,t,i,r;return{c(){e=d("img"),Ve(e.src,t=l[4])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","preview-image svelte-1wg5uvi")},m(o,c){D(o,e,c),i||(r=H(e,"error",l[21]),i=!0)},p(o,c){c[0]&16&&!Ve(e.src,t=o[4])&&n(e,"src",t)},d(o){o&&M(e),i=!1,r()}}}function Et(l){let e;return{c(){e=d("div"),e.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
      Карточка добавлена!`,n(e,"class","success-toast svelte-1wg5uvi")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Ot(l){let e,t,i,r,o,c=l[9]>0?`Импортировано ${l[9]} карточек!`:"Новых карточек не найдено",u;return{c(){e=d("div"),t=P("svg"),i=P("polyline"),r=P("line"),o=g(),u=J(c),n(i,"points","17 8 12 3 7 8"),n(r,"x1","12"),n(r,"y1","3"),n(r,"x2","12"),n(r,"y2","15"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast import svelte-1wg5uvi")},m(a,f){D(a,e,f),s(e,t),s(t,i),s(t,r),s(e,o),s(e,u)},p(a,f){f[0]&512&&c!==(c=a[9]>0?`Импортировано ${a[9]} карточек!`:"Новых карточек не найдено")&&$(u,c)},d(a){a&&M(e)}}}function Ut(l){let e,t,i,r,o,c,u,a,f,p=l[12]>0?`Добавлено ${l[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)",h;return{c(){e=d("div"),t=P("svg"),i=P("line"),r=P("line"),o=P("line"),c=P("line"),u=P("line"),a=P("line"),f=g(),h=J(p),n(i,"x1","8"),n(i,"y1","6"),n(i,"x2","21"),n(i,"y2","6"),n(r,"x1","8"),n(r,"y1","12"),n(r,"x2","21"),n(r,"y2","12"),n(o,"x1","8"),n(o,"y1","18"),n(o,"x2","21"),n(o,"y2","18"),n(c,"x1","3"),n(c,"y1","6"),n(c,"x2","3.01"),n(c,"y2","6"),n(u,"x1","3"),n(u,"y1","12"),n(u,"x2","3.01"),n(u,"y2","12"),n(a,"x1","3"),n(a,"y1","18"),n(a,"x2","3.01"),n(a,"y2","18"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast bulk svelte-1wg5uvi")},m(v,k){D(v,e,k),s(e,t),s(t,i),s(t,r),s(t,o),s(t,c),s(t,u),s(t,a),s(e,f),s(e,h)},p(v,k){k[0]&4096&&p!==(p=v[12]>0?`Добавлено ${v[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)")&&$(h,p)},d(v){v&&M(e)}}}function Ht(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y,C,T,L,N,O,S,I=l[7]&&Rt(l),w=l[4]&&Jt(l);return{c(){e=d("div"),t=d("div"),i=d("div"),r=d("h2"),r.textContent="Добавить изображение",o=g(),c=d("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',u=g(),a=d("div"),f=d("div"),p=d("label"),p.textContent="Ссылка на изображение",h=g(),v=d("input"),k=g(),I&&I.c(),b=g(),m=d("div"),w&&w.c(),_=g(),y=d("button"),y.textContent="Отмена",C=g(),T=d("button"),L=J("Сохранить"),n(r,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(p,"for","imageUrl"),n(p,"class","svelte-1wg5uvi"),n(v,"id","imageUrl"),n(v,"type","url"),n(v,"placeholder","https://example.com/image.jpg"),n(v,"class","svelte-1wg5uvi"),n(f,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(y,"class","btn-secondary svelte-1wg5uvi"),n(T,"class","btn-primary svelte-1wg5uvi"),T.disabled=N=l[8]&&l[7],n(m,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(B,R){D(B,e,R),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,u),s(t,a),s(a,f),s(f,p),s(f,h),s(f,v),Ue(v,l[7]),s(a,k),I&&I.m(a,null),s(t,b),s(t,m),w&&w.m(m,null),s(m,_),s(m,y),s(m,C),s(m,T),s(T,L),O||(S=[H(c,"click",l[35]),H(v,"input",l[36]),H(y,"click",l[37]),H(T,"click",l[19]),H(t,"click",$e(l[30])),H(e,"click",l[38]),H(e,"keydown",l[39])],O=!0)},p(B,R){R[0]&128&&v.value!==B[7]&&Ue(v,B[7]),B[7]?I?I.p(B,R):(I=Rt(B),I.c(),I.m(a,null)):I&&(I.d(1),I=null),B[4]?w?w.p(B,R):(w=Jt(B),w.c(),w.m(m,_)):w&&(w.d(1),w=null),R[0]&384&&N!==(N=B[8]&&B[7])&&(T.disabled=N)},d(B){B&&M(e),I&&I.d(),w&&w.d(),O=!1,je(S)}}}function Rt(l){let e;function t(o,c){return o[8]?dn:cn}let i=t(l),r=i(l);return{c(){e=d("div"),r.c(),n(e,"class","image-preview-container svelte-1wg5uvi")},m(o,c){D(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null)))},d(o){o&&M(e),r.d()}}}function cn(l){let e,t,i,r;return{c(){e=d("img"),Ve(e.src,t=l[7])||n(e,"src",t),n(e,"alt","Превью изображения"),n(e,"class","modal-image-preview svelte-1wg5uvi")},m(o,c){D(o,e,c),i||(r=[H(e,"error",l[21]),H(e,"load",l[22])],i=!0)},p(o,c){c[0]&128&&!Ve(e.src,t=o[7])&&n(e,"src",t)},d(o){o&&M(e),i=!1,je(r)}}}function dn(l){let e;return{c(){e=d("div"),e.innerHTML='<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Не удалось загрузить изображение</span>',n(e,"class","image-error svelte-1wg5uvi")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function Jt(l){let e,t,i;return{c(){e=d("button"),e.textContent="Удалить",n(e,"class","btn-secondary danger svelte-1wg5uvi")},m(r,o){D(r,e,o),t||(i=H(e,"click",l[20]),t=!0)},p:ye,d(r){r&&M(e),t=!1,i()}}}function jt(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y,C,T,L,N,O,S,I,w=(l[15]>0?l[15]:"")+"",B,R,E=l[15]===1?"слово":l[15]>1&&l[15]<5?"слова":l[15]>=5?"слов":"",q,W,z,U,j=l[15]>0&&Pt(l);return{c(){e=d("div"),t=d("div"),i=d("div"),r=d("h2"),r.textContent="Загрузить список слов",o=g(),c=d("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',u=g(),a=d("div"),f=d("div"),f.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg> <p class="svelte-1wg5uvi">Введите слова списком — каждое слово на новой строке. Слова будут добавлены в раздел &quot;На проработку&quot;, где вы сможете добавить перевод и изображение.</p>',p=g(),h=d("div"),v=d("label"),k=J(`Слова
            `),j&&j.c(),b=g(),m=d("textarea"),_=g(),y=d("div"),C=d("button"),C.textContent="Отмена",T=g(),L=d("button"),N=P("svg"),O=P("line"),S=P("line"),I=J(`
          Добавить `),B=J(w),R=g(),q=J(E),n(r,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(f,"class","bulk-info svelte-1wg5uvi"),n(v,"for","bulkWords"),n(v,"class","svelte-1wg5uvi"),n(m,"id","bulkWords"),n(m,"placeholder",`serendipity
ephemeral
ubiquitous
eloquent
resilient`),n(m,"rows","10"),n(m,"class","bulk-textarea svelte-1wg5uvi"),n(h,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(C,"class","btn-secondary svelte-1wg5uvi"),n(O,"x1","12"),n(O,"y1","5"),n(O,"x2","12"),n(O,"y2","19"),n(S,"x1","5"),n(S,"y1","12"),n(S,"x2","19"),n(S,"y2","12"),n(N,"width","18"),n(N,"height","18"),n(N,"viewBox","0 0 24 24"),n(N,"fill","none"),n(N,"stroke","currentColor"),n(N,"stroke-width","2"),n(L,"class","btn-primary svelte-1wg5uvi"),L.disabled=W=l[15]===0,n(y,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal bulk-modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(re,oe){D(re,e,oe),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,u),s(t,a),s(a,f),s(a,p),s(a,h),s(h,v),s(v,k),j&&j.m(v,null),s(h,b),s(h,m),Ue(m,l[0]),s(t,_),s(t,y),s(y,C),s(y,T),s(y,L),s(L,N),s(N,O),s(N,S),s(L,I),s(L,B),s(L,R),s(L,q),z||(U=[H(c,"click",l[26]),H(m,"input",l[40]),H(C,"click",l[26]),H(L,"click",l[27]),H(t,"click",$e(l[29])),H(e,"click",l[26]),H(e,"keydown",l[41])],z=!0)},p(re,oe){re[15]>0?j?j.p(re,oe):(j=Pt(re),j.c(),j.m(v,null)):j&&(j.d(1),j=null),oe[0]&1&&Ue(m,re[0]),oe[0]&32768&&w!==(w=(re[15]>0?re[15]:"")+"")&&$(B,w),oe[0]&32768&&E!==(E=re[15]===1?"слово":re[15]>1&&re[15]<5?"слова":re[15]>=5?"слов":"")&&$(q,E),oe[0]&32768&&W!==(W=re[15]===0)&&(L.disabled=W)},d(re){re&&M(e),j&&j.d(),z=!1,je(U)}}}function Pt(l){let e,t,i,r=l[15]===1?"слово":l[15]<5?"слова":"слов",o;return{c(){e=d("span"),t=J(l[15]),i=g(),o=J(r),n(e,"class","word-count svelte-1wg5uvi")},m(c,u){D(c,e,u),s(e,t),s(e,i),s(e,o)},p(c,u){u[0]&32768&&$(t,c[15]),u[0]&32768&&r!==(r=c[15]===1?"слово":c[15]<5?"слова":"слов")&&$(o,r)},d(c){c&&M(e)}}}function fn(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y,C,T,L=l[16].toLowerCase()+"",N,O,S,I=l[1].length+"",w,B,R,E,q,W,z,U,j,re=l[2].length+"",oe,ve,de,ue,we,ie,X,ae,ge,Me,Be,Ce=l[3].length+"",V,pe,he,ce,ke,Te,G,Z,K,be,ee,De,me,te,ne=(l[1]||"Слово")+"",Q,fe,F,Ae=(l[2]||"Перевод")+"",Ne,Ge,Ie,le,_e,se,Ee,ct,Y;function Fe(x,Le){return x[4]?an:on}let Ke=Fe(l),Pe=Ke(l),qe=l[5]&&Et(),Se=l[10]&&Ot(l),Re=l[13]&&Ut(l),Oe=l[6]&&Ht(l),He=l[11]&&jt(l);return{c(){e=d("input"),t=g(),i=d("div"),r=d("div"),o=d("div"),c=d("h1"),c.textContent="Новая карточка",u=g(),a=d("div"),f=d("button"),f.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',p=g(),h=d("button"),h.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>',v=g(),k=d("p"),k.textContent="Добавьте слово для изучения",b=g(),m=d("div"),_=d("form"),y=d("div"),C=d("label"),T=J("Слово ("),N=J(L),O=J(`)
          `),S=d("span"),w=J(I),B=J("/35"),R=g(),E=d("input"),q=g(),W=d("div"),z=d("label"),U=J(`Перевод
          `),j=d("span"),oe=J(re),ve=J("/50"),de=g(),ue=d("input"),we=g(),ie=d("div"),X=d("label"),ae=J(`Ассоциация 
          `),ge=d("span"),ge.textContent="(необязательно)",Me=g(),Be=d("span"),V=J(Ce),pe=J("/95"),he=g(),ce=d("textarea"),ke=g(),Te=d("button"),Te.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        Добавить карточку`,G=g(),Z=d("div"),K=d("span"),K.textContent="Превью карточки",be=g(),ee=d("button"),Pe.c(),De=g(),me=d("div"),te=d("div"),Q=J(ne),fe=g(),F=d("div"),Ne=J(Ae),Ge=g(),qe&&qe.c(),Ie=g(),Se&&Se.c(),le=g(),Re&&Re.c(),_e=g(),Oe&&Oe.c(),se=g(),He&&He.c(),Ee=nt(),n(e,"type","file"),n(e,"accept",".json"),Pl(e,"display","none"),n(e,"class","svelte-1wg5uvi"),n(c,"class","svelte-1wg5uvi"),n(f,"type","button"),n(f,"class","import-btn bulk svelte-1wg5uvi"),n(f,"title","Загрузить список слов"),n(h,"type","button"),n(h,"class","import-btn svelte-1wg5uvi"),n(h,"title","Импорт из JSON"),n(a,"class","header-actions svelte-1wg5uvi"),n(o,"class","header-top svelte-1wg5uvi"),n(k,"class","subtitle svelte-1wg5uvi"),n(r,"class","header svelte-1wg5uvi"),n(S,"class","char-count svelte-1wg5uvi"),A(S,"limit",l[1].length>=35),n(C,"for","word"),n(C,"class","svelte-1wg5uvi"),n(E,"id","word"),n(E,"type","text"),n(E,"placeholder","например: serendipity"),n(E,"maxlength","35"),E.required=!0,n(E,"class","svelte-1wg5uvi"),n(y,"class","input-group svelte-1wg5uvi"),n(j,"class","char-count svelte-1wg5uvi"),A(j,"limit",l[2].length>=50),n(z,"for","translation"),n(z,"class","svelte-1wg5uvi"),n(ue,"id","translation"),n(ue,"type","text"),n(ue,"placeholder","например: счастливая случайность"),n(ue,"maxlength","50"),ue.required=!0,n(ue,"class","svelte-1wg5uvi"),n(W,"class","input-group svelte-1wg5uvi"),n(ge,"class","optional svelte-1wg5uvi"),n(Be,"class","char-count svelte-1wg5uvi"),A(Be,"limit",l[3].length>=95),n(X,"for","association"),n(X,"class","svelte-1wg5uvi"),n(ce,"id","association"),n(ce,"placeholder","например: представьте, как вы случайно находите клад под деревом"),n(ce,"maxlength","95"),n(ce,"rows","2"),n(ce,"class","svelte-1wg5uvi"),n(ie,"class","input-group svelte-1wg5uvi"),n(Te,"type","submit"),n(Te,"class","submit-btn svelte-1wg5uvi"),n(_,"class","form svelte-1wg5uvi"),n(K,"class","preview-label svelte-1wg5uvi"),n(te,"class","preview-word svelte-1wg5uvi"),n(F,"class","preview-translation svelte-1wg5uvi"),n(me,"class","card-content-preview svelte-1wg5uvi"),n(ee,"type","button"),n(ee,"class","card-preview svelte-1wg5uvi"),A(ee,"has-image",l[4]),n(Z,"class","card-preview-wrapper svelte-1wg5uvi"),n(m,"class","card-editor svelte-1wg5uvi"),n(i,"class","add-card-container svelte-1wg5uvi")},m(x,Le){D(x,e,Le),l[31](e),D(x,t,Le),D(x,i,Le),s(i,r),s(r,o),s(o,c),s(o,u),s(o,a),s(a,f),s(a,p),s(a,h),s(r,v),s(r,k),s(i,b),s(i,m),s(m,_),s(_,y),s(y,C),s(C,T),s(C,N),s(C,O),s(C,S),s(S,w),s(S,B),s(y,R),s(y,E),Ue(E,l[1]),s(_,q),s(_,W),s(W,z),s(z,U),s(z,j),s(j,oe),s(j,ve),s(W,de),s(W,ue),Ue(ue,l[2]),s(_,we),s(_,ie),s(ie,X),s(X,ae),s(X,ge),s(X,Me),s(X,Be),s(Be,V),s(Be,pe),s(ie,he),s(ie,ce),Ue(ce,l[3]),s(_,ke),s(_,Te),s(m,G),s(m,Z),s(Z,K),s(Z,be),s(Z,ee),Pe.m(ee,null),s(ee,De),s(ee,me),s(me,te),s(te,Q),s(me,fe),s(me,F),s(F,Ne),s(i,Ge),qe&&qe.m(i,null),s(i,Ie),Se&&Se.m(i,null),s(i,le),Re&&Re.m(i,null),D(x,_e,Le),Oe&&Oe.m(x,Le),D(x,se,Le),He&&He.m(x,Le),D(x,Ee,Le),ct||(Y=[H(e,"change",l[24]),H(f,"click",l[25]),H(h,"click",l[23]),H(E,"input",l[32]),H(ue,"input",l[33]),H(ce,"input",l[34]),H(_,"submit",Jl(l[17])),H(ee,"click",l[18])],ct=!0)},p(x,Le){Le[0]&65536&&L!==(L=x[16].toLowerCase()+"")&&$(N,L),Le[0]&2&&I!==(I=x[1].length+"")&&$(w,I),Le[0]&2&&A(S,"limit",x[1].length>=35),Le[0]&2&&E.value!==x[1]&&Ue(E,x[1]),Le[0]&4&&re!==(re=x[2].length+"")&&$(oe,re),Le[0]&4&&A(j,"limit",x[2].length>=50),Le[0]&4&&ue.value!==x[2]&&Ue(ue,x[2]),Le[0]&8&&Ce!==(Ce=x[3].length+"")&&$(V,Ce),Le[0]&8&&A(Be,"limit",x[3].length>=95),Le[0]&8&&Ue(ce,x[3]),Ke===(Ke=Fe(x))&&Pe?Pe.p(x,Le):(Pe.d(1),Pe=Ke(x),Pe&&(Pe.c(),Pe.m(ee,De))),Le[0]&2&&ne!==(ne=(x[1]||"Слово")+"")&&$(Q,ne),Le[0]&4&&Ae!==(Ae=(x[2]||"Перевод")+"")&&$(Ne,Ae),Le[0]&16&&A(ee,"has-image",x[4]),x[5]?qe||(qe=Et(),qe.c(),qe.m(i,Ie)):qe&&(qe.d(1),qe=null),x[10]?Se?Se.p(x,Le):(Se=Ot(x),Se.c(),Se.m(i,le)):Se&&(Se.d(1),Se=null),x[13]?Re?Re.p(x,Le):(Re=Ut(x),Re.c(),Re.m(i,null)):Re&&(Re.d(1),Re=null),x[6]?Oe?Oe.p(x,Le):(Oe=Ht(x),Oe.c(),Oe.m(se.parentNode,se)):Oe&&(Oe.d(1),Oe=null),x[11]?He?He.p(x,Le):(He=jt(x),He.c(),He.m(Ee.parentNode,Ee)):He&&(He.d(1),He=null)},i:ye,o:ye,d(x){x&&(M(e),M(t),M(i),M(_e),M(se),M(Ee)),l[31](null),Pe.d(),qe&&qe.d(),Se&&Se.d(),Re&&Re.d(),Oe&&Oe.d(x),He&&He.d(x),ct=!1,je(Y)}}}function un(l,e,t){let i,r,o,c,u;Qe(l,Je,V=>t(42,o=V)),Qe(l,Xe,V=>t(43,c=V)),Qe(l,Ze,V=>t(28,u=V));let a="",f="",p="",h="",v=!1,k=!1,b="",m=!1,_=0,y=!1,C=!1,T="",L=0,N=!1;function O(){if(a.trim()&&f.trim()){let V=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"";if(!(c.length>0)||!V||V===""){const ce=`${Ye("en")} (default)`;Xe.addDictionary("default",ce,"en",!1),We.set("default"),V="default"}const he=V||"default";Je.addCard(a.trim(),f.trim(),p.trim(),h.trim(),he),t(1,a=""),t(2,f=""),t(3,p=""),t(4,h=""),t(5,v=!0),setTimeout(()=>t(5,v=!1),2e3)}}function S(){t(7,b=h),t(8,m=!1),t(6,k=!0)}function I(){b.trim()&&t(4,h=b.trim()),t(6,k=!1)}function w(){t(4,h=""),t(7,b=""),t(6,k=!1)}function B(){t(8,m=!0)}function R(){t(8,m=!1)}let E;function q(){E.click()}function W(V){const pe=V.target.files[0];if(!pe)return;const he=new FileReader;he.onload=ce=>{var ke,Te,G;try{const Z=JSON.parse(ce.target.result),K=pe.name.replace(/\.json$/i,""),be=Z.language||"en";Z.language&&Ze.set(Z.language);let ee;be==="en"?ee="default":(ee=K,Je.resetDictionary(ee));const De=(((ke=o.learned)==null?void 0:ke.length)||0)+(((Te=o.unlearned)==null?void 0:Te.length)||0)+(((G=o.draft)==null?void 0:G.length)||0);if(Je.importCards(Z,ee),be==="en"){if(!c.find(te=>te.id==="default")){const te=`${Ye("en")} (default)`;Xe.addDictionary("default",te,"en",!0)}We.set("default")}else{const me=`${K} (${Ye(be)})`;Xe.addDictionary(K,me,be,!0),We.set(K)}setTimeout(()=>{var te,ne,Q;const me=(((te=o.learned)==null?void 0:te.length)||0)+(((ne=o.unlearned)==null?void 0:ne.length)||0)+(((Q=o.draft)==null?void 0:Q.length)||0);t(9,_=me-De),t(10,y=!0),setTimeout(()=>t(10,y=!1),3e3)},100)}catch{alert("Ошибка чтения файла. Убедитесь, что это корректный JSON файл.")}},he.readAsText(pe),V.target.value=""}function z(){t(0,T=""),t(11,C=!0)}function U(){t(11,C=!1),t(0,T="")}function j(){var pe;const V=T.split(`
`).map(he=>he.trim()).filter(he=>he.length>0);if(V.length>0){const he=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"default";if(he===""){const Te=`${Ye("en")} (default)`;Xe.addDictionary("default",Te,"en",!1),We.set("default")}const ce=he,ke=((pe=o.draft)==null?void 0:pe.length)||0;Je.addDraftCards(V,ce),setTimeout(()=>{var G;const Te=((G=o.draft)==null?void 0:G.length)||0;t(12,L=Te-ke),t(13,N=!0),setTimeout(()=>t(13,N=!1),3e3)},100)}U()}function re(V){tt.call(this,l,V)}function oe(V){tt.call(this,l,V)}function ve(V){Lt[V?"unshift":"push"](()=>{E=V,t(14,E)})}function de(){a=this.value,t(1,a)}function ue(){f=this.value,t(2,f)}function we(){p=this.value,t(3,p)}const ie=()=>t(6,k=!1);function X(){b=this.value,t(7,b)}const ae=()=>t(6,k=!1),ge=()=>t(6,k=!1),Me=V=>V.key==="Escape"&&t(6,k=!1);function Be(){T=this.value,t(0,T)}const Ce=V=>V.key==="Escape"&&U();return l.$$.update=()=>{l.$$.dirty[0]&268435456&&t(16,i=Ye(u)),l.$$.dirty[0]&1&&t(15,r=T.split(`
`).filter(V=>V.trim().length>0).length)},[T,a,f,p,h,v,k,b,m,_,y,C,L,N,E,r,i,O,S,I,w,B,R,q,W,z,U,j,u,re,oe,ve,de,ue,we,ie,X,ae,ge,Me,Be,Ce]}class pn extends bt{constructor(e){super(),kt(this,e,un,fn,at,{},null,[-1,-1])}}function vn(l){let e;return{c(){e=J("Добавьте карточки для начала")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function hn(l){let e;return{c(){e=J("Нет карточек с изображениями")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function mn(l){let e,t,i=l[2].length+"",r,o,c,u=l[0]&&l[2].length<l[3].length&&qt();return{c(){e=J("Осталось карточек: "),t=d("span"),r=J(i),o=g(),u&&u.c(),c=nt(),n(t,"class","count svelte-1vwvdx")},m(a,f){D(a,e,f),D(a,t,f),s(t,r),D(a,o,f),u&&u.m(a,f),D(a,c,f)},p(a,f){f[0]&4&&i!==(i=a[2].length+"")&&$(r,i),a[0]&&a[2].length<a[3].length?u||(u=qt(),u.c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null)},d(a){a&&(M(e),M(t),M(o),M(c)),u&&u.d(a)}}}function qt(l){let e;return{c(){e=d("span"),e.textContent="(с изображениями)",n(e,"class","filter-note svelte-1vwvdx")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Ft(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y,C,T,L,N,O,S,I,w,B,R,E=!l[4]&&Wt();function q(U,j){return U[4]?_n:gn}let W=q(l),z=W(l);return{c(){e=d("div"),t=d("div"),i=d("button"),i.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',r=g(),o=d("h2"),o.textContent="Выбери тип упражнения",c=g(),u=d("div"),a=d("button"),f=d("span"),p=g(),h=d("div"),h.innerHTML='<span class="option-title svelte-1vwvdx">Flash Cards</span> <span class="option-desc svelte-1vwvdx">Классические карточки с переворотом</span>',v=g(),k=d("button"),b=d("span"),m=g(),_=d("div"),_.innerHTML='<span class="option-title svelte-1vwvdx">Только изображения</span> <span class="option-desc svelte-1vwvdx">Введите слово по изображению</span>',y=g(),C=d("button"),T=d("span"),L=g(),N=d("div"),O=d("span"),S=J(`Перевод предложения
                `),E&&E.c(),I=g(),w=d("span"),z.c(),n(i,"class","modal-close-btn svelte-1vwvdx"),n(o,"class","modal-title svelte-1vwvdx"),n(f,"class","option-radio svelte-1vwvdx"),A(f,"checked",l[26]),n(h,"class","option-content svelte-1vwvdx"),n(a,"class","exercise-option svelte-1vwvdx"),A(a,"active",l[26]),n(b,"class","option-radio svelte-1vwvdx"),A(b,"checked",l[0]),n(_,"class","option-content svelte-1vwvdx"),n(k,"class","exercise-option svelte-1vwvdx"),A(k,"active",l[0]),n(T,"class","option-radio svelte-1vwvdx"),A(T,"checked",l[1]),A(T,"disabled",!l[4]),n(O,"class","option-title svelte-1vwvdx"),n(w,"class","option-desc svelte-1vwvdx"),n(N,"class","option-content svelte-1vwvdx"),n(C,"class","exercise-option svelte-1vwvdx"),A(C,"active",l[1]),A(C,"disabled",!l[4]),n(u,"class","settings-options svelte-1vwvdx"),n(t,"class","settings-modal svelte-1vwvdx"),n(t,"role","dialog"),n(t,"aria-modal","true"),n(e,"class","settings-overlay svelte-1vwvdx"),n(e,"role","button"),n(e,"tabindex","-1")},m(U,j){D(U,e,j),s(e,t),s(t,i),s(t,r),s(t,o),s(t,c),s(t,u),s(u,a),s(a,f),s(a,p),s(a,h),s(u,v),s(u,k),s(k,b),s(k,m),s(k,_),s(u,y),s(u,C),s(C,T),s(C,L),s(C,N),s(N,O),s(O,S),E&&E.m(O,null),s(N,I),s(N,w),z.m(w,null),B||(R=[H(i,"click",l[55]),H(a,"click",l[28]),H(k,"click",l[29]),H(C,"click",l[30]),H(t,"click",$e(l[53])),H(e,"click",l[56]),H(e,"keydown",l[57])],B=!0)},p(U,j){j[0]&67108864&&A(f,"checked",U[26]),j[0]&67108864&&A(a,"active",U[26]),j[0]&1&&A(b,"checked",U[0]),j[0]&1&&A(k,"active",U[0]),j[0]&2&&A(T,"checked",U[1]),j[0]&16&&A(T,"disabled",!U[4]),U[4]?E&&(E.d(1),E=null):E||(E=Wt(),E.c(),E.m(O,null)),W===(W=q(U))&&z?z.p(U,j):(z.d(1),z=W(U),z&&(z.c(),z.m(w,null))),j[0]&2&&A(C,"active",U[1]),j[0]&16&&A(C,"disabled",!U[4])},d(U){U&&M(e),E&&E.d(),z.d(),B=!1,je(R)}}}function Wt(l){let e;return{c(){e=d("span"),e.textContent="AI",n(e,"class","ai-badge svelte-1vwvdx")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function _n(l){let e,t=l[27].toLowerCase()+"",i;return{c(){e=J("Переведите предложение на "),i=J(t)},m(r,o){D(r,e,o),D(r,i,o)},p(r,o){o[0]&134217728&&t!==(t=r[27].toLowerCase()+"")&&$(i,t)},d(r){r&&(M(e),M(i))}}}function gn(l){let e;return{c(){e=J("Требуется AI токен")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function wn(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="empty-icon svelte-1vwvdx"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line></svg></div> <h2 class="svelte-1vwvdx">Нет карточек для изучения</h2> <p class="svelte-1vwvdx">Добавьте новые слова или верните карточки из списков</p>',n(e,"class","empty-state svelte-1vwvdx")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function kn(l){let e;function t(o,c){return o[1]?Cn:o[0]?yn:bn}let i=t(l),r=i(l);return{c(){e=d("div"),r.c(),n(e,"class","card-area svelte-1vwvdx"),A(e,"translation-mode",l[1]&&l[12])},m(o,c){D(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),c[0]&4098&&A(e,"translation-mode",o[1]&&o[12])},d(o){o&&M(e),r.d()}}}function bn(l){let e=l[24].id,t,i,r,o,c,u,a,f=Gt(l);return{c(){f.c(),t=g(),i=d("div"),r=d("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',o=g(),c=d("button"),c.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(r,"class","action-btn unknown svelte-1vwvdx"),n(c,"class","action-btn known svelte-1vwvdx"),n(i,"class","action-buttons svelte-1vwvdx")},m(p,h){f.m(p,h),D(p,t,h),D(p,i,h),s(i,r),s(i,o),s(i,c),u||(a=[H(r,"click",l[36]),H(c,"click",l[35])],u=!0)},p(p,h){h[0]&16777216&&at(e,e=p[24].id)?(f.d(1),f=Gt(p),f.c(),f.m(t.parentNode,t)):f.p(p,h)},d(p){p&&(M(t),M(i)),f.d(p),u=!1,je(a)}}}function yn(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y=l[24].imageUrl&&Kt(l),C=l[10]&&Xt(l);return{c(){e=d("div"),t=d("div"),i=d("div"),y&&y.c(),r=g(),C&&C.c(),o=g(),c=d("div"),u=d("input"),f=g(),p=d("button"),h=P("svg"),v=P("polyline"),k=P("path"),n(i,"class","card-front has-image image-only svelte-1vwvdx"),n(t,"class","card-inner svelte-1vwvdx"),n(e,"class","card image-only-card svelte-1vwvdx"),A(e,"correct",l[10]==="correct"),A(e,"incorrect",l[10]==="incorrect"),n(u,"type","text"),n(u,"class","answer-input svelte-1vwvdx"),n(u,"placeholder","Введите слово..."),u.disabled=a=l[10]!==null,A(u,"correct",l[10]==="correct"),A(u,"incorrect",l[10]==="incorrect"),n(v,"points","9 11 12 14 22 4"),n(k,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(h,"width","24"),n(h,"height","24"),n(h,"viewBox","0 0 24 24"),n(h,"fill","none"),n(h,"stroke","currentColor"),n(h,"stroke-width","2"),n(p,"class","check-btn svelte-1vwvdx"),p.disabled=b=!l[9].trim()||l[10]!==null,n(c,"class","answer-input-area svelte-1vwvdx")},m(T,L){D(T,e,L),s(e,t),s(t,i),y&&y.m(i,null),s(i,r),C&&C.m(i,null),D(T,o,L),D(T,c,L),s(c,u),Ue(u,l[9]),s(c,f),s(c,p),s(p,h),s(h,v),s(h,k),m||(_=[H(u,"input",l[60]),H(u,"keydown",l[44]),H(p,"click",l[43])],m=!0)},p(T,L){T[24].imageUrl?y?y.p(T,L):(y=Kt(T),y.c(),y.m(i,r)):y&&(y.d(1),y=null),T[10]?C?C.p(T,L):(C=Xt(T),C.c(),C.m(i,null)):C&&(C.d(1),C=null),L[0]&1024&&A(e,"correct",T[10]==="correct"),L[0]&1024&&A(e,"incorrect",T[10]==="incorrect"),L[0]&1024&&a!==(a=T[10]!==null)&&(u.disabled=a),L[0]&512&&u.value!==T[9]&&Ue(u,T[9]),L[0]&1024&&A(u,"correct",T[10]==="correct"),L[0]&1024&&A(u,"incorrect",T[10]==="incorrect"),L[0]&1536&&b!==(b=!T[9].trim()||T[10]!==null)&&(p.disabled=b)},d(T){T&&(M(e),M(o),M(c)),y&&y.d(),C&&C.d(),m=!1,je(_)}}}function Cn(l){let e,t,i,r,o,c,u,a,f=l[24].translation+"",p,h,v,k,b,m,_,y,C,T,L,N=l[24].word+"",O,S,I,w=l[14]&&l[14]!=="grammar_error"&&Yt(l),B=l[19]&&Qt(),R=l[24].imageUrl&&Zt(l),E=l[24].association&&xt(l);function q(U,j){return U[18]?Nn:U[12]?Dn:Mn}let W=q(l),z=W(l);return{c(){e=d("div"),t=d("div"),i=d("div"),r=d("div"),o=d("div"),c=d("span"),c.textContent="Перевод",u=g(),a=d("h2"),p=J(f),h=g(),w&&w.c(),v=g(),B&&B.c(),k=g(),b=d("div"),R&&R.c(),m=g(),_=d("div"),y=d("span"),C=J(l[27]),T=g(),L=d("h2"),O=J(N),S=g(),E&&E.c(),I=g(),z.c(),n(c,"class","card-label svelte-1vwvdx"),n(a,"class","card-word svelte-1vwvdx"),n(o,"class","card-text-content svelte-1vwvdx"),n(r,"class","card-front translation-front svelte-1vwvdx"),n(y,"class","card-label svelte-1vwvdx"),n(L,"class","card-word svelte-1vwvdx"),n(_,"class","card-text-content svelte-1vwvdx"),n(b,"class","card-back translation-back svelte-1vwvdx"),A(b,"has-image",l[24].imageUrl),n(i,"class","card-inner svelte-1vwvdx"),n(t,"class","card translation-card svelte-1vwvdx"),A(t,"correct",l[14]==="correct"),A(t,"incorrect",l[14]==="incorrect"),A(t,"flipped",l[18]),n(e,"class","translation-exercise-layout svelte-1vwvdx"),A(e,"with-input",l[12]),A(e,"card-flipped",l[18])},m(U,j){D(U,e,j),s(e,t),s(t,i),s(i,r),s(r,o),s(o,c),s(o,u),s(o,a),s(a,p),s(r,h),w&&w.m(r,null),s(r,v),B&&B.m(r,null),s(i,k),s(i,b),R&&R.m(b,null),s(b,m),s(b,_),s(_,y),s(y,C),s(_,T),s(_,L),s(L,O),s(_,S),E&&E.m(_,null),s(e,I),z.m(e,null)},p(U,j){j[0]&16777216&&f!==(f=U[24].translation+"")&&$(p,f),U[14]&&U[14]!=="grammar_error"?w?w.p(U,j):(w=Yt(U),w.c(),w.m(r,v)):w&&(w.d(1),w=null),U[19]?B||(B=Qt(),B.c(),B.m(r,null)):B&&(B.d(1),B=null),U[24].imageUrl?R?R.p(U,j):(R=Zt(U),R.c(),R.m(b,m)):R&&(R.d(1),R=null),j[0]&134217728&&$(C,U[27]),j[0]&16777216&&N!==(N=U[24].word+"")&&$(O,N),U[24].association?E?E.p(U,j):(E=xt(U),E.c(),E.m(_,null)):E&&(E.d(1),E=null),j[0]&16777216&&A(b,"has-image",U[24].imageUrl),j[0]&16384&&A(t,"correct",U[14]==="correct"),j[0]&16384&&A(t,"incorrect",U[14]==="incorrect"),j[0]&262144&&A(t,"flipped",U[18]),W===(W=q(U))&&z?z.p(U,j):(z.d(1),z=W(U),z&&(z.c(),z.m(e,null))),j[0]&4096&&A(e,"with-input",U[12]),j[0]&262144&&A(e,"card-flipped",U[18])},d(U){U&&M(e),w&&w.d(),B&&B.d(),R&&R.d(),E&&E.d(),z.d()}}}function zt(l){let e,t;return{c(){e=d("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-1vwvdx")},m(i,r){D(i,e,r)},p(i,r){r[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&M(e)}}}function Vt(l){let e,t,i,r,o=l[24].association+"",c;return{c(){e=d("div"),t=d("span"),t.textContent="Ассоциация:",i=g(),r=d("p"),c=J(o),n(t,"class","association-label svelte-1vwvdx"),n(r,"class","svelte-1vwvdx"),n(e,"class","association svelte-1vwvdx")},m(u,a){D(u,e,a),s(e,t),s(e,i),s(e,r),s(r,c)},p(u,a){a[0]&16777216&&o!==(o=u[24].association+"")&&$(c,o)},d(u){u&&M(e)}}}function Gt(l){let e,t,i,r,o,c,u,a,f=l[24].word+"",p,h,v,k,b,m,_,y,C,T,L=l[24].translation+"",N,O,S,I,w=l[24].imageUrl&&zt(l),B=l[24].association&&Vt(l);return{c(){e=d("div"),t=d("div"),i=d("div"),r=d("div"),o=d("span"),c=J(l[27]),u=g(),a=d("h2"),p=J(f),h=g(),v=d("p"),v.textContent="Нажмите, чтобы увидеть перевод",k=g(),b=d("div"),w&&w.c(),m=g(),_=d("div"),y=d("span"),y.textContent="Перевод",C=g(),T=d("h2"),N=J(L),O=g(),B&&B.c(),n(o,"class","card-label svelte-1vwvdx"),n(a,"class","card-word svelte-1vwvdx"),n(v,"class","card-hint svelte-1vwvdx"),n(r,"class","card-text-content svelte-1vwvdx"),n(i,"class","card-front svelte-1vwvdx"),n(y,"class","card-label svelte-1vwvdx"),n(T,"class","card-word svelte-1vwvdx"),n(_,"class","card-text-content svelte-1vwvdx"),n(b,"class","card-back svelte-1vwvdx"),A(b,"has-image",l[24].imageUrl),n(t,"class","card-inner svelte-1vwvdx"),n(e,"class","card svelte-1vwvdx"),n(e,"style",l[42]()),n(e,"role","button"),n(e,"tabindex","0"),A(e,"flipped",l[6]),A(e,"dragging",l[7]),A(e,"swipe-left",l[8]==="left"),A(e,"swipe-right",l[8]==="right")},m(R,E){D(R,e,E),s(e,t),s(t,i),s(i,r),s(r,o),s(o,c),s(r,u),s(r,a),s(a,p),s(r,h),s(r,v),s(t,k),s(t,b),w&&w.m(b,null),s(b,m),s(b,_),s(_,y),s(_,C),s(_,T),s(T,N),s(_,O),B&&B.m(_,null),S||(I=[H(e,"mousedown",l[32]),H(e,"mousemove",l[33]),H(e,"mouseup",l[34]),H(e,"mouseleave",l[34]),H(e,"touchstart",l[32]),H(e,"touchmove",l[33]),H(e,"touchend",l[34],{passive:!0}),H(e,"click",l[41]),H(e,"keydown",l[61])],S=!0)},p(R,E){E[0]&134217728&&$(c,R[27]),E[0]&16777216&&f!==(f=R[24].word+"")&&$(p,f),R[24].imageUrl?w?w.p(R,E):(w=zt(R),w.c(),w.m(b,m)):w&&(w.d(1),w=null),E[0]&16777216&&L!==(L=R[24].translation+"")&&$(N,L),R[24].association?B?B.p(R,E):(B=Vt(R),B.c(),B.m(_,null)):B&&(B.d(1),B=null),E[0]&16777216&&A(b,"has-image",R[24].imageUrl),E[0]&64&&A(e,"flipped",R[6]),E[0]&128&&A(e,"dragging",R[7]),E[0]&256&&A(e,"swipe-left",R[8]==="left"),E[0]&256&&A(e,"swipe-right",R[8]==="right")},d(R){R&&M(e),w&&w.d(),B&&B.d(),S=!1,je(I)}}}function Kt(l){let e,t;return{c(){e=d("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image-full svelte-1vwvdx")},m(i,r){D(i,e,r)},p(i,r){r[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&M(e)}}}function Xt(l){let e;function t(o,c){return o[10]==="correct"?Ln:Sn}let i=t(l),r=i(l);return{c(){e=d("div"),r.c(),n(e,"class","answer-overlay svelte-1vwvdx"),A(e,"correct",l[10]==="correct"),A(e,"incorrect",l[10]==="incorrect")},m(o,c){D(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),c[0]&1024&&A(e,"correct",o[10]==="correct"),c[0]&1024&&A(e,"incorrect",o[10]==="incorrect")},d(o){o&&M(e),r.d()}}}function Sn(l){let e,t,i,r,o,c=l[24].word+"",u;return{c(){e=P("svg"),t=P("line"),i=P("line"),r=g(),o=d("span"),u=J(c),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1vwvdx"),n(o,"class","svelte-1vwvdx")},m(a,f){D(a,e,f),s(e,t),s(e,i),D(a,r,f),D(a,o,f),s(o,u)},p(a,f){f[0]&16777216&&c!==(c=a[24].word+"")&&$(u,c)},d(a){a&&(M(e),M(r),M(o))}}}function Ln(l){let e,t,i,r;return{c(){e=P("svg"),t=P("polyline"),i=g(),r=d("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1vwvdx"),n(r,"class","svelte-1vwvdx")},m(o,c){D(o,e,c),s(e,t),D(o,i,c),D(o,r,c)},p:ye,d(o){o&&(M(e),M(i),M(r))}}}function Yt(l){let e;function t(o,c){if(o[14]==="correct")return In;if(o[14]==="word_error")return Tn}let i=t(l),r=i&&i(l);return{c(){e=d("div"),r&&r.c(),n(e,"class","answer-overlay svelte-1vwvdx"),A(e,"correct",l[14]==="correct"),A(e,"incorrect",l[14]==="word_error")},m(o,c){D(o,e,c),r&&r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r&&r.d(1),r=i&&i(o),r&&(r.c(),r.m(e,null))),c[0]&16384&&A(e,"correct",o[14]==="correct"),c[0]&16384&&A(e,"incorrect",o[14]==="word_error")},d(o){o&&M(e),r&&r.d()}}}function Tn(l){let e,t,i,r,o,c,u,a,f,p,h;return{c(){e=P("svg"),t=P("line"),i=P("line"),r=g(),o=d("div"),c=d("span"),c.textContent="Ошибка в слове",u=g(),a=d("span"),f=J("Ожидалось: "),p=d("strong"),h=J(l[20]),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1vwvdx"),n(c,"class","error-title svelte-1vwvdx"),n(p,"class","svelte-1vwvdx"),n(a,"class","expected-word svelte-1vwvdx"),n(o,"class","error-details svelte-1vwvdx")},m(v,k){D(v,e,k),s(e,t),s(e,i),D(v,r,k),D(v,o,k),s(o,c),s(o,u),s(o,a),s(a,f),s(a,p),s(p,h)},p(v,k){k[0]&1048576&&$(h,v[20])},d(v){v&&(M(e),M(r),M(o))}}}function In(l){let e,t,i,r;return{c(){e=P("svg"),t=P("polyline"),i=g(),r=d("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1vwvdx"),n(r,"class","svelte-1vwvdx")},m(o,c){D(o,e,c),s(e,t),D(o,i,c),D(o,r,c)},p:ye,d(o){o&&(M(e),M(i),M(r))}}}function Qt(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="checking-spinner svelte-1vwvdx"></div> <span class="svelte-1vwvdx">Проверка...</span>',n(e,"class","answer-overlay checking svelte-1vwvdx")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Zt(l){let e,t;return{c(){e=d("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-1vwvdx")},m(i,r){D(i,e,r)},p(i,r){r[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&M(e)}}}function xt(l){let e,t,i,r,o=l[24].association+"",c;return{c(){e=d("div"),t=d("span"),t.textContent="Ассоциация:",i=g(),r=d("p"),c=J(o),n(t,"class","association-label svelte-1vwvdx"),n(r,"class","svelte-1vwvdx"),n(e,"class","association svelte-1vwvdx")},m(u,a){D(u,e,a),s(e,t),s(e,i),s(e,r),s(r,c)},p(u,a){a[0]&16777216&&o!==(o=u[24].association+"")&&$(c,o)},d(u){u&&M(e)}}}function Mn(l){let e,t,i,r,o,c;return{c(){e=d("div"),t=d("button"),t.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',i=g(),r=d("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(t,"class","action-btn unknown svelte-1vwvdx"),n(r,"class","action-btn known svelte-1vwvdx"),n(e,"class","action-buttons svelte-1vwvdx")},m(u,a){D(u,e,a),s(e,t),s(e,i),s(e,r),o||(c=[H(t,"click",l[37]),H(r,"click",l[35])],o=!0)},p:ye,d(u){u&&M(e),o=!1,je(c)}}}function Dn(l){let e,t,i,r,o=l[27].toLowerCase()+"",c,u,a,f,p,h,v,k,b,m;function _(L,N){return L[16]?En:L[17]?An:Bn}let y=_(l),C=y(l),T=!l[16]&&!l[17]&&$t(l);return{c(){e=d("div"),t=d("div"),i=d("span"),r=J("Переведите на "),c=J(o),u=J(":"),a=g(),C.c(),f=g(),T&&T.c(),p=g(),h=d("button"),v=J("Пропустить"),n(i,"class","sentence-label svelte-1vwvdx"),n(t,"class","sentence-prompt svelte-1vwvdx"),A(t,"loading",l[16]),A(t,"error",l[17]),n(h,"class","skip-sentence-btn svelte-1vwvdx"),h.disabled=k=l[14]!==null||l[16]||l[19],n(e,"class","sentence-exercise svelte-1vwvdx")},m(L,N){D(L,e,N),s(e,t),s(t,i),s(i,r),s(i,c),s(i,u),s(t,a),C.m(t,null),s(e,f),T&&T.m(e,null),s(e,p),s(e,h),s(h,v),b||(m=H(h,"click",l[37]),b=!0)},p(L,N){N[0]&134217728&&o!==(o=L[27].toLowerCase()+"")&&$(c,o),y===(y=_(L))&&C?C.p(L,N):(C.d(1),C=y(L),C&&(C.c(),C.m(t,null))),N[0]&65536&&A(t,"loading",L[16]),N[0]&131072&&A(t,"error",L[17]),!L[16]&&!L[17]?T?T.p(L,N):(T=$t(L),T.c(),T.m(e,p)):T&&(T.d(1),T=null),N[0]&606208&&k!==(k=L[14]!==null||L[16]||L[19])&&(h.disabled=k)},d(L){L&&M(e),C.d(),T&&T.d(),b=!1,m()}}}function Nn(l){let e,t,i,r;return{c(){e=d("div"),t=d("button"),t.textContent="Продолжить",n(t,"class","continue-btn svelte-1vwvdx"),n(e,"class","card-back-actions svelte-1vwvdx")},m(o,c){D(o,e,c),s(e,t),i||(r=H(t,"click",l[37]),i=!0)},p:ye,d(o){o&&M(e),i=!1,r()}}}function Bn(l){let e,t;return{c(){e=d("p"),t=J(l[15]),n(e,"class","sentence-text svelte-1vwvdx")},m(i,r){D(i,e,r),s(e,t)},p(i,r){r[0]&32768&&$(t,i[15])},d(i){i&&M(e)}}}function An(l){let e,t,i,r,o,c;return{c(){e=d("p"),t=J(l[17]),i=g(),r=d("button"),r.textContent="Попробовать снова",n(e,"class","sentence-error svelte-1vwvdx"),n(r,"class","retry-btn svelte-1vwvdx")},m(u,a){D(u,e,a),s(e,t),D(u,i,a),D(u,r,a),o||(c=H(r,"click",l[58]),o=!0)},p(u,a){a[0]&131072&&$(t,u[17])},d(u){u&&(M(e),M(i),M(r)),o=!1,c()}}}function En(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="loading-spinner svelte-1vwvdx"></div> <span>Генерация предложения...</span>',n(e,"class","sentence-loading svelte-1vwvdx")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function $t(l){let e;function t(o,c){return o[14]==="grammar_error"?Un:On}let i=t(l),r=i(l);return{c(){r.c(),e=nt()},m(o,c){r.m(o,c),D(o,e,c)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&M(e),r.d(o)}}}function On(l){let e,t,i,r,o,c,u,a,f,p,h;return{c(){e=d("div"),t=d("input"),r=g(),o=d("button"),c=P("svg"),u=P("polyline"),a=P("path"),n(t,"type","text"),n(t,"class","answer-input sentence-input svelte-1vwvdx"),n(t,"placeholder","Введите перевод..."),t.disabled=i=l[14]!==null||l[19],A(t,"correct",l[14]==="correct"),A(t,"incorrect",l[14]==="incorrect"),n(u,"points","9 11 12 14 22 4"),n(a,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(c,"width","24"),n(c,"height","24"),n(c,"viewBox","0 0 24 24"),n(c,"fill","none"),n(c,"stroke","currentColor"),n(c,"stroke-width","2"),n(o,"class","check-btn svelte-1vwvdx"),o.disabled=f=!l[13].trim()||l[14]!==null||l[19],n(e,"class","answer-input-area svelte-1vwvdx")},m(v,k){D(v,e,k),s(e,t),Ue(t,l[13]),s(e,r),s(e,o),s(o,c),s(c,u),s(c,a),p||(h=[H(t,"input",l[59]),H(t,"keydown",l[39]),H(o,"click",l[38])],p=!0)},p(v,k){k[0]&540672&&i!==(i=v[14]!==null||v[19])&&(t.disabled=i),k[0]&8192&&t.value!==v[13]&&Ue(t,v[13]),k[0]&16384&&A(t,"correct",v[14]==="correct"),k[0]&16384&&A(t,"incorrect",v[14]==="incorrect"),k[0]&548864&&f!==(f=!v[13].trim()||v[14]!==null||v[19])&&(o.disabled=f)},d(v){v&&M(e),p=!1,je(h)}}}function Un(l){let e,t,i,r,o,c,u,a,f,p,h,v;function k(_,y){return _[21]?Rn:Hn}let b=k(l),m=b(l);return{c(){e=d("div"),t=d("div"),m.c(),i=g(),r=d("div"),o=d("span"),o.textContent="Правильный вариант:",c=g(),u=d("p"),a=J(l[22]),f=g(),p=d("button"),p.textContent="Продолжить",n(t,"class","user-sentence-error svelte-1vwvdx"),n(o,"class","correction-label svelte-1vwvdx"),n(u,"class","correction-text svelte-1vwvdx"),n(r,"class","correction-block svelte-1vwvdx"),n(p,"class","continue-btn svelte-1vwvdx"),n(e,"class","grammar-error-block svelte-1vwvdx")},m(_,y){D(_,e,y),s(e,t),m.m(t,null),s(e,i),s(e,r),s(r,o),s(r,c),s(r,u),s(u,a),s(e,f),s(e,p),h||(v=H(p,"click",l[40]),h=!0)},p(_,y){b===(b=k(_))&&m?m.p(_,y):(m.d(1),m=b(_),m&&(m.c(),m.m(t,null))),y[0]&4194304&&$(a,_[22])},d(_){_&&M(e),m.d(),h=!1,v()}}}function Hn(l){let e,t;return{c(){e=d("span"),t=J(l[23]),n(e,"class","error-text svelte-1vwvdx")},m(i,r){D(i,e,r),s(e,t)},p(i,r){r[0]&8388608&&$(t,i[23])},d(i){i&&M(e)}}}function Rn(l){let e,t=el(l[23],l[21])+"",i;return{c(){e=new ql(!1),i=nt(),e.a=i},m(r,o){e.m(t,r,o),D(r,i,o)},p(r,o){o[0]&10485760&&t!==(t=el(r[23],r[21])+"")&&e.p(t)},d(r){r&&(M(i),e.d())}}}function Jn(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y,C,T=l[5].learned.length+"",L,N,O,S,I,w,B,R,E,q,W=l[5].unlearned.length+"",z,U,j;function re(X,ae){return X[25]?mn:X[0]?hn:vn}let oe=re(l),ve=oe(l),de=l[11]&&Ft(l);function ue(X,ae){return X[25]&&X[24]?kn:wn}let we=ue(l),ie=we(l);return{c(){e=d("div"),t=d("div"),i=d("div"),r=d("h1"),r.textContent="Изучение",o=g(),c=d("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1vwvdx"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',u=g(),a=d("p"),ve.c(),f=g(),de&&de.c(),p=g(),ie.c(),h=g(),v=d("div"),k=d("div"),b=P("svg"),m=P("polyline"),_=g(),y=d("span"),C=J("Изучено: "),L=J(T),N=g(),O=d("div"),S=P("svg"),I=P("circle"),w=P("line"),B=P("line"),R=g(),E=d("span"),q=J("На повторение: "),z=J(W),n(r,"class","svelte-1vwvdx"),n(c,"class","settings-btn svelte-1vwvdx"),A(c,"active",l[11]),n(i,"class","header-top svelte-1vwvdx"),n(a,"class","subtitle svelte-1vwvdx"),n(t,"class","header svelte-1vwvdx"),n(m,"points","20 6 9 17 4 12"),n(b,"width","20"),n(b,"height","20"),n(b,"viewBox","0 0 24 24"),n(b,"fill","none"),n(b,"stroke","currentColor"),n(b,"stroke-width","2"),n(k,"class","stat-item learned svelte-1vwvdx"),n(I,"cx","12"),n(I,"cy","12"),n(I,"r","10"),n(w,"x1","12"),n(w,"y1","8"),n(w,"x2","12"),n(w,"y2","12"),n(B,"x1","12"),n(B,"y1","16"),n(B,"x2","12.01"),n(B,"y2","16"),n(S,"width","20"),n(S,"height","20"),n(S,"viewBox","0 0 24 24"),n(S,"fill","none"),n(S,"stroke","currentColor"),n(S,"stroke-width","2"),n(O,"class","stat-item unlearned svelte-1vwvdx"),n(v,"class","stats svelte-1vwvdx"),n(e,"class","flashcards-container svelte-1vwvdx")},m(X,ae){D(X,e,ae),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,u),s(t,a),ve.m(a,null),s(e,f),de&&de.m(e,null),s(e,p),ie.m(e,null),s(e,h),s(e,v),s(v,k),s(k,b),s(b,m),s(k,_),s(k,y),s(y,C),s(y,L),s(v,N),s(v,O),s(O,S),s(S,I),s(S,w),s(S,B),s(O,R),s(O,E),s(E,q),s(E,z),U||(j=H(c,"click",l[54]),U=!0)},p(X,ae){ae[0]&2048&&A(c,"active",X[11]),oe===(oe=re(X))&&ve?ve.p(X,ae):(ve.d(1),ve=oe(X),ve&&(ve.c(),ve.m(a,null))),X[11]?de?de.p(X,ae):(de=Ft(X),de.c(),de.m(e,p)):de&&(de.d(1),de=null),we===(we=ue(X))&&ie?ie.p(X,ae):(ie.d(1),ie=we(X),ie&&(ie.c(),ie.m(e,h))),ae[0]&32&&T!==(T=X[5].learned.length+"")&&$(L,T),ae[0]&32&&W!==(W=X[5].unlearned.length+"")&&$(z,W)},i:ye,o:ye,d(X){X&&M(e),ve.d(),de&&de.d(),ie.d(),U=!1,j()}}}function jn(l){const e=[...l];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function el(l,e){if(!e)return l;const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${t})`,"gi");return l.replace(i,'<span class="highlighted-error">$1</span>')}function Pn(l,e,t){let i,r,o,c,u,a,f,p,h,v,k,b;Qe(l,Je,Y=>t(5,v=Y)),Qe(l,We,Y=>t(51,k=Y)),Qe(l,Ze,Y=>t(52,b=Y));let m=0,_=!1,y=0,C=0,T=!1,L=null,N=!1,O=!1,S="",I=null,w=!1;function B(){t(0,N=!1),t(1,O=!1),K()}function R(){N?t(0,N=!1):(t(0,N=!0),t(1,O=!1)),K()}function E(){c&&(O?t(1,O=!1):(t(1,O=!0),t(0,N=!1)),K())}let q=!1,W="",z=null,U="",j=!1,re=null,oe=!1,ve=!1,de=null,ue=null,we=null,ie=null,X="";function ae(){t(46,X=localStorage.getItem("ai_token")||"")}function ge(){ae()}function Me(Y){Y.key==="ai_token"&&ae()}let Be;Nl(()=>{ae(),window.addEventListener("focus",ge),window.addEventListener("storage",Me),Be=setInterval(()=>{w&&ae()},500)}),Fl(()=>{window.removeEventListener("focus",ge),window.removeEventListener("storage",Me),Be&&clearInterval(Be)});async function Ce(Y,Fe){var Pe,qe,Se,Re;t(16,j=!0),t(17,re=null),t(15,U="");const Ke=`You are a ${r} language learning assistant. Student level: A1-A2 (beginner).

Task: Create ONE short and simple sentence in RUSSIAN that will need to be translated into ${r}.

${r} word: "${Y}"
Russian translation: "${Fe}"

Requirements:
- The sentence must be in Russian
- The sentence must contain the word "${Fe}" (or its form)
- Length: 3-10 words
- Simple A1-A2 level grammar
- Use simple tenses (Present Simple, Past Simple, Future Simple, Present Continuous, Present Perfect)
- Avoid complex constructions

Reply ONLY with the sentence in Russian, without quotes or explanations.`;try{const Oe=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Ke}],max_tokens:100,temperature:.7})});if(!Oe.ok){const x=await Oe.json().catch(()=>({}));throw new Error(((Pe=x.error)==null?void 0:Pe.message)||`Ошибка API: ${Oe.status}`)}const He=await Oe.json();if(t(15,U=((Re=(Se=(qe=He.choices[0])==null?void 0:qe.message)==null?void 0:Se.content)==null?void 0:Re.trim())||""),!U)throw new Error("Пустой ответ от AI");if(He.usage){const x=He.usage.prompt_tokens/1e6*.15,Le=He.usage.completion_tokens/1e6*.6,dt=x+Le,Ct=parseFloat(localStorage.getItem("ai_total_cost")||"0")+dt;localStorage.setItem("ai_total_cost",Ct.toString())}}catch(Oe){console.error("Ошибка генерации:",Oe),t(17,re=Oe.message),t(15,U="")}finally{t(16,j=!1)}}let V=[],pe=new Set,he=u;function ce(Y){N||(t(7,T=!0),y=Y.type==="touchstart"?Y.touches[0].clientX:Y.clientX,t(8,L=null))}function ke(Y){if(!T||N)return;C=(Y.type==="touchmove"?Y.touches[0].clientX:Y.clientX)-y,C>50?t(8,L="right"):C<-50?t(8,L="left"):t(8,L=null)}function Te(){!T||N||(t(7,T=!1),Math.abs(C)>100&&p&&(C>0?G():Z()),C=0,t(8,L=null))}async function G(){if(p){if(O&&!q){t(12,q=!0),t(13,W=""),t(14,z=null),await Ce(p.word,p.translation);return}Je.markAsLearned(p.id),K(),m>=f.length-1&&t(45,m=Math.max(0,f.length-2))}}function Z(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Je.markAsUnlearned(Y.id),K(),m>=f.length-1&&t(45,m=0)}}function K(){t(6,_=!1),t(9,S=""),t(10,I=null),t(12,q=!1),t(13,W=""),t(14,z=null),t(15,U=""),t(17,re=null),t(19,ve=!1),t(20,de=null),t(21,ue=null),t(22,we=null),t(23,ie=null),t(18,oe=!1)}function be(){if(p){if(O&&!oe){t(18,oe=!0);return}const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Je.markAsUnlearned(Y.id),K(),m>=f.length-1&&t(45,m=0)}}async function ee(Y,Fe,Ke){var qe,Se,Re,Oe;const Pe=`You are a ${r} language teacher. Check the translation of a sentence from Russian to ${r}.

Russian sentence: "${Fe}"
Student's translation: "${Y}"
Key word that must be used: "${Ke}"

Task: check the grammar of the sentence and its correspondence to the translation.
- DO NOT check punctuation (commas, periods)
- Check only grammatical errors (tenses, articles, word order, word forms)
- Check that the meaning matches the translation

Response format:
- If the sentence is grammatically correct and conveys the meaning — reply only: 0
- If there are errors — reply in this format:
ERROR: [part of the sentence with the error]
CORRECTION: [correct version of the entire sentence]

Reply ONLY in the specified format, without additional explanations.`;try{const He=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Pe}],max_tokens:200,temperature:.3})});if(!He.ok){const dt=await He.json().catch(()=>({}));throw new Error(((qe=dt.error)==null?void 0:qe.message)||`Ошибка API: ${He.status}`)}const x=await He.json(),Le=((Oe=(Re=(Se=x.choices[0])==null?void 0:Se.message)==null?void 0:Re.content)==null?void 0:Oe.trim())||"";if(x.usage){const dt=x.usage.prompt_tokens/1e6*.15,Nt=x.usage.completion_tokens/1e6*.6,Ct=dt+Nt,Al=parseFloat(localStorage.getItem("ai_total_cost")||"0");localStorage.setItem("ai_total_cost",(Al+Ct).toString())}return Le}catch(He){throw console.error("Ошибка проверки грамматики:",He),He}}async function De(){if(!p||!W.trim())return;const Y=W.trim(),Fe=p.word.toLowerCase(),Ke=Y.toLowerCase();if(!new RegExp(`\\b${Fe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\w*\\b`,"i").test(Ke)){t(14,z="word_error"),t(20,de=p.word),t(21,ue=null),t(22,we=null),setTimeout(()=>{const Se=p;t(47,V=[...V.filter(Re=>Re.id!==Se.id),Se]),Je.markAsUnlearned(Se.id),m>=f.length-1&&t(45,m=0),K()},3e3);return}t(19,ve=!0),t(20,de=null),t(21,ue=null),t(22,we=null);try{const Se=await ee(Y,U,p.word);if(Se==="0")t(14,z="correct"),setTimeout(()=>{Je.markAsLearned(p.id),m>=f.length-1&&t(45,m=Math.max(0,f.length-2)),K()},1500);else{t(14,z="grammar_error"),t(23,ie=Y);const Re=Se.match(/ERROR:\s*(.+)/i),Oe=Se.match(/CORRECTION:\s*(.+)/i);t(21,ue=Re?Re[1].trim():null),t(22,we=Oe?Oe[1].trim():Se)}}catch{t(14,z="correct"),setTimeout(()=>{Je.markAsLearned(p.id),m>=f.length-1&&t(45,m=Math.max(0,f.length-2)),K()},1500)}finally{t(19,ve=!1)}}function me(Y){Y.key==="Enter"&&q&&!ve&&z!=="grammar_error"&&De()}function te(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Je.markAsUnlearned(Y.id),m>=f.length-1&&t(45,m=0),K()}}function ne(){N||t(6,_=!_)}function Q(){if(!T)return"";const Y=C*.05;return`transform: translateX(${C}px) rotate(${Y}deg);`}function fe(){if(!p||!S.trim())return;const Y=S.trim().toLowerCase()===p.word.toLowerCase();t(10,I=Y?"correct":"incorrect"),setTimeout(()=>{Y?G():Z()},1e3)}function F(Y){Y.key==="Enter"&&N&&fe()}function Ae(Y){tt.call(this,l,Y)}const Ne=()=>t(11,w=!w),Ge=()=>t(11,w=!1),Ie=()=>t(11,w=!1),le=Y=>Y.key==="Escape"&&t(11,w=!1),_e=()=>Ce(p.word,p.translation);function se(){W=this.value,t(13,W)}function Ee(){S=this.value,t(9,S)}const ct=Y=>Y.key==="Enter"&&ne();return l.$$.update=()=>{if(l.$$.dirty[1]&2097152&&t(27,i=Ye(b)),l.$$.dirty[1]&2097152&&(r=nn(b)),l.$$.dirty[1]&32768&&t(4,c=X&&X.length>0),l.$$.dirty[0]&18&&!c&&O&&t(1,O=!1),l.$$.dirty[0]&3&&t(26,o=!N&&!O),l.$$.dirty[1]&1048576&&t(50,u=k||"default"),l.$$.dirty[0]&32|l.$$.dirty[1]&524288&&t(3,a=v.unlearned.filter(Y=>(Y.dictionaryId||"default")===u)),l.$$.dirty[0]&8|l.$$.dirty[1]&983040){const Y=new Set(a.map(Pe=>Pe.id)),Fe=he!==u,Ke=Y.size!==pe.size||![...Y].every(Pe=>pe.has(Pe));Fe||Ke?(t(47,V=jn(a)),t(48,pe=Y),t(45,m=0),t(49,he=u)):t(47,V=V.map(Pe=>a.find(Se=>Se.id===Pe.id)||Pe))}l.$$.dirty[0]&1|l.$$.dirty[1]&65536&&t(2,f=N?V.filter(Y=>Y.imageUrl):V),l.$$.dirty[0]&4|l.$$.dirty[1]&16384&&t(24,p=f[m]),l.$$.dirty[0]&4&&t(25,h=f.length>0)},[N,O,f,a,c,v,_,T,L,S,I,w,q,W,z,U,j,re,oe,ve,de,ue,we,ie,p,h,o,i,B,R,E,Ce,ce,ke,Te,G,Z,be,De,me,te,ne,Q,fe,F,m,X,V,pe,he,u,k,b,Ae,Ne,Ge,Ie,le,_e,se,Ee,ct]}class qn extends bt{constructor(e){super(),kt(this,e,Pn,Jn,at,{},null,[-1,-1,-1])}}function tl(l,e,t){const i=l.slice();return i[61]=e[t],i}function ll(l){let e,t,i,r,o=l[7].length+"",c,u,a,f,p,h=l[8].length+"",v,k,b,m,_,y=l[6].length+"",C,T,L;return{c(){e=d("div"),t=d("button"),i=J(`На проработку
          `),r=d("span"),c=J(o),u=g(),a=d("button"),f=J(`На повторение
          `),p=d("span"),v=J(h),k=g(),b=d("button"),m=J(`Изученные
          `),_=d("span"),C=J(y),n(r,"class","badge svelte-1rdpxoy"),n(t,"class","dropdown-item svelte-1rdpxoy"),A(t,"active",l[0]==="draft"),n(p,"class","badge svelte-1rdpxoy"),n(a,"class","dropdown-item svelte-1rdpxoy"),A(a,"active",l[0]==="unlearned"),n(_,"class","badge svelte-1rdpxoy"),n(b,"class","dropdown-item svelte-1rdpxoy"),A(b,"active",l[0]==="learned"),n(e,"class","tab-dropdown-menu svelte-1rdpxoy")},m(N,O){D(N,e,O),s(e,t),s(t,i),s(t,r),s(r,c),s(e,u),s(e,a),s(a,f),s(a,p),s(p,v),s(e,k),s(e,b),s(b,m),s(b,_),s(_,C),T||(L=[H(t,"click",l[39]),H(a,"click",l[40]),H(b,"click",l[41])],T=!0)},p(N,O){O[0]&128&&o!==(o=N[7].length+"")&&$(c,o),O[0]&1&&A(t,"active",N[0]==="draft"),O[0]&256&&h!==(h=N[8].length+"")&&$(v,h),O[0]&1&&A(a,"active",N[0]==="unlearned"),O[0]&64&&y!==(y=N[6].length+"")&&$(C,y),O[0]&1&&A(b,"active",N[0]==="learned")},d(N){N&&M(e),T=!1,je(L)}}}function nl(l){let e,t,i;return{c(){e=d("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","search-clear svelte-1rdpxoy")},m(r,o){D(r,e,o),t||(i=H(e,"click",l[46]),t=!0)},p:ye,d(r){r&&M(e),t=!1,i()}}}function il(l){let e,t,i,r;return{c(){e=d("div"),t=d("button"),t.innerHTML=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
        Отправить все на повторение`,n(t,"class","bulk-action-btn svelte-1rdpxoy"),n(e,"class","bulk-actions svelte-1rdpxoy")},m(o,c){D(o,e,c),s(e,t),i||(r=H(t,"click",l[26]),i=!0)},p:ye,d(o){o&&M(e),i=!1,r()}}}function Fn(l){let e,t,i,r,o,c;function u(_,y){return _[0]==="learned"?Gn:_[0]==="draft"?Vn:zn}let a=u(l),f=a(l);function p(_,y){return _[0]==="learned"?Yn:_[0]==="draft"?Xn:Kn}let h=p(l),v=h(l);function k(_,y){return _[0]==="learned"?xn:_[0]==="draft"?Zn:Qn}let b=k(l),m=b(l);return{c(){e=d("div"),t=d("div"),f.c(),i=g(),r=d("h2"),v.c(),o=g(),c=d("p"),m.c(),n(t,"class","empty-icon svelte-1rdpxoy"),n(r,"class","svelte-1rdpxoy"),n(c,"class","svelte-1rdpxoy"),n(e,"class","empty-state svelte-1rdpxoy")},m(_,y){D(_,e,y),s(e,t),f.m(t,null),s(e,i),s(e,r),v.m(r,null),s(e,o),s(e,c),m.m(c,null)},p(_,y){a!==(a=u(_))&&(f.d(1),f=a(_),f&&(f.c(),f.m(t,null))),h!==(h=p(_))&&(v.d(1),v=h(_),v&&(v.c(),v.m(r,null))),b!==(b=k(_))&&(m.d(1),m=b(_),m&&(m.c(),m.m(c,null)))},d(_){_&&M(e),f.d(),v.d(),m.d()}}}function Wn(l){let e=[],t=new Map,i,r=_t(l[12]);const o=c=>c[61].id;for(let c=0;c<r.length;c+=1){let u=tl(l,r,c),a=o(u);t.set(a,e[c]=al(a,u))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=nt()},m(c,u){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,u);D(c,i,u)},p(c,u){u[0]&921601&&(r=_t(c[12]),e=Ql(e,u,o,1,c,r,t,i.parentNode,Yl,al,i,tl))},d(c){c&&M(i);for(let u=0;u<e.length;u+=1)e[u].d(c)}}}function zn(l){let e,t,i,r;return{c(){e=P("svg"),t=P("circle"),i=P("line"),r=P("line"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"x1","12"),n(i,"y1","8"),n(i,"x2","12"),n(i,"y2","12"),n(r,"x1","12"),n(r,"y1","16"),n(r,"x2","12.01"),n(r,"y2","16"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(o,c){D(o,e,c),s(e,t),s(e,i),s(e,r)},d(o){o&&M(e)}}}function Vn(l){let e,t,i;return{c(){e=P("svg"),t=P("path"),i=P("path"),n(t,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(i,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){D(r,e,o),s(e,t),s(e,i)},d(r){r&&M(e)}}}function Gn(l){let e,t,i;return{c(){e=P("svg"),t=P("circle"),i=P("polyline"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"points","16 10 11 15 8 12"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){D(r,e,o),s(e,t),s(e,i)},d(r){r&&M(e)}}}function Kn(l){let e;return{c(){e=J("Нет слов на повторение")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Xn(l){let e;return{c(){e=J("Нет слов на проработку")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Yn(l){let e;return{c(){e=J("Пока нет изученных слов")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Qn(l){let e;return{c(){e=J("Все слова успешно изучены!")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Zn(l){let e;return{c(){e=J("Загрузите список слов на странице добавления")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function xn(l){let e;return{c(){e=J("Изучайте карточки, чтобы они появились здесь")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function $n(l){let e;return{c(){e=d("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',n(e,"class","card-thumbnail missing svelte-1rdpxoy")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function ei(l){let e,t,i;return{c(){e=d("div"),t=d("img"),Ve(t.src,i=l[61].imageUrl)||n(t,"src",i),n(t,"alt",""),n(t,"class","svelte-1rdpxoy"),n(e,"class","card-thumbnail svelte-1rdpxoy")},m(r,o){D(r,e,o),s(e,t)},p(r,o){o[0]&4096&&!Ve(t.src,i=r[61].imageUrl)&&n(t,"src",i)},d(r){r&&M(e)}}}function ti(l){let e;return{c(){e=d("p"),e.textContent="Добавьте перевод",n(e,"class","card-translation missing-text svelte-1rdpxoy")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function li(l){let e,t=l[61].translation+"",i;return{c(){e=d("p"),i=J(t),n(e,"class","card-translation svelte-1rdpxoy")},m(r,o){D(r,e,o),s(e,i)},p(r,o){o[0]&4096&&t!==(t=r[61].translation+"")&&$(i,t)},d(r){r&&M(e)}}}function sl(l){let e,t=l[61].association+"",i;return{c(){e=d("p"),i=J(t),n(e,"class","card-association svelte-1rdpxoy")},m(r,o){D(r,e,o),s(e,i)},p(r,o){o[0]&4096&&t!==(t=r[61].association+"")&&$(i,t)},d(r){r&&M(e)}}}function rl(l){let e,t,i,r,o,c,u,a,f,p;function h(y,C){var T;return C[0]&4096&&(r=null),r==null&&(r=!!((T=y[61].translation)!=null&&T.trim())),r?ii:ni}let v=h(l,[-1,-1,-1]),k=v(l);function b(y,C){var T;return C[0]&4096&&(f=null),f==null&&(f=!!((T=y[61].imageUrl)!=null&&T.trim())),f?ri:si}let m=b(l,[-1,-1,-1]),_=m(l);return{c(){var y,C;e=d("div"),t=d("span"),i=P("svg"),k.c(),o=J(`
                  Перевод`),c=g(),u=d("span"),a=P("svg"),_.c(),p=J(`
                  Картинка`),n(i,"width","12"),n(i,"height","12"),n(i,"viewBox","0 0 24 24"),n(i,"fill","none"),n(i,"stroke","currentColor"),n(i,"stroke-width","2"),n(t,"class","status-item svelte-1rdpxoy"),A(t,"complete",(y=l[61].translation)==null?void 0:y.trim()),n(a,"width","12"),n(a,"height","12"),n(a,"viewBox","0 0 24 24"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-width","2"),n(u,"class","status-item svelte-1rdpxoy"),A(u,"complete",(C=l[61].imageUrl)==null?void 0:C.trim()),n(e,"class","draft-status svelte-1rdpxoy")},m(y,C){D(y,e,C),s(e,t),s(t,i),k.m(i,null),s(t,o),s(e,c),s(e,u),s(u,a),_.m(a,null),s(u,p)},p(y,C){var T,L;v!==(v=h(y,C))&&(k.d(1),k=v(y),k&&(k.c(),k.m(i,null))),C[0]&4096&&A(t,"complete",(T=y[61].translation)==null?void 0:T.trim()),m!==(m=b(y,C))&&(_.d(1),_=m(y),_&&(_.c(),_.m(a,null))),C[0]&4096&&A(u,"complete",(L=y[61].imageUrl)==null?void 0:L.trim())},d(y){y&&M(e),k.d(),_.d()}}}function ni(l){let e;return{c(){e=P("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function ii(l){let e;return{c(){e=P("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function si(l){let e;return{c(){e=P("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function ri(l){let e;return{c(){e=P("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function ol(l){let e,t,i;function r(){return l[48](l[61])}return{c(){e=d("button"),e.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',n(e,"class","action-btn return svelte-1rdpxoy"),n(e,"title","Вернуть на повторение")},m(o,c){D(o,e,c),t||(i=H(e,"click",r),t=!0)},p(o,c){l=o},d(o){o&&M(e),t=!1,i()}}}function al(l,e){let t,i,r,o,c=e[61].word+"",u,a,f,p,h,v,k,b,m,_,y,C,T;function L(z,U){if(z[61].imageUrl)return ei;if(z[0]==="draft")return $n}let N=L(e),O=N&&N(e);function S(z,U){if(z[61].translation)return li;if(z[0]==="draft")return ti}let I=S(e),w=I&&I(e),B=e[61].association&&sl(e),R=e[0]==="draft"&&rl(e);function E(){return e[47](e[61])}let q=e[0]==="learned"&&ol(e);function W(){return e[49](e[61])}return{key:l,first:null,c(){t=d("div"),O&&O.c(),i=g(),r=d("div"),o=d("h3"),u=J(c),a=g(),w&&w.c(),f=g(),B&&B.c(),p=g(),R&&R.c(),h=g(),v=d("div"),k=d("button"),k.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',b=g(),q&&q.c(),m=g(),_=d("button"),_.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>',y=g(),n(o,"class","card-word svelte-1rdpxoy"),n(r,"class","card-content svelte-1rdpxoy"),n(k,"class","action-btn edit svelte-1rdpxoy"),n(k,"title","Редактировать"),n(_,"class","action-btn delete svelte-1rdpxoy"),n(_,"title","Удалить"),n(v,"class","card-actions svelte-1rdpxoy"),n(t,"class","card-item svelte-1rdpxoy"),A(t,"draft-card",e[0]==="draft"),this.first=t},m(z,U){D(z,t,U),O&&O.m(t,null),s(t,i),s(t,r),s(r,o),s(o,u),s(r,a),w&&w.m(r,null),s(r,f),B&&B.m(r,null),s(r,p),R&&R.m(r,null),s(t,h),s(t,v),s(v,k),s(v,b),q&&q.m(v,null),s(v,m),s(v,_),s(t,y),C||(T=[H(k,"click",E),H(_,"click",W)],C=!0)},p(z,U){e=z,N===(N=L(e))&&O?O.p(e,U):(O&&O.d(1),O=N&&N(e),O&&(O.c(),O.m(t,i))),U[0]&4096&&c!==(c=e[61].word+"")&&$(u,c),I===(I=S(e))&&w?w.p(e,U):(w&&w.d(1),w=I&&I(e),w&&(w.c(),w.m(r,f))),e[61].association?B?B.p(e,U):(B=sl(e),B.c(),B.m(r,p)):B&&(B.d(1),B=null),e[0]==="draft"?R?R.p(e,U):(R=rl(e),R.c(),R.m(r,null)):R&&(R.d(1),R=null),e[0]==="learned"?q?q.p(e,U):(q=ol(e),q.c(),q.m(v,m)):q&&(q.d(1),q=null),U[0]&1&&A(t,"draft-card",e[0]==="draft")},d(z){z&&M(t),O&&O.d(),w&&w.d(),B&&B.d(),R&&R.d(),q&&q.d(),C=!1,je(T)}}}function cl(l){let e,t,i,r,o,c,u,a,f,p,h,v=l[15].toLowerCase()+"",k,b,m,_=l[2].length+"",y,C,T,L,N,O,S,I,w,B=l[3].length+"",R,E,q,W,z,U,j,re,oe,ve,de,ue=l[4].length+"",we,ie,X,ae,ge,Me,Be,Ce,V,pe,he,ce,ke=l[0]==="draft"&&l[3].trim()&&l[5].trim(),Te,G,Z,K,be,ee,De,me,te=l[5]&&dl(l),ne=ke&&fl();return{c(){e=d("div"),t=d("div"),i=d("div"),r=d("h2"),r.textContent="Редактировать карточку",o=g(),c=d("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',u=g(),a=d("div"),f=d("div"),p=d("label"),h=J("Слово ("),k=J(v),b=J(`)
            `),m=d("span"),y=J(_),C=J("/35"),T=g(),L=d("input"),N=g(),O=d("div"),S=d("label"),I=J(`Перевод
            `),w=d("span"),R=J(B),E=J("/50"),q=g(),W=d("input"),z=g(),U=d("div"),j=d("label"),re=J(`Ассоциация 
            `),oe=d("span"),oe.textContent="(необязательно)",ve=g(),de=d("span"),we=J(ue),ie=J("/95"),X=g(),ae=d("textarea"),ge=g(),Me=d("div"),Be=d("label"),Be.innerHTML=`Изображение 
            <span class="optional svelte-1rdpxoy">(URL)</span>`,Ce=g(),V=d("input"),pe=g(),te&&te.c(),he=g(),ce=d("div"),ne&&ne.c(),Te=g(),G=d("button"),G.textContent="Отмена",Z=g(),K=d("button"),be=J("Сохранить"),n(r,"class","svelte-1rdpxoy"),n(c,"class","modal-close svelte-1rdpxoy"),n(i,"class","modal-header svelte-1rdpxoy"),n(m,"class","char-count svelte-1rdpxoy"),A(m,"limit",l[2].length>=35),n(p,"for","editWord"),n(p,"class","svelte-1rdpxoy"),n(L,"id","editWord"),n(L,"type","text"),n(L,"placeholder","например: serendipity"),n(L,"maxlength","35"),L.required=!0,n(L,"class","svelte-1rdpxoy"),n(f,"class","input-group svelte-1rdpxoy"),n(w,"class","char-count svelte-1rdpxoy"),A(w,"limit",l[3].length>=50),n(S,"for","editTranslation"),n(S,"class","svelte-1rdpxoy"),n(W,"id","editTranslation"),n(W,"type","text"),n(W,"placeholder","например: счастливая случайность"),n(W,"maxlength","50"),W.required=!0,n(W,"class","svelte-1rdpxoy"),n(O,"class","input-group svelte-1rdpxoy"),n(oe,"class","optional svelte-1rdpxoy"),n(de,"class","char-count svelte-1rdpxoy"),A(de,"limit",l[4].length>=95),n(j,"for","editAssociation"),n(j,"class","svelte-1rdpxoy"),n(ae,"id","editAssociation"),n(ae,"placeholder","например: представьте, как вы случайно находите клад"),n(ae,"maxlength","95"),n(ae,"rows","2"),n(ae,"class","svelte-1rdpxoy"),n(U,"class","input-group svelte-1rdpxoy"),n(Be,"for","editImageUrl"),n(Be,"class","svelte-1rdpxoy"),n(V,"id","editImageUrl"),n(V,"type","url"),n(V,"placeholder","https://example.com/image.jpg"),n(V,"class","svelte-1rdpxoy"),n(Me,"class","input-group svelte-1rdpxoy"),n(a,"class","modal-body svelte-1rdpxoy"),n(G,"class","btn-secondary svelte-1rdpxoy"),n(K,"class","btn-primary svelte-1rdpxoy"),K.disabled=ee=!l[2].trim()||l[0]!=="draft"&&!l[3].trim(),n(ce,"class","modal-actions svelte-1rdpxoy"),n(t,"class","modal svelte-1rdpxoy"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1rdpxoy"),n(e,"role","button"),n(e,"tabindex","-1")},m(Q,fe){D(Q,e,fe),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,u),s(t,a),s(a,f),s(f,p),s(p,h),s(p,k),s(p,b),s(p,m),s(m,y),s(m,C),s(f,T),s(f,L),Ue(L,l[2]),s(a,N),s(a,O),s(O,S),s(S,I),s(S,w),s(w,R),s(w,E),s(O,q),s(O,W),Ue(W,l[3]),s(a,z),s(a,U),s(U,j),s(j,re),s(j,oe),s(j,ve),s(j,de),s(de,we),s(de,ie),s(U,X),s(U,ae),Ue(ae,l[4]),s(a,ge),s(a,Me),s(Me,Be),s(Me,Ce),s(Me,V),Ue(V,l[5]),s(a,pe),te&&te.m(a,null),s(t,he),s(t,ce),ne&&ne.m(ce,null),s(ce,Te),s(ce,G),s(ce,Z),s(ce,K),s(K,be),De||(me=[H(c,"click",l[50]),H(L,"input",l[51]),H(W,"input",l[52]),H(ae,"input",l[53]),H(V,"input",l[54]),H(G,"click",l[55]),H(K,"click",l[21]),H(t,"click",$e(l[37])),H(e,"click",l[56]),H(e,"keydown",l[57])],De=!0)},p(Q,fe){fe[0]&32768&&v!==(v=Q[15].toLowerCase()+"")&&$(k,v),fe[0]&4&&_!==(_=Q[2].length+"")&&$(y,_),fe[0]&4&&A(m,"limit",Q[2].length>=35),fe[0]&4&&L.value!==Q[2]&&Ue(L,Q[2]),fe[0]&8&&B!==(B=Q[3].length+"")&&$(R,B),fe[0]&8&&A(w,"limit",Q[3].length>=50),fe[0]&8&&W.value!==Q[3]&&Ue(W,Q[3]),fe[0]&16&&ue!==(ue=Q[4].length+"")&&$(we,ue),fe[0]&16&&A(de,"limit",Q[4].length>=95),fe[0]&16&&Ue(ae,Q[4]),fe[0]&32&&V.value!==Q[5]&&Ue(V,Q[5]),Q[5]?te?te.p(Q,fe):(te=dl(Q),te.c(),te.m(a,null)):te&&(te.d(1),te=null),fe[0]&41&&(ke=Q[0]==="draft"&&Q[3].trim()&&Q[5].trim()),ke?ne||(ne=fl(),ne.c(),ne.m(ce,Te)):ne&&(ne.d(1),ne=null),fe[0]&13&&ee!==(ee=!Q[2].trim()||Q[0]!=="draft"&&!Q[3].trim())&&(K.disabled=ee)},d(Q){Q&&M(e),te&&te.d(),ne&&ne.d(),De=!1,je(me)}}}function dl(l){let e,t,i,r,o;function c(f,p){return f[11]?ai:oi}let u=c(l),a=u(l);return{c(){e=d("div"),a.c(),t=g(),i=d("button"),i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(i,"class","remove-image-btn svelte-1rdpxoy"),n(i,"title","Удалить изображение"),n(e,"class","image-preview-container svelte-1rdpxoy")},m(f,p){D(f,e,p),a.m(e,null),s(e,t),s(e,i),r||(o=H(i,"click",l[24]),r=!0)},p(f,p){u===(u=c(f))&&a?a.p(f,p):(a.d(1),a=u(f),a&&(a.c(),a.m(e,t)))},d(f){f&&M(e),a.d(),r=!1,o()}}}function oi(l){let e,t,i,r;return{c(){e=d("img"),Ve(e.src,t=l[5])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","modal-image-preview svelte-1rdpxoy")},m(o,c){D(o,e,c),i||(r=[H(e,"error",l[22]),H(e,"load",l[23])],i=!0)},p(o,c){c[0]&32&&!Ve(e.src,t=o[5])&&n(e,"src",t)},d(o){o&&M(e),i=!1,je(r)}}}function ai(l){let e;return{c(){e=d("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Ошибка загрузки</span>',n(e,"class","image-error svelte-1rdpxoy")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function fl(l){let e;return{c(){e=d("span"),e.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
            Карточка будет активирована`,n(e,"class","ready-hint svelte-1rdpxoy")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function ci(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y,C,T,L,N,O,S,I,w,B,R,E,q=l[7].length+"",W,z,U,j,re,oe,ve,de,ue,we=l[8].length+"",ie,X,ae,ge,Me,Be,Ce,V=l[6].length+"",pe,he,ce,ke,Te,G,Z,K,be,ee,De,me,te,ne,Q,fe,F=l[9]&&ll(l),Ae=l[1]&&nl(l),Ne=l[0]==="learned"&&l[6].length>0&&il(l);function Ge(se,Ee){return se[12].length>0?Wn:Fn}let Ie=Ge(l),le=Ie(l),_e=l[10]&&cl(l);return{c(){e=d("div"),t=d("div"),i=d("div"),r=d("h1"),r.textContent="Мои карточки",o=g(),c=d("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',u=g(),a=d("p"),a.textContent="Управляйте вашими словами",f=g(),p=d("div"),h=d("button"),v=d("span"),k=J(l[14]),b=g(),m=d("span"),_=J(l[13]),y=g(),C=P("svg"),T=P("polyline"),L=g(),F&&F.c(),N=g(),O=d("div"),S=d("button"),I=P("svg"),w=P("path"),B=P("path"),R=J(`
      На проработку
      `),E=d("span"),W=J(q),z=g(),U=d("button"),j=P("svg"),re=P("circle"),oe=P("line"),ve=P("line"),de=J(`
      На повторение
      `),ue=d("span"),ie=J(we),X=g(),ae=d("button"),ge=P("svg"),Me=P("polyline"),Be=J(`
      Изученные
      `),Ce=d("span"),pe=J(V),he=g(),ce=d("div"),ke=P("svg"),Te=P("circle"),G=P("line"),Z=g(),K=d("input"),be=g(),Ae&&Ae.c(),ee=g(),Ne&&Ne.c(),De=g(),me=d("div"),le.c(),te=g(),_e&&_e.c(),ne=nt(),n(r,"class","svelte-1rdpxoy"),n(c,"class","export-btn svelte-1rdpxoy"),n(c,"title","Экспорт в JSON"),n(i,"class","header-top svelte-1rdpxoy"),n(a,"class","subtitle svelte-1rdpxoy"),n(t,"class","header svelte-1rdpxoy"),n(v,"class","dropdown-label svelte-1rdpxoy"),n(m,"class","dropdown-badge svelte-1rdpxoy"),n(T,"points","6 9 12 15 18 9"),n(C,"class","dropdown-arrow svelte-1rdpxoy"),n(C,"width","16"),n(C,"height","16"),n(C,"viewBox","0 0 24 24"),n(C,"fill","none"),n(C,"stroke","currentColor"),n(C,"stroke-width","2"),A(C,"open",l[9]),n(h,"class","tab-dropdown-btn svelte-1rdpxoy"),n(p,"class","tabs-mobile svelte-1rdpxoy"),n(w,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(B,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(I,"width","18"),n(I,"height","18"),n(I,"viewBox","0 0 24 24"),n(I,"fill","none"),n(I,"stroke","currentColor"),n(I,"stroke-width","2"),n(E,"class","badge svelte-1rdpxoy"),n(S,"class","tab svelte-1rdpxoy"),A(S,"active",l[0]==="draft"),n(re,"cx","12"),n(re,"cy","12"),n(re,"r","10"),n(oe,"x1","12"),n(oe,"y1","8"),n(oe,"x2","12"),n(oe,"y2","12"),n(ve,"x1","12"),n(ve,"y1","16"),n(ve,"x2","12.01"),n(ve,"y2","16"),n(j,"width","18"),n(j,"height","18"),n(j,"viewBox","0 0 24 24"),n(j,"fill","none"),n(j,"stroke","currentColor"),n(j,"stroke-width","2"),n(ue,"class","badge svelte-1rdpxoy"),n(U,"class","tab svelte-1rdpxoy"),A(U,"active",l[0]==="unlearned"),n(Me,"points","20 6 9 17 4 12"),n(ge,"width","18"),n(ge,"height","18"),n(ge,"viewBox","0 0 24 24"),n(ge,"fill","none"),n(ge,"stroke","currentColor"),n(ge,"stroke-width","2"),n(Ce,"class","badge svelte-1rdpxoy"),n(ae,"class","tab svelte-1rdpxoy"),A(ae,"active",l[0]==="learned"),n(O,"class","tabs-desktop svelte-1rdpxoy"),n(Te,"cx","11"),n(Te,"cy","11"),n(Te,"r","8"),n(G,"x1","21"),n(G,"y1","21"),n(G,"x2","16.65"),n(G,"y2","16.65"),n(ke,"class","search-icon svelte-1rdpxoy"),n(ke,"width","18"),n(ke,"height","18"),n(ke,"viewBox","0 0 24 24"),n(ke,"fill","none"),n(ke,"stroke","currentColor"),n(ke,"stroke-width","2"),n(K,"type","text"),n(K,"class","search-input svelte-1rdpxoy"),n(K,"placeholder","Поиск слова..."),n(ce,"class","search-box svelte-1rdpxoy"),n(me,"class","cards-list svelte-1rdpxoy"),n(e,"class","lists-container svelte-1rdpxoy")},m(se,Ee){D(se,e,Ee),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,u),s(t,a),s(e,f),s(e,p),s(p,h),s(h,v),s(v,k),s(h,b),s(h,m),s(m,_),s(h,y),s(h,C),s(C,T),s(p,L),F&&F.m(p,null),s(e,N),s(e,O),s(O,S),s(S,I),s(I,w),s(I,B),s(S,R),s(S,E),s(E,W),s(O,z),s(O,U),s(U,j),s(j,re),s(j,oe),s(j,ve),s(U,de),s(U,ue),s(ue,ie),s(O,X),s(O,ae),s(ae,ge),s(ge,Me),s(ae,Be),s(ae,Ce),s(Ce,pe),s(e,he),s(e,ce),s(ce,ke),s(ke,Te),s(ke,G),s(ce,Z),s(ce,K),Ue(K,l[1]),s(ce,be),Ae&&Ae.m(ce,null),s(e,ee),Ne&&Ne.m(e,null),s(e,De),s(e,me),le.m(me,null),D(se,te,Ee),_e&&_e.m(se,Ee),D(se,ne,Ee),Q||(fe=[H(c,"click",l[25]),H(h,"click",l[38]),H(S,"click",l[42]),H(U,"click",l[43]),H(ae,"click",l[44]),H(K,"input",l[45])],Q=!0)},p(se,Ee){Ee[0]&16384&&$(k,se[14]),Ee[0]&8192&&$(_,se[13]),Ee[0]&512&&A(C,"open",se[9]),se[9]?F?F.p(se,Ee):(F=ll(se),F.c(),F.m(p,null)):F&&(F.d(1),F=null),Ee[0]&128&&q!==(q=se[7].length+"")&&$(W,q),Ee[0]&1&&A(S,"active",se[0]==="draft"),Ee[0]&256&&we!==(we=se[8].length+"")&&$(ie,we),Ee[0]&1&&A(U,"active",se[0]==="unlearned"),Ee[0]&64&&V!==(V=se[6].length+"")&&$(pe,V),Ee[0]&1&&A(ae,"active",se[0]==="learned"),Ee[0]&2&&K.value!==se[1]&&Ue(K,se[1]),se[1]?Ae?Ae.p(se,Ee):(Ae=nl(se),Ae.c(),Ae.m(ce,null)):Ae&&(Ae.d(1),Ae=null),se[0]==="learned"&&se[6].length>0?Ne?Ne.p(se,Ee):(Ne=il(se),Ne.c(),Ne.m(e,De)):Ne&&(Ne.d(1),Ne=null),Ie===(Ie=Ge(se))&&le?le.p(se,Ee):(le.d(1),le=Ie(se),le&&(le.c(),le.m(me,null))),se[10]?_e?_e.p(se,Ee):(_e=cl(se),_e.c(),_e.m(ne.parentNode,ne)):_e&&(_e.d(1),_e=null)},i:ye,o:ye,d(se){se&&(M(e),M(te),M(ne)),F&&F.d(),Ae&&Ae.d(),Ne&&Ne.d(),le.d(),_e&&_e.d(se),Q=!1,je(fe)}}}function di(l,e,t){let i,r,o,c,u,a,f,p,h,v,k,b,m;Qe(l,Ze,F=>t(34,k=F)),Qe(l,Je,F=>t(35,b=F)),Qe(l,We,F=>t(36,m=F));let _="draft",y="",C=!1;const T={draft:"На проработку",unlearned:"На повторение",learned:"Изученные"};function L(F){t(0,_=F),t(9,C=!1)}let N=!1,O=null,S="",I="",w="",B="",R=!1,E="",q="",W="",z="";function U(F){Je.moveToStudy(F)}function j(F){Je.deleteCard(F,_)}function re(F){t(27,O=F),t(2,S=F.word),t(3,I=F.translation||""),t(4,w=F.association||""),t(5,B=F.imageUrl||""),t(28,E=F.word),t(29,q=F.translation||""),t(30,W=F.association||""),t(31,z=F.imageUrl||""),t(11,R=!1),t(10,N=!0)}function oe(F=!1){!F&&c&&!confirm("У вас есть несохранённые изменения. Закрыть без сохранения?")||(t(10,N=!1),t(27,O=null))}function ve(){t(10,N=!1),t(27,O=null)}function de(){S.trim()&&O&&(_==="draft"?Je.editDraftCard(O.id,{word:S.trim(),translation:I.trim(),association:w.trim(),imageUrl:B.trim()}):I.trim()&&Je.editCard(O.id,_,{word:S.trim(),translation:I.trim(),association:w.trim(),imageUrl:B.trim()}),ve())}function ue(){t(11,R=!0)}function we(){t(11,R=!1)}function ie(){t(5,B="")}function X(){const F={learned:a,unlearned:f,draft:p,language:k||"en",exportedAt:new Date().toISOString()},Ae=JSON.stringify(F,null,2),Ne=new Blob([Ae],{type:"application/json"}),Ge=URL.createObjectURL(Ne),Ie=document.createElement("a");Ie.href=Ge,Ie.download=`flash-words-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(Ge)}function ae(){a.length>0&&confirm(`Отправить все ${a.length} слов на повторение?`)&&Je.moveAllToStudy()}function ge(F){tt.call(this,l,F)}const Me=()=>t(9,C=!C),Be=()=>L("draft"),Ce=()=>L("unlearned"),V=()=>L("learned"),pe=()=>t(0,_="draft"),he=()=>t(0,_="unlearned"),ce=()=>t(0,_="learned");function ke(){y=this.value,t(1,y)}const Te=()=>t(1,y=""),G=F=>re(F),Z=F=>U(F.id),K=F=>j(F.id),be=()=>oe();function ee(){S=this.value,t(2,S)}function De(){I=this.value,t(3,I)}function me(){w=this.value,t(4,w)}function te(){B=this.value,t(5,B)}const ne=()=>oe(),Q=()=>oe(),fe=F=>F.key==="Escape"&&oe();return l.$$.update=()=>{l.$$.dirty[1]&8&&t(15,i=Ye(k)),l.$$.dirty[0]&1&&t(14,r=T[_]),l.$$.dirty[1]&32&&t(33,u=m||"default"),l.$$.dirty[1]&20&&t(7,p=(b.draft||[]).filter(F=>(F.dictionaryId||"default")===u)),l.$$.dirty[1]&20&&t(8,f=b.unlearned.filter(F=>(F.dictionaryId||"default")===u)),l.$$.dirty[1]&20&&t(6,a=b.learned.filter(F=>(F.dictionaryId||"default")===u)),l.$$.dirty[0]&449&&t(13,o=_==="draft"?p.length:_==="unlearned"?f.length:a.length),l.$$.dirty[0]&2013265980|l.$$.dirty[1]&1&&(c=O&&(S!==E||I!==q||w!==W||B!==z)),l.$$.dirty[0]&449&&t(32,h=_==="learned"?a:_==="unlearned"?f:p),l.$$.dirty[0]&2|l.$$.dirty[1]&2&&t(12,v=y.trim()?h.filter(F=>F.word.toLowerCase().includes(y.toLowerCase())||F.translation&&F.translation.toLowerCase().includes(y.toLowerCase())):h)},[_,y,S,I,w,B,a,p,f,C,N,R,v,o,r,i,L,U,j,re,oe,de,ue,we,ie,X,ae,O,E,q,W,z,h,u,k,b,m,ge,Me,Be,Ce,V,pe,he,ce,ke,Te,G,Z,K,be,ee,De,me,te,ne,Q,fe]}class fi extends bt{constructor(e){super(),kt(this,e,di,ci,at,{},null,[-1,-1,-1])}}function ul(l,e,t){const i=l.slice();return i[52]=e[t],i}function pl(l){let e;return{c(){e=d("span"),n(e,"class","user-indicator svelte-kfa3ws")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function vl(l){let e;return{c(){e=d("span"),n(e,"class","token-indicator svelte-kfa3ws")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function hl(l){let e,t,i;function r(u,a){return u[3].length===0?pi:ui}let o=r(l),c=o(l);return{c(){e=d("div"),c.c(),n(e,"class","dictionary-dropdown svelte-kfa3ws")},m(u,a){D(u,e,a),c.m(e,null),t||(i=H(e,"click",$e(l[33])),t=!0)},p(u,a){o===(o=r(u))&&c?c.p(u,a):(c.d(1),c=o(u),c&&(c.c(),c.m(e,null)))},d(u){u&&M(e),c.d(),t=!1,i()}}}function ui(l){let e,t=_t(l[3]),i=[];for(let r=0;r<t.length;r+=1)i[r]=_l(ul(l,t,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=nt()},m(r,o){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,o);D(r,e,o)},p(r,o){if(o[0]&4194316){t=_t(r[3]);let c;for(c=0;c<t.length;c+=1){const u=ul(r,t,c);i[c]?i[c].p(u,o):(i[c]=_l(u),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=t.length}},d(r){r&&M(e),Rl(i,r)}}}function pi(l){let e;return{c(){e=d("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> <p class="svelte-kfa3ws">Загрузите словарь или добавьте карточку слова</p>',n(e,"class","dropdown-empty svelte-kfa3ws")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function ml(l){let e,t;return{c(){e=P("svg"),t=P("polyline"),n(t,"points","20 6 9 17 4 12"),n(e,"width","16"),n(e,"height","16"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(i,r){D(i,e,r),s(e,t)},d(i){i&&M(e)}}}function _l(l){let e,t,i=l[52].name+"",r,o,c,u,a,f=l[2]===l[52].id&&ml();function p(){return l[35](l[52])}return{c(){e=d("button"),t=d("span"),r=J(i),o=g(),f&&f.c(),c=g(),n(e,"class","dropdown-item svelte-kfa3ws"),A(e,"active",l[2]===l[52].id)},m(h,v){D(h,e,v),s(e,t),s(t,r),s(e,o),f&&f.m(e,null),s(e,c),u||(a=H(e,"click",p),u=!0)},p(h,v){l=h,v[0]&8&&i!==(i=l[52].name+"")&&$(r,i),l[2]===l[52].id?f||(f=ml(),f.c(),f.m(e,c)):f&&(f.d(1),f=null),v[0]&12&&A(e,"active",l[2]===l[52].id)},d(h){h&&M(e),f&&f.d(),u=!1,a()}}}function gl(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y,C,T,L,N,O,S=l[16]&&wl(l),I=l[7]>0&&kl(l);function w(E,q){return E[6]?hi:vi}let B=w(l),R=B(l);return{c(){e=d("div"),t=d("div"),i=d("div"),r=d("h2"),r.textContent="AI Токен",o=g(),c=d("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',u=g(),a=d("div"),f=d("p"),f.textContent="Введите ваш API ключ для использования AI-функций",p=g(),h=d("div"),v=d("input"),k=g(),S&&S.c(),b=g(),I&&I.c(),m=g(),_=d("div"),y=d("button"),y.textContent="Отмена",C=g(),T=d("button"),R.c(),n(r,"class","svelte-kfa3ws"),n(c,"class","modal-close svelte-kfa3ws"),n(i,"class","modal-header svelte-kfa3ws"),n(f,"class","modal-description svelte-kfa3ws"),n(v,"type","password"),n(v,"class","token-input svelte-kfa3ws"),n(v,"placeholder","sk-..."),n(h,"class","token-input-wrapper svelte-kfa3ws"),n(a,"class","modal-body svelte-kfa3ws"),n(y,"class","cancel-btn svelte-kfa3ws"),n(T,"class","save-btn svelte-kfa3ws"),T.disabled=L=!l[0].trim(),A(T,"saved",l[6]),n(_,"class","modal-footer svelte-kfa3ws"),n(t,"class","modal svelte-kfa3ws"),n(e,"class","modal-overlay svelte-kfa3ws")},m(E,q){D(E,e,q),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,u),s(t,a),s(a,f),s(a,p),s(a,h),s(h,v),Ue(v,l[0]),s(h,k),S&&S.m(h,null),s(a,b),I&&I.m(a,null),s(t,m),s(t,_),s(_,y),s(_,C),s(_,T),R.m(T,null),N||(O=[H(c,"click",l[36]),H(v,"input",l[37]),H(y,"click",l[38]),H(T,"click",l[18]),H(t,"click",$e(l[32])),H(e,"click",l[39])],N=!0)},p(E,q){q[0]&1&&v.value!==E[0]&&Ue(v,E[0]),E[16]?S?S.p(E,q):(S=wl(E),S.c(),S.m(h,null)):S&&(S.d(1),S=null),E[7]>0?I?I.p(E,q):(I=kl(E),I.c(),I.m(a,null)):I&&(I.d(1),I=null),B!==(B=w(E))&&(R.d(1),R=B(E),R&&(R.c(),R.m(T,null))),q[0]&1&&L!==(L=!E[0].trim())&&(T.disabled=L),q[0]&64&&A(T,"saved",E[6])},d(E){E&&M(e),S&&S.d(),I&&I.d(),R.d(),N=!1,je(O)}}}function wl(l){let e,t,i;return{c(){e=d("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-kfa3ws"),n(e,"title","Очистить токен")},m(r,o){D(r,e,o),t||(i=H(e,"click",l[19]),t=!0)},p:ye,d(r){r&&M(e),t=!1,i()}}}function kl(l){let e,t,i,r,o,c=Tl(l[7])+"",u;return{c(){e=d("div"),t=d("div"),i=d("span"),i.textContent="Стоимость всех запросов:",r=g(),o=d("span"),u=J(c),n(i,"class","cost-label svelte-kfa3ws"),n(o,"class","cost-value svelte-kfa3ws"),n(t,"class","cost-row svelte-kfa3ws"),n(e,"class","cost-info svelte-kfa3ws")},m(a,f){D(a,e,f),s(e,t),s(t,i),s(t,r),s(t,o),s(o,u)},p(a,f){f[0]&128&&c!==(c=Tl(a[7])+"")&&$(u,c)},d(a){a&&M(e)}}}function vi(l){let e;return{c(){e=J("Сохранить")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function hi(l){let e,t,i;return{c(){e=P("svg"),t=P("polyline"),i=J(`
              Сохранено`),n(t,"points","20 6 9 17 4 12"),n(e,"width","18"),n(e,"height","18"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(r,o){D(r,e,o),s(e,t),D(r,i,o)},d(r){r&&(M(e),M(i))}}}function bl(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y,C,T,L,N,O,S=l[9]&&yl(l),I=l[10]&&Cl(l),w=l[1]&&Sl(l);function B(q,W){return q[11]?_i:mi}let R=B(l),E=R(l);return{c(){e=d("div"),t=d("div"),i=d("div"),r=d("h2"),r.textContent="Загрузить слова",o=g(),c=d("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',u=g(),a=d("div"),f=d("p"),f.textContent="Введите имя для загрузки персональных слов из файла",p=g(),h=d("div"),v=d("input"),k=g(),S&&S.c(),b=g(),I&&I.c(),m=g(),w&&w.c(),_=g(),y=d("div"),C=d("button"),C.textContent="Отмена",T=g(),L=d("button"),E.c(),n(r,"class","svelte-kfa3ws"),n(c,"class","modal-close svelte-kfa3ws"),n(i,"class","modal-header svelte-kfa3ws"),n(f,"class","modal-description svelte-kfa3ws"),n(v,"type","text"),n(v,"class","token-input user-input svelte-kfa3ws"),n(v,"placeholder","например: mycode"),A(v,"error",l[10]),n(h,"class","token-input-wrapper svelte-kfa3ws"),n(a,"class","modal-body svelte-kfa3ws"),n(C,"class","cancel-btn svelte-kfa3ws"),n(L,"class","save-btn svelte-kfa3ws"),L.disabled=l[11],n(y,"class","modal-footer svelte-kfa3ws"),n(t,"class","modal svelte-kfa3ws"),n(e,"class","modal-overlay svelte-kfa3ws")},m(q,W){D(q,e,W),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,u),s(t,a),s(a,f),s(a,p),s(a,h),s(h,v),Ue(v,l[9]),s(h,k),S&&S.m(h,null),s(a,b),I&&I.m(a,null),s(a,m),w&&w.m(a,null),s(t,_),s(t,y),s(y,C),s(y,T),s(y,L),E.m(L,null),N||(O=[H(c,"click",l[40]),H(v,"input",l[41]),H(v,"keydown",l[42]),H(C,"click",l[43]),H(L,"click",l[21]),H(t,"click",$e(l[31])),H(e,"click",l[44])],N=!0)},p(q,W){W[0]&512&&v.value!==q[9]&&Ue(v,q[9]),W[0]&1024&&A(v,"error",q[10]),q[9]?S?S.p(q,W):(S=yl(q),S.c(),S.m(h,null)):S&&(S.d(1),S=null),q[10]?I?I.p(q,W):(I=Cl(q),I.c(),I.m(a,m)):I&&(I.d(1),I=null),q[1]?w?w.p(q,W):(w=Sl(q),w.c(),w.m(a,null)):w&&(w.d(1),w=null),R!==(R=B(q))&&(E.d(1),E=R(q),E&&(E.c(),E.m(L,null))),W[0]&2048&&(L.disabled=q[11])},d(q){q&&M(e),S&&S.d(),I&&I.d(),w&&w.d(),E.d(),N=!1,je(O)}}}function yl(l){let e,t,i;return{c(){e=d("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-kfa3ws"),n(e,"title","Очистить")},m(r,o){D(r,e,o),t||(i=H(e,"click",l[24]),t=!0)},p:ye,d(r){r&&M(e),t=!1,i()}}}function Cl(l){let e,t;return{c(){e=d("p"),t=J(l[10]),n(e,"class","error-text svelte-kfa3ws")},m(i,r){D(i,e,r),s(e,t)},p(i,r){r[0]&1024&&$(t,i[10])},d(i){i&&M(e)}}}function Sl(l){let e,t,i,r,o,c,u,a;return{c(){e=d("div"),t=P("svg"),i=P("polyline"),r=g(),o=d("span"),c=J("Загружены слова: "),u=d("strong"),a=J(l[1]),n(i,"points","20 6 9 17 4 12"),n(t,"width","16"),n(t,"height","16"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(u,"class","svelte-kfa3ws"),n(e,"class","current-user-info svelte-kfa3ws")},m(f,p){D(f,e,p),s(e,t),s(t,i),s(e,r),s(e,o),s(o,c),s(o,u),s(u,a)},p(f,p){p[0]&2&&$(a,f[1])},d(f){f&&M(e)}}}function mi(l){let e;return{c(){e=J("Загрузить")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function _i(l){let e,t;return{c(){e=d("span"),t=J(`
              Загрузка...`),n(e,"class","loading-spinner-small svelte-kfa3ws")},m(i,r){D(i,e,r),D(i,t,r)},d(i){i&&(M(e),M(t))}}}function gi(l){let e,t;return e=new fi({}),{c(){Dt(e.$$.fragment)},m(i,r){gt(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){vt(e.$$.fragment,i),t=!1},d(i){wt(e,i)}}}function wi(l){let e,t;return e=new qn({}),{c(){Dt(e.$$.fragment)},m(i,r){gt(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){vt(e.$$.fragment,i),t=!1},d(i){wt(e,i)}}}function ki(l){let e,t;return e=new pn({}),{c(){Dt(e.$$.fragment)},m(i,r){gt(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){vt(e.$$.fragment,i),t=!1},d(i){wt(e,i)}}}function Ll(l){let e,t;return{c(){e=d("span"),t=J(l[13]),n(e,"class","study-badge svelte-kfa3ws")},m(i,r){D(i,e,r),s(e,t)},p(i,r){r[0]&8192&&$(t,i[13])},d(i){i&&M(e)}}}function bi(l){let e,t,i,r,o,c,u,a,f,p,h,v,k,b,m,_,y,C,T,L,N,O,S,I,w,B,R,E,q,W,z,U,j,re,oe,ve,de,ue,we,ie,X,ae,ge,Me,Be,Ce,V,pe,he,ce,ke,Te,G,Z,K,be,ee,De,me,te=l[15]&&pl(),ne=l[16]&&vl(),Q=l[12]&&hl(l),fe=l[5]&&gl(l),F=l[8]&&bl(l);const Ae=[ki,wi,gi],Ne=[];function Ge(le,_e){return le[4]==="add"?0:le[4]==="study"?1:le[4]==="lists"?2:-1}~(ie=Ge(l))&&(X=Ne[ie]=Ae[ie](l));let Ie=l[13]>0&&Ll(l);return{c(){e=d("div"),t=d("div"),i=g(),r=d("nav"),o=d("div"),o.innerHTML='<svg width="32" height="32" viewBox="0 0 100 100"><defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#6366f1"></stop><stop offset="100%" style="stop-color:#a855f7"></stop></linearGradient></defs><rect width="100" height="100" rx="20" fill="url(#logoGrad)"></rect><text x="50" y="65" font-family="Arial" font-size="50" font-weight="bold" fill="white" text-anchor="middle">F</text></svg> <span class="brand-name svelte-kfa3ws">Flash Words</span>',c=g(),u=d("div"),a=d("button"),f=P("svg"),p=P("path"),h=P("circle"),v=g(),te&&te.c(),k=g(),b=d("button"),m=P("svg"),_=P("path"),y=P("polyline"),C=P("polyline"),T=P("polyline"),L=P("polyline"),N=P("line"),O=g(),ne&&ne.c(),S=g(),I=d("div"),w=d("button"),B=P("svg"),R=P("path"),E=P("path"),q=g(),W=d("span"),z=J(l[14]),U=g(),j=P("svg"),re=P("polyline"),oe=g(),Q&&Q.c(),ve=g(),fe&&fe.c(),de=g(),F&&F.c(),ue=g(),we=d("main"),X&&X.c(),ae=g(),ge=d("nav"),Me=d("button"),Me.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg> <span class="svelte-kfa3ws">Добавить</span>',Be=g(),Ce=d("button"),V=d("div"),pe=P("svg"),he=P("rect"),ce=P("path"),ke=P("path"),Te=g(),Ie&&Ie.c(),G=g(),Z=d("span"),Z.textContent="Изучать",K=g(),be=d("button"),be.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> <span class="svelte-kfa3ws">Списки</span>',n(t,"class","background-pattern svelte-kfa3ws"),n(o,"class","nav-brand svelte-kfa3ws"),n(p,"d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"),n(h,"cx","12"),n(h,"cy","7"),n(h,"r","4"),n(f,"width","20"),n(f,"height","20"),n(f,"viewBox","0 0 24 24"),n(f,"fill","none"),n(f,"stroke","currentColor"),n(f,"stroke-width","2"),n(a,"class","user-btn svelte-kfa3ws"),n(a,"title","Загрузить слова пользователя"),A(a,"has-user",l[15]),n(_,"d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"),n(y,"points","7.5 4.21 12 6.81 16.5 4.21"),n(C,"points","7.5 19.79 7.5 14.6 3 12"),n(T,"points","21 12 16.5 14.6 16.5 19.79"),n(L,"points","3.27 6.96 12 12.01 20.73 6.96"),n(N,"x1","12"),n(N,"y1","22.08"),n(N,"x2","12"),n(N,"y2","12"),n(m,"width","20"),n(m,"height","20"),n(m,"viewBox","0 0 24 24"),n(m,"fill","none"),n(m,"stroke","currentColor"),n(m,"stroke-width","2"),n(b,"class","ai-token-btn svelte-kfa3ws"),n(b,"title","Настройка AI токена"),A(b,"has-token",l[16]),n(R,"d","M4 19.5A2.5 2.5 0 0 1 6.5 17H20"),n(E,"d","M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"),n(B,"width","18"),n(B,"height","18"),n(B,"viewBox","0 0 24 24"),n(B,"fill","none"),n(B,"stroke","currentColor"),n(B,"stroke-width","2"),n(W,"class","dictionary-label svelte-kfa3ws"),n(re,"points","6 9 12 15 18 9"),n(j,"class","dropdown-arrow svelte-kfa3ws"),n(j,"width","14"),n(j,"height","14"),n(j,"viewBox","0 0 24 24"),n(j,"fill","none"),n(j,"stroke","currentColor"),n(j,"stroke-width","2"),A(j,"open",l[12]),n(w,"class","dictionary-btn svelte-kfa3ws"),n(w,"title","Выбрать словарь"),A(w,"has-dictionary",l[2]),n(I,"class","dictionary-selector svelte-kfa3ws"),n(u,"class","nav-stats svelte-kfa3ws"),n(r,"class","navbar svelte-kfa3ws"),n(we,"class","main-content svelte-kfa3ws"),n(Me,"class","nav-item svelte-kfa3ws"),A(Me,"active",l[4]==="add"),n(he,"x","2"),n(he,"y","4"),n(he,"width","20"),n(he,"height","16"),n(he,"rx","2"),n(ce,"d","M12 8v8"),n(ke,"d","M8 12h8"),n(pe,"width","28"),n(pe,"height","28"),n(pe,"viewBox","0 0 24 24"),n(pe,"fill","none"),n(pe,"stroke","currentColor"),n(pe,"stroke-width","2"),n(pe,"class","svelte-kfa3ws"),n(V,"class","study-btn-inner svelte-kfa3ws"),n(Z,"class","svelte-kfa3ws"),n(Ce,"class","nav-item study svelte-kfa3ws"),A(Ce,"active",l[4]==="study"),n(be,"class","nav-item svelte-kfa3ws"),A(be,"active",l[4]==="lists"),n(ge,"class","bottom-nav svelte-kfa3ws"),n(e,"class","app svelte-kfa3ws")},m(le,_e){D(le,e,_e),s(e,t),s(e,i),s(e,r),s(r,o),s(r,c),s(r,u),s(u,a),s(a,f),s(f,p),s(f,h),s(a,v),te&&te.m(a,null),s(u,k),s(u,b),s(b,m),s(m,_),s(m,y),s(m,C),s(m,T),s(m,L),s(m,N),s(b,O),ne&&ne.m(b,null),s(u,S),s(u,I),s(I,w),s(w,B),s(B,R),s(B,E),s(w,q),s(w,W),s(W,z),s(w,U),s(w,j),s(j,re),s(I,oe),Q&&Q.m(I,null),s(e,ve),fe&&fe.m(e,null),s(e,de),F&&F.m(e,null),s(e,ue),s(e,we),~ie&&Ne[ie].m(we,null),s(e,ae),s(e,ge),s(ge,Me),s(ge,Be),s(ge,Ce),s(Ce,V),s(V,pe),s(pe,he),s(pe,ce),s(pe,ke),s(V,Te),Ie&&Ie.m(V,null),s(Ce,G),s(Ce,Z),s(ge,K),s(ge,be),ee=!0,De||(me=[H(a,"click",l[20]),H(b,"click",l[17]),H(w,"click",$e(l[34])),H(Me,"click",l[45]),H(Ce,"click",l[46]),H(be,"click",l[47]),H(e,"click",l[23])],De=!0)},p(le,_e){le[15]?te||(te=pl(),te.c(),te.m(a,null)):te&&(te.d(1),te=null),(!ee||_e[0]&32768)&&A(a,"has-user",le[15]),le[16]?ne||(ne=vl(),ne.c(),ne.m(b,null)):ne&&(ne.d(1),ne=null),(!ee||_e[0]&65536)&&A(b,"has-token",le[16]),(!ee||_e[0]&16384)&&$(z,le[14]),(!ee||_e[0]&4096)&&A(j,"open",le[12]),(!ee||_e[0]&4)&&A(w,"has-dictionary",le[2]),le[12]?Q?Q.p(le,_e):(Q=hl(le),Q.c(),Q.m(I,null)):Q&&(Q.d(1),Q=null),le[5]?fe?fe.p(le,_e):(fe=gl(le),fe.c(),fe.m(e,de)):fe&&(fe.d(1),fe=null),le[8]?F?F.p(le,_e):(F=bl(le),F.c(),F.m(e,ue)):F&&(F.d(1),F=null);let se=ie;ie=Ge(le),ie!==se&&(X&&(Kl(),vt(Ne[se],1,1,()=>{Ne[se]=null}),Xl()),~ie?(X=Ne[ie],X||(X=Ne[ie]=Ae[ie](le),X.c()),lt(X,1),X.m(we,null)):X=null),(!ee||_e[0]&16)&&A(Me,"active",le[4]==="add"),le[13]>0?Ie?Ie.p(le,_e):(Ie=Ll(le),Ie.c(),Ie.m(V,null)):Ie&&(Ie.d(1),Ie=null),(!ee||_e[0]&16)&&A(Ce,"active",le[4]==="study"),(!ee||_e[0]&16)&&A(be,"active",le[4]==="lists")},i(le){ee||(lt(X),ee=!0)},o(le){vt(X),ee=!1},d(le){le&&M(e),te&&te.d(),ne&&ne.d(),Q&&Q.d(),fe&&fe.d(),F&&F.d(),~ie&&Ne[ie].d(),Ie&&Ie.d(),De=!1,je(me)}}}function Tl(l){return l<.01?`$${l.toFixed(6)}`:l<1?`$${l.toFixed(4)}`:`$${l.toFixed(2)}`}function yi(l,e,t){let i,r,o,c,u,a,f,p,h,v,k,b;Qe(l,Je,G=>t(28,v=G)),Qe(l,We,G=>t(29,k=G)),Qe(l,Xe,G=>t(30,b=G));let m="study",_=!1,y="",C=!1,T=0,L=!1,N="",O="",S=!1,I="",w=!1;function B(){typeof localStorage<"u"&&t(7,T=parseFloat(localStorage.getItem("ai_total_cost")||"0")),t(5,_=!0)}function R(){typeof localStorage<"u"&&(localStorage.setItem("ai_token",y),t(6,C=!0),setTimeout(()=>{t(6,C=!1),t(5,_=!1)},1e3))}function E(){t(0,y=""),typeof localStorage<"u"&&localStorage.removeItem("ai_token")}function q(){t(9,N=I),t(10,O=""),t(8,L=!0)}async function W(){if(!N.trim()){t(1,I=""),typeof localStorage<"u"&&localStorage.removeItem("user_name"),t(8,L=!1);return}t(11,S=!0),t(10,O="");try{const Z=await fetch(`/flash/words/${N.trim()}.json`);if(!Z.ok)throw new Error("Файл не найден");const K=await Z.json(),be=K.language||"en";K.language&&Ze.set(K.language),t(1,I=N.trim()),typeof localStorage<"u"&&localStorage.setItem("user_name",I);let ee;if(be==="en"?ee="default":(ee=I,Je.resetDictionary(ee)),Je.importCards(K,ee),be==="en"){if(!i.find(me=>me.id==="default")){const me=`${Ye("en")} (default)`;Xe.addDictionary("default",me,"en",!1)}We.set("default")}else{const De=`${I} (${Ye(be)})`;Xe.addDictionary(I,De,be,!1),We.set(I)}t(8,L=!1)}catch{t(10,O=`Файл "${N.trim()}.json" не найден`)}finally{t(11,S=!1)}}async function z(G){if(!G){We.set(""),t(12,w=!1);return}const Z=i.find(K=>K.id===G);if(Z){We.set(G),Z.language&&Ze.set(Z.language),t(12,w=!1);return}t(11,S=!0);try{const be=await fetch(`/flash/words/${G}.json`);if(!be.ok)throw new Error("Файл не найден");const ee=await be.json(),De=ee.language||"en";ee.language&&Ze.set(ee.language);let me;if(De==="en"?me="default":(me=G,Je.resetDictionary(me)),Je.importCards(ee,me),De==="en"){if(!i.find(ne=>ne.id==="default")){const ne=`${Ye("en")} (default)`;Xe.addDictionary("default",ne,"en",!1)}We.set("default")}else{const te=`${G} (${Ye(De)})`;Xe.addDictionary(G,te,De,!1),We.set(G)}t(12,w=!1)}catch(K){console.error("Ошибка загрузки словаря:",K),alert(`Ошибка загрузки словаря "${G}"`)}finally{t(11,S=!1)}}function U(G){if(G===r){t(12,w=!1);return}z(G)}Nl(()=>{if(!i.find(Z=>Z.id==="default")){const Z=`${Ye("en")} (default)`;Xe.addDictionary("default",Z,"en",!1),(!r||r==="")&&We.set("default")}if(r){const Z=i.find(K=>K.id===r);Z&&(Z.isImported||r==="default")?Z.language&&Ze.set(Z.language):z(r)}else{We.set("default");const Z=i.find(K=>K.id==="default");Z&&Z.language&&Ze.set(Z.language)}});function j(G){w&&!G.target.closest(".dictionary-selector")&&t(12,w=!1)}function re(){t(9,N=""),t(1,I=""),typeof localStorage<"u"&&localStorage.removeItem("user_name")}const oe=(G,Z)=>G.filter(K=>(K.dictionaryId||"default")===Z);function ve(G){tt.call(this,l,G)}function de(G){tt.call(this,l,G)}function ue(G){tt.call(this,l,G)}const we=()=>t(12,w=!w),ie=G=>U(G.id),X=()=>t(5,_=!1);function ae(){y=this.value,t(0,y)}const ge=()=>t(5,_=!1),Me=()=>t(5,_=!1),Be=()=>t(8,L=!1);function Ce(){N=this.value,t(9,N)}const V=G=>G.key==="Enter"&&W(),pe=()=>t(8,L=!1),he=()=>t(8,L=!1),ce=()=>t(4,m="add"),ke=()=>t(4,m="study"),Te=()=>t(4,m="lists");return l.$$.update=()=>{var G;if(l.$$.dirty[0]&536870912&&t(2,r=k),l.$$.dirty[0]&268435460&&r){const Z={learned:v.learned.filter(K=>(K.dictionaryId||"default")===r),unlearned:v.unlearned.filter(K=>(K.dictionaryId||"default")===r),draft:(v.draft||[]).filter(K=>(K.dictionaryId||"default")===r)};Xe.updateDictionaryData(r,Z)}l.$$.dirty[0]&1073741824&&t(3,i=b),l.$$.dirty[0]&1&&t(16,o=y&&y.length>0),l.$$.dirty[0]&2&&t(15,c=I&&I.length>0),l.$$.dirty[0]&12&&i.length>0&&(!r||r==="")&&(i.find(K=>K.id==="default")?We.set("default"):i.length>0&&We.set(i[0].id)),l.$$.dirty[0]&12&&t(14,u=((G=i.find(Z=>Z.id===r))==null?void 0:G.name)||(i.length>0?"Выберите словарь":"Нет словарей")),l.$$.dirty[0]&268435460&&t(27,a=oe(v.learned,r)),l.$$.dirty[0]&268435460&&t(26,f=oe(v.unlearned,r)),l.$$.dirty[0]&268435460&&t(25,p=oe(v.draft||[],r)),l.$$.dirty[0]&234881024&&a.length+f.length+p.length,l.$$.dirty[0]&67108864&&t(13,h=f.length),l.$$.dirty[0]&33554432&&p.length},[y,I,r,i,m,_,C,T,L,N,O,S,w,h,u,c,o,B,R,E,q,W,U,j,re,p,f,a,v,k,b,ve,de,ue,we,ie,X,ae,ge,Me,Be,Ce,V,pe,he,ce,ke,Te]}class Ci extends bt{constructor(e){super(),kt(this,e,yi,bi,at,{},null,[-1,-1])}}new Ci({target:document.getElementById("app")});
