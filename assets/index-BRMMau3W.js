var Pl=Object.defineProperty;var Jl=(l,e,t)=>e in l?Pl(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var tt=(l,e,t)=>Jl(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function ze(){}function Nl(l){return l()}function Wt(){return Object.create(null)}function qe(l){l.forEach(Nl)}function Ol(l){return typeof l=="function"}function ut(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let kt;function $e(l,e){return l===e?!0:(kt||(kt=document.createElement("a")),kt.href=e,l===kt.href)}function Fl(l){return Object.keys(l).length===0}function ql(l,...e){if(l==null){for(const i of e)i(void 0);return ze}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function xe(l,e,t){l.$$.on_destroy.push(ql(e,t))}function r(l,e){l.appendChild(e)}function z(l,e,t){l.insertBefore(e,t||null)}function A(l){l.parentNode&&l.parentNode.removeChild(l)}function Yl(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function u(l){return document.createElement(l)}function J(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function R(l){return document.createTextNode(l)}function w(){return R(" ")}function gt(){return R("")}function B(l,e,t,i){return l.addEventListener(e,t,i),()=>l.removeEventListener(e,t,i)}function Kl(l){return function(e){return e.preventDefault(),l.call(this,e)}}function nt(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function n(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Gl(l){return Array.from(l.childNodes)}function te(l,e){e=""+e,l.data!==e&&(l.data=e)}function Pe(l,e){l.value=e??""}function Vl(l,e,t,i){l.style.setProperty(e,t,"")}function U(l,e,t){l.classList.toggle(e,!!t)}class Xl{constructor(e=!1){tt(this,"is_svg",!1);tt(this,"e");tt(this,"n");tt(this,"t");tt(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=J(t.nodeName):this.e=u(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)z(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(A)}}let _t;function vt(l){_t=l}function Bl(){if(!_t)throw new Error("Function called outside component initialization");return _t}function Ul(l){Bl().$$.on_mount.push(l)}function Ql(l){Bl().$$.on_destroy.push(l)}function at(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const pt=[],Mt=[];let mt=[];const jt=[],Zl=Promise.resolve();let Dt=!1;function xl(){Dt||(Dt=!0,Zl.then(Hl))}function Et(l){mt.push(l)}const zt=new Set;let ft=0;function Hl(){if(ft!==0)return;const l=_t;do{try{for(;ft<pt.length;){const e=pt[ft];ft++,vt(e),$l(e.$$)}}catch(e){throw pt.length=0,ft=0,e}for(vt(null),pt.length=0,ft=0;Mt.length;)Mt.pop()();for(let e=0;e<mt.length;e+=1){const t=mt[e];zt.has(t)||(zt.add(t),t())}mt.length=0}while(pt.length);for(;jt.length;)jt.pop()();Dt=!1,zt.clear(),vt(l)}function $l(l){if(l.fragment!==null){l.update(),qe(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Et)}}function en(l){const e=[],t=[];mt.forEach(i=>l.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),mt=e}const wt=new Set;let ot;function tn(){ot={r:0,c:[],p:ot}}function ln(){ot.r||qe(ot.c),ot=ot.p}function ct(l,e){l&&l.i&&(wt.delete(l),l.i(e))}function yt(l,e,t,i){if(l&&l.o){if(wt.has(l))return;wt.add(l),ot.c.push(()=>{wt.delete(l),i&&(t&&l.d(1),i())}),l.o(e)}else i&&i()}function bt(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function nn(l,e){l.d(1),e.delete(l.key)}function rn(l,e,t,i,s,o,c,d,a,f,p,h){let m=l.length,v=o.length,y=m;const k={};for(;y--;)k[l[y].key]=y;const g=[],S=new Map,T=new Map,M=[];for(y=v;y--;){const _=h(s,o,y),b=t(_);let C=c.get(b);C?M.push(()=>C.p(_,e)):(C=f(b,_),C.c()),S.set(b,g[y]=C),b in k&&T.set(b,Math.abs(y-k[b]))}const I=new Set,O=new Set;function E(_){ct(_,1),_.m(d,p),c.set(_.key,_),p=_.first,v--}for(;m&&v;){const _=g[v-1],b=l[m-1],C=_.key,D=b.key;_===b?(p=_.first,m--,v--):S.has(D)?!c.has(C)||I.has(C)?E(_):O.has(D)?m--:T.get(C)>T.get(D)?(O.add(C),E(_)):(I.add(D),m--):(a(b,c),m--)}for(;m--;){const _=l[m];S.has(_.key)||a(_,c)}for(;v;)E(g[v-1]);return qe(M),g}function Ut(l){l&&l.c()}function Ct(l,e,t){const{fragment:i,after_update:s}=l.$$;i&&i.m(e,t),Et(()=>{const o=l.$$.on_mount.map(Nl).filter(Ol);l.$$.on_destroy?l.$$.on_destroy.push(...o):qe(o),l.$$.on_mount=[]}),s.forEach(Et)}function St(l,e){const t=l.$$;t.fragment!==null&&(en(t.after_update),qe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function sn(l,e){l.$$.dirty[0]===-1&&(pt.push(l),xl(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function It(l,e,t,i,s,o,c=null,d=[-1]){const a=_t;vt(l);const f=l.$$={fragment:null,ctx:[],props:o,update:ze,not_equal:s,bound:Wt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Wt(),dirty:d,skip_bound:!1,root:e.target||a.$$.root};c&&c(f.root);let p=!1;if(f.ctx=t?t(l,e.props||{},(h,m,...v)=>{const y=v.length?v[0]:m;return f.ctx&&s(f.ctx[h],f.ctx[h]=y)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](y),p&&sn(l,h)),m}):[],f.update(),p=!0,qe(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const h=Gl(e.target);f.fragment&&f.fragment.l(h),h.forEach(A)}else f.fragment&&f.fragment.c();e.intro&&ct(l.$$.fragment),Ct(l,e.target,e.anchor),Hl()}vt(a)}class Tt{constructor(){tt(this,"$$");tt(this,"$$set")}$destroy(){St(this,1),this.$destroy=ze}$on(e,t){if(!Ol(t))return ze;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!Fl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const on="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(on);const dt=[];function Lt(l,e=ze){let t;const i=new Set;function s(d){if(ut(l,d)&&(l=d,t)){const a=!dt.length;for(const f of i)f[1](),dt.push(f,l);if(a){for(let f=0;f<dt.length;f+=2)dt[f][0](dt[f+1]);dt.length=0}}}function o(d){s(d(l))}function c(d,a=ze){const f=[d,a];return i.add(f),i.size===1&&(t=e(s,o)||ze),d(l),()=>{i.delete(f),i.size===0&&t&&(t(),t=null)}}return{set:s,update:o,subscribe:c}}const Rl="https://dict.pusicasavo.workers.dev/api/dictionary",an="api_auth_token";function Wl(){return typeof localStorage>"u"?null:localStorage.getItem(an)||"930091b6-87d0-4b3a-8d0e-00d8c0834a98"}async function cn(l){const e=Wl();if(!e)throw new Error("Токен авторизации не найден");try{const t=await fetch(`${Rl}?id=${l}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok){if(t.status===404)return null;throw new Error(`Ошибка получения словаря: ${t.status}`)}return await t.json()}catch(t){throw console.error("Ошибка получения словаря:",t),t}}async function un(l){const e=Wl();if(!e)throw new Error("Токен авторизации не найден");try{const t=await fetch(Rl,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(l)});if(!t.ok)throw new Error(`Ошибка сохранения словаря: ${t.status}`);return await t.json()}catch(t){throw console.error("Ошибка сохранения словаря:",t),t}}function fn(l){return l?{learned:(l.learned||[]).map(e=>({id:e.id,word:e.word,translation:e.translation,association:e.association||"",imageUrl:e.imageUrl||"",dictionaryId:l.id,createdAt:e.createdAt,updatedAt:e.updatedAt,learnedAt:e.learnedAt||e.updatedAt})),unlearned:(l.unlearned||[]).map(e=>({id:e.id,word:e.word,translation:e.translation,association:e.association||"",imageUrl:e.imageUrl||"",dictionaryId:l.id,createdAt:e.createdAt,updatedAt:e.updatedAt,activatedAt:e.activatedAt,reviewedAt:e.reviewedAt})),draft:(l.draft||[]).map(e=>({id:e.id,word:e.word,translation:e.translation||"",association:e.association||"",imageUrl:e.imageUrl||"",dictionaryId:l.id,createdAt:e.createdAt,updatedAt:e.updatedAt,isDraft:!0}))}:{learned:[],unlearned:[],draft:[]}}function dn(l,e,t){return{id:l,language:e,learned:(t.learned||[]).map(i=>({id:i.id,word:i.word,translation:i.translation,association:i.association||"",imageUrl:i.imageUrl||"",createdAt:i.createdAt,updatedAt:i.updatedAt||i.learnedAt||new Date().toISOString()})),unlearned:(t.unlearned||[]).map(i=>({id:i.id,word:i.word,translation:i.translation,association:i.association||"",imageUrl:i.imageUrl||"",createdAt:i.createdAt,updatedAt:i.updatedAt||new Date().toISOString(),activatedAt:i.activatedAt||i.createdAt,reviewedAt:i.reviewedAt})),draft:(t.draft||[]).map(i=>({id:i.id,word:i.word,translation:i.translation||"",association:i.association||"",imageUrl:i.imageUrl||"",createdAt:i.createdAt,updatedAt:i.updatedAt||i.createdAt}))}}const Ke="flash-cards-data",Nt=new Map,st=new Map,pn=5e3,mn=5;async function Ot(l,e,t){try{const i={learned:t.learned.filter(o=>(o.dictionaryId||"default")===l),unlearned:t.unlearned.filter(o=>(o.dictionaryId||"default")===l),draft:(t.draft||[]).filter(o=>(o.dictionaryId||"default")===l)},s=dn(l,e,i);await un(s),Nt.set(l,0)}catch(i){console.error("Ошибка синхронизации словаря:",i)}}function lt(l,e,t,i=1){const o=(Nt.get(l)||0)+i;if(Nt.set(l,o),o>=mn){st.has(l)&&(clearTimeout(st.get(l)),st.delete(l)),Ot(l,e,t);return}st.has(l)&&clearTimeout(st.get(l));const c=setTimeout(()=>{Ot(l,e,t),st.delete(l)},pn);st.set(l,c)}function gn(){const l=typeof localStorage<"u"?localStorage.getItem(Ke):null,e=l?JSON.parse(l):{learned:[],unlearned:[],draft:[]};e.cards&&e.cards.length>0&&(e.unlearned=[...e.unlearned,...e.cards],delete e.cards),e.draft||(e.draft=[]);const t=a=>a.map(f=>({...f,dictionaryId:f.dictionaryId||"default"}));e.learned=t(e.learned),e.unlearned=t(e.unlearned),e.draft=t(e.draft);const i=new Set,s=a=>a.filter(f=>i.has(f.id)?!1:(i.add(f.id),!0));e.learned=s(e.learned),e.unlearned=s(e.unlearned),e.draft=s(e.draft),typeof localStorage<"u"&&l&&localStorage.setItem(Ke,JSON.stringify(e));const{subscribe:o,set:c,update:d}=Lt(e);return{subscribe:o,set:c,update:d,loadDictionaryFromBackend:async(a,f)=>{try{const p=await cn(a);if(p){const h=fn(p);d(m=>{const v={learned:m.learned.filter(k=>(k.dictionaryId||"default")!==a),unlearned:m.unlearned.filter(k=>(k.dictionaryId||"default")!==a),draft:m.draft.filter(k=>(k.dictionaryId||"default")!==a)},y={learned:[...v.learned,...h.learned],unlearned:[...v.unlearned,...h.unlearned],draft:[...v.draft,...h.draft]};return localStorage.setItem(Ke,JSON.stringify(y)),y})}}catch(p){throw console.error("Ошибка загрузки словаря:",p),p}},syncDictionary:async(a,f)=>{let p;o(h=>{p=h})(),await Ot(a,f,p)},addCard:(a,f,p="",h="",m="default",v="en")=>{d(y=>{const k={id:Date.now(),word:a,translation:f,association:p,imageUrl:h,dictionaryId:m,createdAt:new Date().toISOString()},g={...y,unlearned:[...y.unlearned,k]};return localStorage.setItem(Ke,JSON.stringify(g)),lt(m,v,g),g})},markAsLearned:(a,f=null,p="en")=>{d(h=>{const m=h.unlearned.find(k=>k.id===a);if(!m)return h;const v=f||m.dictionaryId||"default",y={...h,unlearned:h.unlearned.filter(k=>k.id!==a),learned:[...h.learned,{...m,learnedAt:new Date().toISOString()}]};return localStorage.setItem(Ke,JSON.stringify(y)),lt(v,p,y),y})},markAsUnlearned:(a,f=null,p="en")=>{d(h=>{const m=h.unlearned.find(k=>k.id===a);if(!m)return h;const v=f||m.dictionaryId||"default",y={...h,unlearned:[...h.unlearned.filter(k=>k.id!==a),{...m,reviewedAt:new Date().toISOString()}]};return localStorage.setItem(Ke,JSON.stringify(y)),lt(v,p,y),y})},moveToStudy:a=>{d(f=>{const p=f.learned.find(m=>m.id===a);if(!p)return f;const h={...f,learned:f.learned.filter(m=>m.id!==a),unlearned:[...f.unlearned,p]};return localStorage.setItem(Ke,JSON.stringify(h)),h})},moveAllToStudy:()=>{d(a=>{if(a.learned.length===0)return a;const f={...a,learned:[],unlearned:[...a.unlearned,...a.learned]};return localStorage.setItem(Ke,JSON.stringify(f)),f})},deleteCard:(a,f="unlearned",p=null,h="en")=>{d(m=>{const v=m[f].find(g=>g.id===a),y=p||(v==null?void 0:v.dictionaryId)||"default",k={...m,[f]:m[f].filter(g=>g.id!==a)};return localStorage.setItem(Ke,JSON.stringify(k)),lt(y,h,k),k})},editCard:(a,f,p,h=null,m="en")=>{d(v=>{const y=v[f].find(S=>S.id===a),k=h||(y==null?void 0:y.dictionaryId)||"default",g={...v,[f]:v[f].map(S=>S.id===a?{...S,...p,updatedAt:new Date().toISOString()}:S)};return localStorage.setItem(Ke,JSON.stringify(g)),lt(k,m,g),g})},addDraftCards:(a,f="default",p="en")=>{d(h=>{const m=new Set([...h.unlearned.map(g=>g.word.toLowerCase()),...h.learned.map(g=>g.word.toLowerCase()),...(h.draft||[]).map(g=>g.word.toLowerCase())]);let v=0;const y=a.filter(g=>g.trim()&&!m.has(g.trim().toLowerCase())).map(g=>({id:`draft_${Date.now()}_${v++}_${Math.random().toString(36).substr(2,9)}`,word:g.trim(),translation:"",association:"",imageUrl:"",dictionaryId:f,createdAt:new Date().toISOString(),isDraft:!0}));if(y.length===0)return h;const k={...h,draft:[...h.draft||[],...y]};return localStorage.setItem(Ke,JSON.stringify(k)),lt(f,p,k,y.length),k})},activateCard:(a,f="en")=>{d(p=>{const h=p.draft.find(g=>g.id===a);if(!h)return p;const m=h.dictionaryId||"default",{isDraft:v,...y}=h,k={...p,draft:p.draft.filter(g=>g.id!==a),unlearned:[...p.unlearned,{...y,activatedAt:new Date().toISOString()}]};return localStorage.setItem(Ke,JSON.stringify(k)),lt(m,f,k),k})},editDraftCard:(a,f,p="en",h=!1)=>{d(m=>{var M,I;const v=m.draft.find(O=>O.id===a);if(!v)return m;const y=v.dictionaryId||"default",k={...v,...f,updatedAt:new Date().toISOString()},g=(M=k.translation)==null?void 0:M.trim(),S=(I=k.imageUrl)==null?void 0:I.trim();if(g&&(S||h)){const{isDraft:O,...E}=k,_={...m,draft:m.draft.filter(b=>b.id!==a),unlearned:[...m.unlearned,{...E,activatedAt:new Date().toISOString()}]};return localStorage.setItem(Ke,JSON.stringify(_)),lt(y,p,_),_}else{const O={...m,draft:m.draft.map(E=>E.id===a?k:E)};return localStorage.setItem(Ke,JSON.stringify(O)),O}})},reset:()=>{const a={learned:[],unlearned:[],draft:[]};localStorage.setItem(Ke,JSON.stringify(a)),c(a)},resetDictionary:a=>{d(f=>{const p={learned:f.learned.filter(h=>(h.dictionaryId||"default")!==a),unlearned:f.unlearned.filter(h=>(h.dictionaryId||"default")!==a),draft:f.draft.filter(h=>(h.dictionaryId||"default")!==a)};return localStorage.setItem(Ke,JSON.stringify(p)),p})},importCards:(a,f)=>{d(p=>{const h=a.unlearned||[],m=a.learned||[],v=a.draft||[],y=_=>_.map(b=>({...b,dictionaryId:f||"default"})),k=y(h),g=y(m),S=y(v),T=new Set([...p.unlearned.map(_=>_.word.toLowerCase()),...p.learned.map(_=>_.word.toLowerCase()),...p.draft.map(_=>_.word.toLowerCase())]),M=k.filter(_=>!T.has(_.word.toLowerCase())),I=g.filter(_=>!T.has(_.word.toLowerCase())),O=S.filter(_=>!T.has(_.word.toLowerCase())),E={learned:[...p.learned,...I],unlearned:[...p.unlearned,...M],draft:[...p.draft,...O]};return localStorage.setItem(Ke,JSON.stringify(E)),E})}}}const We=gn(),hn={en:"Английский",pt:"Португальский",es:"Испанский"},vn={en:"English",pt:"Portuguese",es:"Spanish"},_n=typeof localStorage<"u"&&localStorage.getItem("target_language")||"en",et=Lt(_n);et.subscribe(l=>{typeof localStorage<"u"&&localStorage.setItem("target_language",l)});function Xe(l){return hn[l]||l}function yn(l){return vn[l]||l}const ht="loaded-dictionaries",Bt="current_dictionary",kn=typeof localStorage<"u"&&localStorage.getItem(Bt)||"",Ye=Lt(kn);Ye.subscribe(l=>{typeof localStorage<"u"&&(l?localStorage.setItem(Bt,l):localStorage.removeItem(Bt))});function wn(){const l=typeof localStorage<"u"?localStorage.getItem(ht):null,e=l?JSON.parse(l):[],{subscribe:t,set:i,update:s}=Lt(e);return{subscribe:t,addDictionary:(o,c,d,a=!1)=>{s(f=>{if(f.find(v=>v.id===o))return f.map(v=>v.id===o?{...v,name:c,language:d,isImported:a}:v);const h={id:o,name:c,language:d,isImported:a},m=[...f,h];return typeof localStorage<"u"&&localStorage.setItem(ht,JSON.stringify(m)),m})},removeDictionary:o=>{s(c=>{const d=c.filter(a=>a.id!==o);return typeof localStorage<"u"&&localStorage.setItem(ht,JSON.stringify(d)),d})},clear:()=>{typeof localStorage<"u"&&localStorage.removeItem(ht),i([])},updateDictionaryData:(o,c)=>{s(d=>{const a=d.map(f=>f.id===o?{...f,data:c}:f);return typeof localStorage<"u"&&localStorage.setItem(ht,JSON.stringify(a)),a})}}}const Ve=wn();function bn(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-1wg5uvi"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg> <span class="svelte-1wg5uvi">Нажмите, чтобы добавить изображение</span>',n(e,"class","image-placeholder svelte-1wg5uvi")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function Cn(l){let e,t,i,s;return{c(){e=u("img"),$e(e.src,t=l[4])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","preview-image svelte-1wg5uvi")},m(o,c){z(o,e,c),i||(s=B(e,"error",l[21]),i=!0)},p(o,c){c[0]&16&&!$e(e.src,t=o[4])&&n(e,"src",t)},d(o){o&&A(e),i=!1,s()}}}function Pt(l){let e;return{c(){e=u("div"),e.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
      Карточка добавлена!`,n(e,"class","success-toast svelte-1wg5uvi")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function Jt(l){let e,t,i,s,o,c=l[9]>0?`Импортировано ${l[9]} карточек!`:"Новых карточек не найдено",d;return{c(){e=u("div"),t=J("svg"),i=J("polyline"),s=J("line"),o=w(),d=R(c),n(i,"points","17 8 12 3 7 8"),n(s,"x1","12"),n(s,"y1","3"),n(s,"x2","12"),n(s,"y2","15"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast import svelte-1wg5uvi")},m(a,f){z(a,e,f),r(e,t),r(t,i),r(t,s),r(e,o),r(e,d)},p(a,f){f[0]&512&&c!==(c=a[9]>0?`Импортировано ${a[9]} карточек!`:"Новых карточек не найдено")&&te(d,c)},d(a){a&&A(e)}}}function Ft(l){let e,t,i,s,o,c,d,a,f,p=l[12]>0?`Добавлено ${l[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)",h;return{c(){e=u("div"),t=J("svg"),i=J("line"),s=J("line"),o=J("line"),c=J("line"),d=J("line"),a=J("line"),f=w(),h=R(p),n(i,"x1","8"),n(i,"y1","6"),n(i,"x2","21"),n(i,"y2","6"),n(s,"x1","8"),n(s,"y1","12"),n(s,"x2","21"),n(s,"y2","12"),n(o,"x1","8"),n(o,"y1","18"),n(o,"x2","21"),n(o,"y2","18"),n(c,"x1","3"),n(c,"y1","6"),n(c,"x2","3.01"),n(c,"y2","6"),n(d,"x1","3"),n(d,"y1","12"),n(d,"x2","3.01"),n(d,"y2","12"),n(a,"x1","3"),n(a,"y1","18"),n(a,"x2","3.01"),n(a,"y2","18"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast bulk svelte-1wg5uvi")},m(m,v){z(m,e,v),r(e,t),r(t,i),r(t,s),r(t,o),r(t,c),r(t,d),r(t,a),r(e,f),r(e,h)},p(m,v){v[0]&4096&&p!==(p=m[12]>0?`Добавлено ${m[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)")&&te(h,p)},d(m){m&&A(e)}}}function qt(l){let e,t,i,s,o,c,d,a,f,p,h,m,v,y,k,g,S,T,M,I,O,E,_,b=l[7]&&Yt(l),C=l[4]&&Kt(l);return{c(){e=u("div"),t=u("div"),i=u("div"),s=u("h2"),s.textContent="Добавить изображение",o=w(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=w(),a=u("div"),f=u("div"),p=u("label"),p.innerHTML=`Ссылка на изображение
            <span class="optional svelte-1wg5uvi">(необязательно)</span>`,h=w(),m=u("input"),v=w(),b&&b.c(),y=w(),k=u("div"),C&&C.c(),g=w(),S=u("button"),S.textContent="Отмена",T=w(),M=u("button"),I=R("Сохранить"),n(s,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(p,"for","imageUrl"),n(p,"class","svelte-1wg5uvi"),n(m,"id","imageUrl"),n(m,"type","url"),n(m,"placeholder","https://example.com/image.jpg"),n(m,"class","svelte-1wg5uvi"),n(f,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(S,"class","btn-secondary svelte-1wg5uvi"),n(M,"class","btn-primary svelte-1wg5uvi"),M.disabled=O=l[8]&&l[7],n(k,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(D,L){z(D,e,L),r(e,t),r(t,i),r(i,s),r(i,o),r(i,c),r(t,d),r(t,a),r(a,f),r(f,p),r(f,h),r(f,m),Pe(m,l[7]),r(a,v),b&&b.m(a,null),r(t,y),r(t,k),C&&C.m(k,null),r(k,g),r(k,S),r(k,T),r(k,M),r(M,I),E||(_=[B(c,"click",l[35]),B(m,"input",l[36]),B(S,"click",l[37]),B(M,"click",l[19]),B(t,"click",nt(l[30])),B(e,"click",l[38]),B(e,"keydown",l[39])],E=!0)},p(D,L){L[0]&128&&m.value!==D[7]&&Pe(m,D[7]),D[7]?b?b.p(D,L):(b=Yt(D),b.c(),b.m(a,null)):b&&(b.d(1),b=null),D[4]?C?C.p(D,L):(C=Kt(D),C.c(),C.m(k,g)):C&&(C.d(1),C=null),L[0]&384&&O!==(O=D[8]&&D[7])&&(M.disabled=O)},d(D){D&&A(e),b&&b.d(),C&&C.d(),E=!1,qe(_)}}}function Yt(l){let e;function t(o,c){return o[8]?In:Sn}let i=t(l),s=i(l);return{c(){e=u("div"),s.c(),n(e,"class","image-preview-container svelte-1wg5uvi")},m(o,c){z(o,e,c),s.m(e,null)},p(o,c){i===(i=t(o))&&s?s.p(o,c):(s.d(1),s=i(o),s&&(s.c(),s.m(e,null)))},d(o){o&&A(e),s.d()}}}function Sn(l){let e,t,i,s;return{c(){e=u("img"),$e(e.src,t=l[7])||n(e,"src",t),n(e,"alt","Превью изображения"),n(e,"class","modal-image-preview svelte-1wg5uvi")},m(o,c){z(o,e,c),i||(s=[B(e,"error",l[21]),B(e,"load",l[22])],i=!0)},p(o,c){c[0]&128&&!$e(e.src,t=o[7])&&n(e,"src",t)},d(o){o&&A(e),i=!1,qe(s)}}}function In(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Не удалось загрузить изображение</span>',n(e,"class","image-error svelte-1wg5uvi")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function Kt(l){let e,t,i;return{c(){e=u("button"),e.textContent="Удалить",n(e,"class","btn-secondary danger svelte-1wg5uvi")},m(s,o){z(s,e,o),t||(i=B(e,"click",l[20]),t=!0)},p:ze,d(s){s&&A(e),t=!1,i()}}}function Gt(l){let e,t,i,s,o,c,d,a,f,p,h,m,v,y,k,g,S,T,M,I,O,E,_,b,C=(l[15]>0?l[15]:"")+"",D,L,N=l[15]===1?"слово":l[15]>1&&l[15]<5?"слова":l[15]>=5?"слов":"",j,Y,le,K,V=l[15]>0&&Vt(l);return{c(){e=u("div"),t=u("div"),i=u("div"),s=u("h2"),s.textContent="Загрузить список слов",o=w(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=w(),a=u("div"),f=u("div"),f.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg> <p class="svelte-1wg5uvi">Введите слова списком — каждое слово на новой строке. Слова будут добавлены в раздел &quot;На проработку&quot;, где вы сможете добавить перевод и изображение.</p>',p=w(),h=u("div"),m=u("label"),v=R(`Слова
            `),V&&V.c(),y=w(),k=u("textarea"),g=w(),S=u("div"),T=u("button"),T.textContent="Отмена",M=w(),I=u("button"),O=J("svg"),E=J("line"),_=J("line"),b=R(`
          Добавить `),D=R(C),L=w(),j=R(N),n(s,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(f,"class","bulk-info svelte-1wg5uvi"),n(m,"for","bulkWords"),n(m,"class","svelte-1wg5uvi"),n(k,"id","bulkWords"),n(k,"placeholder",`serendipity
ephemeral
ubiquitous
eloquent
resilient`),n(k,"rows","10"),n(k,"class","bulk-textarea svelte-1wg5uvi"),n(h,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(T,"class","btn-secondary svelte-1wg5uvi"),n(E,"x1","12"),n(E,"y1","5"),n(E,"x2","12"),n(E,"y2","19"),n(_,"x1","5"),n(_,"y1","12"),n(_,"x2","19"),n(_,"y2","12"),n(O,"width","18"),n(O,"height","18"),n(O,"viewBox","0 0 24 24"),n(O,"fill","none"),n(O,"stroke","currentColor"),n(O,"stroke-width","2"),n(I,"class","btn-primary svelte-1wg5uvi"),I.disabled=Y=l[15]===0,n(S,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal bulk-modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(ie,ae){z(ie,e,ae),r(e,t),r(t,i),r(i,s),r(i,o),r(i,c),r(t,d),r(t,a),r(a,f),r(a,p),r(a,h),r(h,m),r(m,v),V&&V.m(m,null),r(h,y),r(h,k),Pe(k,l[0]),r(t,g),r(t,S),r(S,T),r(S,M),r(S,I),r(I,O),r(O,E),r(O,_),r(I,b),r(I,D),r(I,L),r(I,j),le||(K=[B(c,"click",l[26]),B(k,"input",l[40]),B(T,"click",l[26]),B(I,"click",l[27]),B(t,"click",nt(l[29])),B(e,"click",l[26]),B(e,"keydown",l[41])],le=!0)},p(ie,ae){ie[15]>0?V?V.p(ie,ae):(V=Vt(ie),V.c(),V.m(m,null)):V&&(V.d(1),V=null),ae[0]&1&&Pe(k,ie[0]),ae[0]&32768&&C!==(C=(ie[15]>0?ie[15]:"")+"")&&te(D,C),ae[0]&32768&&N!==(N=ie[15]===1?"слово":ie[15]>1&&ie[15]<5?"слова":ie[15]>=5?"слов":"")&&te(j,N),ae[0]&32768&&Y!==(Y=ie[15]===0)&&(I.disabled=Y)},d(ie){ie&&A(e),V&&V.d(),le=!1,qe(K)}}}function Vt(l){let e,t,i,s=l[15]===1?"слово":l[15]<5?"слова":"слов",o;return{c(){e=u("span"),t=R(l[15]),i=w(),o=R(s),n(e,"class","word-count svelte-1wg5uvi")},m(c,d){z(c,e,d),r(e,t),r(e,i),r(e,o)},p(c,d){d[0]&32768&&te(t,c[15]),d[0]&32768&&s!==(s=c[15]===1?"слово":c[15]<5?"слова":"слов")&&te(o,s)},d(c){c&&A(e)}}}function Tn(l){let e,t,i,s,o,c,d,a,f,p,h,m,v,y,k,g,S,T,M,I=l[16].toLowerCase()+"",O,E,_,b=l[1].length+"",C,D,L,N,j,Y,le,K,V,ie=l[2].length+"",ae,Me,je,fe,pe,ve,Oe,ce,Ce,Je,ke,Be=l[3].length+"",W,Se,De,re,Ie,He,F,G,P,we,de,Re,ne,ue,se=(l[1]||"Слово")+"",$,me,Q,ee=(l[2]||"Перевод")+"",q,Te,x,_e,Ee,oe,H,Ue,ge;function be(X,Z){return X[4]?Cn:bn}let Ge=be(l),Fe=Ge(l),Le=l[5]&&Pt(),Ae=l[10]&&Jt(l),he=l[13]&&Ft(l),ye=l[6]&&qt(l),Ne=l[11]&&Gt(l);return{c(){e=u("input"),t=w(),i=u("div"),s=u("div"),o=u("div"),c=u("h1"),c.textContent="Новая карточка",d=w(),a=u("div"),f=u("button"),f.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',p=w(),h=u("button"),h.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>',m=w(),v=u("p"),v.textContent="Добавьте слово для изучения",y=w(),k=u("div"),g=u("form"),S=u("div"),T=u("label"),M=R("Слово ("),O=R(I),E=R(`)
          `),_=u("span"),C=R(b),D=R("/35"),L=w(),N=u("input"),j=w(),Y=u("div"),le=u("label"),K=R(`Перевод
          `),V=u("span"),ae=R(ie),Me=R("/50"),je=w(),fe=u("input"),pe=w(),ve=u("div"),Oe=u("label"),ce=R(`Ассоциация 
          `),Ce=u("span"),Ce.textContent="(необязательно)",Je=w(),ke=u("span"),W=R(Be),Se=R("/95"),De=w(),re=u("textarea"),Ie=w(),He=u("button"),He.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        Добавить карточку`,F=w(),G=u("div"),P=u("span"),P.textContent="Превью карточки",we=w(),de=u("button"),Fe.c(),Re=w(),ne=u("div"),ue=u("div"),$=R(se),me=w(),Q=u("div"),q=R(ee),Te=w(),Le&&Le.c(),x=w(),Ae&&Ae.c(),_e=w(),he&&he.c(),Ee=w(),ye&&ye.c(),oe=w(),Ne&&Ne.c(),H=gt(),n(e,"type","file"),n(e,"accept",".json"),Vl(e,"display","none"),n(e,"class","svelte-1wg5uvi"),n(c,"class","svelte-1wg5uvi"),n(f,"type","button"),n(f,"class","import-btn bulk svelte-1wg5uvi"),n(f,"title","Загрузить список слов"),n(h,"type","button"),n(h,"class","import-btn svelte-1wg5uvi"),n(h,"title","Импорт из JSON"),n(a,"class","header-actions svelte-1wg5uvi"),n(o,"class","header-top svelte-1wg5uvi"),n(v,"class","subtitle svelte-1wg5uvi"),n(s,"class","header svelte-1wg5uvi"),n(_,"class","char-count svelte-1wg5uvi"),U(_,"limit",l[1].length>=35),n(T,"for","word"),n(T,"class","svelte-1wg5uvi"),n(N,"id","word"),n(N,"type","text"),n(N,"placeholder","например: serendipity"),n(N,"maxlength","35"),N.required=!0,n(N,"class","svelte-1wg5uvi"),n(S,"class","input-group svelte-1wg5uvi"),n(V,"class","char-count svelte-1wg5uvi"),U(V,"limit",l[2].length>=50),n(le,"for","translation"),n(le,"class","svelte-1wg5uvi"),n(fe,"id","translation"),n(fe,"type","text"),n(fe,"placeholder","например: счастливая случайность"),n(fe,"maxlength","50"),fe.required=!0,n(fe,"class","svelte-1wg5uvi"),n(Y,"class","input-group svelte-1wg5uvi"),n(Ce,"class","optional svelte-1wg5uvi"),n(ke,"class","char-count svelte-1wg5uvi"),U(ke,"limit",l[3].length>=95),n(Oe,"for","association"),n(Oe,"class","svelte-1wg5uvi"),n(re,"id","association"),n(re,"placeholder","например: представьте, как вы случайно находите клад под деревом"),n(re,"maxlength","95"),n(re,"rows","2"),n(re,"class","svelte-1wg5uvi"),n(ve,"class","input-group svelte-1wg5uvi"),n(He,"type","submit"),n(He,"class","submit-btn svelte-1wg5uvi"),n(g,"class","form svelte-1wg5uvi"),n(P,"class","preview-label svelte-1wg5uvi"),n(ue,"class","preview-word svelte-1wg5uvi"),n(Q,"class","preview-translation svelte-1wg5uvi"),n(ne,"class","card-content-preview svelte-1wg5uvi"),n(de,"type","button"),n(de,"class","card-preview svelte-1wg5uvi"),U(de,"has-image",l[4]),n(G,"class","card-preview-wrapper svelte-1wg5uvi"),n(k,"class","card-editor svelte-1wg5uvi"),n(i,"class","add-card-container svelte-1wg5uvi")},m(X,Z){z(X,e,Z),l[31](e),z(X,t,Z),z(X,i,Z),r(i,s),r(s,o),r(o,c),r(o,d),r(o,a),r(a,f),r(a,p),r(a,h),r(s,m),r(s,v),r(i,y),r(i,k),r(k,g),r(g,S),r(S,T),r(T,M),r(T,O),r(T,E),r(T,_),r(_,C),r(_,D),r(S,L),r(S,N),Pe(N,l[1]),r(g,j),r(g,Y),r(Y,le),r(le,K),r(le,V),r(V,ae),r(V,Me),r(Y,je),r(Y,fe),Pe(fe,l[2]),r(g,pe),r(g,ve),r(ve,Oe),r(Oe,ce),r(Oe,Ce),r(Oe,Je),r(Oe,ke),r(ke,W),r(ke,Se),r(ve,De),r(ve,re),Pe(re,l[3]),r(g,Ie),r(g,He),r(k,F),r(k,G),r(G,P),r(G,we),r(G,de),Fe.m(de,null),r(de,Re),r(de,ne),r(ne,ue),r(ue,$),r(ne,me),r(ne,Q),r(Q,q),r(i,Te),Le&&Le.m(i,null),r(i,x),Ae&&Ae.m(i,null),r(i,_e),he&&he.m(i,null),z(X,Ee,Z),ye&&ye.m(X,Z),z(X,oe,Z),Ne&&Ne.m(X,Z),z(X,H,Z),Ue||(ge=[B(e,"change",l[24]),B(f,"click",l[25]),B(h,"click",l[23]),B(N,"input",l[32]),B(fe,"input",l[33]),B(re,"input",l[34]),B(g,"submit",Kl(l[17])),B(de,"click",l[18])],Ue=!0)},p(X,Z){Z[0]&65536&&I!==(I=X[16].toLowerCase()+"")&&te(O,I),Z[0]&2&&b!==(b=X[1].length+"")&&te(C,b),Z[0]&2&&U(_,"limit",X[1].length>=35),Z[0]&2&&N.value!==X[1]&&Pe(N,X[1]),Z[0]&4&&ie!==(ie=X[2].length+"")&&te(ae,ie),Z[0]&4&&U(V,"limit",X[2].length>=50),Z[0]&4&&fe.value!==X[2]&&Pe(fe,X[2]),Z[0]&8&&Be!==(Be=X[3].length+"")&&te(W,Be),Z[0]&8&&U(ke,"limit",X[3].length>=95),Z[0]&8&&Pe(re,X[3]),Ge===(Ge=be(X))&&Fe?Fe.p(X,Z):(Fe.d(1),Fe=Ge(X),Fe&&(Fe.c(),Fe.m(de,Re))),Z[0]&2&&se!==(se=(X[1]||"Слово")+"")&&te($,se),Z[0]&4&&ee!==(ee=(X[2]||"Перевод")+"")&&te(q,ee),Z[0]&16&&U(de,"has-image",X[4]),X[5]?Le||(Le=Pt(),Le.c(),Le.m(i,x)):Le&&(Le.d(1),Le=null),X[10]?Ae?Ae.p(X,Z):(Ae=Jt(X),Ae.c(),Ae.m(i,_e)):Ae&&(Ae.d(1),Ae=null),X[13]?he?he.p(X,Z):(he=Ft(X),he.c(),he.m(i,null)):he&&(he.d(1),he=null),X[6]?ye?ye.p(X,Z):(ye=qt(X),ye.c(),ye.m(oe.parentNode,oe)):ye&&(ye.d(1),ye=null),X[11]?Ne?Ne.p(X,Z):(Ne=Gt(X),Ne.c(),Ne.m(H.parentNode,H)):Ne&&(Ne.d(1),Ne=null)},i:ze,o:ze,d(X){X&&(A(e),A(t),A(i),A(Ee),A(oe),A(H)),l[31](null),Fe.d(),Le&&Le.d(),Ae&&Ae.d(),he&&he.d(),ye&&ye.d(X),Ne&&Ne.d(X),Ue=!1,qe(ge)}}}function Ln(l,e,t){let i,s,o,c,d;xe(l,We,W=>t(42,o=W)),xe(l,et,W=>t(28,c=W)),xe(l,Ve,W=>t(43,d=W));let a="",f="",p="",h="",m=!1,v=!1,y="",k=!1,g=0,S=!1,T=!1,M="",I=0,O=!1;function E(){if(a.trim()&&f.trim()){let W=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"";if(!(d.length>0)||!W||W===""){const Ie=`${Xe("en")} (default)`;Ve.addDictionary("default",Ie,"en",!1),Ye.set("default"),W="default"}const De=W||"default",re=c||"en";We.addCard(a.trim(),f.trim(),p.trim(),h.trim(),De,re),t(1,a=""),t(2,f=""),t(3,p=""),t(4,h=""),t(5,m=!0),setTimeout(()=>t(5,m=!1),2e3)}}function _(){t(7,y=h),t(8,k=!1),t(6,v=!0)}function b(){y.trim()&&t(4,h=y.trim()),t(6,v=!1)}function C(){t(4,h=""),t(7,y=""),t(6,v=!1)}function D(){t(8,k=!0)}function L(){t(8,k=!1)}let N;function j(){N.click()}function Y(W){const Se=W.target.files[0];if(!Se)return;const De=new FileReader;De.onload=re=>{var Ie,He,F;try{const G=JSON.parse(re.target.result),P=Se.name.replace(/\.json$/i,""),we=G.language||"en";G.language&&et.set(G.language);let de;we==="en"?de="default":(de=P,We.resetDictionary(de));const Re=(((Ie=o.learned)==null?void 0:Ie.length)||0)+(((He=o.unlearned)==null?void 0:He.length)||0)+(((F=o.draft)==null?void 0:F.length)||0);if(We.importCards(G,de),we==="en"){if(!d.find(ue=>ue.id==="default")){const ue=`${Xe("en")} (default)`;Ve.addDictionary("default",ue,"en",!0)}Ye.set("default")}else{const ne=`${P} (${Xe(we)})`;Ve.addDictionary(P,ne,we,!0),Ye.set(P)}setTimeout(()=>{var ue,se,$;const ne=(((ue=o.learned)==null?void 0:ue.length)||0)+(((se=o.unlearned)==null?void 0:se.length)||0)+((($=o.draft)==null?void 0:$.length)||0);t(9,g=ne-Re),t(10,S=!0),setTimeout(()=>t(10,S=!1),3e3)},100)}catch{alert("Ошибка чтения файла. Убедитесь, что это корректный JSON файл.")}},De.readAsText(Se),W.target.value=""}function le(){t(0,M=""),t(11,T=!0)}function K(){t(11,T=!1),t(0,M="")}function V(){var Se;const W=M.split(`
`).map(De=>De.trim()).filter(De=>De.length>0);if(W.length>0){const De=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"default";if(De===""){const F=`${Xe("en")} (default)`;Ve.addDictionary("default",F,"en",!1),Ye.set("default")}const re=De,Ie=c||"en",He=((Se=o.draft)==null?void 0:Se.length)||0;We.addDraftCards(W,re,Ie),setTimeout(()=>{var G;const F=((G=o.draft)==null?void 0:G.length)||0;t(12,I=F-He),t(13,O=!0),setTimeout(()=>t(13,O=!1),3e3)},100)}K()}function ie(W){at.call(this,l,W)}function ae(W){at.call(this,l,W)}function Me(W){Mt[W?"unshift":"push"](()=>{N=W,t(14,N)})}function je(){a=this.value,t(1,a)}function fe(){f=this.value,t(2,f)}function pe(){p=this.value,t(3,p)}const ve=()=>t(6,v=!1);function Oe(){y=this.value,t(7,y)}const ce=()=>t(6,v=!1),Ce=()=>t(6,v=!1),Je=W=>W.key==="Escape"&&t(6,v=!1);function ke(){M=this.value,t(0,M)}const Be=W=>W.key==="Escape"&&K();return l.$$.update=()=>{l.$$.dirty[0]&268435456&&t(16,i=Xe(c)),l.$$.dirty[0]&1&&t(15,s=M.split(`
`).filter(W=>W.trim().length>0).length)},[M,a,f,p,h,m,v,y,k,g,S,T,I,O,N,s,i,E,_,b,C,D,L,j,Y,le,K,V,c,ie,ae,Me,je,fe,pe,ve,Oe,ce,Ce,Je,ke,Be]}class An extends Tt{constructor(e){super(),It(this,e,Ln,Tn,ut,{},null,[-1,-1])}}function zn(l){let e;return{c(){e=R("Добавьте карточки для начала")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function Mn(l){let e,t,i=l[2].length+"",s;return{c(){e=R("Осталось карточек: "),t=u("span"),s=R(i),n(t,"class","count svelte-1r41zm6")},m(o,c){z(o,e,c),z(o,t,c),r(t,s)},p(o,c){c[0]&4&&i!==(i=o[2].length+"")&&te(s,i)},d(o){o&&(A(e),A(t))}}}function Xt(l){let e,t,i,s,o,c,d,a,f,p,h,m,v,y,k,g,S,T,M,I,O,E,_=!l[4]&&Qt();function b(L,N){return L[4]?Dn:En}let C=b(l),D=C(l);return{c(){e=u("div"),t=u("div"),i=u("button"),i.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',s=w(),o=u("h2"),o.textContent="Выбери тип упражнения",c=w(),d=u("div"),a=u("button"),f=u("span"),p=w(),h=u("div"),h.innerHTML='<span class="option-title svelte-1r41zm6">Flash Cards</span> <span class="option-desc svelte-1r41zm6">Классические карточки с переворотом</span>',m=w(),v=u("button"),y=u("span"),k=w(),g=u("div"),S=u("span"),T=R(`Перевод предложения
                `),_&&_.c(),M=w(),I=u("span"),D.c(),n(i,"class","modal-close-btn svelte-1r41zm6"),n(o,"class","modal-title svelte-1r41zm6"),n(f,"class","option-radio svelte-1r41zm6"),U(f,"checked",l[22]),n(h,"class","option-content svelte-1r41zm6"),n(a,"class","exercise-option svelte-1r41zm6"),U(a,"active",l[22]),n(y,"class","option-radio svelte-1r41zm6"),U(y,"checked",l[0]),U(y,"disabled",!l[4]),n(S,"class","option-title svelte-1r41zm6"),n(I,"class","option-desc svelte-1r41zm6"),n(g,"class","option-content svelte-1r41zm6"),n(v,"class","exercise-option svelte-1r41zm6"),U(v,"active",l[0]),U(v,"disabled",!l[4]),n(d,"class","settings-options svelte-1r41zm6"),n(t,"class","settings-modal svelte-1r41zm6"),n(t,"role","dialog"),n(t,"aria-modal","true"),n(e,"class","settings-overlay svelte-1r41zm6"),n(e,"role","button"),n(e,"tabindex","-1")},m(L,N){z(L,e,N),r(e,t),r(t,i),r(t,s),r(t,o),r(t,c),r(t,d),r(d,a),r(a,f),r(a,p),r(a,h),r(d,m),r(d,v),r(v,y),r(v,k),r(v,g),r(g,S),r(S,T),_&&_.m(S,null),r(g,M),r(g,I),D.m(I,null),O||(E=[B(i,"click",l[52]),B(a,"click",l[24]),B(v,"click",l[25]),B(t,"click",nt(l[50])),B(e,"click",l[53]),B(e,"keydown",l[54])],O=!0)},p(L,N){N[0]&4194304&&U(f,"checked",L[22]),N[0]&4194304&&U(a,"active",L[22]),N[0]&1&&U(y,"checked",L[0]),N[0]&16&&U(y,"disabled",!L[4]),L[4]?_&&(_.d(1),_=null):_||(_=Qt(),_.c(),_.m(S,null)),C===(C=b(L))&&D?D.p(L,N):(D.d(1),D=C(L),D&&(D.c(),D.m(I,null))),N[0]&1&&U(v,"active",L[0]),N[0]&16&&U(v,"disabled",!L[4])},d(L){L&&A(e),_&&_.d(),D.d(),O=!1,qe(E)}}}function Qt(l){let e;return{c(){e=u("span"),e.textContent="AI",n(e,"class","ai-badge svelte-1r41zm6")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function Dn(l){let e,t=l[23].toLowerCase()+"",i;return{c(){e=R("Переведите предложение на "),i=R(t)},m(s,o){z(s,e,o),z(s,i,o)},p(s,o){o[0]&8388608&&t!==(t=s[23].toLowerCase()+"")&&te(i,t)},d(s){s&&(A(e),A(i))}}}function En(l){let e;return{c(){e=R("Требуется AI токен")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function Nn(l){let e;return{c(){e=u("div"),e.innerHTML='<div class="empty-icon svelte-1r41zm6"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line></svg></div> <h2 class="svelte-1r41zm6">Нет карточек для изучения</h2> <p class="svelte-1r41zm6">Добавьте новые слова или верните карточки из списков</p>',n(e,"class","empty-state svelte-1r41zm6")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function On(l){let e;function t(o,c){return o[0]?Un:Bn}let i=t(l),s=i(l);return{c(){e=u("div"),s.c(),n(e,"class","card-area svelte-1r41zm6"),U(e,"translation-mode",l[0]&&l[9])},m(o,c){z(o,e,c),s.m(e,null)},p(o,c){i===(i=t(o))&&s?s.p(o,c):(s.d(1),s=i(o),s&&(s.c(),s.m(e,null))),c[0]&513&&U(e,"translation-mode",o[0]&&o[9])},d(o){o&&A(e),s.d()}}}function Bn(l){let e=l[3].id,t,i,s,o,c,d,a,f=$t(l);return{c(){f.c(),t=w(),i=u("div"),s=u("button"),s.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',o=w(),c=u("button"),c.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(s,"class","action-btn unknown svelte-1r41zm6"),n(c,"class","action-btn known svelte-1r41zm6"),n(i,"class","action-buttons svelte-1r41zm6")},m(p,h){f.m(p,h),z(p,t,h),z(p,i,h),r(i,s),r(i,o),r(i,c),d||(a=[B(s,"click",l[31]),B(c,"click",l[30])],d=!0)},p(p,h){h[0]&8&&ut(e,e=p[3].id)?(f.d(1),f=$t(p),f.c(),f.m(t.parentNode,t)):f.p(p,h)},d(p){p&&(A(t),A(i)),f.d(p),d=!1,qe(a)}}}function Un(l){var a;let e,t=(a=l[20])==null?void 0:a.id,i,s=il(l);function o(f,p){return f[1]?Pn:f[9]?jn:Wn}let c=o(l),d=c(l);return{c(){e=u("div"),s.c(),i=w(),d.c(),n(e,"class","translation-exercise-layout svelte-1r41zm6"),U(e,"with-input",l[9]),U(e,"card-flipped",l[1])},m(f,p){z(f,e,p),s.m(e,null),r(e,i),d.m(e,null)},p(f,p){var h;p[0]&1048576&&ut(t,t=(h=f[20])==null?void 0:h.id)?(s.d(1),s=il(f),s.c(),s.m(e,i)):s.p(f,p),c===(c=o(f))&&d?d.p(f,p):(d.d(1),d=c(f),d&&(d.c(),d.m(e,null))),p[0]&512&&U(e,"with-input",f[9]),p[0]&2&&U(e,"card-flipped",f[1])},d(f){f&&A(e),s.d(f),d.d()}}}function Zt(l){let e,t;return{c(){e=u("img"),$e(e.src,t=l[3].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-1r41zm6")},m(i,s){z(i,e,s)},p(i,s){s[0]&8&&!$e(e.src,t=i[3].imageUrl)&&n(e,"src",t)},d(i){i&&A(e)}}}function xt(l){let e,t,i,s,o=l[3].association+"",c;return{c(){e=u("div"),t=u("span"),t.textContent="Ассоциация:",i=w(),s=u("p"),c=R(o),n(t,"class","association-label svelte-1r41zm6"),n(s,"class","svelte-1r41zm6"),n(e,"class","association svelte-1r41zm6")},m(d,a){z(d,e,a),r(e,t),r(e,i),r(e,s),r(s,c)},p(d,a){a[0]&8&&o!==(o=d[3].association+"")&&te(c,o)},d(d){d&&A(e)}}}function $t(l){let e,t,i,s,o,c,d,a,f=l[3].word+"",p,h,m,v,y,k,g,S,T,M,I=l[3].translation+"",O,E,_,b,C=l[3].imageUrl&&Zt(l),D=l[3].association&&xt(l);return{c(){e=u("div"),t=u("div"),i=u("div"),s=u("div"),o=u("span"),c=R(l[23]),d=w(),a=u("h2"),p=R(f),h=w(),m=u("p"),m.textContent="Нажмите, чтобы увидеть перевод",v=w(),y=u("div"),C&&C.c(),k=w(),g=u("div"),S=u("span"),S.textContent="Перевод",T=w(),M=u("h2"),O=R(I),E=w(),D&&D.c(),n(o,"class","card-label svelte-1r41zm6"),n(a,"class","card-word svelte-1r41zm6"),n(m,"class","card-hint svelte-1r41zm6"),n(s,"class","card-text-content svelte-1r41zm6"),n(i,"class","card-front svelte-1r41zm6"),n(S,"class","card-label svelte-1r41zm6"),n(M,"class","card-word svelte-1r41zm6"),n(g,"class","card-text-content svelte-1r41zm6"),n(y,"class","card-back svelte-1r41zm6"),U(y,"has-image",l[3].imageUrl),n(t,"class","card-inner svelte-1r41zm6"),n(e,"class","card svelte-1r41zm6"),n(e,"style",l[38]()),n(e,"role","button"),n(e,"tabindex","0"),U(e,"flipped",l[5]),U(e,"dragging",l[6]),U(e,"swipe-left",l[7]==="left"),U(e,"swipe-right",l[7]==="right")},m(L,N){z(L,e,N),r(e,t),r(t,i),r(i,s),r(s,o),r(o,c),r(s,d),r(s,a),r(a,p),r(s,h),r(s,m),r(t,v),r(t,y),C&&C.m(y,null),r(y,k),r(y,g),r(g,S),r(g,T),r(g,M),r(M,O),r(g,E),D&&D.m(g,null),_||(b=[B(e,"mousedown",l[27]),B(e,"mousemove",l[28]),B(e,"mouseup",l[29]),B(e,"mouseleave",l[29]),B(e,"touchstart",l[27]),B(e,"touchmove",l[28]),B(e,"touchend",l[29],{passive:!0}),B(e,"click",l[37]),B(e,"keydown",l[57])],_=!0)},p(L,N){N[0]&8388608&&te(c,L[23]),N[0]&8&&f!==(f=L[3].word+"")&&te(p,f),L[3].imageUrl?C?C.p(L,N):(C=Zt(L),C.c(),C.m(y,k)):C&&(C.d(1),C=null),N[0]&8&&I!==(I=L[3].translation+"")&&te(O,I),L[3].association?D?D.p(L,N):(D=xt(L),D.c(),D.m(g,null)):D&&(D.d(1),D=null),N[0]&8&&U(y,"has-image",L[3].imageUrl),N[0]&32&&U(e,"flipped",L[5]),N[0]&64&&U(e,"dragging",L[6]),N[0]&128&&U(e,"swipe-left",L[7]==="left"),N[0]&128&&U(e,"swipe-right",L[7]==="right")},d(L){L&&A(e),C&&C.d(),D&&D.d(),_=!1,qe(b)}}}function el(l){let e;function t(o,c){if(o[11]==="correct")return Rn;if(o[11]==="word_error")return Hn}let i=t(l),s=i&&i(l);return{c(){e=u("div"),s&&s.c(),n(e,"class","answer-overlay svelte-1r41zm6"),U(e,"correct",l[11]==="correct"),U(e,"incorrect",l[11]==="word_error")},m(o,c){z(o,e,c),s&&s.m(e,null)},p(o,c){i===(i=t(o))&&s?s.p(o,c):(s&&s.d(1),s=i&&i(o),s&&(s.c(),s.m(e,null))),c[0]&2048&&U(e,"correct",o[11]==="correct"),c[0]&2048&&U(e,"incorrect",o[11]==="word_error")},d(o){o&&A(e),s&&s.d()}}}function Hn(l){let e,t,i,s,o,c,d,a,f,p,h;return{c(){e=J("svg"),t=J("line"),i=J("line"),s=w(),o=u("div"),c=u("span"),c.textContent="Ошибка в слове",d=w(),a=u("span"),f=R("Ожидалось: "),p=u("strong"),h=R(l[16]),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1r41zm6"),n(c,"class","error-title svelte-1r41zm6"),n(p,"class","svelte-1r41zm6"),n(a,"class","expected-word svelte-1r41zm6"),n(o,"class","error-details svelte-1r41zm6")},m(m,v){z(m,e,v),r(e,t),r(e,i),z(m,s,v),z(m,o,v),r(o,c),r(o,d),r(o,a),r(a,f),r(a,p),r(p,h)},p(m,v){v[0]&65536&&te(h,m[16])},d(m){m&&(A(e),A(s),A(o))}}}function Rn(l){let e,t,i,s;return{c(){e=J("svg"),t=J("polyline"),i=w(),s=u("span"),s.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1r41zm6"),n(s,"class","svelte-1r41zm6")},m(o,c){z(o,e,c),r(e,t),z(o,i,c),z(o,s,c)},p:ze,d(o){o&&(A(e),A(i),A(s))}}}function tl(l){let e;return{c(){e=u("div"),e.innerHTML='<div class="checking-spinner svelte-1r41zm6"></div> <span class="svelte-1r41zm6">Проверка...</span>',n(e,"class","answer-overlay checking svelte-1r41zm6")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function ll(l){let e,t;return{c(){e=u("img"),$e(e.src,t=l[20].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-1r41zm6")},m(i,s){z(i,e,s)},p(i,s){s[0]&1048576&&!$e(e.src,t=i[20].imageUrl)&&n(e,"src",t)},d(i){i&&A(e)}}}function nl(l){let e,t,i,s,o=l[20].association+"",c;return{c(){e=u("div"),t=u("span"),t.textContent="Ассоциация:",i=w(),s=u("p"),c=R(o),n(t,"class","association-label svelte-1r41zm6"),n(s,"class","svelte-1r41zm6"),n(e,"class","association svelte-1r41zm6")},m(d,a){z(d,e,a),r(e,t),r(e,i),r(e,s),r(s,c)},p(d,a){a[0]&1048576&&o!==(o=d[20].association+"")&&te(c,o)},d(d){d&&A(e)}}}function il(l){let e,t,i,s,o,c,d,a=l[20].translation+"",f,p,h,m,v,y,k,g,S,T,M,I=l[20].word+"",O,E,_=l[11]&&l[11]!=="grammar_error"&&el(l),b=l[15]&&tl(),C=l[20].imageUrl&&ll(l),D=l[20].association&&nl(l);return{c(){e=u("div"),t=u("div"),i=u("div"),s=u("div"),o=u("span"),o.textContent="Перевод",c=w(),d=u("h2"),f=R(a),p=w(),_&&_.c(),h=w(),b&&b.c(),m=w(),v=u("div"),C&&C.c(),y=w(),k=u("div"),g=u("span"),S=R(l[23]),T=w(),M=u("h2"),O=R(I),E=w(),D&&D.c(),n(o,"class","card-label svelte-1r41zm6"),n(d,"class","card-word svelte-1r41zm6"),n(s,"class","card-text-content svelte-1r41zm6"),n(i,"class","card-front translation-front svelte-1r41zm6"),n(g,"class","card-label svelte-1r41zm6"),n(M,"class","card-word svelte-1r41zm6"),n(k,"class","card-text-content svelte-1r41zm6"),n(v,"class","card-back translation-back svelte-1r41zm6"),U(v,"has-image",l[20].imageUrl),n(t,"class","card-inner svelte-1r41zm6"),n(e,"class","card translation-card svelte-1r41zm6"),U(e,"correct",l[11]==="correct"),U(e,"incorrect",l[11]==="incorrect"),U(e,"flipped",l[1])},m(L,N){z(L,e,N),r(e,t),r(t,i),r(i,s),r(s,o),r(s,c),r(s,d),r(d,f),r(i,p),_&&_.m(i,null),r(i,h),b&&b.m(i,null),r(t,m),r(t,v),C&&C.m(v,null),r(v,y),r(v,k),r(k,g),r(g,S),r(k,T),r(k,M),r(M,O),r(k,E),D&&D.m(k,null)},p(L,N){N[0]&1048576&&a!==(a=L[20].translation+"")&&te(f,a),L[11]&&L[11]!=="grammar_error"?_?_.p(L,N):(_=el(L),_.c(),_.m(i,h)):_&&(_.d(1),_=null),L[15]?b||(b=tl(),b.c(),b.m(i,null)):b&&(b.d(1),b=null),L[20].imageUrl?C?C.p(L,N):(C=ll(L),C.c(),C.m(v,y)):C&&(C.d(1),C=null),N[0]&8388608&&te(S,L[23]),N[0]&1048576&&I!==(I=L[20].word+"")&&te(O,I),L[20].association?D?D.p(L,N):(D=nl(L),D.c(),D.m(k,null)):D&&(D.d(1),D=null),N[0]&1048576&&U(v,"has-image",L[20].imageUrl),N[0]&2048&&U(e,"correct",L[11]==="correct"),N[0]&2048&&U(e,"incorrect",L[11]==="incorrect"),N[0]&2&&U(e,"flipped",L[1])},d(L){L&&A(e),_&&_.d(),b&&b.d(),C&&C.d(),D&&D.d()}}}function Wn(l){let e,t,i,s,o,c;return{c(){e=u("div"),t=u("button"),t.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',i=w(),s=u("button"),s.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(t,"class","action-btn unknown svelte-1r41zm6"),n(s,"class","action-btn known svelte-1r41zm6"),n(e,"class","action-buttons svelte-1r41zm6")},m(d,a){z(d,e,a),r(e,t),r(e,i),r(e,s),o||(c=[B(t,"click",l[32]),B(s,"click",l[30])],o=!0)},p:ze,d(d){d&&A(e),o=!1,qe(c)}}}function jn(l){let e,t,i,s,o=l[23].toLowerCase()+"",c,d,a,f,p;function h(T,M){return T[13]?qn:T[14]?Fn:Jn}let m=h(l),v=m(l),y=!l[13]&&!l[14]&&rl(l);function k(T,M){return T[11]==="word_error"?Zn:T[11]==="grammar_error"?Qn:Xn}let g=k(l),S=g(l);return{c(){e=u("div"),t=u("div"),i=u("span"),s=R("Переведите на "),c=R(o),d=R(":"),a=w(),v.c(),f=w(),y&&y.c(),p=w(),S.c(),n(i,"class","sentence-label svelte-1r41zm6"),n(t,"class","sentence-prompt svelte-1r41zm6"),U(t,"loading",l[13]),U(t,"error",l[14]),n(e,"class","sentence-exercise svelte-1r41zm6")},m(T,M){z(T,e,M),r(e,t),r(t,i),r(i,s),r(i,c),r(i,d),r(t,a),v.m(t,null),r(e,f),y&&y.m(e,null),r(e,p),S.m(e,null)},p(T,M){M[0]&8388608&&o!==(o=T[23].toLowerCase()+"")&&te(c,o),m===(m=h(T))&&v?v.p(T,M):(v.d(1),v=m(T),v&&(v.c(),v.m(t,null))),M[0]&8192&&U(t,"loading",T[13]),M[0]&16384&&U(t,"error",T[14]),!T[13]&&!T[14]?y?y.p(T,M):(y=rl(T),y.c(),y.m(e,p)):y&&(y.d(1),y=null),g===(g=k(T))&&S?S.p(T,M):(S.d(1),S=g(T),S&&(S.c(),S.m(e,null)))},d(T){T&&A(e),v.d(),y&&y.d(),S.d()}}}function Pn(l){let e,t,i,s;return{c(){e=u("div"),t=u("button"),t.textContent="Продолжить",n(t,"class","continue-btn svelte-1r41zm6"),n(e,"class","card-back-actions svelte-1r41zm6")},m(o,c){z(o,e,c),r(e,t),i||(s=B(t,"click",l[32]),i=!0)},p:ze,d(o){o&&A(e),i=!1,s()}}}function Jn(l){let e,t;return{c(){e=u("p"),t=R(l[12]),n(e,"class","sentence-text svelte-1r41zm6")},m(i,s){z(i,e,s),r(e,t)},p(i,s){s[0]&4096&&te(t,i[12])},d(i){i&&A(e)}}}function Fn(l){let e,t,i,s,o,c;return{c(){e=u("p"),t=R(l[14]),i=w(),s=u("button"),s.textContent="Попробовать снова",n(e,"class","sentence-error svelte-1r41zm6"),n(s,"class","retry-btn svelte-1r41zm6")},m(d,a){z(d,e,a),r(e,t),z(d,i,a),z(d,s,a),o||(c=B(s,"click",l[55]),o=!0)},p(d,a){a[0]&16384&&te(t,d[14])},d(d){d&&(A(e),A(i),A(s)),o=!1,c()}}}function qn(l){let e;return{c(){e=u("div"),e.innerHTML='<div class="loading-spinner svelte-1r41zm6"></div> <span>Генерация предложения...</span>',n(e,"class","sentence-loading svelte-1r41zm6")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function rl(l){let e;function t(o,c){return o[11]==="grammar_error"?Kn:Yn}let i=t(l),s=i(l);return{c(){s.c(),e=gt()},m(o,c){s.m(o,c),z(o,e,c)},p(o,c){i===(i=t(o))&&s?s.p(o,c):(s.d(1),s=i(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&A(e),s.d(o)}}}function Yn(l){let e,t,i,s,o,c,d,a,f,p,h;return{c(){e=u("div"),t=u("textarea"),s=w(),o=u("button"),c=J("svg"),d=J("polyline"),a=J("path"),n(t,"class","answer-input sentence-input svelte-1r41zm6"),n(t,"placeholder","Введите перевод..."),t.disabled=i=l[11]!==null||l[15],n(t,"rows","1"),U(t,"correct",l[11]==="correct"),U(t,"incorrect",l[11]==="incorrect"),n(d,"points","9 11 12 14 22 4"),n(a,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(c,"width","24"),n(c,"height","24"),n(c,"viewBox","0 0 24 24"),n(c,"fill","none"),n(c,"stroke","currentColor"),n(c,"stroke-width","2"),n(o,"class","check-btn svelte-1r41zm6"),o.disabled=f=!l[10].trim()||l[11]!==null||l[15],n(e,"class","answer-input-area svelte-1r41zm6")},m(m,v){z(m,e,v),r(e,t),Pe(t,l[10]),r(e,s),r(e,o),r(o,c),r(c,d),r(c,a),p||(h=[B(t,"input",l[56]),B(t,"keydown",l[34]),B(o,"click",l[33])],p=!0)},p(m,v){v[0]&34816&&i!==(i=m[11]!==null||m[15])&&(t.disabled=i),v[0]&1024&&Pe(t,m[10]),v[0]&2048&&U(t,"correct",m[11]==="correct"),v[0]&2048&&U(t,"incorrect",m[11]==="incorrect"),v[0]&35840&&f!==(f=!m[10].trim()||m[11]!==null||m[15])&&(o.disabled=f)},d(m){m&&A(e),p=!1,qe(h)}}}function Kn(l){let e,t,i,s,o,c,d,a;function f(m,v){return m[17]?Vn:Gn}let p=f(l),h=p(l);return{c(){e=u("div"),t=u("div"),h.c(),i=w(),s=u("div"),o=u("span"),o.textContent="Правильный вариант:",c=w(),d=u("p"),a=R(l[18]),n(t,"class","user-sentence-error svelte-1r41zm6"),n(o,"class","correction-label svelte-1r41zm6"),n(d,"class","correction-text svelte-1r41zm6"),n(s,"class","correction-block svelte-1r41zm6"),n(e,"class","grammar-error-block svelte-1r41zm6")},m(m,v){z(m,e,v),r(e,t),h.m(t,null),r(e,i),r(e,s),r(s,o),r(s,c),r(s,d),r(d,a)},p(m,v){p===(p=f(m))&&h?h.p(m,v):(h.d(1),h=p(m),h&&(h.c(),h.m(t,null))),v[0]&262144&&te(a,m[18])},d(m){m&&A(e),h.d()}}}function Gn(l){let e,t;return{c(){e=u("span"),t=R(l[19]),n(e,"class","error-text svelte-1r41zm6")},m(i,s){z(i,e,s),r(e,t)},p(i,s){s[0]&524288&&te(t,i[19])},d(i){i&&A(e)}}}function Vn(l){let e,t=ol(l[19],l[17])+"",i;return{c(){e=new Xl(!1),i=gt(),e.a=i},m(s,o){e.m(t,s,o),z(s,i,o)},p(s,o){o[0]&655360&&t!==(t=ol(s[19],s[17])+"")&&e.p(t)},d(s){s&&(A(i),e.d())}}}function Xn(l){let e,t,i,s,o;return{c(){e=u("button"),t=R("Пропустить"),n(e,"class","skip-sentence-btn svelte-1r41zm6"),e.disabled=i=l[11]!==null||l[13]||l[15]},m(c,d){z(c,e,d),r(e,t),s||(o=B(e,"click",l[32]),s=!0)},p(c,d){d[0]&43008&&i!==(i=c[11]!==null||c[13]||c[15])&&(e.disabled=i)},d(c){c&&A(e),s=!1,o()}}}function Qn(l){let e,t,i;return{c(){e=u("button"),e.textContent="Продолжить",n(e,"class","skip-sentence-btn continue svelte-1r41zm6")},m(s,o){z(s,e,o),t||(i=B(e,"click",l[36]),t=!0)},p:ze,d(s){s&&A(e),t=!1,i()}}}function Zn(l){let e,t,i;return{c(){e=u("button"),e.textContent="Продолжить",n(e,"class","skip-sentence-btn continue svelte-1r41zm6")},m(s,o){z(s,e,o),t||(i=B(e,"click",l[35]),t=!0)},p:ze,d(s){s&&A(e),t=!1,i()}}}function xn(l){let e,t,i,s,o,c,d,a,f,p,h,m;function v(I,O){return I[21]?Mn:zn}let y=v(l),k=y(l),g=l[8]&&Xt(l);function S(I,O){return I[21]&&I[20]?On:Nn}let T=S(l),M=T(l);return{c(){e=u("div"),t=u("div"),i=u("div"),s=u("h1"),s.textContent="Изучение",o=w(),c=u("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1r41zm6"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',d=w(),a=u("p"),k.c(),f=w(),g&&g.c(),p=w(),M.c(),n(s,"class","svelte-1r41zm6"),n(c,"class","settings-btn svelte-1r41zm6"),U(c,"active",l[8]),n(i,"class","header-top svelte-1r41zm6"),n(a,"class","subtitle svelte-1r41zm6"),n(t,"class","header svelte-1r41zm6"),n(e,"class","flashcards-container svelte-1r41zm6")},m(I,O){z(I,e,O),r(e,t),r(t,i),r(i,s),r(i,o),r(i,c),r(t,d),r(t,a),k.m(a,null),r(e,f),g&&g.m(e,null),r(e,p),M.m(e,null),h||(m=B(c,"click",l[51]),h=!0)},p(I,O){O[0]&256&&U(c,"active",I[8]),y===(y=v(I))&&k?k.p(I,O):(k.d(1),k=y(I),k&&(k.c(),k.m(a,null))),I[8]?g?g.p(I,O):(g=Xt(I),g.c(),g.m(e,p)):g&&(g.d(1),g=null),T===(T=S(I))&&M?M.p(I,O):(M.d(1),M=T(I),M&&(M.c(),M.m(e,null)))},i:ze,o:ze,d(I){I&&A(e),k.d(),g&&g.d(),M.d(),h=!1,m()}}}const sl="flashcards_exercise_mode";function $n(l){const e=[...l];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function ol(l,e){if(!e)return l;const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${t})`,"gi");return l.replace(i,'<span class="highlighted-error">$1</span>')}function ei(l,e,t){let i,s,o,c,d,a,f,p,h,m,v,y,k;xe(l,et,H=>t(47,v=H)),xe(l,We,H=>t(48,y=H)),xe(l,Ye,H=>t(49,k=H));let g=0,S=!1,T=0,M=0,I=!1,O=null,E=!1,_=!1;function b(){const H=E?"translation":"standard";localStorage.setItem(sl,H)}function C(){const H=localStorage.getItem(sl),Ue=localStorage.getItem("ai_token")||"",ge=Ue&&Ue.length>0;H==="translation"&&ge?t(0,E=!0):(t(0,E=!1),H==="translation"&&!ge&&b())}function D(){t(0,E=!1),b(),P()}function L(){c&&(E?t(0,E=!1):t(0,E=!0),b(),P())}let N=!1,j="",Y=null,le="",K=!1,V=null,ie=!1,ae=null,Me=!1,je=null,fe=null,pe=null,ve=null,Oe="";function ce(){t(41,Oe=localStorage.getItem("ai_token")||"")}function Ce(){ce()}function Je(H){H.key==="ai_token"&&ce()}let ke;Ul(()=>{ce(),C(),window.addEventListener("focus",Ce),window.addEventListener("storage",Je),ke=setInterval(()=>{_&&ce()},500)}),Ql(()=>{window.removeEventListener("focus",Ce),window.removeEventListener("storage",Je),ke&&clearInterval(ke)});async function Be(H,Ue){var Ge,Fe,Le,Ae;t(13,K=!0),t(14,V=null),t(12,le="");const ge=H.toLowerCase().startsWith("to ")?H.substring(3).trim():H,be=`You are a ${s} language learning assistant. Student level: A1-A2 (beginner).

Task: Create ONE short and simple sentence in RUSSIAN that will need to be translated into ${s}.

${s} word: "${H}"
Base form for sentence: "${ge}"
Russian translation: "${Ue}"

Requirements:
- The sentence must be in Russian
- The sentence must contain the word "${Ue}" (or its form)
- The English translation MUST use the word "${ge}" (or its conjugated form like "adore", "adores", "adored", etc.)
- Length: 3-10 words
- Simple A1-A2 level grammar
- Use simple tenses (Present Simple, Past Simple, Future Simple, Present Continuous, Present Perfect)
- Avoid complex constructions
- IMPORTANT: The sentence must be translatable using "${ge}" in its appropriate form

Reply ONLY with the sentence in Russian, without quotes or explanations.`;try{const he=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Oe}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:be}],max_tokens:100,temperature:.7})});if(!he.ok){const Ne=await he.json().catch(()=>({}));throw new Error(((Ge=Ne.error)==null?void 0:Ge.message)||`Ошибка API: ${he.status}`)}const ye=await he.json();if(t(12,le=((Ae=(Le=(Fe=ye.choices[0])==null?void 0:Fe.message)==null?void 0:Le.content)==null?void 0:Ae.trim())||""),!le)throw new Error("Пустой ответ от AI");if(ye.usage){const Ne=ye.usage.prompt_tokens/1e6*.15,X=ye.usage.completion_tokens/1e6*.6,Z=Ne+X,Ze=parseFloat(localStorage.getItem("ai_total_cost")||"0")+Z;localStorage.setItem("ai_total_cost",Ze.toString())}}catch(he){console.error("Ошибка генерации:",he),t(14,V=he.message),t(12,le="")}finally{t(13,K=!1)}}let W=[],Se=new Set,De=d;function re(H){t(6,I=!0),T=H.type==="touchstart"?H.touches[0].clientX:H.clientX,t(7,O=null)}function Ie(H){if(!I)return;M=(H.type==="touchmove"?H.touches[0].clientX:H.clientX)-T,M>50?t(7,O="right"):M<-50?t(7,O="left"):t(7,O=null)}function He(){I&&(t(6,I=!1),Math.abs(M)>100&&p&&(M>0?F():G()),M=0,t(7,O=null))}async function F(){if(p){if(E&&!N){t(9,N=!0),t(10,j=""),t(11,Y=null),await Be(p.word,p.translation);return}const H=p.dictionaryId||d||"default",Ue=v||"en";We.markAsLearned(p.id,H,Ue),P(),g>=f.length-1&&t(39,g=Math.max(0,f.length-2))}}function G(){if(p){const H=p;t(42,W=[...W.filter(be=>be.id!==H.id),H]);const Ue=H.dictionaryId||d||"default",ge=v||"en";We.markAsUnlearned(H.id,Ue,ge),P(),g>=f.length-1&&t(39,g=0)}}function P(){t(5,S=!1),t(9,N=!1),t(10,j=""),t(11,Y=null),t(12,le=""),t(14,V=null),t(15,Me=!1),t(16,je=null),t(17,fe=null),t(18,pe=null),t(19,ve=null),t(1,ie=!1),t(40,ae=null)}function we(){if(p){if(E&&!ie){t(40,ae=p),t(1,ie=!0);return}if(E&&ie){const be=ae||p;t(42,W=[...W.filter(Le=>Le.id!==be.id),be]);const Ge=be.dictionaryId||d||"default",Fe=v||"en";We.markAsUnlearned(be.id,Ge,Fe),setTimeout(()=>{P(),t(40,ae=null),g>=f.length-1&&t(39,g=0)},600);return}const H=p;t(42,W=[...W.filter(be=>be.id!==H.id),H]);const Ue=H.dictionaryId||d||"default",ge=v||"en";We.markAsUnlearned(H.id,Ue,ge),P(),t(40,ae=null),g>=f.length-1&&t(39,g=0)}}async function de(H,Ue,ge){var Fe,Le,Ae,he;let be=ge.toLowerCase();be.startsWith("to ")&&(be=be.substring(3).trim());const Ge=`You are a ${s} language teacher. Check the translation of a sentence from Russian to ${s}.

Russian sentence: "${Ue}"
Student's translation: "${H}"
Key word that must be used: "${be}" (base form, can be conjugated: "${be}", "${be}s", "${be}d", etc.)

CRITICAL RULES:
1. IGNORE ALL PUNCTUATION MARKS completely - punctuation differences are NEVER errors
2. Only report REAL grammatical or meaning errors
3. If the sentence is CORRECT, reply ONLY with "0" - do NOT create false errors
4. Do NOT mark correct parts of the sentence as errors
5. Do NOT invent errors that don't exist
6. Be VERY careful - only report errors if you are CERTAIN they exist

Task: check ONLY the grammar and meaning of the sentence:
- MANDATORY: The translation MUST contain the key word "${be}" (or its conjugated form)
- IGNORE punctuation completely - answers with or without punctuation marks are equally correct
- Check only REAL grammatical errors (tenses, articles, word order, word forms, spelling)
- Check that the meaning matches the translation
- If the sentence is correct, reply with "0"

Response format:
- If the sentence is grammatically correct and conveys the meaning (ignoring punctuation) — reply ONLY: 0
- If there are REAL grammatical or meaning errors (NOT punctuation) — reply in this format:
ERROR: [part of the sentence with the error]
CORRECTION: [correct version of the entire sentence]

IMPORTANT: Before reporting an error, double-check:
1. Is the sentence actually wrong, or is it correct?
2. Am I marking a correct part as an error?
3. Is this a punctuation issue (which should be ignored)?

If the sentence is correct, reply ONLY: 0

Reply ONLY in the specified format, without additional explanations.`;try{const ye=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Oe}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Ge}],max_tokens:200,temperature:.3})});if(!ye.ok){const Z=await ye.json().catch(()=>({}));throw new Error(((Fe=Z.error)==null?void 0:Fe.message)||`Ошибка API: ${ye.status}`)}const Ne=await ye.json(),X=((he=(Ae=(Le=Ne.choices[0])==null?void 0:Le.message)==null?void 0:Ae.content)==null?void 0:he.trim())||"";if(Ne.usage){const Z=Ne.usage.prompt_tokens/1e6*.15,Qe=Ne.usage.completion_tokens/1e6*.6,Ze=Z+Qe,it=parseFloat(localStorage.getItem("ai_total_cost")||"0");localStorage.setItem("ai_total_cost",(it+Ze).toString())}return X}catch(ye){throw console.error("Ошибка проверки грамматики:",ye),ye}}async function Re(){if(!p||!j.trim())return;const H=j.trim();let Ue=p.word.toLowerCase();Ue.startsWith("to ")&&(Ue=Ue.substring(3).trim());const ge=Le=>Le&&Le.replace(/[''`´]/g,"'").replace(/[\u2018\u2019\u201B\u2032\u2035]/g,"'"),be=ge(H.toLowerCase().trim()),Ge=ge(Ue.toLowerCase().trim());let Fe=!1;if(Ge.includes(" ")){const Le=ge(be.replace(/[.,!?;:]/g,"")),Ae=ge(Ge.replace(/[.,!?;:]/g,"")),he=ge(Le.replace(/\s+/g," ").trim()),ye=ge(Ae.replace(/\s+/g," ").trim());if(he.includes(ye))Fe=!0;else{const Ne=ye.split(/\s+/).map(Z=>ge(Z.trim())).filter(Z=>Z.length>0),X=he.split(/\s+/).map(Z=>ge(Z.trim())).filter(Z=>Z.length>0);for(let Z=0;Z<=X.length-Ne.length;Z++){let Qe=!0;for(let Ze=0;Ze<Ne.length;Ze++){if(Z+Ze>=X.length){Qe=!1;break}const it=ge(Ne[Ze]),At=ge(X[Z+Ze]);if(it!==At){Qe=!1;break}}if(Qe){Fe=!0;break}}}}else Fe=be.split(/\s+/).map(Ae=>Ae.replace(/[.,!?;:]/g,"")).some(Ae=>{const he=ge(Ae),ye=ge(Ge);return he===ye||he.startsWith(ye)});if(!Fe){t(11,Y="word_error"),t(16,je=p.word),t(17,fe=null),t(18,pe=null);return}t(15,Me=!0),t(16,je=null),t(17,fe=null),t(18,pe=null);try{const Le=await de(H,le,p.word);if(Le==="0")t(11,Y="correct"),setTimeout(()=>{const Ae=p.dictionaryId||d||"default",he=v||"en";We.markAsLearned(p.id,Ae,he),g>=f.length-1&&t(39,g=Math.max(0,f.length-2)),P()},1500);else{const Ae=Le.match(/ERROR:\s*(.+)/i),he=Le.match(/CORRECTION:\s*(.+)/i),ye=Ae?Ae[1].trim():null,Ne=he?he[1].trim():null;let X=!1;if(Ne){const Z=it=>ge(it.toLowerCase().replace(/[.,!?;:\s]/g,"")),Qe=Z(H),Ze=Z(Ne);Qe===Ze&&(X=!0)}if(!X&&ye){const Z=rt=>ge(rt.toLowerCase().trim()),Qe=Z(H),it=Z(ye).split(/\s+/).filter(rt=>rt.length>0),At=Qe.split(/\s+/).filter(rt=>rt.length>0);it.every(rt=>At.some(jl=>{const Ht=ge(rt),Rt=ge(jl);return Rt===Ht||Rt.includes(Ht)}))||(X=!0)}if(X){t(11,Y="correct"),setTimeout(()=>{const Z=p.dictionaryId||d||"default",Qe=v||"en";We.markAsLearned(p.id,Z,Qe),g>=f.length-1&&t(39,g=Math.max(0,f.length-2)),P()},1500);return}t(11,Y="grammar_error"),t(19,ve=H),t(17,fe=ye),t(18,pe=Ne||Le)}}catch{t(11,Y="correct"),setTimeout(()=>{const Ae=p.dictionaryId||d||"default",he=v||"en";We.markAsLearned(p.id,Ae,he),g>=f.length-1&&t(39,g=Math.max(0,f.length-2)),P()},1500)}finally{t(15,Me=!1)}}function ne(H){H.key==="Enter"&&(H.ctrlKey||H.metaKey)&&N&&!Me&&Y!=="grammar_error"&&Y!=="word_error"&&(H.preventDefault(),Re())}function ue(){if(p){const H=p;t(42,W=[...W.filter(be=>be.id!==H.id),H]);const Ue=H.dictionaryId||d||"default",ge=v||"en";We.markAsUnlearned(H.id,Ue,ge),P(),g>=f.length-1&&t(39,g=0)}}function se(){if(p){const H=p;t(42,W=[...W.filter(be=>be.id!==H.id),H]);const Ue=H.dictionaryId||d||"default",ge=v||"en";We.markAsUnlearned(H.id,Ue,ge),P(),g>=f.length-1&&t(39,g=0)}}function $(){t(5,S=!S)}function me(){if(!I)return"";const H=M*.05;return`transform: translateX(${M}px) rotate(${H}deg);`}function Q(H){at.call(this,l,H)}const ee=()=>t(8,_=!_),q=()=>t(8,_=!1),Te=()=>t(8,_=!1),x=H=>H.key==="Escape"&&t(8,_=!1),_e=()=>Be(p.word,p.translation);function Ee(){j=this.value,t(10,j)}const oe=H=>H.key==="Enter"&&$();return l.$$.update=()=>{if(l.$$.dirty[1]&65536&&t(23,i=Xe(v)),l.$$.dirty[1]&65536&&(s=yn(v)),l.$$.dirty[1]&1024&&t(4,c=Oe&&Oe.length>0),l.$$.dirty[0]&17&&!c&&E&&(t(0,E=!1),b()),l.$$.dirty[0]&1&&t(22,o=!E),l.$$.dirty[1]&262144&&t(45,d=k||"default"),l.$$.dirty[1]&147456&&t(46,a=y.unlearned.filter(H=>(H.dictionaryId||"default")===d)),l.$$.dirty[1]&63488){const H=new Set(a.map(be=>be.id)),Ue=De!==d,ge=H.size!==Se.size||![...H].every(be=>Se.has(be));Ue||ge?(t(42,W=$n(a)),t(43,Se=H),t(39,g=0),t(44,De=d)):t(42,W=W.map(be=>a.find(Fe=>Fe.id===be.id)||be))}l.$$.dirty[1]&2048&&t(2,f=W),l.$$.dirty[0]&4|l.$$.dirty[1]&256&&t(3,p=f[g]),l.$$.dirty[0]&4&&t(21,h=f.length>0),l.$$.dirty[0]&11|l.$$.dirty[1]&512&&t(20,m=E&&ie&&ae?ae:p)},[E,ie,f,p,c,S,I,O,_,N,j,Y,le,K,V,Me,je,fe,pe,ve,m,h,o,i,D,L,Be,re,Ie,He,F,G,we,Re,ne,ue,se,$,me,g,ae,Oe,W,Se,De,d,a,v,y,k,Q,ee,q,Te,x,_e,Ee,oe]}class ti extends Tt{constructor(e){super(),It(this,e,ei,xn,ut,{},null,[-1,-1,-1])}}function al(l,e,t){const i=l.slice();return i[63]=e[t],i}function cl(l){let e,t,i,s,o=l[7].length+"",c,d,a,f,p,h=l[8].length+"",m,v,y,k,g,S=l[6].length+"",T,M,I;return{c(){e=u("div"),t=u("button"),i=R(`На проработку
          `),s=u("span"),c=R(o),d=w(),a=u("button"),f=R(`На повторение
          `),p=u("span"),m=R(h),v=w(),y=u("button"),k=R(`Изученные
          `),g=u("span"),T=R(S),n(s,"class","badge svelte-4vynei"),n(t,"class","dropdown-item svelte-4vynei"),U(t,"active",l[0]==="draft"),n(p,"class","badge svelte-4vynei"),n(a,"class","dropdown-item svelte-4vynei"),U(a,"active",l[0]==="unlearned"),n(g,"class","badge svelte-4vynei"),n(y,"class","dropdown-item svelte-4vynei"),U(y,"active",l[0]==="learned"),n(e,"class","tab-dropdown-menu svelte-4vynei")},m(O,E){z(O,e,E),r(e,t),r(t,i),r(t,s),r(s,c),r(e,d),r(e,a),r(a,f),r(a,p),r(p,m),r(e,v),r(e,y),r(y,k),r(y,g),r(g,T),M||(I=[B(t,"click",l[40]),B(a,"click",l[41]),B(y,"click",l[42])],M=!0)},p(O,E){E[0]&128&&o!==(o=O[7].length+"")&&te(c,o),E[0]&1&&U(t,"active",O[0]==="draft"),E[0]&256&&h!==(h=O[8].length+"")&&te(m,h),E[0]&1&&U(a,"active",O[0]==="unlearned"),E[0]&64&&S!==(S=O[6].length+"")&&te(T,S),E[0]&1&&U(y,"active",O[0]==="learned")},d(O){O&&A(e),M=!1,qe(I)}}}function ul(l){let e,t,i;return{c(){e=u("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-4vynei"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","search-clear svelte-4vynei")},m(s,o){z(s,e,o),t||(i=B(e,"click",l[47]),t=!0)},p:ze,d(s){s&&A(e),t=!1,i()}}}function fl(l){let e,t,i,s;return{c(){e=u("div"),t=u("button"),t.innerHTML=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
        Отправить все на повторение`,n(t,"class","bulk-action-btn svelte-4vynei"),n(e,"class","bulk-actions svelte-4vynei")},m(o,c){z(o,e,c),r(e,t),i||(s=B(t,"click",l[27]),i=!0)},p:ze,d(o){o&&A(e),i=!1,s()}}}function li(l){let e,t,i,s,o,c;function d(g,S){return g[0]==="learned"?si:g[0]==="draft"?ri:ii}let a=d(l),f=a(l);function p(g,S){return g[0]==="learned"?ci:g[0]==="draft"?ai:oi}let h=p(l),m=h(l);function v(g,S){return g[0]==="learned"?di:g[0]==="draft"?fi:ui}let y=v(l),k=y(l);return{c(){e=u("div"),t=u("div"),f.c(),i=w(),s=u("h2"),m.c(),o=w(),c=u("p"),k.c(),n(t,"class","empty-icon svelte-4vynei"),n(s,"class","svelte-4vynei"),n(c,"class","svelte-4vynei"),n(e,"class","empty-state svelte-4vynei")},m(g,S){z(g,e,S),r(e,t),f.m(t,null),r(e,i),r(e,s),m.m(s,null),r(e,o),r(e,c),k.m(c,null)},p(g,S){a!==(a=d(g))&&(f.d(1),f=a(g),f&&(f.c(),f.m(t,null))),h!==(h=p(g))&&(m.d(1),m=h(g),m&&(m.c(),m.m(s,null))),y!==(y=v(g))&&(k.d(1),k=y(g),k&&(k.c(),k.m(c,null)))},d(g){g&&A(e),f.d(),m.d(),k.d()}}}function ni(l){let e=[],t=new Map,i,s=bt(l[13]);const o=c=>c[63].id;for(let c=0;c<s.length;c+=1){let d=al(l,s,c),a=o(d);t.set(a,e[c]=gl(a,d))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=gt()},m(c,d){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,d);z(c,i,d)},p(c,d){d[0]&1843201&&(s=bt(c[13]),e=rn(e,d,o,1,c,s,t,i.parentNode,nn,gl,i,al))},d(c){c&&A(i);for(let d=0;d<e.length;d+=1)e[d].d(c)}}}function ii(l){let e,t,i,s;return{c(){e=J("svg"),t=J("circle"),i=J("line"),s=J("line"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"x1","12"),n(i,"y1","8"),n(i,"x2","12"),n(i,"y2","12"),n(s,"x1","12"),n(s,"y1","16"),n(s,"x2","12.01"),n(s,"y2","16"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(o,c){z(o,e,c),r(e,t),r(e,i),r(e,s)},d(o){o&&A(e)}}}function ri(l){let e,t,i;return{c(){e=J("svg"),t=J("path"),i=J("path"),n(t,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(i,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(s,o){z(s,e,o),r(e,t),r(e,i)},d(s){s&&A(e)}}}function si(l){let e,t,i;return{c(){e=J("svg"),t=J("circle"),i=J("polyline"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"points","16 10 11 15 8 12"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(s,o){z(s,e,o),r(e,t),r(e,i)},d(s){s&&A(e)}}}function oi(l){let e;return{c(){e=R("Нет слов на повторение")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function ai(l){let e;return{c(){e=R("Нет слов на проработку")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function ci(l){let e;return{c(){e=R("Пока нет изученных слов")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function ui(l){let e;return{c(){e=R("Все слова успешно изучены!")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function fi(l){let e;return{c(){e=R("Загрузите список слов на странице добавления")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function di(l){let e;return{c(){e=R("Изучайте карточки, чтобы они появились здесь")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function pi(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',n(e,"class","card-thumbnail missing svelte-4vynei")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function mi(l){let e,t,i;return{c(){e=u("div"),t=u("img"),$e(t.src,i=l[63].imageUrl)||n(t,"src",i),n(t,"alt",""),n(t,"class","svelte-4vynei"),n(e,"class","card-thumbnail svelte-4vynei")},m(s,o){z(s,e,o),r(e,t)},p(s,o){o[0]&8192&&!$e(t.src,i=s[63].imageUrl)&&n(t,"src",i)},d(s){s&&A(e)}}}function gi(l){let e;return{c(){e=u("p"),e.textContent="Добавьте перевод",n(e,"class","card-translation missing-text svelte-4vynei")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function hi(l){let e,t=l[63].translation+"",i;return{c(){e=u("p"),i=R(t),n(e,"class","card-translation svelte-4vynei")},m(s,o){z(s,e,o),r(e,i)},p(s,o){o[0]&8192&&t!==(t=s[63].translation+"")&&te(i,t)},d(s){s&&A(e)}}}function dl(l){let e,t=l[63].association+"",i;return{c(){e=u("p"),i=R(t),n(e,"class","card-association svelte-4vynei")},m(s,o){z(s,e,o),r(e,i)},p(s,o){o[0]&8192&&t!==(t=s[63].association+"")&&te(i,t)},d(s){s&&A(e)}}}function pl(l){let e,t,i,s,o,c,d,a,f,p;function h(S,T){var M;return T[0]&8192&&(s=null),s==null&&(s=!!((M=S[63].translation)!=null&&M.trim())),s?_i:vi}let m=h(l,[-1,-1,-1]),v=m(l);function y(S,T){var M;return T[0]&8192&&(f=null),f==null&&(f=!!((M=S[63].imageUrl)!=null&&M.trim())),f?ki:yi}let k=y(l,[-1,-1,-1]),g=k(l);return{c(){var S,T;e=u("div"),t=u("span"),i=J("svg"),v.c(),o=R(`
                  Перевод`),c=w(),d=u("span"),a=J("svg"),g.c(),p=R(`
                  Картинка`),n(i,"width","12"),n(i,"height","12"),n(i,"viewBox","0 0 24 24"),n(i,"fill","none"),n(i,"stroke","currentColor"),n(i,"stroke-width","2"),n(t,"class","status-item svelte-4vynei"),U(t,"complete",(S=l[63].translation)==null?void 0:S.trim()),n(a,"width","12"),n(a,"height","12"),n(a,"viewBox","0 0 24 24"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-width","2"),n(d,"class","status-item svelte-4vynei"),U(d,"complete",(T=l[63].imageUrl)==null?void 0:T.trim()),n(e,"class","draft-status svelte-4vynei")},m(S,T){z(S,e,T),r(e,t),r(t,i),v.m(i,null),r(t,o),r(e,c),r(e,d),r(d,a),g.m(a,null),r(d,p)},p(S,T){var M,I;m!==(m=h(S,T))&&(v.d(1),v=m(S),v&&(v.c(),v.m(i,null))),T[0]&8192&&U(t,"complete",(M=S[63].translation)==null?void 0:M.trim()),k!==(k=y(S,T))&&(g.d(1),g=k(S),g&&(g.c(),g.m(a,null))),T[0]&8192&&U(d,"complete",(I=S[63].imageUrl)==null?void 0:I.trim())},d(S){S&&A(e),v.d(),g.d()}}}function vi(l){let e;return{c(){e=J("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function _i(l){let e;return{c(){e=J("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function yi(l){let e;return{c(){e=J("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function ki(l){let e;return{c(){e=J("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function ml(l){let e,t,i;function s(){return l[49](l[63])}return{c(){e=u("button"),e.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-4vynei"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',n(e,"class","action-btn return svelte-4vynei"),n(e,"title","Вернуть на повторение")},m(o,c){z(o,e,c),t||(i=B(e,"click",s),t=!0)},p(o,c){l=o},d(o){o&&A(e),t=!1,i()}}}function gl(l,e){let t,i,s,o,c=e[63].word+"",d,a,f,p,h,m,v,y,k,g,S,T,M;function I(le,K){if(le[63].imageUrl)return mi;if(le[0]==="draft")return pi}let O=I(e),E=O&&O(e);function _(le,K){if(le[63].translation)return hi;if(le[0]==="draft")return gi}let b=_(e),C=b&&b(e),D=e[63].association&&dl(e),L=e[0]==="draft"&&pl(e);function N(){return e[48](e[63])}let j=e[0]==="learned"&&ml(e);function Y(){return e[50](e[63])}return{key:l,first:null,c(){t=u("div"),E&&E.c(),i=w(),s=u("div"),o=u("h3"),d=R(c),a=w(),C&&C.c(),f=w(),D&&D.c(),p=w(),L&&L.c(),h=w(),m=u("div"),v=u("button"),v.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-4vynei"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',y=w(),j&&j.c(),k=w(),g=u("button"),g.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-4vynei"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>',S=w(),n(o,"class","card-word svelte-4vynei"),n(s,"class","card-content svelte-4vynei"),n(v,"class","action-btn edit svelte-4vynei"),n(v,"title","Редактировать"),n(g,"class","action-btn delete svelte-4vynei"),n(g,"title","Удалить"),n(m,"class","card-actions svelte-4vynei"),n(t,"class","card-item svelte-4vynei"),U(t,"draft-card",e[0]==="draft"),this.first=t},m(le,K){z(le,t,K),E&&E.m(t,null),r(t,i),r(t,s),r(s,o),r(o,d),r(s,a),C&&C.m(s,null),r(s,f),D&&D.m(s,null),r(s,p),L&&L.m(s,null),r(t,h),r(t,m),r(m,v),r(m,y),j&&j.m(m,null),r(m,k),r(m,g),r(t,S),T||(M=[B(v,"click",N),B(g,"click",Y)],T=!0)},p(le,K){e=le,O===(O=I(e))&&E?E.p(e,K):(E&&E.d(1),E=O&&O(e),E&&(E.c(),E.m(t,i))),K[0]&8192&&c!==(c=e[63].word+"")&&te(d,c),b===(b=_(e))&&C?C.p(e,K):(C&&C.d(1),C=b&&b(e),C&&(C.c(),C.m(s,f))),e[63].association?D?D.p(e,K):(D=dl(e),D.c(),D.m(s,p)):D&&(D.d(1),D=null),e[0]==="draft"?L?L.p(e,K):(L=pl(e),L.c(),L.m(s,null)):L&&(L.d(1),L=null),e[0]==="learned"?j?j.p(e,K):(j=ml(e),j.c(),j.m(m,k)):j&&(j.d(1),j=null),K[0]&1&&U(t,"draft-card",e[0]==="draft")},d(le){le&&A(t),E&&E.d(),C&&C.d(),D&&D.d(),L&&L.d(),j&&j.d(),T=!1,qe(M)}}}function hl(l){let e,t,i,s,o,c,d,a,f,p,h,m=l[16].toLowerCase()+"",v,y,k,g=l[2].length+"",S,T,M,I,O,E,_,b,C,D=l[3].length+"",L,N,j,Y,le,K,V,ie,ae,Me,je,fe=l[4].length+"",pe,ve,Oe,ce,Ce,Je,ke,Be,W,Se,De,re,Ie=l[0]==="draft"&&l[3].trim()&&(l[5].trim()||l[12]),He,F,G,P,we,de,Re,ne;function ue(Q,ee){if(Q[5])return bi;if(Q[0]==="draft")return wi}let se=ue(l),$=se&&se(l),me=Ie&&vl();return{c(){e=u("div"),t=u("div"),i=u("div"),s=u("h2"),s.textContent="Редактировать карточку",o=w(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=w(),a=u("div"),f=u("div"),p=u("label"),h=R("Слово ("),v=R(m),y=R(`)
            `),k=u("span"),S=R(g),T=R("/35"),M=w(),I=u("input"),O=w(),E=u("div"),_=u("label"),b=R(`Перевод
            `),C=u("span"),L=R(D),N=R("/50"),j=w(),Y=u("input"),le=w(),K=u("div"),V=u("label"),ie=R(`Ассоциация 
            `),ae=u("span"),ae.textContent="(необязательно)",Me=w(),je=u("span"),pe=R(fe),ve=R("/95"),Oe=w(),ce=u("textarea"),Ce=w(),Je=u("div"),ke=u("label"),ke.innerHTML=`Изображение 
            <span class="optional svelte-4vynei">(необязательно)</span>`,Be=w(),W=u("input"),Se=w(),$&&$.c(),De=w(),re=u("div"),me&&me.c(),He=w(),F=u("button"),F.textContent="Отмена",G=w(),P=u("button"),we=R("Сохранить"),n(s,"class","svelte-4vynei"),n(c,"class","modal-close svelte-4vynei"),n(i,"class","modal-header svelte-4vynei"),n(k,"class","char-count svelte-4vynei"),U(k,"limit",l[2].length>=35),n(p,"for","editWord"),n(p,"class","svelte-4vynei"),n(I,"id","editWord"),n(I,"type","text"),n(I,"placeholder","например: serendipity"),n(I,"maxlength","35"),I.required=!0,n(I,"class","svelte-4vynei"),n(f,"class","input-group svelte-4vynei"),n(C,"class","char-count svelte-4vynei"),U(C,"limit",l[3].length>=50),n(_,"for","editTranslation"),n(_,"class","svelte-4vynei"),n(Y,"id","editTranslation"),n(Y,"type","text"),n(Y,"placeholder","например: счастливая случайность"),n(Y,"maxlength","50"),Y.required=!0,n(Y,"class","svelte-4vynei"),n(E,"class","input-group svelte-4vynei"),n(ae,"class","optional svelte-4vynei"),n(je,"class","char-count svelte-4vynei"),U(je,"limit",l[4].length>=95),n(V,"for","editAssociation"),n(V,"class","svelte-4vynei"),n(ce,"id","editAssociation"),n(ce,"placeholder","например: представьте, как вы случайно находите клад"),n(ce,"maxlength","95"),n(ce,"rows","2"),n(ce,"class","svelte-4vynei"),n(K,"class","input-group svelte-4vynei"),n(ke,"for","editImageUrl"),n(ke,"class","svelte-4vynei"),n(W,"id","editImageUrl"),n(W,"type","url"),n(W,"placeholder","https://example.com/image.jpg"),n(W,"class","svelte-4vynei"),n(Je,"class","input-group svelte-4vynei"),n(a,"class","modal-body svelte-4vynei"),n(F,"class","btn-secondary svelte-4vynei"),n(P,"class","btn-primary svelte-4vynei"),P.disabled=de=!l[2].trim()||l[0]!=="draft"&&!l[3].trim(),n(re,"class","modal-actions svelte-4vynei"),n(t,"class","modal svelte-4vynei"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-4vynei"),n(e,"role","button"),n(e,"tabindex","-1")},m(Q,ee){z(Q,e,ee),r(e,t),r(t,i),r(i,s),r(i,o),r(i,c),r(t,d),r(t,a),r(a,f),r(f,p),r(p,h),r(p,v),r(p,y),r(p,k),r(k,S),r(k,T),r(f,M),r(f,I),Pe(I,l[2]),r(a,O),r(a,E),r(E,_),r(_,b),r(_,C),r(C,L),r(C,N),r(E,j),r(E,Y),Pe(Y,l[3]),r(a,le),r(a,K),r(K,V),r(V,ie),r(V,ae),r(V,Me),r(V,je),r(je,pe),r(je,ve),r(K,Oe),r(K,ce),Pe(ce,l[4]),r(a,Ce),r(a,Je),r(Je,ke),r(Je,Be),r(Je,W),Pe(W,l[5]),r(a,Se),$&&$.m(a,null),r(t,De),r(t,re),me&&me.m(re,null),r(re,He),r(re,F),r(re,G),r(re,P),r(P,we),Re||(ne=[B(c,"click",l[51]),B(I,"input",l[52]),B(Y,"input",l[53]),B(ce,"input",l[54]),B(W,"input",l[55]),B(F,"click",l[57]),B(P,"click",l[22]),B(t,"click",nt(l[38])),B(e,"click",l[58]),B(e,"keydown",l[59])],Re=!0)},p(Q,ee){ee[0]&65536&&m!==(m=Q[16].toLowerCase()+"")&&te(v,m),ee[0]&4&&g!==(g=Q[2].length+"")&&te(S,g),ee[0]&4&&U(k,"limit",Q[2].length>=35),ee[0]&4&&I.value!==Q[2]&&Pe(I,Q[2]),ee[0]&8&&D!==(D=Q[3].length+"")&&te(L,D),ee[0]&8&&U(C,"limit",Q[3].length>=50),ee[0]&8&&Y.value!==Q[3]&&Pe(Y,Q[3]),ee[0]&16&&fe!==(fe=Q[4].length+"")&&te(pe,fe),ee[0]&16&&U(je,"limit",Q[4].length>=95),ee[0]&16&&Pe(ce,Q[4]),ee[0]&32&&W.value!==Q[5]&&Pe(W,Q[5]),se===(se=ue(Q))&&$?$.p(Q,ee):($&&$.d(1),$=se&&se(Q),$&&($.c(),$.m(a,null))),ee[0]&4137&&(Ie=Q[0]==="draft"&&Q[3].trim()&&(Q[5].trim()||Q[12])),Ie?me||(me=vl(),me.c(),me.m(re,He)):me&&(me.d(1),me=null),ee[0]&13&&de!==(de=!Q[2].trim()||Q[0]!=="draft"&&!Q[3].trim())&&(P.disabled=de)},d(Q){Q&&A(e),$&&$.d(),me&&me.d(),Re=!1,qe(ne)}}}function wi(l){let e,t,i,s,o,c,d,a,f;return{c(){e=u("div"),t=u("label"),i=u("input"),s=w(),o=u("span"),c=w(),d=u("span"),d.textContent="Активировать без изображения",n(i,"type","checkbox"),n(i,"class","checkbox-input svelte-4vynei"),n(o,"class","checkbox-custom svelte-4vynei"),n(d,"class","checkbox-text svelte-4vynei"),n(t,"class","checkbox-label svelte-4vynei"),n(e,"class","checkbox-group svelte-4vynei")},m(p,h){z(p,e,h),r(e,t),r(t,i),i.checked=l[12],r(t,s),r(t,o),r(t,c),r(t,d),a||(f=B(i,"change",l[56]),a=!0)},p(p,h){h[0]&4096&&(i.checked=p[12])},d(p){p&&A(e),a=!1,f()}}}function bi(l){let e,t,i,s,o;function c(f,p){return f[11]?Si:Ci}let d=c(l),a=d(l);return{c(){e=u("div"),a.c(),t=w(),i=u("button"),i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(i,"class","remove-image-btn svelte-4vynei"),n(i,"title","Удалить изображение"),n(e,"class","image-preview-container svelte-4vynei")},m(f,p){z(f,e,p),a.m(e,null),r(e,t),r(e,i),s||(o=B(i,"click",l[25]),s=!0)},p(f,p){d===(d=c(f))&&a?a.p(f,p):(a.d(1),a=d(f),a&&(a.c(),a.m(e,t)))},d(f){f&&A(e),a.d(),s=!1,o()}}}function Ci(l){let e,t,i,s;return{c(){e=u("img"),$e(e.src,t=l[5])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","modal-image-preview svelte-4vynei")},m(o,c){z(o,e,c),i||(s=[B(e,"error",l[23]),B(e,"load",l[24])],i=!0)},p(o,c){c[0]&32&&!$e(e.src,t=o[5])&&n(e,"src",t)},d(o){o&&A(e),i=!1,qe(s)}}}function Si(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Ошибка загрузки</span>',n(e,"class","image-error svelte-4vynei")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function vl(l){let e;return{c(){e=u("span"),e.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
            Карточка будет активирована`,n(e,"class","ready-hint svelte-4vynei")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function Ii(l){let e,t,i,s,o,c,d,a,f,p,h,m,v,y,k,g,S,T,M,I,O,E,_,b,C,D,L,N,j=l[7].length+"",Y,le,K,V,ie,ae,Me,je,fe,pe=l[8].length+"",ve,Oe,ce,Ce,Je,ke,Be,W=l[6].length+"",Se,De,re,Ie,He,F,G,P,we,de,Re,ne,ue,se,$,me,Q=l[9]&&cl(l),ee=l[1]&&ul(l),q=l[0]==="learned"&&l[6].length>0&&fl(l);function Te(oe,H){return oe[13].length>0?ni:li}let x=Te(l),_e=x(l),Ee=l[10]&&hl(l);return{c(){e=u("div"),t=u("div"),i=u("div"),s=u("h1"),s.textContent="Мои карточки",o=w(),c=u("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-4vynei"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',d=w(),a=u("p"),a.textContent="Управляйте вашими словами",f=w(),p=u("div"),h=u("button"),m=u("span"),v=R(l[15]),y=w(),k=u("span"),g=R(l[14]),S=w(),T=J("svg"),M=J("polyline"),I=w(),Q&&Q.c(),O=w(),E=u("div"),_=u("button"),b=J("svg"),C=J("path"),D=J("path"),L=R(`
      На проработку
      `),N=u("span"),Y=R(j),le=w(),K=u("button"),V=J("svg"),ie=J("circle"),ae=J("line"),Me=J("line"),je=R(`
      На повторение
      `),fe=u("span"),ve=R(pe),Oe=w(),ce=u("button"),Ce=J("svg"),Je=J("polyline"),ke=R(`
      Изученные
      `),Be=u("span"),Se=R(W),De=w(),re=u("div"),Ie=J("svg"),He=J("circle"),F=J("line"),G=w(),P=u("input"),we=w(),ee&&ee.c(),de=w(),q&&q.c(),Re=w(),ne=u("div"),_e.c(),ue=w(),Ee&&Ee.c(),se=gt(),n(s,"class","svelte-4vynei"),n(c,"class","export-btn svelte-4vynei"),n(c,"title","Экспорт в JSON"),n(i,"class","header-top svelte-4vynei"),n(a,"class","subtitle svelte-4vynei"),n(t,"class","header svelte-4vynei"),n(m,"class","dropdown-label svelte-4vynei"),n(k,"class","dropdown-badge svelte-4vynei"),n(M,"points","6 9 12 15 18 9"),n(T,"class","dropdown-arrow svelte-4vynei"),n(T,"width","16"),n(T,"height","16"),n(T,"viewBox","0 0 24 24"),n(T,"fill","none"),n(T,"stroke","currentColor"),n(T,"stroke-width","2"),U(T,"open",l[9]),n(h,"class","tab-dropdown-btn svelte-4vynei"),n(p,"class","tabs-mobile svelte-4vynei"),n(C,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(D,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(b,"width","18"),n(b,"height","18"),n(b,"viewBox","0 0 24 24"),n(b,"fill","none"),n(b,"stroke","currentColor"),n(b,"stroke-width","2"),n(N,"class","badge svelte-4vynei"),n(_,"class","tab svelte-4vynei"),U(_,"active",l[0]==="draft"),n(ie,"cx","12"),n(ie,"cy","12"),n(ie,"r","10"),n(ae,"x1","12"),n(ae,"y1","8"),n(ae,"x2","12"),n(ae,"y2","12"),n(Me,"x1","12"),n(Me,"y1","16"),n(Me,"x2","12.01"),n(Me,"y2","16"),n(V,"width","18"),n(V,"height","18"),n(V,"viewBox","0 0 24 24"),n(V,"fill","none"),n(V,"stroke","currentColor"),n(V,"stroke-width","2"),n(fe,"class","badge svelte-4vynei"),n(K,"class","tab svelte-4vynei"),U(K,"active",l[0]==="unlearned"),n(Je,"points","20 6 9 17 4 12"),n(Ce,"width","18"),n(Ce,"height","18"),n(Ce,"viewBox","0 0 24 24"),n(Ce,"fill","none"),n(Ce,"stroke","currentColor"),n(Ce,"stroke-width","2"),n(Be,"class","badge svelte-4vynei"),n(ce,"class","tab svelte-4vynei"),U(ce,"active",l[0]==="learned"),n(E,"class","tabs-desktop svelte-4vynei"),n(He,"cx","11"),n(He,"cy","11"),n(He,"r","8"),n(F,"x1","21"),n(F,"y1","21"),n(F,"x2","16.65"),n(F,"y2","16.65"),n(Ie,"class","search-icon svelte-4vynei"),n(Ie,"width","18"),n(Ie,"height","18"),n(Ie,"viewBox","0 0 24 24"),n(Ie,"fill","none"),n(Ie,"stroke","currentColor"),n(Ie,"stroke-width","2"),n(P,"type","text"),n(P,"class","search-input svelte-4vynei"),n(P,"placeholder","Поиск слова..."),n(re,"class","search-box svelte-4vynei"),n(ne,"class","cards-list svelte-4vynei"),n(e,"class","lists-container svelte-4vynei")},m(oe,H){z(oe,e,H),r(e,t),r(t,i),r(i,s),r(i,o),r(i,c),r(t,d),r(t,a),r(e,f),r(e,p),r(p,h),r(h,m),r(m,v),r(h,y),r(h,k),r(k,g),r(h,S),r(h,T),r(T,M),r(p,I),Q&&Q.m(p,null),r(e,O),r(e,E),r(E,_),r(_,b),r(b,C),r(b,D),r(_,L),r(_,N),r(N,Y),r(E,le),r(E,K),r(K,V),r(V,ie),r(V,ae),r(V,Me),r(K,je),r(K,fe),r(fe,ve),r(E,Oe),r(E,ce),r(ce,Ce),r(Ce,Je),r(ce,ke),r(ce,Be),r(Be,Se),r(e,De),r(e,re),r(re,Ie),r(Ie,He),r(Ie,F),r(re,G),r(re,P),Pe(P,l[1]),r(re,we),ee&&ee.m(re,null),r(e,de),q&&q.m(e,null),r(e,Re),r(e,ne),_e.m(ne,null),z(oe,ue,H),Ee&&Ee.m(oe,H),z(oe,se,H),$||(me=[B(c,"click",l[26]),B(h,"click",l[39]),B(_,"click",l[43]),B(K,"click",l[44]),B(ce,"click",l[45]),B(P,"input",l[46])],$=!0)},p(oe,H){H[0]&32768&&te(v,oe[15]),H[0]&16384&&te(g,oe[14]),H[0]&512&&U(T,"open",oe[9]),oe[9]?Q?Q.p(oe,H):(Q=cl(oe),Q.c(),Q.m(p,null)):Q&&(Q.d(1),Q=null),H[0]&128&&j!==(j=oe[7].length+"")&&te(Y,j),H[0]&1&&U(_,"active",oe[0]==="draft"),H[0]&256&&pe!==(pe=oe[8].length+"")&&te(ve,pe),H[0]&1&&U(K,"active",oe[0]==="unlearned"),H[0]&64&&W!==(W=oe[6].length+"")&&te(Se,W),H[0]&1&&U(ce,"active",oe[0]==="learned"),H[0]&2&&P.value!==oe[1]&&Pe(P,oe[1]),oe[1]?ee?ee.p(oe,H):(ee=ul(oe),ee.c(),ee.m(re,null)):ee&&(ee.d(1),ee=null),oe[0]==="learned"&&oe[6].length>0?q?q.p(oe,H):(q=fl(oe),q.c(),q.m(e,Re)):q&&(q.d(1),q=null),x===(x=Te(oe))&&_e?_e.p(oe,H):(_e.d(1),_e=x(oe),_e&&(_e.c(),_e.m(ne,null))),oe[10]?Ee?Ee.p(oe,H):(Ee=hl(oe),Ee.c(),Ee.m(se.parentNode,se)):Ee&&(Ee.d(1),Ee=null)},i:ze,o:ze,d(oe){oe&&(A(e),A(ue),A(se)),Q&&Q.d(),ee&&ee.d(),q&&q.d(),_e.d(),Ee&&Ee.d(oe),$=!1,qe(me)}}}function Ti(l,e,t){let i,s,o,c,d,a,f,p,h,m,v,y,k;xe(l,et,q=>t(35,v=q)),xe(l,We,q=>t(36,y=q)),xe(l,Ye,q=>t(37,k=q));let g="draft",S="",T=!1;const M={draft:"На проработку",unlearned:"На повторение",learned:"Изученные"};function I(q){t(0,g=q),t(9,T=!1)}let O=!1,E=null,_="",b="",C="",D="",L=!1,N=!1,j="",Y="",le="",K="";function V(q){We.moveToStudy(q)}function ie(q){const Te=[...p,...f,...a].find(Ee=>Ee.id===q),x=(Te==null?void 0:Te.dictionaryId)||d||"default",_e=v||"en";We.deleteCard(q,g,x,_e)}function ae(q){t(28,E=q),t(2,_=q.word),t(3,b=q.translation||""),t(4,C=q.association||""),t(5,D=q.imageUrl||""),t(12,N=!1),t(29,j=q.word),t(30,Y=q.translation||""),t(31,le=q.association||""),t(32,K=q.imageUrl||""),t(11,L=!1),t(10,O=!0)}function Me(q=!1){!q&&c&&!confirm("У вас есть несохранённые изменения. Закрыть без сохранения?")||(t(10,O=!1),t(28,E=null),t(12,N=!1))}function je(){t(10,O=!1),t(28,E=null),t(12,N=!1)}function fe(){if(_.trim()&&E){const q=E.dictionaryId||d||"default",Te=v||"en";if(g==="draft"){const x=N&&!D.trim();We.editDraftCard(E.id,{word:_.trim(),translation:b.trim(),association:C.trim(),imageUrl:D.trim()},Te,x)}else b.trim()&&We.editCard(E.id,g,{word:_.trim(),translation:b.trim(),association:C.trim(),imageUrl:D.trim()},q,Te);je()}}function pe(){t(11,L=!0)}function ve(){t(11,L=!1)}function Oe(){t(5,D="")}function ce(){const q={learned:a,unlearned:f,draft:p,language:v||"en",exportedAt:new Date().toISOString()},Te=JSON.stringify(q,null,2),x=new Blob([Te],{type:"application/json"}),_e=URL.createObjectURL(x),Ee=document.createElement("a");Ee.href=_e,Ee.download=`flash-words-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(_e)}function Ce(){a.length>0&&confirm(`Отправить все ${a.length} слов на повторение?`)&&We.moveAllToStudy()}function Je(q){at.call(this,l,q)}const ke=()=>t(9,T=!T),Be=()=>I("draft"),W=()=>I("unlearned"),Se=()=>I("learned"),De=()=>t(0,g="draft"),re=()=>t(0,g="unlearned"),Ie=()=>t(0,g="learned");function He(){S=this.value,t(1,S)}const F=()=>t(1,S=""),G=q=>ae(q),P=q=>V(q.id),we=q=>ie(q.id),de=()=>Me();function Re(){_=this.value,t(2,_)}function ne(){b=this.value,t(3,b)}function ue(){C=this.value,t(4,C)}function se(){D=this.value,t(5,D)}function $(){N=this.checked,t(12,N)}const me=()=>Me(),Q=()=>Me(),ee=q=>q.key==="Escape"&&Me();return l.$$.update=()=>{l.$$.dirty[1]&16&&t(16,i=Xe(v)),l.$$.dirty[0]&1&&t(15,s=M[g]),l.$$.dirty[1]&64&&t(33,d=k||"default"),l.$$.dirty[1]&36&&t(7,p=(y.draft||[]).filter(q=>(q.dictionaryId||"default")===d)),l.$$.dirty[1]&36&&t(8,f=y.unlearned.filter(q=>(q.dictionaryId||"default")===d)),l.$$.dirty[1]&36&&t(6,a=y.learned.filter(q=>(q.dictionaryId||"default")===d)),l.$$.dirty[0]&449&&t(14,o=g==="draft"?p.length:g==="unlearned"?f.length:a.length),l.$$.dirty[0]&1879048252|l.$$.dirty[1]&3&&(c=E&&(_!==j||b!==Y||C!==le||D!==K)),l.$$.dirty[0]&449&&t(34,h=g==="learned"?a:g==="unlearned"?f:p),l.$$.dirty[0]&2|l.$$.dirty[1]&8&&t(13,m=S.trim()?h.filter(q=>q.word.toLowerCase().includes(S.toLowerCase())||q.translation&&q.translation.toLowerCase().includes(S.toLowerCase())):h)},[g,S,_,b,C,D,a,p,f,T,O,L,N,m,o,s,i,I,V,ie,ae,Me,fe,pe,ve,Oe,ce,Ce,E,j,Y,le,K,d,h,v,y,k,Je,ke,Be,W,Se,De,re,Ie,He,F,G,P,we,de,Re,ne,ue,se,$,me,Q,ee]}class Li extends Tt{constructor(e){super(),It(this,e,Ti,Ii,ut,{},null,[-1,-1,-1])}}function _l(l,e,t){const i=l.slice();return i[52]=e[t],i}function yl(l){let e;return{c(){e=u("span"),n(e,"class","user-indicator svelte-1ge6299")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function kl(l){let e;return{c(){e=u("span"),n(e,"class","token-indicator svelte-1ge6299")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function wl(l){let e,t,i;function s(d,a){return d[3].length===0?zi:Ai}let o=s(l),c=o(l);return{c(){e=u("div"),c.c(),n(e,"class","dictionary-dropdown svelte-1ge6299")},m(d,a){z(d,e,a),c.m(e,null),t||(i=B(e,"click",nt(l[33])),t=!0)},p(d,a){o===(o=s(d))&&c?c.p(d,a):(c.d(1),c=o(d),c&&(c.c(),c.m(e,null)))},d(d){d&&A(e),c.d(),t=!1,i()}}}function Ai(l){let e,t=bt(l[3]),i=[];for(let s=0;s<t.length;s+=1)i[s]=Cl(_l(l,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=gt()},m(s,o){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,o);z(s,e,o)},p(s,o){if(o[0]&4194316){t=bt(s[3]);let c;for(c=0;c<t.length;c+=1){const d=_l(s,t,c);i[c]?i[c].p(d,o):(i[c]=Cl(d),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=t.length}},d(s){s&&A(e),Yl(i,s)}}}function zi(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ge6299"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> <p class="svelte-1ge6299">Загрузите словарь или добавьте карточку слова</p>',n(e,"class","dropdown-empty svelte-1ge6299")},m(t,i){z(t,e,i)},p:ze,d(t){t&&A(e)}}}function bl(l){let e,t;return{c(){e=J("svg"),t=J("polyline"),n(t,"points","20 6 9 17 4 12"),n(e,"width","16"),n(e,"height","16"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(i,s){z(i,e,s),r(e,t)},d(i){i&&A(e)}}}function Cl(l){let e,t,i=l[52].name+"",s,o,c,d,a,f=l[2]===l[52].id&&bl();function p(){return l[35](l[52])}return{c(){e=u("button"),t=u("span"),s=R(i),o=w(),f&&f.c(),c=w(),n(e,"class","dropdown-item svelte-1ge6299"),U(e,"active",l[2]===l[52].id)},m(h,m){z(h,e,m),r(e,t),r(t,s),r(e,o),f&&f.m(e,null),r(e,c),d||(a=B(e,"click",p),d=!0)},p(h,m){l=h,m[0]&8&&i!==(i=l[52].name+"")&&te(s,i),l[2]===l[52].id?f||(f=bl(),f.c(),f.m(e,c)):f&&(f.d(1),f=null),m[0]&12&&U(e,"active",l[2]===l[52].id)},d(h){h&&A(e),f&&f.d(),d=!1,a()}}}function Sl(l){let e,t,i,s,o,c,d,a,f,p,h,m,v,y,k,g,S,T,M,I,O,E,_=l[16]&&Il(l),b=l[7]>0&&Tl(l);function C(N,j){return N[6]?Di:Mi}let D=C(l),L=D(l);return{c(){e=u("div"),t=u("div"),i=u("div"),s=u("h2"),s.textContent="AI Токен",o=w(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=w(),a=u("div"),f=u("p"),f.textContent="Введите ваш API ключ для использования AI-функций",p=w(),h=u("div"),m=u("input"),v=w(),_&&_.c(),y=w(),b&&b.c(),k=w(),g=u("div"),S=u("button"),S.textContent="Отмена",T=w(),M=u("button"),L.c(),n(s,"class","svelte-1ge6299"),n(c,"class","modal-close svelte-1ge6299"),n(i,"class","modal-header svelte-1ge6299"),n(f,"class","modal-description svelte-1ge6299"),n(m,"type","password"),n(m,"class","token-input svelte-1ge6299"),n(m,"placeholder","sk-..."),n(h,"class","token-input-wrapper svelte-1ge6299"),n(a,"class","modal-body svelte-1ge6299"),n(S,"class","cancel-btn svelte-1ge6299"),n(M,"class","save-btn svelte-1ge6299"),M.disabled=I=!l[0].trim(),U(M,"saved",l[6]),n(g,"class","modal-footer svelte-1ge6299"),n(t,"class","modal svelte-1ge6299"),n(e,"class","modal-overlay svelte-1ge6299")},m(N,j){z(N,e,j),r(e,t),r(t,i),r(i,s),r(i,o),r(i,c),r(t,d),r(t,a),r(a,f),r(a,p),r(a,h),r(h,m),Pe(m,l[0]),r(h,v),_&&_.m(h,null),r(a,y),b&&b.m(a,null),r(t,k),r(t,g),r(g,S),r(g,T),r(g,M),L.m(M,null),O||(E=[B(c,"click",l[36]),B(m,"input",l[37]),B(S,"click",l[38]),B(M,"click",l[18]),B(t,"click",nt(l[32])),B(e,"click",l[39])],O=!0)},p(N,j){j[0]&1&&m.value!==N[0]&&Pe(m,N[0]),N[16]?_?_.p(N,j):(_=Il(N),_.c(),_.m(h,null)):_&&(_.d(1),_=null),N[7]>0?b?b.p(N,j):(b=Tl(N),b.c(),b.m(a,null)):b&&(b.d(1),b=null),D!==(D=C(N))&&(L.d(1),L=D(N),L&&(L.c(),L.m(M,null))),j[0]&1&&I!==(I=!N[0].trim())&&(M.disabled=I),j[0]&64&&U(M,"saved",N[6])},d(N){N&&A(e),_&&_.d(),b&&b.d(),L.d(),O=!1,qe(E)}}}function Il(l){let e,t,i;return{c(){e=u("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-1ge6299"),n(e,"title","Очистить токен")},m(s,o){z(s,e,o),t||(i=B(e,"click",l[19]),t=!0)},p:ze,d(s){s&&A(e),t=!1,i()}}}function Tl(l){let e,t,i,s,o,c=El(l[7])+"",d;return{c(){e=u("div"),t=u("div"),i=u("span"),i.textContent="Стоимость всех запросов:",s=w(),o=u("span"),d=R(c),n(i,"class","cost-label svelte-1ge6299"),n(o,"class","cost-value svelte-1ge6299"),n(t,"class","cost-row svelte-1ge6299"),n(e,"class","cost-info svelte-1ge6299")},m(a,f){z(a,e,f),r(e,t),r(t,i),r(t,s),r(t,o),r(o,d)},p(a,f){f[0]&128&&c!==(c=El(a[7])+"")&&te(d,c)},d(a){a&&A(e)}}}function Mi(l){let e;return{c(){e=R("Сохранить")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function Di(l){let e,t,i;return{c(){e=J("svg"),t=J("polyline"),i=R(`
              Сохранено`),n(t,"points","20 6 9 17 4 12"),n(e,"width","18"),n(e,"height","18"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(s,o){z(s,e,o),r(e,t),z(s,i,o)},d(s){s&&(A(e),A(i))}}}function Ll(l){let e,t,i,s,o,c,d,a,f,p,h,m,v,y,k,g,S,T,M,I,O,E,_=l[9]&&Al(l),b=l[10]&&zl(l),C=l[1]&&Ml(l);function D(j,Y){return j[11]?Ni:Ei}let L=D(l),N=L(l);return{c(){e=u("div"),t=u("div"),i=u("div"),s=u("h2"),s.textContent="Загрузить слова",o=w(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=w(),a=u("div"),f=u("p"),f.textContent="Введите код для загрузки слов из персонального файла",p=w(),h=u("div"),m=u("input"),v=w(),_&&_.c(),y=w(),b&&b.c(),k=w(),C&&C.c(),g=w(),S=u("div"),T=u("button"),T.textContent="Отмена",M=w(),I=u("button"),N.c(),n(s,"class","svelte-1ge6299"),n(c,"class","modal-close svelte-1ge6299"),n(i,"class","modal-header svelte-1ge6299"),n(f,"class","modal-description svelte-1ge6299"),n(m,"type","text"),n(m,"class","token-input user-input svelte-1ge6299"),n(m,"placeholder","например: mycode"),U(m,"error",l[10]),n(h,"class","token-input-wrapper svelte-1ge6299"),n(a,"class","modal-body svelte-1ge6299"),n(T,"class","cancel-btn svelte-1ge6299"),n(I,"class","save-btn svelte-1ge6299"),I.disabled=l[11],n(S,"class","modal-footer svelte-1ge6299"),n(t,"class","modal svelte-1ge6299"),n(e,"class","modal-overlay svelte-1ge6299")},m(j,Y){z(j,e,Y),r(e,t),r(t,i),r(i,s),r(i,o),r(i,c),r(t,d),r(t,a),r(a,f),r(a,p),r(a,h),r(h,m),Pe(m,l[9]),r(h,v),_&&_.m(h,null),r(a,y),b&&b.m(a,null),r(a,k),C&&C.m(a,null),r(t,g),r(t,S),r(S,T),r(S,M),r(S,I),N.m(I,null),O||(E=[B(c,"click",l[40]),B(m,"input",l[41]),B(m,"keydown",l[42]),B(T,"click",l[43]),B(I,"click",l[21]),B(t,"click",nt(l[31])),B(e,"click",l[44])],O=!0)},p(j,Y){Y[0]&512&&m.value!==j[9]&&Pe(m,j[9]),Y[0]&1024&&U(m,"error",j[10]),j[9]?_?_.p(j,Y):(_=Al(j),_.c(),_.m(h,null)):_&&(_.d(1),_=null),j[10]?b?b.p(j,Y):(b=zl(j),b.c(),b.m(a,k)):b&&(b.d(1),b=null),j[1]?C?C.p(j,Y):(C=Ml(j),C.c(),C.m(a,null)):C&&(C.d(1),C=null),L!==(L=D(j))&&(N.d(1),N=L(j),N&&(N.c(),N.m(I,null))),Y[0]&2048&&(I.disabled=j[11])},d(j){j&&A(e),_&&_.d(),b&&b.d(),C&&C.d(),N.d(),O=!1,qe(E)}}}function Al(l){let e,t,i;return{c(){e=u("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-1ge6299"),n(e,"title","Очистить")},m(s,o){z(s,e,o),t||(i=B(e,"click",l[24]),t=!0)},p:ze,d(s){s&&A(e),t=!1,i()}}}function zl(l){let e,t;return{c(){e=u("p"),t=R(l[10]),n(e,"class","error-text svelte-1ge6299")},m(i,s){z(i,e,s),r(e,t)},p(i,s){s[0]&1024&&te(t,i[10])},d(i){i&&A(e)}}}function Ml(l){let e,t,i,s,o,c,d,a;return{c(){e=u("div"),t=J("svg"),i=J("polyline"),s=w(),o=u("span"),c=R("Загружены слова: "),d=u("strong"),a=R(l[1]),n(i,"points","20 6 9 17 4 12"),n(t,"width","16"),n(t,"height","16"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(d,"class","svelte-1ge6299"),n(e,"class","current-user-info svelte-1ge6299")},m(f,p){z(f,e,p),r(e,t),r(t,i),r(e,s),r(e,o),r(o,c),r(o,d),r(d,a)},p(f,p){p[0]&2&&te(a,f[1])},d(f){f&&A(e)}}}function Ei(l){let e;return{c(){e=R("Загрузить")},m(t,i){z(t,e,i)},d(t){t&&A(e)}}}function Ni(l){let e,t;return{c(){e=u("span"),t=R(`
              Загрузка...`),n(e,"class","loading-spinner-small svelte-1ge6299")},m(i,s){z(i,e,s),z(i,t,s)},d(i){i&&(A(e),A(t))}}}function Oi(l){let e,t;return e=new Li({}),{c(){Ut(e.$$.fragment)},m(i,s){Ct(e,i,s),t=!0},i(i){t||(ct(e.$$.fragment,i),t=!0)},o(i){yt(e.$$.fragment,i),t=!1},d(i){St(e,i)}}}function Bi(l){let e,t;return e=new ti({}),{c(){Ut(e.$$.fragment)},m(i,s){Ct(e,i,s),t=!0},i(i){t||(ct(e.$$.fragment,i),t=!0)},o(i){yt(e.$$.fragment,i),t=!1},d(i){St(e,i)}}}function Ui(l){let e,t;return e=new An({}),{c(){Ut(e.$$.fragment)},m(i,s){Ct(e,i,s),t=!0},i(i){t||(ct(e.$$.fragment,i),t=!0)},o(i){yt(e.$$.fragment,i),t=!1},d(i){St(e,i)}}}function Dl(l){let e,t;return{c(){e=u("span"),t=R(l[13]),n(e,"class","study-badge svelte-1ge6299")},m(i,s){z(i,e,s),r(e,t)},p(i,s){s[0]&8192&&te(t,i[13])},d(i){i&&A(e)}}}function Hi(l){let e,t,i,s,o,c,d,a,f,p,h,m,v,y,k,g,S,T,M,I,O,E,_,b,C,D,L,N,j,Y,le,K,V,ie,ae,Me,je,fe,pe,ve,Oe,ce,Ce,Je,ke,Be,W,Se,De,re,Ie,He,F,G,P,we,de,Re,ne=l[15]&&yl(),ue=l[16]&&kl(),se=l[12]&&wl(l),$=l[5]&&Sl(l),me=l[8]&&Ll(l);const Q=[Ui,Bi,Oi],ee=[];function q(x,_e){return x[4]==="add"?0:x[4]==="study"?1:x[4]==="lists"?2:-1}~(pe=q(l))&&(ve=ee[pe]=Q[pe](l));let Te=l[13]>0&&Dl(l);return{c(){e=u("div"),t=u("div"),i=w(),s=u("nav"),o=u("div"),o.innerHTML='<svg width="32" height="32" viewBox="0 0 100 100"><defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#6366f1"></stop><stop offset="100%" style="stop-color:#a855f7"></stop></linearGradient></defs><rect width="100" height="100" rx="20" fill="url(#logoGrad)"></rect><text x="50" y="65" font-family="Arial" font-size="50" font-weight="bold" fill="white" text-anchor="middle">F</text></svg> <span class="brand-name svelte-1ge6299">Flash Words</span>',c=w(),d=u("div"),a=u("button"),f=J("svg"),p=J("path"),h=w(),ne&&ne.c(),m=w(),v=u("button"),y=J("svg"),k=J("path"),g=J("polyline"),S=J("polyline"),T=J("polyline"),M=J("polyline"),I=J("line"),O=w(),ue&&ue.c(),E=w(),_=u("div"),b=u("button"),C=J("svg"),D=J("path"),L=J("path"),N=w(),j=u("span"),Y=R(l[14]),le=w(),K=J("svg"),V=J("polyline"),ie=w(),se&&se.c(),ae=w(),$&&$.c(),Me=w(),me&&me.c(),je=w(),fe=u("main"),ve&&ve.c(),Oe=w(),ce=u("nav"),Ce=u("button"),Ce.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ge6299"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg> <span class="svelte-1ge6299">Добавить</span>',Je=w(),ke=u("button"),Be=u("div"),W=J("svg"),Se=J("rect"),De=J("path"),re=J("path"),Ie=w(),Te&&Te.c(),He=w(),F=u("span"),F.textContent="Изучать",G=w(),P=u("button"),P.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ge6299"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> <span class="svelte-1ge6299">Списки</span>',n(t,"class","background-pattern svelte-1ge6299"),n(o,"class","nav-brand svelte-1ge6299"),n(p,"d","M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"),n(f,"width","20"),n(f,"height","20"),n(f,"viewBox","0 0 24 24"),n(f,"fill","none"),n(f,"stroke","currentColor"),n(f,"stroke-width","2"),n(a,"class","user-btn svelte-1ge6299"),n(a,"title","Ввести промокод"),U(a,"has-user",l[15]),n(k,"d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"),n(g,"points","7.5 4.21 12 6.81 16.5 4.21"),n(S,"points","7.5 19.79 7.5 14.6 3 12"),n(T,"points","21 12 16.5 14.6 16.5 19.79"),n(M,"points","3.27 6.96 12 12.01 20.73 6.96"),n(I,"x1","12"),n(I,"y1","22.08"),n(I,"x2","12"),n(I,"y2","12"),n(y,"width","20"),n(y,"height","20"),n(y,"viewBox","0 0 24 24"),n(y,"fill","none"),n(y,"stroke","currentColor"),n(y,"stroke-width","2"),n(v,"class","ai-token-btn svelte-1ge6299"),n(v,"title","Настройка AI токена"),U(v,"has-token",l[16]),n(D,"d","M4 19.5A2.5 2.5 0 0 1 6.5 17H20"),n(L,"d","M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"),n(C,"width","18"),n(C,"height","18"),n(C,"viewBox","0 0 24 24"),n(C,"fill","none"),n(C,"stroke","currentColor"),n(C,"stroke-width","2"),n(j,"class","dictionary-label svelte-1ge6299"),n(V,"points","6 9 12 15 18 9"),n(K,"class","dropdown-arrow svelte-1ge6299"),n(K,"width","14"),n(K,"height","14"),n(K,"viewBox","0 0 24 24"),n(K,"fill","none"),n(K,"stroke","currentColor"),n(K,"stroke-width","2"),U(K,"open",l[12]),n(b,"class","dictionary-btn svelte-1ge6299"),n(b,"title","Выбрать словарь"),U(b,"has-dictionary",l[2]),n(_,"class","dictionary-selector svelte-1ge6299"),n(d,"class","nav-stats svelte-1ge6299"),n(s,"class","navbar svelte-1ge6299"),n(fe,"class","main-content svelte-1ge6299"),n(Ce,"class","nav-item svelte-1ge6299"),U(Ce,"active",l[4]==="add"),n(Se,"x","2"),n(Se,"y","4"),n(Se,"width","20"),n(Se,"height","16"),n(Se,"rx","2"),n(De,"d","M12 8v8"),n(re,"d","M8 12h8"),n(W,"width","28"),n(W,"height","28"),n(W,"viewBox","0 0 24 24"),n(W,"fill","none"),n(W,"stroke","currentColor"),n(W,"stroke-width","2"),n(W,"class","svelte-1ge6299"),n(Be,"class","study-btn-inner svelte-1ge6299"),n(F,"class","svelte-1ge6299"),n(ke,"class","nav-item study svelte-1ge6299"),U(ke,"active",l[4]==="study"),n(P,"class","nav-item svelte-1ge6299"),U(P,"active",l[4]==="lists"),n(ce,"class","bottom-nav svelte-1ge6299"),n(e,"class","app svelte-1ge6299")},m(x,_e){z(x,e,_e),r(e,t),r(e,i),r(e,s),r(s,o),r(s,c),r(s,d),r(d,a),r(a,f),r(f,p),r(a,h),ne&&ne.m(a,null),r(d,m),r(d,v),r(v,y),r(y,k),r(y,g),r(y,S),r(y,T),r(y,M),r(y,I),r(v,O),ue&&ue.m(v,null),r(d,E),r(d,_),r(_,b),r(b,C),r(C,D),r(C,L),r(b,N),r(b,j),r(j,Y),r(b,le),r(b,K),r(K,V),r(_,ie),se&&se.m(_,null),r(e,ae),$&&$.m(e,null),r(e,Me),me&&me.m(e,null),r(e,je),r(e,fe),~pe&&ee[pe].m(fe,null),r(e,Oe),r(e,ce),r(ce,Ce),r(ce,Je),r(ce,ke),r(ke,Be),r(Be,W),r(W,Se),r(W,De),r(W,re),r(Be,Ie),Te&&Te.m(Be,null),r(ke,He),r(ke,F),r(ce,G),r(ce,P),we=!0,de||(Re=[B(a,"click",l[20]),B(v,"click",l[17]),B(b,"click",nt(l[34])),B(Ce,"click",l[45]),B(ke,"click",l[46]),B(P,"click",l[47]),B(e,"click",l[23])],de=!0)},p(x,_e){x[15]?ne||(ne=yl(),ne.c(),ne.m(a,null)):ne&&(ne.d(1),ne=null),(!we||_e[0]&32768)&&U(a,"has-user",x[15]),x[16]?ue||(ue=kl(),ue.c(),ue.m(v,null)):ue&&(ue.d(1),ue=null),(!we||_e[0]&65536)&&U(v,"has-token",x[16]),(!we||_e[0]&16384)&&te(Y,x[14]),(!we||_e[0]&4096)&&U(K,"open",x[12]),(!we||_e[0]&4)&&U(b,"has-dictionary",x[2]),x[12]?se?se.p(x,_e):(se=wl(x),se.c(),se.m(_,null)):se&&(se.d(1),se=null),x[5]?$?$.p(x,_e):($=Sl(x),$.c(),$.m(e,Me)):$&&($.d(1),$=null),x[8]?me?me.p(x,_e):(me=Ll(x),me.c(),me.m(e,je)):me&&(me.d(1),me=null);let Ee=pe;pe=q(x),pe!==Ee&&(ve&&(tn(),yt(ee[Ee],1,1,()=>{ee[Ee]=null}),ln()),~pe?(ve=ee[pe],ve||(ve=ee[pe]=Q[pe](x),ve.c()),ct(ve,1),ve.m(fe,null)):ve=null),(!we||_e[0]&16)&&U(Ce,"active",x[4]==="add"),x[13]>0?Te?Te.p(x,_e):(Te=Dl(x),Te.c(),Te.m(Be,null)):Te&&(Te.d(1),Te=null),(!we||_e[0]&16)&&U(ke,"active",x[4]==="study"),(!we||_e[0]&16)&&U(P,"active",x[4]==="lists")},i(x){we||(ct(ve),we=!0)},o(x){yt(ve),we=!1},d(x){x&&A(e),ne&&ne.d(),ue&&ue.d(),se&&se.d(),$&&$.d(),me&&me.d(),~pe&&ee[pe].d(),Te&&Te.d(),de=!1,qe(Re)}}}function El(l){return l<.01?`$${l.toFixed(6)}`:l<1?`$${l.toFixed(4)}`:`$${l.toFixed(2)}`}function Ri(l,e,t){let i,s,o,c,d,a,f,p,h,m,v,y;xe(l,We,F=>t(28,m=F)),xe(l,Ye,F=>t(29,v=F)),xe(l,Ve,F=>t(30,y=F));let k="study",g=!1,S="",T=!1,M=0,I=!1,O="",E="",_=!1,b="",C=!1;function D(){typeof localStorage<"u"&&t(7,M=parseFloat(localStorage.getItem("ai_total_cost")||"0")),t(5,g=!0)}function L(){typeof localStorage<"u"&&(localStorage.setItem("ai_token",S),t(6,T=!0),setTimeout(()=>{t(6,T=!1),t(5,g=!1)},1e3))}function N(){t(0,S=""),typeof localStorage<"u"&&localStorage.removeItem("ai_token")}function j(){t(9,O=b),t(10,E=""),t(8,I=!0)}async function Y(){if(!O.trim()){t(1,b=""),typeof localStorage<"u"&&localStorage.removeItem("user_name"),t(8,I=!1);return}t(11,_=!0),t(10,E="");try{const G=await fetch(`/flash/words/${O.trim()}.json`);if(!G.ok)throw new Error("Файл не найден");const P=await G.json(),we=P.language||"en";P.language&&et.set(P.language),t(1,b=O.trim()),typeof localStorage<"u"&&localStorage.setItem("user_name",b);let de;if(we==="en"?de="default":(de=b,We.resetDictionary(de)),We.importCards(P,de),we==="en"){if(!i.find(ne=>ne.id==="default")){const ne=`${Xe("en")} (default)`;Ve.addDictionary("default",ne,"en",!1)}Ye.set("default")}else{const Re=`${b} (${Xe(we)})`;Ve.addDictionary(b,Re,we,!1),Ye.set(b)}t(8,I=!1)}catch{t(10,E=`Файл "${O.trim()}.json" не найден`)}finally{t(11,_=!1)}}async function le(F){if(!F){Ye.set(""),t(12,C=!1);return}const G=i.find(P=>P.id===F);if(G){Ye.set(F),G.language&&et.set(G.language),t(12,C=!1);return}t(11,_=!0);try{const P=(G==null?void 0:G.language)||"en";try{await We.loadDictionaryFromBackend(F,P);const se=`${F} (${Xe(P)})`;Ve.addDictionary(F,se,P,!1),Ye.set(F),P&&et.set(P),t(12,C=!1),t(11,_=!1);return}catch{console.log("Словарь не найден на бекенде, пробуем загрузить из файла")}const de=await fetch(`/flash/words/${F}.json`);if(!de.ok)throw new Error("Файл не найден");const Re=await de.json(),ne=Re.language||"en";Re.language&&et.set(Re.language);let ue;if(ne==="en"?ue="default":(ue=F,We.resetDictionary(ue)),We.importCards(Re,ue),ne==="en"){if(!i.find($=>$.id==="default")){const $=`${Xe("en")} (default)`;Ve.addDictionary("default",$,"en",!1)}Ye.set("default")}else{const se=`${F} (${Xe(ne)})`;Ve.addDictionary(F,se,ne,!1),Ye.set(F)}t(12,C=!1)}catch(P){console.error("Ошибка загрузки словаря:",P),alert(`Ошибка загрузки словаря "${F}"`)}finally{t(11,_=!1)}}function K(F){if(F===s){t(12,C=!1);return}le(F)}Ul(async()=>{if(!i.find(G=>G.id==="default")){const G=`${Xe("en")} (default)`;Ve.addDictionary("default",G,"en",!1),(!s||s==="")&&Ye.set("default")}if(s){const G=i.find(P=>P.id===s);if(G&&(G.isImported||s==="default")){try{await We.loadDictionaryFromBackend(s,G.language||"en")}catch{console.log("Не удалось загрузить словарь с бекенда, используем локальные данные")}G.language&&et.set(G.language)}else le(s)}else{Ye.set("default");const G=i.find(P=>P.id==="default");try{await We.loadDictionaryFromBackend("default","en")}catch{console.log("Не удалось загрузить словарь с бекенда, используем локальные данные")}G&&G.language&&et.set(G.language)}});function V(F){C&&!F.target.closest(".dictionary-selector")&&t(12,C=!1)}function ie(){t(9,O=""),t(1,b=""),typeof localStorage<"u"&&localStorage.removeItem("user_name")}const ae=(F,G)=>F.filter(P=>(P.dictionaryId||"default")===G);function Me(F){at.call(this,l,F)}function je(F){at.call(this,l,F)}function fe(F){at.call(this,l,F)}const pe=()=>t(12,C=!C),ve=F=>K(F.id),Oe=()=>t(5,g=!1);function ce(){S=this.value,t(0,S)}const Ce=()=>t(5,g=!1),Je=()=>t(5,g=!1),ke=()=>t(8,I=!1);function Be(){O=this.value,t(9,O)}const W=F=>F.key==="Enter"&&Y(),Se=()=>t(8,I=!1),De=()=>t(8,I=!1),re=()=>t(4,k="add"),Ie=()=>t(4,k="study"),He=()=>t(4,k="lists");return l.$$.update=()=>{var F;if(l.$$.dirty[0]&536870912&&t(2,s=v),l.$$.dirty[0]&268435460&&s){const G={learned:m.learned.filter(P=>(P.dictionaryId||"default")===s),unlearned:m.unlearned.filter(P=>(P.dictionaryId||"default")===s),draft:(m.draft||[]).filter(P=>(P.dictionaryId||"default")===s)};Ve.updateDictionaryData(s,G)}l.$$.dirty[0]&1073741824&&t(3,i=y),l.$$.dirty[0]&1&&t(16,o=S&&S.length>0),l.$$.dirty[0]&2&&t(15,c=b&&b.length>0),l.$$.dirty[0]&12&&i.length>0&&(!s||s==="")&&(i.find(P=>P.id==="default")?Ye.set("default"):i.length>0&&Ye.set(i[0].id)),l.$$.dirty[0]&12&&t(14,d=((F=i.find(G=>G.id===s))==null?void 0:F.name)||(i.length>0?"Выберите словарь":"Нет словарей")),l.$$.dirty[0]&268435460&&t(27,a=ae(m.learned,s)),l.$$.dirty[0]&268435460&&t(26,f=ae(m.unlearned,s)),l.$$.dirty[0]&268435460&&t(25,p=ae(m.draft||[],s)),l.$$.dirty[0]&234881024&&a.length+f.length+p.length,l.$$.dirty[0]&67108864&&t(13,h=f.length),l.$$.dirty[0]&33554432&&p.length},[S,b,s,i,k,g,T,M,I,O,E,_,C,h,d,c,o,D,L,N,j,Y,K,V,ie,p,f,a,m,v,y,Me,je,fe,pe,ve,Oe,ce,Ce,Je,ke,Be,W,Se,De,re,Ie,He]}class Wi extends Tt{constructor(e){super(),It(this,e,Ri,Hi,ut,{},null,[-1,-1])}}new Wi({target:document.getElementById("app")});
