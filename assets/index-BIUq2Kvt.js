var El=Object.defineProperty;var Ol=(l,e,t)=>e in l?El(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var xe=(l,e,t)=>Ol(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();function ye(){}function Il(l){return l()}function Bt(){return Object.create(null)}function je(l){l.forEach(Il)}function Ml(l){return typeof l=="function"}function at(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let vt;function Ve(l,e){return l===e?!0:(vt||(vt=document.createElement("a")),vt.href=e,l===vt.href)}function Ul(l){return Object.keys(l).length===0}function Hl(l,...e){if(l==null){for(const i of e)i(void 0);return ye}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Qe(l,e,t){l.$$.on_destroy.push(Hl(e,t))}function s(l,e){l.appendChild(e)}function D(l,e,t){l.insertBefore(e,t||null)}function M(l){l.parentNode&&l.parentNode.removeChild(l)}function Rl(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function f(l){return document.createElement(l)}function P(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function J(l){return document.createTextNode(l)}function g(){return J(" ")}function nt(){return J("")}function H(l,e,t,i){return l.addEventListener(e,t,i),()=>l.removeEventListener(e,t,i)}function Jl(l){return function(e){return e.preventDefault(),l.call(this,e)}}function $e(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function n(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function jl(l){return Array.from(l.childNodes)}function $(l,e){e=""+e,l.data!==e&&(l.data=e)}function Ue(l,e){l.value=e??""}function Pl(l,e,t,i){l.style.setProperty(e,t,"")}function A(l,e,t){l.classList.toggle(e,!!t)}class ql{constructor(e=!1){xe(this,"is_svg",!1);xe(this,"e");xe(this,"n");xe(this,"t");xe(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=P(t.nodeName):this.e=f(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)D(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(M)}}let pt;function dt(l){pt=l}function Dl(){if(!pt)throw new Error("Function called outside component initialization");return pt}function Nl(l){Dl().$$.on_mount.push(l)}function Fl(l){Dl().$$.on_destroy.push(l)}function tt(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const ot=[],Lt=[];let rt=[];const At=[],Wl=Promise.resolve();let Tt=!1;function zl(){Tt||(Tt=!0,Wl.then(Bl))}function It(l){rt.push(l)}const St=new Set;let it=0;function Bl(){if(it!==0)return;const l=pt;do{try{for(;it<ot.length;){const e=ot[it];it++,dt(e),Vl(e.$$)}}catch(e){throw ot.length=0,it=0,e}for(dt(null),ot.length=0,it=0;Lt.length;)Lt.pop()();for(let e=0;e<rt.length;e+=1){const t=rt[e];St.has(t)||(St.add(t),t())}rt.length=0}while(ot.length);for(;At.length;)At.pop()();Tt=!1,St.clear(),dt(l)}function Vl(l){if(l.fragment!==null){l.update(),je(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(It)}}function Gl(l){const e=[],t=[];rt.forEach(i=>l.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),rt=e}const mt=new Set;let et;function Kl(){et={r:0,c:[],p:et}}function Xl(){et.r||je(et.c),et=et.p}function lt(l,e){l&&l.i&&(mt.delete(l),l.i(e))}function ht(l,e,t,i){if(l&&l.o){if(mt.has(l))return;mt.add(l),et.c.push(()=>{mt.delete(l),i&&(t&&l.d(1),i())}),l.o(e)}else i&&i()}function _t(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Yl(l,e){l.d(1),e.delete(l.key)}function Ql(l,e,t,i,o,r,c,d,a,u,p,v){let h=l.length,w=r.length,b=h;const m={};for(;b--;)m[l[b].key]=b;const _=[],y=new Map,C=new Map,T=[];for(b=w;b--;){const S=v(o,r,b),I=t(S);let k=c.get(I);k?T.push(()=>k.p(S,e)):(k=u(I,S),k.c()),y.set(I,_[b]=k),I in m&&C.set(I,Math.abs(b-m[I]))}const L=new Set,N=new Set;function O(S){lt(S,1),S.m(d,p),c.set(S.key,S),p=S.first,w--}for(;h&&w;){const S=_[w-1],I=l[h-1],k=S.key,B=I.key;S===I?(p=S.first,h--,w--):y.has(B)?!c.has(k)||L.has(k)?O(S):N.has(B)?h--:C.get(k)>C.get(B)?(N.add(k),O(S)):(L.add(B),h--):(a(I,c),h--)}for(;h--;){const S=l[h];y.has(S.key)||a(S,c)}for(;w;)O(_[w-1]);return je(T),_}function Dt(l){l&&l.c()}function gt(l,e,t){const{fragment:i,after_update:o}=l.$$;i&&i.m(e,t),It(()=>{const r=l.$$.on_mount.map(Il).filter(Ml);l.$$.on_destroy?l.$$.on_destroy.push(...r):je(r),l.$$.on_mount=[]}),o.forEach(It)}function kt(l,e){const t=l.$$;t.fragment!==null&&(Gl(t.after_update),je(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Zl(l,e){l.$$.dirty[0]===-1&&(ot.push(l),zl(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function wt(l,e,t,i,o,r,c=null,d=[-1]){const a=pt;dt(l);const u=l.$$={fragment:null,ctx:[],props:r,update:ye,not_equal:o,bound:Bt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Bt(),dirty:d,skip_bound:!1,root:e.target||a.$$.root};c&&c(u.root);let p=!1;if(u.ctx=t?t(l,e.props||{},(v,h,...w)=>{const b=w.length?w[0]:h;return u.ctx&&o(u.ctx[v],u.ctx[v]=b)&&(!u.skip_bound&&u.bound[v]&&u.bound[v](b),p&&Zl(l,v)),h}):[],u.update(),p=!0,je(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const v=jl(e.target);u.fragment&&u.fragment.l(v),v.forEach(M)}else u.fragment&&u.fragment.c();e.intro&&lt(l.$$.fragment),gt(l,e.target,e.anchor),Bl()}dt(a)}class bt{constructor(){xe(this,"$$");xe(this,"$$set")}$destroy(){kt(this,1),this.$destroy=ye}$on(e,t){if(!Ml(t))return ye;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const o=i.indexOf(t);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!Ul(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xl);const st=[];function yt(l,e=ye){let t;const i=new Set;function o(d){if(at(l,d)&&(l=d,t)){const a=!st.length;for(const u of i)u[1](),st.push(u,l);if(a){for(let u=0;u<st.length;u+=2)st[u][0](st[u+1]);st.length=0}}}function r(d){o(d(l))}function c(d,a=ye){const u=[d,a];return i.add(u),i.size===1&&(t=e(o,r)||ye),d(l),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:o,update:r,subscribe:c}}const ze="flash-cards-data";function $l(){const l=typeof localStorage<"u"?localStorage.getItem(ze):null,e=l?JSON.parse(l):{learned:[],unlearned:[],draft:[]};e.cards&&e.cards.length>0&&(e.unlearned=[...e.unlearned,...e.cards],delete e.cards),e.draft||(e.draft=[]);const t=a=>a.map(u=>({...u,dictionaryId:u.dictionaryId||"default"}));e.learned=t(e.learned),e.unlearned=t(e.unlearned),e.draft=t(e.draft);const i=new Set,o=a=>a.filter(u=>i.has(u.id)?!1:(i.add(u.id),!0));e.learned=o(e.learned),e.unlearned=o(e.unlearned),e.draft=o(e.draft),typeof localStorage<"u"&&l&&localStorage.setItem(ze,JSON.stringify(e));const{subscribe:r,set:c,update:d}=yt(e);return{subscribe:r,addCard:(a,u,p="",v="",h="default")=>{d(w=>{const b={id:Date.now(),word:a,translation:u,association:p,imageUrl:v,dictionaryId:h,createdAt:new Date().toISOString()},m={...w,unlearned:[...w.unlearned,b]};return localStorage.setItem(ze,JSON.stringify(m)),m})},markAsLearned:a=>{d(u=>{const p=u.unlearned.find(h=>h.id===a);if(!p)return u;const v={...u,unlearned:u.unlearned.filter(h=>h.id!==a),learned:[...u.learned,{...p,learnedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(v)),v})},markAsUnlearned:a=>{d(u=>{const p=u.unlearned.find(h=>h.id===a);if(!p)return u;const v={...u,unlearned:[...u.unlearned.filter(h=>h.id!==a),{...p,reviewedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(v)),v})},moveToStudy:a=>{d(u=>{const p=u.learned.find(h=>h.id===a);if(!p)return u;const v={...u,learned:u.learned.filter(h=>h.id!==a),unlearned:[...u.unlearned,p]};return localStorage.setItem(ze,JSON.stringify(v)),v})},moveAllToStudy:()=>{d(a=>{if(a.learned.length===0)return a;const u={...a,learned:[],unlearned:[...a.unlearned,...a.learned]};return localStorage.setItem(ze,JSON.stringify(u)),u})},deleteCard:(a,u="unlearned")=>{d(p=>{const v={...p,[u]:p[u].filter(h=>h.id!==a)};return localStorage.setItem(ze,JSON.stringify(v)),v})},editCard:(a,u,p)=>{d(v=>{const h={...v,[u]:v[u].map(w=>w.id===a?{...w,...p,updatedAt:new Date().toISOString()}:w)};return localStorage.setItem(ze,JSON.stringify(h)),h})},addDraftCards:(a,u="default")=>{d(p=>{const v=new Set([...p.unlearned.map(m=>m.word.toLowerCase()),...p.learned.map(m=>m.word.toLowerCase()),...p.draft.map(m=>m.word.toLowerCase())]);let h=0;const w=a.filter(m=>m.trim()&&!v.has(m.trim().toLowerCase())).map(m=>({id:`draft_${Date.now()}_${h++}_${Math.random().toString(36).substr(2,9)}`,word:m.trim(),translation:"",association:"",imageUrl:"",dictionaryId:u,createdAt:new Date().toISOString(),isDraft:!0})),b={...p,draft:[...p.draft,...w]};return localStorage.setItem(ze,JSON.stringify(b)),b})},activateCard:a=>{d(u=>{const p=u.draft.find(b=>b.id===a);if(!p)return u;const{isDraft:v,...h}=p,w={...u,draft:u.draft.filter(b=>b.id!==a),unlearned:[...u.unlearned,{...h,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(w)),w})},editDraftCard:(a,u)=>{d(p=>{var b,m;const v=p.draft.find(_=>_.id===a);if(!v)return p;const h={...v,...u,updatedAt:new Date().toISOString()};if(((b=h.translation)==null?void 0:b.trim())&&((m=h.imageUrl)==null?void 0:m.trim())){const{isDraft:_,...y}=h,C={...p,draft:p.draft.filter(T=>T.id!==a),unlearned:[...p.unlearned,{...y,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(C)),C}else{const _={...p,draft:p.draft.map(y=>y.id===a?h:y)};return localStorage.setItem(ze,JSON.stringify(_)),_}})},reset:()=>{const a={learned:[],unlearned:[],draft:[]};localStorage.setItem(ze,JSON.stringify(a)),c(a)},resetDictionary:a=>{d(u=>{const p={learned:u.learned.filter(v=>(v.dictionaryId||"default")!==a),unlearned:u.unlearned.filter(v=>(v.dictionaryId||"default")!==a),draft:u.draft.filter(v=>(v.dictionaryId||"default")!==a)};return localStorage.setItem(ze,JSON.stringify(p)),p})},importCards:(a,u)=>{d(p=>{const v=a.unlearned||[],h=a.learned||[],w=a.draft||[],b=S=>S.map(I=>({...I,dictionaryId:u||"default"})),m=b(v),_=b(h),y=b(w),C=new Set([...p.unlearned.map(S=>S.word.toLowerCase()),...p.learned.map(S=>S.word.toLowerCase()),...p.draft.map(S=>S.word.toLowerCase())]),T=m.filter(S=>!C.has(S.word.toLowerCase())),L=_.filter(S=>!C.has(S.word.toLowerCase())),N=y.filter(S=>!C.has(S.word.toLowerCase())),O={learned:[...p.learned,...L],unlearned:[...p.unlearned,...T],draft:[...p.draft,...N]};return localStorage.setItem(ze,JSON.stringify(O)),O})}}}const Je=$l(),en={en:"Английский",pt:"Португальский",es:"Испанский"},tn={en:"English",pt:"Portuguese",es:"Spanish"},ln=typeof localStorage<"u"&&localStorage.getItem("target_language")||"en",Ze=yt(ln);Ze.subscribe(l=>{typeof localStorage<"u"&&localStorage.setItem("target_language",l)});function Ye(l){return en[l]||l}function nn(l){return tn[l]||l}const ut="loaded-dictionaries",Mt="current_dictionary",sn=typeof localStorage<"u"&&localStorage.getItem(Mt)||"",We=yt(sn);We.subscribe(l=>{typeof localStorage<"u"&&(l?localStorage.setItem(Mt,l):localStorage.removeItem(Mt))});function on(){const l=typeof localStorage<"u"?localStorage.getItem(ut):null,e=l?JSON.parse(l):[],{subscribe:t,set:i,update:o}=yt(e);return{subscribe:t,addDictionary:(r,c,d,a=!1)=>{o(u=>{if(u.find(w=>w.id===r))return u.map(w=>w.id===r?{...w,name:c,language:d,isImported:a}:w);const v={id:r,name:c,language:d,isImported:a},h=[...u,v];return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(h)),h})},removeDictionary:r=>{o(c=>{const d=c.filter(a=>a.id!==r);return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(d)),d})},clear:()=>{typeof localStorage<"u"&&localStorage.removeItem(ut),i([])},updateDictionaryData:(r,c)=>{o(d=>{const a=d.map(u=>u.id===r?{...u,data:c}:u);return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(a)),a})}}}const Xe=on();function rn(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-1wg5uvi"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg> <span class="svelte-1wg5uvi">Нажмите, чтобы добавить изображение</span>',n(e,"class","image-placeholder svelte-1wg5uvi")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function an(l){let e,t,i,o;return{c(){e=f("img"),Ve(e.src,t=l[4])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","preview-image svelte-1wg5uvi")},m(r,c){D(r,e,c),i||(o=H(e,"error",l[21]),i=!0)},p(r,c){c[0]&16&&!Ve(e.src,t=r[4])&&n(e,"src",t)},d(r){r&&M(e),i=!1,o()}}}function Et(l){let e;return{c(){e=f("div"),e.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
      Карточка добавлена!`,n(e,"class","success-toast svelte-1wg5uvi")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Ot(l){let e,t,i,o,r,c=l[9]>0?`Импортировано ${l[9]} карточек!`:"Новых карточек не найдено",d;return{c(){e=f("div"),t=P("svg"),i=P("polyline"),o=P("line"),r=g(),d=J(c),n(i,"points","17 8 12 3 7 8"),n(o,"x1","12"),n(o,"y1","3"),n(o,"x2","12"),n(o,"y2","15"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast import svelte-1wg5uvi")},m(a,u){D(a,e,u),s(e,t),s(t,i),s(t,o),s(e,r),s(e,d)},p(a,u){u[0]&512&&c!==(c=a[9]>0?`Импортировано ${a[9]} карточек!`:"Новых карточек не найдено")&&$(d,c)},d(a){a&&M(e)}}}function Ut(l){let e,t,i,o,r,c,d,a,u,p=l[12]>0?`Добавлено ${l[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)",v;return{c(){e=f("div"),t=P("svg"),i=P("line"),o=P("line"),r=P("line"),c=P("line"),d=P("line"),a=P("line"),u=g(),v=J(p),n(i,"x1","8"),n(i,"y1","6"),n(i,"x2","21"),n(i,"y2","6"),n(o,"x1","8"),n(o,"y1","12"),n(o,"x2","21"),n(o,"y2","12"),n(r,"x1","8"),n(r,"y1","18"),n(r,"x2","21"),n(r,"y2","18"),n(c,"x1","3"),n(c,"y1","6"),n(c,"x2","3.01"),n(c,"y2","6"),n(d,"x1","3"),n(d,"y1","12"),n(d,"x2","3.01"),n(d,"y2","12"),n(a,"x1","3"),n(a,"y1","18"),n(a,"x2","3.01"),n(a,"y2","18"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast bulk svelte-1wg5uvi")},m(h,w){D(h,e,w),s(e,t),s(t,i),s(t,o),s(t,r),s(t,c),s(t,d),s(t,a),s(e,u),s(e,v)},p(h,w){w[0]&4096&&p!==(p=h[12]>0?`Добавлено ${h[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)")&&$(v,p)},d(h){h&&M(e)}}}function Ht(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y,C,T,L,N,O,S,I=l[7]&&Rt(l),k=l[4]&&Jt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),o=f("h2"),o.textContent="Добавить изображение",r=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("div"),p=f("label"),p.textContent="Ссылка на изображение",v=g(),h=f("input"),w=g(),I&&I.c(),b=g(),m=f("div"),k&&k.c(),_=g(),y=f("button"),y.textContent="Отмена",C=g(),T=f("button"),L=J("Сохранить"),n(o,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(p,"for","imageUrl"),n(p,"class","svelte-1wg5uvi"),n(h,"id","imageUrl"),n(h,"type","url"),n(h,"placeholder","https://example.com/image.jpg"),n(h,"class","svelte-1wg5uvi"),n(u,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(y,"class","btn-secondary svelte-1wg5uvi"),n(T,"class","btn-primary svelte-1wg5uvi"),T.disabled=N=l[8]&&l[7],n(m,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(B,R){D(B,e,R),s(e,t),s(t,i),s(i,o),s(i,r),s(i,c),s(t,d),s(t,a),s(a,u),s(u,p),s(u,v),s(u,h),Ue(h,l[7]),s(a,w),I&&I.m(a,null),s(t,b),s(t,m),k&&k.m(m,null),s(m,_),s(m,y),s(m,C),s(m,T),s(T,L),O||(S=[H(c,"click",l[35]),H(h,"input",l[36]),H(y,"click",l[37]),H(T,"click",l[19]),H(t,"click",$e(l[30])),H(e,"click",l[38]),H(e,"keydown",l[39])],O=!0)},p(B,R){R[0]&128&&h.value!==B[7]&&Ue(h,B[7]),B[7]?I?I.p(B,R):(I=Rt(B),I.c(),I.m(a,null)):I&&(I.d(1),I=null),B[4]?k?k.p(B,R):(k=Jt(B),k.c(),k.m(m,_)):k&&(k.d(1),k=null),R[0]&384&&N!==(N=B[8]&&B[7])&&(T.disabled=N)},d(B){B&&M(e),I&&I.d(),k&&k.d(),O=!1,je(S)}}}function Rt(l){let e;function t(r,c){return r[8]?fn:cn}let i=t(l),o=i(l);return{c(){e=f("div"),o.c(),n(e,"class","image-preview-container svelte-1wg5uvi")},m(r,c){D(r,e,c),o.m(e,null)},p(r,c){i===(i=t(r))&&o?o.p(r,c):(o.d(1),o=i(r),o&&(o.c(),o.m(e,null)))},d(r){r&&M(e),o.d()}}}function cn(l){let e,t,i,o;return{c(){e=f("img"),Ve(e.src,t=l[7])||n(e,"src",t),n(e,"alt","Превью изображения"),n(e,"class","modal-image-preview svelte-1wg5uvi")},m(r,c){D(r,e,c),i||(o=[H(e,"error",l[21]),H(e,"load",l[22])],i=!0)},p(r,c){c[0]&128&&!Ve(e.src,t=r[7])&&n(e,"src",t)},d(r){r&&M(e),i=!1,je(o)}}}function fn(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Не удалось загрузить изображение</span>',n(e,"class","image-error svelte-1wg5uvi")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function Jt(l){let e,t,i;return{c(){e=f("button"),e.textContent="Удалить",n(e,"class","btn-secondary danger svelte-1wg5uvi")},m(o,r){D(o,e,r),t||(i=H(e,"click",l[20]),t=!0)},p:ye,d(o){o&&M(e),t=!1,i()}}}function jt(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y,C,T,L,N,O,S,I,k=(l[15]>0?l[15]:"")+"",B,R,E=l[15]===1?"слово":l[15]>1&&l[15]<5?"слова":l[15]>=5?"слов":"",q,W,z,U,j=l[15]>0&&Pt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),o=f("h2"),o.textContent="Загрузить список слов",r=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("div"),u.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg> <p class="svelte-1wg5uvi">Введите слова списком — каждое слово на новой строке. Слова будут добавлены в раздел &quot;На проработку&quot;, где вы сможете добавить перевод и изображение.</p>',p=g(),v=f("div"),h=f("label"),w=J(`Слова
            `),j&&j.c(),b=g(),m=f("textarea"),_=g(),y=f("div"),C=f("button"),C.textContent="Отмена",T=g(),L=f("button"),N=P("svg"),O=P("line"),S=P("line"),I=J(`
          Добавить `),B=J(k),R=g(),q=J(E),n(o,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(u,"class","bulk-info svelte-1wg5uvi"),n(h,"for","bulkWords"),n(h,"class","svelte-1wg5uvi"),n(m,"id","bulkWords"),n(m,"placeholder",`serendipity
ephemeral
ubiquitous
eloquent
resilient`),n(m,"rows","10"),n(m,"class","bulk-textarea svelte-1wg5uvi"),n(v,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(C,"class","btn-secondary svelte-1wg5uvi"),n(O,"x1","12"),n(O,"y1","5"),n(O,"x2","12"),n(O,"y2","19"),n(S,"x1","5"),n(S,"y1","12"),n(S,"x2","19"),n(S,"y2","12"),n(N,"width","18"),n(N,"height","18"),n(N,"viewBox","0 0 24 24"),n(N,"fill","none"),n(N,"stroke","currentColor"),n(N,"stroke-width","2"),n(L,"class","btn-primary svelte-1wg5uvi"),L.disabled=W=l[15]===0,n(y,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal bulk-modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(oe,re){D(oe,e,re),s(e,t),s(t,i),s(i,o),s(i,r),s(i,c),s(t,d),s(t,a),s(a,u),s(a,p),s(a,v),s(v,h),s(h,w),j&&j.m(h,null),s(v,b),s(v,m),Ue(m,l[0]),s(t,_),s(t,y),s(y,C),s(y,T),s(y,L),s(L,N),s(N,O),s(N,S),s(L,I),s(L,B),s(L,R),s(L,q),z||(U=[H(c,"click",l[26]),H(m,"input",l[40]),H(C,"click",l[26]),H(L,"click",l[27]),H(t,"click",$e(l[29])),H(e,"click",l[26]),H(e,"keydown",l[41])],z=!0)},p(oe,re){oe[15]>0?j?j.p(oe,re):(j=Pt(oe),j.c(),j.m(h,null)):j&&(j.d(1),j=null),re[0]&1&&Ue(m,oe[0]),re[0]&32768&&k!==(k=(oe[15]>0?oe[15]:"")+"")&&$(B,k),re[0]&32768&&E!==(E=oe[15]===1?"слово":oe[15]>1&&oe[15]<5?"слова":oe[15]>=5?"слов":"")&&$(q,E),re[0]&32768&&W!==(W=oe[15]===0)&&(L.disabled=W)},d(oe){oe&&M(e),j&&j.d(),z=!1,je(U)}}}function Pt(l){let e,t,i,o=l[15]===1?"слово":l[15]<5?"слова":"слов",r;return{c(){e=f("span"),t=J(l[15]),i=g(),r=J(o),n(e,"class","word-count svelte-1wg5uvi")},m(c,d){D(c,e,d),s(e,t),s(e,i),s(e,r)},p(c,d){d[0]&32768&&$(t,c[15]),d[0]&32768&&o!==(o=c[15]===1?"слово":c[15]<5?"слова":"слов")&&$(r,o)},d(c){c&&M(e)}}}function un(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y,C,T,L=l[16].toLowerCase()+"",N,O,S,I=l[1].length+"",k,B,R,E,q,W,z,U,j,oe=l[2].length+"",re,he,fe,de,ke,ie,X,ae,ge,Me,Be,Ce=l[3].length+"",V,pe,ve,ce,we,Te,G,Z,K,be,ee,De,me,te,ne=(l[1]||"Слово")+"",Q,ue,F,Ae=(l[2]||"Перевод")+"",Ne,Ge,Ie,le,_e,se,Ee,ct,Y;function Fe(x,Le){return x[4]?an:rn}let Ke=Fe(l),Pe=Ke(l),qe=l[5]&&Et(),Se=l[10]&&Ot(l),Re=l[13]&&Ut(l),Oe=l[6]&&Ht(l),He=l[11]&&jt(l);return{c(){e=f("input"),t=g(),i=f("div"),o=f("div"),r=f("div"),c=f("h1"),c.textContent="Новая карточка",d=g(),a=f("div"),u=f("button"),u.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',p=g(),v=f("button"),v.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>',h=g(),w=f("p"),w.textContent="Добавьте слово для изучения",b=g(),m=f("div"),_=f("form"),y=f("div"),C=f("label"),T=J("Слово ("),N=J(L),O=J(`)
          `),S=f("span"),k=J(I),B=J("/35"),R=g(),E=f("input"),q=g(),W=f("div"),z=f("label"),U=J(`Перевод
          `),j=f("span"),re=J(oe),he=J("/50"),fe=g(),de=f("input"),ke=g(),ie=f("div"),X=f("label"),ae=J(`Ассоциация 
          `),ge=f("span"),ge.textContent="(необязательно)",Me=g(),Be=f("span"),V=J(Ce),pe=J("/95"),ve=g(),ce=f("textarea"),we=g(),Te=f("button"),Te.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        Добавить карточку`,G=g(),Z=f("div"),K=f("span"),K.textContent="Превью карточки",be=g(),ee=f("button"),Pe.c(),De=g(),me=f("div"),te=f("div"),Q=J(ne),ue=g(),F=f("div"),Ne=J(Ae),Ge=g(),qe&&qe.c(),Ie=g(),Se&&Se.c(),le=g(),Re&&Re.c(),_e=g(),Oe&&Oe.c(),se=g(),He&&He.c(),Ee=nt(),n(e,"type","file"),n(e,"accept",".json"),Pl(e,"display","none"),n(e,"class","svelte-1wg5uvi"),n(c,"class","svelte-1wg5uvi"),n(u,"type","button"),n(u,"class","import-btn bulk svelte-1wg5uvi"),n(u,"title","Загрузить список слов"),n(v,"type","button"),n(v,"class","import-btn svelte-1wg5uvi"),n(v,"title","Импорт из JSON"),n(a,"class","header-actions svelte-1wg5uvi"),n(r,"class","header-top svelte-1wg5uvi"),n(w,"class","subtitle svelte-1wg5uvi"),n(o,"class","header svelte-1wg5uvi"),n(S,"class","char-count svelte-1wg5uvi"),A(S,"limit",l[1].length>=35),n(C,"for","word"),n(C,"class","svelte-1wg5uvi"),n(E,"id","word"),n(E,"type","text"),n(E,"placeholder","например: serendipity"),n(E,"maxlength","35"),E.required=!0,n(E,"class","svelte-1wg5uvi"),n(y,"class","input-group svelte-1wg5uvi"),n(j,"class","char-count svelte-1wg5uvi"),A(j,"limit",l[2].length>=50),n(z,"for","translation"),n(z,"class","svelte-1wg5uvi"),n(de,"id","translation"),n(de,"type","text"),n(de,"placeholder","например: счастливая случайность"),n(de,"maxlength","50"),de.required=!0,n(de,"class","svelte-1wg5uvi"),n(W,"class","input-group svelte-1wg5uvi"),n(ge,"class","optional svelte-1wg5uvi"),n(Be,"class","char-count svelte-1wg5uvi"),A(Be,"limit",l[3].length>=95),n(X,"for","association"),n(X,"class","svelte-1wg5uvi"),n(ce,"id","association"),n(ce,"placeholder","например: представьте, как вы случайно находите клад под деревом"),n(ce,"maxlength","95"),n(ce,"rows","2"),n(ce,"class","svelte-1wg5uvi"),n(ie,"class","input-group svelte-1wg5uvi"),n(Te,"type","submit"),n(Te,"class","submit-btn svelte-1wg5uvi"),n(_,"class","form svelte-1wg5uvi"),n(K,"class","preview-label svelte-1wg5uvi"),n(te,"class","preview-word svelte-1wg5uvi"),n(F,"class","preview-translation svelte-1wg5uvi"),n(me,"class","card-content-preview svelte-1wg5uvi"),n(ee,"type","button"),n(ee,"class","card-preview svelte-1wg5uvi"),A(ee,"has-image",l[4]),n(Z,"class","card-preview-wrapper svelte-1wg5uvi"),n(m,"class","card-editor svelte-1wg5uvi"),n(i,"class","add-card-container svelte-1wg5uvi")},m(x,Le){D(x,e,Le),l[31](e),D(x,t,Le),D(x,i,Le),s(i,o),s(o,r),s(r,c),s(r,d),s(r,a),s(a,u),s(a,p),s(a,v),s(o,h),s(o,w),s(i,b),s(i,m),s(m,_),s(_,y),s(y,C),s(C,T),s(C,N),s(C,O),s(C,S),s(S,k),s(S,B),s(y,R),s(y,E),Ue(E,l[1]),s(_,q),s(_,W),s(W,z),s(z,U),s(z,j),s(j,re),s(j,he),s(W,fe),s(W,de),Ue(de,l[2]),s(_,ke),s(_,ie),s(ie,X),s(X,ae),s(X,ge),s(X,Me),s(X,Be),s(Be,V),s(Be,pe),s(ie,ve),s(ie,ce),Ue(ce,l[3]),s(_,we),s(_,Te),s(m,G),s(m,Z),s(Z,K),s(Z,be),s(Z,ee),Pe.m(ee,null),s(ee,De),s(ee,me),s(me,te),s(te,Q),s(me,ue),s(me,F),s(F,Ne),s(i,Ge),qe&&qe.m(i,null),s(i,Ie),Se&&Se.m(i,null),s(i,le),Re&&Re.m(i,null),D(x,_e,Le),Oe&&Oe.m(x,Le),D(x,se,Le),He&&He.m(x,Le),D(x,Ee,Le),ct||(Y=[H(e,"change",l[24]),H(u,"click",l[25]),H(v,"click",l[23]),H(E,"input",l[32]),H(de,"input",l[33]),H(ce,"input",l[34]),H(_,"submit",Jl(l[17])),H(ee,"click",l[18])],ct=!0)},p(x,Le){Le[0]&65536&&L!==(L=x[16].toLowerCase()+"")&&$(N,L),Le[0]&2&&I!==(I=x[1].length+"")&&$(k,I),Le[0]&2&&A(S,"limit",x[1].length>=35),Le[0]&2&&E.value!==x[1]&&Ue(E,x[1]),Le[0]&4&&oe!==(oe=x[2].length+"")&&$(re,oe),Le[0]&4&&A(j,"limit",x[2].length>=50),Le[0]&4&&de.value!==x[2]&&Ue(de,x[2]),Le[0]&8&&Ce!==(Ce=x[3].length+"")&&$(V,Ce),Le[0]&8&&A(Be,"limit",x[3].length>=95),Le[0]&8&&Ue(ce,x[3]),Ke===(Ke=Fe(x))&&Pe?Pe.p(x,Le):(Pe.d(1),Pe=Ke(x),Pe&&(Pe.c(),Pe.m(ee,De))),Le[0]&2&&ne!==(ne=(x[1]||"Слово")+"")&&$(Q,ne),Le[0]&4&&Ae!==(Ae=(x[2]||"Перевод")+"")&&$(Ne,Ae),Le[0]&16&&A(ee,"has-image",x[4]),x[5]?qe||(qe=Et(),qe.c(),qe.m(i,Ie)):qe&&(qe.d(1),qe=null),x[10]?Se?Se.p(x,Le):(Se=Ot(x),Se.c(),Se.m(i,le)):Se&&(Se.d(1),Se=null),x[13]?Re?Re.p(x,Le):(Re=Ut(x),Re.c(),Re.m(i,null)):Re&&(Re.d(1),Re=null),x[6]?Oe?Oe.p(x,Le):(Oe=Ht(x),Oe.c(),Oe.m(se.parentNode,se)):Oe&&(Oe.d(1),Oe=null),x[11]?He?He.p(x,Le):(He=jt(x),He.c(),He.m(Ee.parentNode,Ee)):He&&(He.d(1),He=null)},i:ye,o:ye,d(x){x&&(M(e),M(t),M(i),M(_e),M(se),M(Ee)),l[31](null),Pe.d(),qe&&qe.d(),Se&&Se.d(),Re&&Re.d(),Oe&&Oe.d(x),He&&He.d(x),ct=!1,je(Y)}}}function dn(l,e,t){let i,o,r,c,d;Qe(l,Je,V=>t(42,r=V)),Qe(l,Xe,V=>t(43,c=V)),Qe(l,Ze,V=>t(28,d=V));let a="",u="",p="",v="",h=!1,w=!1,b="",m=!1,_=0,y=!1,C=!1,T="",L=0,N=!1;function O(){if(a.trim()&&u.trim()){let V=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"";if(!(c.length>0)||!V||V===""){const ce=`${Ye("en")} (default)`;Xe.addDictionary("default",ce,"en",!1),We.set("default"),V="default"}const ve=V||"default";Je.addCard(a.trim(),u.trim(),p.trim(),v.trim(),ve),t(1,a=""),t(2,u=""),t(3,p=""),t(4,v=""),t(5,h=!0),setTimeout(()=>t(5,h=!1),2e3)}}function S(){t(7,b=v),t(8,m=!1),t(6,w=!0)}function I(){b.trim()&&t(4,v=b.trim()),t(6,w=!1)}function k(){t(4,v=""),t(7,b=""),t(6,w=!1)}function B(){t(8,m=!0)}function R(){t(8,m=!1)}let E;function q(){E.click()}function W(V){const pe=V.target.files[0];if(!pe)return;const ve=new FileReader;ve.onload=ce=>{var we,Te,G;try{const Z=JSON.parse(ce.target.result),K=pe.name.replace(/\.json$/i,""),be=Z.language||"en";Z.language&&Ze.set(Z.language);let ee;be==="en"?ee="default":(ee=K,Je.resetDictionary(ee));const De=(((we=r.learned)==null?void 0:we.length)||0)+(((Te=r.unlearned)==null?void 0:Te.length)||0)+(((G=r.draft)==null?void 0:G.length)||0);if(Je.importCards(Z,ee),be==="en"){if(!c.find(te=>te.id==="default")){const te=`${Ye("en")} (default)`;Xe.addDictionary("default",te,"en",!0)}We.set("default")}else{const me=`${K} (${Ye(be)})`;Xe.addDictionary(K,me,be,!0),We.set(K)}setTimeout(()=>{var te,ne,Q;const me=(((te=r.learned)==null?void 0:te.length)||0)+(((ne=r.unlearned)==null?void 0:ne.length)||0)+(((Q=r.draft)==null?void 0:Q.length)||0);t(9,_=me-De),t(10,y=!0),setTimeout(()=>t(10,y=!1),3e3)},100)}catch{alert("Ошибка чтения файла. Убедитесь, что это корректный JSON файл.")}},ve.readAsText(pe),V.target.value=""}function z(){t(0,T=""),t(11,C=!0)}function U(){t(11,C=!1),t(0,T="")}function j(){var pe;const V=T.split(`
`).map(ve=>ve.trim()).filter(ve=>ve.length>0);if(V.length>0){const ve=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"default";if(ve===""){const Te=`${Ye("en")} (default)`;Xe.addDictionary("default",Te,"en",!1),We.set("default")}const ce=ve,we=((pe=r.draft)==null?void 0:pe.length)||0;Je.addDraftCards(V,ce),setTimeout(()=>{var G;const Te=((G=r.draft)==null?void 0:G.length)||0;t(12,L=Te-we),t(13,N=!0),setTimeout(()=>t(13,N=!1),3e3)},100)}U()}function oe(V){tt.call(this,l,V)}function re(V){tt.call(this,l,V)}function he(V){Lt[V?"unshift":"push"](()=>{E=V,t(14,E)})}function fe(){a=this.value,t(1,a)}function de(){u=this.value,t(2,u)}function ke(){p=this.value,t(3,p)}const ie=()=>t(6,w=!1);function X(){b=this.value,t(7,b)}const ae=()=>t(6,w=!1),ge=()=>t(6,w=!1),Me=V=>V.key==="Escape"&&t(6,w=!1);function Be(){T=this.value,t(0,T)}const Ce=V=>V.key==="Escape"&&U();return l.$$.update=()=>{l.$$.dirty[0]&268435456&&t(16,i=Ye(d)),l.$$.dirty[0]&1&&t(15,o=T.split(`
`).filter(V=>V.trim().length>0).length)},[T,a,u,p,v,h,w,b,m,_,y,C,L,N,E,o,i,O,S,I,k,B,R,q,W,z,U,j,d,oe,re,he,fe,de,ke,ie,X,ae,ge,Me,Be,Ce]}class pn extends bt{constructor(e){super(),wt(this,e,dn,un,at,{},null,[-1,-1])}}function hn(l){let e;return{c(){e=J("Добавьте карточки для начала")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function vn(l){let e;return{c(){e=J("Нет карточек с изображениями")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function mn(l){let e,t,i=l[2].length+"",o,r,c,d=l[0]&&l[2].length<l[3].length&&qt();return{c(){e=J("Осталось карточек: "),t=f("span"),o=J(i),r=g(),d&&d.c(),c=nt(),n(t,"class","count svelte-mh8lvo")},m(a,u){D(a,e,u),D(a,t,u),s(t,o),D(a,r,u),d&&d.m(a,u),D(a,c,u)},p(a,u){u[0]&4&&i!==(i=a[2].length+"")&&$(o,i),a[0]&&a[2].length<a[3].length?d||(d=qt(),d.c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null)},d(a){a&&(M(e),M(t),M(r),M(c)),d&&d.d(a)}}}function qt(l){let e;return{c(){e=f("span"),e.textContent="(с изображениями)",n(e,"class","filter-note svelte-mh8lvo")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Ft(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y,C,T,L,N,O,S,I,k,B,R,E=!l[4]&&Wt();function q(U,j){return U[4]?_n:gn}let W=q(l),z=W(l);return{c(){e=f("div"),t=f("div"),i=f("button"),i.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',o=g(),r=f("h2"),r.textContent="Выбери тип упражнения",c=g(),d=f("div"),a=f("button"),u=f("span"),p=g(),v=f("div"),v.innerHTML='<span class="option-title svelte-mh8lvo">Flash Cards</span> <span class="option-desc svelte-mh8lvo">Классические карточки с переворотом</span>',h=g(),w=f("button"),b=f("span"),m=g(),_=f("div"),_.innerHTML='<span class="option-title svelte-mh8lvo">Только изображения</span> <span class="option-desc svelte-mh8lvo">Введите слово по изображению</span>',y=g(),C=f("button"),T=f("span"),L=g(),N=f("div"),O=f("span"),S=J(`Перевод предложения
                `),E&&E.c(),I=g(),k=f("span"),z.c(),n(i,"class","modal-close-btn svelte-mh8lvo"),n(r,"class","modal-title svelte-mh8lvo"),n(u,"class","option-radio svelte-mh8lvo"),A(u,"checked",l[26]),n(v,"class","option-content svelte-mh8lvo"),n(a,"class","exercise-option svelte-mh8lvo"),A(a,"active",l[26]),n(b,"class","option-radio svelte-mh8lvo"),A(b,"checked",l[0]),n(_,"class","option-content svelte-mh8lvo"),n(w,"class","exercise-option svelte-mh8lvo"),A(w,"active",l[0]),n(T,"class","option-radio svelte-mh8lvo"),A(T,"checked",l[1]),A(T,"disabled",!l[4]),n(O,"class","option-title svelte-mh8lvo"),n(k,"class","option-desc svelte-mh8lvo"),n(N,"class","option-content svelte-mh8lvo"),n(C,"class","exercise-option svelte-mh8lvo"),A(C,"active",l[1]),A(C,"disabled",!l[4]),n(d,"class","settings-options svelte-mh8lvo"),n(t,"class","settings-modal svelte-mh8lvo"),n(t,"role","dialog"),n(t,"aria-modal","true"),n(e,"class","settings-overlay svelte-mh8lvo"),n(e,"role","button"),n(e,"tabindex","-1")},m(U,j){D(U,e,j),s(e,t),s(t,i),s(t,o),s(t,r),s(t,c),s(t,d),s(d,a),s(a,u),s(a,p),s(a,v),s(d,h),s(d,w),s(w,b),s(w,m),s(w,_),s(d,y),s(d,C),s(C,T),s(C,L),s(C,N),s(N,O),s(O,S),E&&E.m(O,null),s(N,I),s(N,k),z.m(k,null),B||(R=[H(i,"click",l[55]),H(a,"click",l[28]),H(w,"click",l[29]),H(C,"click",l[30]),H(t,"click",$e(l[53])),H(e,"click",l[56]),H(e,"keydown",l[57])],B=!0)},p(U,j){j[0]&67108864&&A(u,"checked",U[26]),j[0]&67108864&&A(a,"active",U[26]),j[0]&1&&A(b,"checked",U[0]),j[0]&1&&A(w,"active",U[0]),j[0]&2&&A(T,"checked",U[1]),j[0]&16&&A(T,"disabled",!U[4]),U[4]?E&&(E.d(1),E=null):E||(E=Wt(),E.c(),E.m(O,null)),W===(W=q(U))&&z?z.p(U,j):(z.d(1),z=W(U),z&&(z.c(),z.m(k,null))),j[0]&2&&A(C,"active",U[1]),j[0]&16&&A(C,"disabled",!U[4])},d(U){U&&M(e),E&&E.d(),z.d(),B=!1,je(R)}}}function Wt(l){let e;return{c(){e=f("span"),e.textContent="AI",n(e,"class","ai-badge svelte-mh8lvo")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function _n(l){let e,t=l[27].toLowerCase()+"",i;return{c(){e=J("Переведите предложение на "),i=J(t)},m(o,r){D(o,e,r),D(o,i,r)},p(o,r){r[0]&134217728&&t!==(t=o[27].toLowerCase()+"")&&$(i,t)},d(o){o&&(M(e),M(i))}}}function gn(l){let e;return{c(){e=J("Требуется AI токен")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function kn(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="empty-icon svelte-mh8lvo"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line></svg></div> <h2 class="svelte-mh8lvo">Нет карточек для изучения</h2> <p class="svelte-mh8lvo">Добавьте новые слова или верните карточки из списков</p>',n(e,"class","empty-state svelte-mh8lvo")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function wn(l){let e;function t(r,c){return r[1]?Cn:r[0]?yn:bn}let i=t(l),o=i(l);return{c(){e=f("div"),o.c(),n(e,"class","card-area svelte-mh8lvo"),A(e,"translation-mode",l[1]&&l[12])},m(r,c){D(r,e,c),o.m(e,null)},p(r,c){i===(i=t(r))&&o?o.p(r,c):(o.d(1),o=i(r),o&&(o.c(),o.m(e,null))),c[0]&4098&&A(e,"translation-mode",r[1]&&r[12])},d(r){r&&M(e),o.d()}}}function bn(l){let e=l[24].id,t,i,o,r,c,d,a,u=Gt(l);return{c(){u.c(),t=g(),i=f("div"),o=f("button"),o.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',r=g(),c=f("button"),c.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(o,"class","action-btn unknown svelte-mh8lvo"),n(c,"class","action-btn known svelte-mh8lvo"),n(i,"class","action-buttons svelte-mh8lvo")},m(p,v){u.m(p,v),D(p,t,v),D(p,i,v),s(i,o),s(i,r),s(i,c),d||(a=[H(o,"click",l[36]),H(c,"click",l[35])],d=!0)},p(p,v){v[0]&16777216&&at(e,e=p[24].id)?(u.d(1),u=Gt(p),u.c(),u.m(t.parentNode,t)):u.p(p,v)},d(p){p&&(M(t),M(i)),u.d(p),d=!1,je(a)}}}function yn(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y=l[24].imageUrl&&Kt(l),C=l[10]&&Xt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),y&&y.c(),o=g(),C&&C.c(),r=g(),c=f("div"),d=f("input"),u=g(),p=f("button"),v=P("svg"),h=P("polyline"),w=P("path"),n(i,"class","card-front has-image image-only svelte-mh8lvo"),n(t,"class","card-inner svelte-mh8lvo"),n(e,"class","card image-only-card svelte-mh8lvo"),A(e,"correct",l[10]==="correct"),A(e,"incorrect",l[10]==="incorrect"),n(d,"type","text"),n(d,"class","answer-input svelte-mh8lvo"),n(d,"placeholder","Введите слово..."),d.disabled=a=l[10]!==null,A(d,"correct",l[10]==="correct"),A(d,"incorrect",l[10]==="incorrect"),n(h,"points","9 11 12 14 22 4"),n(w,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(v,"width","24"),n(v,"height","24"),n(v,"viewBox","0 0 24 24"),n(v,"fill","none"),n(v,"stroke","currentColor"),n(v,"stroke-width","2"),n(p,"class","check-btn svelte-mh8lvo"),p.disabled=b=!l[9].trim()||l[10]!==null,n(c,"class","answer-input-area svelte-mh8lvo")},m(T,L){D(T,e,L),s(e,t),s(t,i),y&&y.m(i,null),s(i,o),C&&C.m(i,null),D(T,r,L),D(T,c,L),s(c,d),Ue(d,l[9]),s(c,u),s(c,p),s(p,v),s(v,h),s(v,w),m||(_=[H(d,"input",l[60]),H(d,"keydown",l[44]),H(p,"click",l[43])],m=!0)},p(T,L){T[24].imageUrl?y?y.p(T,L):(y=Kt(T),y.c(),y.m(i,o)):y&&(y.d(1),y=null),T[10]?C?C.p(T,L):(C=Xt(T),C.c(),C.m(i,null)):C&&(C.d(1),C=null),L[0]&1024&&A(e,"correct",T[10]==="correct"),L[0]&1024&&A(e,"incorrect",T[10]==="incorrect"),L[0]&1024&&a!==(a=T[10]!==null)&&(d.disabled=a),L[0]&512&&d.value!==T[9]&&Ue(d,T[9]),L[0]&1024&&A(d,"correct",T[10]==="correct"),L[0]&1024&&A(d,"incorrect",T[10]==="incorrect"),L[0]&1536&&b!==(b=!T[9].trim()||T[10]!==null)&&(p.disabled=b)},d(T){T&&(M(e),M(r),M(c)),y&&y.d(),C&&C.d(),m=!1,je(_)}}}function Cn(l){let e,t,i,o,r,c,d,a,u=l[24].translation+"",p,v,h,w,b,m,_,y,C,T,L,N=l[24].word+"",O,S,I,k=l[14]&&l[14]!=="grammar_error"&&Yt(l),B=l[19]&&Qt(),R=l[24].imageUrl&&Zt(l),E=l[24].association&&xt(l);function q(U,j){return U[18]?Nn:U[12]?Dn:Mn}let W=q(l),z=W(l);return{c(){e=f("div"),t=f("div"),i=f("div"),o=f("div"),r=f("div"),c=f("span"),c.textContent="Перевод",d=g(),a=f("h2"),p=J(u),v=g(),k&&k.c(),h=g(),B&&B.c(),w=g(),b=f("div"),R&&R.c(),m=g(),_=f("div"),y=f("span"),C=J(l[27]),T=g(),L=f("h2"),O=J(N),S=g(),E&&E.c(),I=g(),z.c(),n(c,"class","card-label svelte-mh8lvo"),n(a,"class","card-word svelte-mh8lvo"),n(r,"class","card-text-content svelte-mh8lvo"),n(o,"class","card-front translation-front svelte-mh8lvo"),n(y,"class","card-label svelte-mh8lvo"),n(L,"class","card-word svelte-mh8lvo"),n(_,"class","card-text-content svelte-mh8lvo"),n(b,"class","card-back translation-back svelte-mh8lvo"),A(b,"has-image",l[24].imageUrl),n(i,"class","card-inner svelte-mh8lvo"),n(t,"class","card translation-card svelte-mh8lvo"),A(t,"correct",l[14]==="correct"),A(t,"incorrect",l[14]==="incorrect"),A(t,"flipped",l[18]),n(e,"class","translation-exercise-layout svelte-mh8lvo"),A(e,"with-input",l[12]),A(e,"card-flipped",l[18])},m(U,j){D(U,e,j),s(e,t),s(t,i),s(i,o),s(o,r),s(r,c),s(r,d),s(r,a),s(a,p),s(o,v),k&&k.m(o,null),s(o,h),B&&B.m(o,null),s(i,w),s(i,b),R&&R.m(b,null),s(b,m),s(b,_),s(_,y),s(y,C),s(_,T),s(_,L),s(L,O),s(_,S),E&&E.m(_,null),s(e,I),z.m(e,null)},p(U,j){j[0]&16777216&&u!==(u=U[24].translation+"")&&$(p,u),U[14]&&U[14]!=="grammar_error"?k?k.p(U,j):(k=Yt(U),k.c(),k.m(o,h)):k&&(k.d(1),k=null),U[19]?B||(B=Qt(),B.c(),B.m(o,null)):B&&(B.d(1),B=null),U[24].imageUrl?R?R.p(U,j):(R=Zt(U),R.c(),R.m(b,m)):R&&(R.d(1),R=null),j[0]&134217728&&$(C,U[27]),j[0]&16777216&&N!==(N=U[24].word+"")&&$(O,N),U[24].association?E?E.p(U,j):(E=xt(U),E.c(),E.m(_,null)):E&&(E.d(1),E=null),j[0]&16777216&&A(b,"has-image",U[24].imageUrl),j[0]&16384&&A(t,"correct",U[14]==="correct"),j[0]&16384&&A(t,"incorrect",U[14]==="incorrect"),j[0]&262144&&A(t,"flipped",U[18]),W===(W=q(U))&&z?z.p(U,j):(z.d(1),z=W(U),z&&(z.c(),z.m(e,null))),j[0]&4096&&A(e,"with-input",U[12]),j[0]&262144&&A(e,"card-flipped",U[18])},d(U){U&&M(e),k&&k.d(),B&&B.d(),R&&R.d(),E&&E.d(),z.d()}}}function zt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-mh8lvo")},m(i,o){D(i,e,o)},p(i,o){o[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&M(e)}}}function Vt(l){let e,t,i,o,r=l[24].association+"",c;return{c(){e=f("div"),t=f("span"),t.textContent="Ассоциация:",i=g(),o=f("p"),c=J(r),n(t,"class","association-label svelte-mh8lvo"),n(o,"class","svelte-mh8lvo"),n(e,"class","association svelte-mh8lvo")},m(d,a){D(d,e,a),s(e,t),s(e,i),s(e,o),s(o,c)},p(d,a){a[0]&16777216&&r!==(r=d[24].association+"")&&$(c,r)},d(d){d&&M(e)}}}function Gt(l){let e,t,i,o,r,c,d,a,u=l[24].word+"",p,v,h,w,b,m,_,y,C,T,L=l[24].translation+"",N,O,S,I,k=l[24].imageUrl&&zt(l),B=l[24].association&&Vt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),o=f("div"),r=f("span"),c=J(l[27]),d=g(),a=f("h2"),p=J(u),v=g(),h=f("p"),h.textContent="Нажмите, чтобы увидеть перевод",w=g(),b=f("div"),k&&k.c(),m=g(),_=f("div"),y=f("span"),y.textContent="Перевод",C=g(),T=f("h2"),N=J(L),O=g(),B&&B.c(),n(r,"class","card-label svelte-mh8lvo"),n(a,"class","card-word svelte-mh8lvo"),n(h,"class","card-hint svelte-mh8lvo"),n(o,"class","card-text-content svelte-mh8lvo"),n(i,"class","card-front svelte-mh8lvo"),n(y,"class","card-label svelte-mh8lvo"),n(T,"class","card-word svelte-mh8lvo"),n(_,"class","card-text-content svelte-mh8lvo"),n(b,"class","card-back svelte-mh8lvo"),A(b,"has-image",l[24].imageUrl),n(t,"class","card-inner svelte-mh8lvo"),n(e,"class","card svelte-mh8lvo"),n(e,"style",l[42]()),n(e,"role","button"),n(e,"tabindex","0"),A(e,"flipped",l[6]),A(e,"dragging",l[7]),A(e,"swipe-left",l[8]==="left"),A(e,"swipe-right",l[8]==="right")},m(R,E){D(R,e,E),s(e,t),s(t,i),s(i,o),s(o,r),s(r,c),s(o,d),s(o,a),s(a,p),s(o,v),s(o,h),s(t,w),s(t,b),k&&k.m(b,null),s(b,m),s(b,_),s(_,y),s(_,C),s(_,T),s(T,N),s(_,O),B&&B.m(_,null),S||(I=[H(e,"mousedown",l[32]),H(e,"mousemove",l[33]),H(e,"mouseup",l[34]),H(e,"mouseleave",l[34]),H(e,"touchstart",l[32]),H(e,"touchmove",l[33]),H(e,"touchend",l[34],{passive:!0}),H(e,"click",l[41]),H(e,"keydown",l[61])],S=!0)},p(R,E){E[0]&134217728&&$(c,R[27]),E[0]&16777216&&u!==(u=R[24].word+"")&&$(p,u),R[24].imageUrl?k?k.p(R,E):(k=zt(R),k.c(),k.m(b,m)):k&&(k.d(1),k=null),E[0]&16777216&&L!==(L=R[24].translation+"")&&$(N,L),R[24].association?B?B.p(R,E):(B=Vt(R),B.c(),B.m(_,null)):B&&(B.d(1),B=null),E[0]&16777216&&A(b,"has-image",R[24].imageUrl),E[0]&64&&A(e,"flipped",R[6]),E[0]&128&&A(e,"dragging",R[7]),E[0]&256&&A(e,"swipe-left",R[8]==="left"),E[0]&256&&A(e,"swipe-right",R[8]==="right")},d(R){R&&M(e),k&&k.d(),B&&B.d(),S=!1,je(I)}}}function Kt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image-full svelte-mh8lvo")},m(i,o){D(i,e,o)},p(i,o){o[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&M(e)}}}function Xt(l){let e;function t(r,c){return r[10]==="correct"?Ln:Sn}let i=t(l),o=i(l);return{c(){e=f("div"),o.c(),n(e,"class","answer-overlay svelte-mh8lvo"),A(e,"correct",l[10]==="correct"),A(e,"incorrect",l[10]==="incorrect")},m(r,c){D(r,e,c),o.m(e,null)},p(r,c){i===(i=t(r))&&o?o.p(r,c):(o.d(1),o=i(r),o&&(o.c(),o.m(e,null))),c[0]&1024&&A(e,"correct",r[10]==="correct"),c[0]&1024&&A(e,"incorrect",r[10]==="incorrect")},d(r){r&&M(e),o.d()}}}function Sn(l){let e,t,i,o,r,c=l[24].word+"",d;return{c(){e=P("svg"),t=P("line"),i=P("line"),o=g(),r=f("span"),d=J(c),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-mh8lvo"),n(r,"class","svelte-mh8lvo")},m(a,u){D(a,e,u),s(e,t),s(e,i),D(a,o,u),D(a,r,u),s(r,d)},p(a,u){u[0]&16777216&&c!==(c=a[24].word+"")&&$(d,c)},d(a){a&&(M(e),M(o),M(r))}}}function Ln(l){let e,t,i,o;return{c(){e=P("svg"),t=P("polyline"),i=g(),o=f("span"),o.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-mh8lvo"),n(o,"class","svelte-mh8lvo")},m(r,c){D(r,e,c),s(e,t),D(r,i,c),D(r,o,c)},p:ye,d(r){r&&(M(e),M(i),M(o))}}}function Yt(l){let e;function t(r,c){if(r[14]==="correct")return In;if(r[14]==="word_error")return Tn}let i=t(l),o=i&&i(l);return{c(){e=f("div"),o&&o.c(),n(e,"class","answer-overlay svelte-mh8lvo"),A(e,"correct",l[14]==="correct"),A(e,"incorrect",l[14]==="word_error")},m(r,c){D(r,e,c),o&&o.m(e,null)},p(r,c){i===(i=t(r))&&o?o.p(r,c):(o&&o.d(1),o=i&&i(r),o&&(o.c(),o.m(e,null))),c[0]&16384&&A(e,"correct",r[14]==="correct"),c[0]&16384&&A(e,"incorrect",r[14]==="word_error")},d(r){r&&M(e),o&&o.d()}}}function Tn(l){let e,t,i,o,r,c,d,a,u,p,v;return{c(){e=P("svg"),t=P("line"),i=P("line"),o=g(),r=f("div"),c=f("span"),c.textContent="Ошибка в слове",d=g(),a=f("span"),u=J("Ожидалось: "),p=f("strong"),v=J(l[20]),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-mh8lvo"),n(c,"class","error-title svelte-mh8lvo"),n(p,"class","svelte-mh8lvo"),n(a,"class","expected-word svelte-mh8lvo"),n(r,"class","error-details svelte-mh8lvo")},m(h,w){D(h,e,w),s(e,t),s(e,i),D(h,o,w),D(h,r,w),s(r,c),s(r,d),s(r,a),s(a,u),s(a,p),s(p,v)},p(h,w){w[0]&1048576&&$(v,h[20])},d(h){h&&(M(e),M(o),M(r))}}}function In(l){let e,t,i,o;return{c(){e=P("svg"),t=P("polyline"),i=g(),o=f("span"),o.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-mh8lvo"),n(o,"class","svelte-mh8lvo")},m(r,c){D(r,e,c),s(e,t),D(r,i,c),D(r,o,c)},p:ye,d(r){r&&(M(e),M(i),M(o))}}}function Qt(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="checking-spinner svelte-mh8lvo"></div> <span class="svelte-mh8lvo">Проверка...</span>',n(e,"class","answer-overlay checking svelte-mh8lvo")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Zt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-mh8lvo")},m(i,o){D(i,e,o)},p(i,o){o[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&M(e)}}}function xt(l){let e,t,i,o,r=l[24].association+"",c;return{c(){e=f("div"),t=f("span"),t.textContent="Ассоциация:",i=g(),o=f("p"),c=J(r),n(t,"class","association-label svelte-mh8lvo"),n(o,"class","svelte-mh8lvo"),n(e,"class","association svelte-mh8lvo")},m(d,a){D(d,e,a),s(e,t),s(e,i),s(e,o),s(o,c)},p(d,a){a[0]&16777216&&r!==(r=d[24].association+"")&&$(c,r)},d(d){d&&M(e)}}}function Mn(l){let e,t,i,o,r,c;return{c(){e=f("div"),t=f("button"),t.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',i=g(),o=f("button"),o.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(t,"class","action-btn unknown svelte-mh8lvo"),n(o,"class","action-btn known svelte-mh8lvo"),n(e,"class","action-buttons svelte-mh8lvo")},m(d,a){D(d,e,a),s(e,t),s(e,i),s(e,o),r||(c=[H(t,"click",l[37]),H(o,"click",l[35])],r=!0)},p:ye,d(d){d&&M(e),r=!1,je(c)}}}function Dn(l){let e,t,i,o,r=l[27].toLowerCase()+"",c,d,a,u,p,v,h,w,b,m;function _(L,N){return L[16]?En:L[17]?An:Bn}let y=_(l),C=y(l),T=!l[16]&&!l[17]&&$t(l);return{c(){e=f("div"),t=f("div"),i=f("span"),o=J("Переведите на "),c=J(r),d=J(":"),a=g(),C.c(),u=g(),T&&T.c(),p=g(),v=f("button"),h=J("Пропустить"),n(i,"class","sentence-label svelte-mh8lvo"),n(t,"class","sentence-prompt svelte-mh8lvo"),A(t,"loading",l[16]),A(t,"error",l[17]),n(v,"class","skip-sentence-btn svelte-mh8lvo"),v.disabled=w=l[14]!==null||l[16]||l[19],n(e,"class","sentence-exercise svelte-mh8lvo")},m(L,N){D(L,e,N),s(e,t),s(t,i),s(i,o),s(i,c),s(i,d),s(t,a),C.m(t,null),s(e,u),T&&T.m(e,null),s(e,p),s(e,v),s(v,h),b||(m=H(v,"click",l[37]),b=!0)},p(L,N){N[0]&134217728&&r!==(r=L[27].toLowerCase()+"")&&$(c,r),y===(y=_(L))&&C?C.p(L,N):(C.d(1),C=y(L),C&&(C.c(),C.m(t,null))),N[0]&65536&&A(t,"loading",L[16]),N[0]&131072&&A(t,"error",L[17]),!L[16]&&!L[17]?T?T.p(L,N):(T=$t(L),T.c(),T.m(e,p)):T&&(T.d(1),T=null),N[0]&606208&&w!==(w=L[14]!==null||L[16]||L[19])&&(v.disabled=w)},d(L){L&&M(e),C.d(),T&&T.d(),b=!1,m()}}}function Nn(l){let e,t,i,o;return{c(){e=f("div"),t=f("button"),t.textContent="Продолжить",n(t,"class","continue-btn svelte-mh8lvo"),n(e,"class","card-back-actions svelte-mh8lvo")},m(r,c){D(r,e,c),s(e,t),i||(o=H(t,"click",l[37]),i=!0)},p:ye,d(r){r&&M(e),i=!1,o()}}}function Bn(l){let e,t;return{c(){e=f("p"),t=J(l[15]),n(e,"class","sentence-text svelte-mh8lvo")},m(i,o){D(i,e,o),s(e,t)},p(i,o){o[0]&32768&&$(t,i[15])},d(i){i&&M(e)}}}function An(l){let e,t,i,o,r,c;return{c(){e=f("p"),t=J(l[17]),i=g(),o=f("button"),o.textContent="Попробовать снова",n(e,"class","sentence-error svelte-mh8lvo"),n(o,"class","retry-btn svelte-mh8lvo")},m(d,a){D(d,e,a),s(e,t),D(d,i,a),D(d,o,a),r||(c=H(o,"click",l[58]),r=!0)},p(d,a){a[0]&131072&&$(t,d[17])},d(d){d&&(M(e),M(i),M(o)),r=!1,c()}}}function En(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="loading-spinner svelte-mh8lvo"></div> <span>Генерация предложения...</span>',n(e,"class","sentence-loading svelte-mh8lvo")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function $t(l){let e;function t(r,c){return r[14]==="grammar_error"?Un:On}let i=t(l),o=i(l);return{c(){o.c(),e=nt()},m(r,c){o.m(r,c),D(r,e,c)},p(r,c){i===(i=t(r))&&o?o.p(r,c):(o.d(1),o=i(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&M(e),o.d(r)}}}function On(l){let e,t,i,o,r,c,d,a,u,p,v;return{c(){e=f("div"),t=f("input"),o=g(),r=f("button"),c=P("svg"),d=P("polyline"),a=P("path"),n(t,"type","text"),n(t,"class","answer-input sentence-input svelte-mh8lvo"),n(t,"placeholder","Введите перевод..."),t.disabled=i=l[14]!==null||l[19],A(t,"correct",l[14]==="correct"),A(t,"incorrect",l[14]==="incorrect"),n(d,"points","9 11 12 14 22 4"),n(a,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(c,"width","24"),n(c,"height","24"),n(c,"viewBox","0 0 24 24"),n(c,"fill","none"),n(c,"stroke","currentColor"),n(c,"stroke-width","2"),n(r,"class","check-btn svelte-mh8lvo"),r.disabled=u=!l[13].trim()||l[14]!==null||l[19],n(e,"class","answer-input-area svelte-mh8lvo")},m(h,w){D(h,e,w),s(e,t),Ue(t,l[13]),s(e,o),s(e,r),s(r,c),s(c,d),s(c,a),p||(v=[H(t,"input",l[59]),H(t,"keydown",l[39]),H(r,"click",l[38])],p=!0)},p(h,w){w[0]&540672&&i!==(i=h[14]!==null||h[19])&&(t.disabled=i),w[0]&8192&&t.value!==h[13]&&Ue(t,h[13]),w[0]&16384&&A(t,"correct",h[14]==="correct"),w[0]&16384&&A(t,"incorrect",h[14]==="incorrect"),w[0]&548864&&u!==(u=!h[13].trim()||h[14]!==null||h[19])&&(r.disabled=u)},d(h){h&&M(e),p=!1,je(v)}}}function Un(l){let e,t,i,o,r,c,d,a,u,p,v,h;function w(_,y){return _[21]?Rn:Hn}let b=w(l),m=b(l);return{c(){e=f("div"),t=f("div"),m.c(),i=g(),o=f("div"),r=f("span"),r.textContent="Правильный вариант:",c=g(),d=f("p"),a=J(l[22]),u=g(),p=f("button"),p.textContent="Продолжить",n(t,"class","user-sentence-error svelte-mh8lvo"),n(r,"class","correction-label svelte-mh8lvo"),n(d,"class","correction-text svelte-mh8lvo"),n(o,"class","correction-block svelte-mh8lvo"),n(p,"class","continue-btn svelte-mh8lvo"),n(e,"class","grammar-error-block svelte-mh8lvo")},m(_,y){D(_,e,y),s(e,t),m.m(t,null),s(e,i),s(e,o),s(o,r),s(o,c),s(o,d),s(d,a),s(e,u),s(e,p),v||(h=H(p,"click",l[40]),v=!0)},p(_,y){b===(b=w(_))&&m?m.p(_,y):(m.d(1),m=b(_),m&&(m.c(),m.m(t,null))),y[0]&4194304&&$(a,_[22])},d(_){_&&M(e),m.d(),v=!1,h()}}}function Hn(l){let e,t;return{c(){e=f("span"),t=J(l[23]),n(e,"class","error-text svelte-mh8lvo")},m(i,o){D(i,e,o),s(e,t)},p(i,o){o[0]&8388608&&$(t,i[23])},d(i){i&&M(e)}}}function Rn(l){let e,t=el(l[23],l[21])+"",i;return{c(){e=new ql(!1),i=nt(),e.a=i},m(o,r){e.m(t,o,r),D(o,i,r)},p(o,r){r[0]&10485760&&t!==(t=el(o[23],o[21])+"")&&e.p(t)},d(o){o&&(M(i),e.d())}}}function Jn(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y,C,T=l[5].learned.length+"",L,N,O,S,I,k,B,R,E,q,W=l[5].unlearned.length+"",z,U,j;function oe(X,ae){return X[25]?mn:X[0]?vn:hn}let re=oe(l),he=re(l),fe=l[11]&&Ft(l);function de(X,ae){return X[25]&&X[24]?wn:kn}let ke=de(l),ie=ke(l);return{c(){e=f("div"),t=f("div"),i=f("div"),o=f("h1"),o.textContent="Изучение",r=g(),c=f("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-mh8lvo"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',d=g(),a=f("p"),he.c(),u=g(),fe&&fe.c(),p=g(),ie.c(),v=g(),h=f("div"),w=f("div"),b=P("svg"),m=P("polyline"),_=g(),y=f("span"),C=J("Изучено: "),L=J(T),N=g(),O=f("div"),S=P("svg"),I=P("circle"),k=P("line"),B=P("line"),R=g(),E=f("span"),q=J("На повторение: "),z=J(W),n(o,"class","svelte-mh8lvo"),n(c,"class","settings-btn svelte-mh8lvo"),A(c,"active",l[11]),n(i,"class","header-top svelte-mh8lvo"),n(a,"class","subtitle svelte-mh8lvo"),n(t,"class","header svelte-mh8lvo"),n(m,"points","20 6 9 17 4 12"),n(b,"width","20"),n(b,"height","20"),n(b,"viewBox","0 0 24 24"),n(b,"fill","none"),n(b,"stroke","currentColor"),n(b,"stroke-width","2"),n(w,"class","stat-item learned svelte-mh8lvo"),n(I,"cx","12"),n(I,"cy","12"),n(I,"r","10"),n(k,"x1","12"),n(k,"y1","8"),n(k,"x2","12"),n(k,"y2","12"),n(B,"x1","12"),n(B,"y1","16"),n(B,"x2","12.01"),n(B,"y2","16"),n(S,"width","20"),n(S,"height","20"),n(S,"viewBox","0 0 24 24"),n(S,"fill","none"),n(S,"stroke","currentColor"),n(S,"stroke-width","2"),n(O,"class","stat-item unlearned svelte-mh8lvo"),n(h,"class","stats svelte-mh8lvo"),n(e,"class","flashcards-container svelte-mh8lvo")},m(X,ae){D(X,e,ae),s(e,t),s(t,i),s(i,o),s(i,r),s(i,c),s(t,d),s(t,a),he.m(a,null),s(e,u),fe&&fe.m(e,null),s(e,p),ie.m(e,null),s(e,v),s(e,h),s(h,w),s(w,b),s(b,m),s(w,_),s(w,y),s(y,C),s(y,L),s(h,N),s(h,O),s(O,S),s(S,I),s(S,k),s(S,B),s(O,R),s(O,E),s(E,q),s(E,z),U||(j=H(c,"click",l[54]),U=!0)},p(X,ae){ae[0]&2048&&A(c,"active",X[11]),re===(re=oe(X))&&he?he.p(X,ae):(he.d(1),he=re(X),he&&(he.c(),he.m(a,null))),X[11]?fe?fe.p(X,ae):(fe=Ft(X),fe.c(),fe.m(e,p)):fe&&(fe.d(1),fe=null),ke===(ke=de(X))&&ie?ie.p(X,ae):(ie.d(1),ie=ke(X),ie&&(ie.c(),ie.m(e,v))),ae[0]&32&&T!==(T=X[5].learned.length+"")&&$(L,T),ae[0]&32&&W!==(W=X[5].unlearned.length+"")&&$(z,W)},i:ye,o:ye,d(X){X&&M(e),he.d(),fe&&fe.d(),ie.d(),U=!1,j()}}}function jn(l){const e=[...l];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function el(l,e){if(!e)return l;const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${t})`,"gi");return l.replace(i,'<span class="highlighted-error">$1</span>')}function Pn(l,e,t){let i,o,r,c,d,a,u,p,v,h,w,b;Qe(l,Je,Y=>t(5,h=Y)),Qe(l,We,Y=>t(51,w=Y)),Qe(l,Ze,Y=>t(52,b=Y));let m=0,_=!1,y=0,C=0,T=!1,L=null,N=!1,O=!1,S="",I=null,k=!1;function B(){t(0,N=!1),t(1,O=!1),K()}function R(){N?t(0,N=!1):(t(0,N=!0),t(1,O=!1)),K()}function E(){c&&(O?t(1,O=!1):(t(1,O=!0),t(0,N=!1)),K())}let q=!1,W="",z=null,U="",j=!1,oe=null,re=!1,he=!1,fe=null,de=null,ke=null,ie=null,X="";function ae(){t(46,X=localStorage.getItem("ai_token")||"")}function ge(){ae()}function Me(Y){Y.key==="ai_token"&&ae()}let Be;Nl(()=>{ae(),window.addEventListener("focus",ge),window.addEventListener("storage",Me),Be=setInterval(()=>{k&&ae()},500)}),Fl(()=>{window.removeEventListener("focus",ge),window.removeEventListener("storage",Me),Be&&clearInterval(Be)});async function Ce(Y,Fe){var Pe,qe,Se,Re;t(16,j=!0),t(17,oe=null),t(15,U="");const Ke=`You are a ${o} language learning assistant. Student level: A1-A2 (beginner).

Task: Create ONE short and simple sentence in RUSSIAN that will need to be translated into ${o}.

${o} word: "${Y}"
Russian translation: "${Fe}"

Requirements:
- The sentence must be in Russian
- The sentence must contain the word "${Fe}" (or its form)
- Length: 3-10 words
- Simple A1-A2 level grammar
- Use simple tenses (Present Simple, Past Simple, Future Simple, Present Continuous, Present Perfect)
- Avoid complex constructions

Reply ONLY with the sentence in Russian, without quotes or explanations.`;try{const Oe=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Ke}],max_tokens:100,temperature:.7})});if(!Oe.ok){const x=await Oe.json().catch(()=>({}));throw new Error(((Pe=x.error)==null?void 0:Pe.message)||`Ошибка API: ${Oe.status}`)}const He=await Oe.json();if(t(15,U=((Re=(Se=(qe=He.choices[0])==null?void 0:qe.message)==null?void 0:Se.content)==null?void 0:Re.trim())||""),!U)throw new Error("Пустой ответ от AI");if(He.usage){const x=He.usage.prompt_tokens/1e6*.15,Le=He.usage.completion_tokens/1e6*.6,ft=x+Le,Ct=parseFloat(localStorage.getItem("ai_total_cost")||"0")+ft;localStorage.setItem("ai_total_cost",Ct.toString())}}catch(Oe){console.error("Ошибка генерации:",Oe),t(17,oe=Oe.message),t(15,U="")}finally{t(16,j=!1)}}let V=[],pe=new Set,ve=d;function ce(Y){N||(t(7,T=!0),y=Y.type==="touchstart"?Y.touches[0].clientX:Y.clientX,t(8,L=null))}function we(Y){if(!T||N)return;C=(Y.type==="touchmove"?Y.touches[0].clientX:Y.clientX)-y,C>50?t(8,L="right"):C<-50?t(8,L="left"):t(8,L=null)}function Te(){!T||N||(t(7,T=!1),Math.abs(C)>100&&p&&(C>0?G():Z()),C=0,t(8,L=null))}async function G(){if(p){if(O&&!q){t(12,q=!0),t(13,W=""),t(14,z=null),await Ce(p.word,p.translation);return}Je.markAsLearned(p.id),K(),m>=u.length-1&&t(45,m=Math.max(0,u.length-2))}}function Z(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Je.markAsUnlearned(Y.id),K(),m>=u.length-1&&t(45,m=0)}}function K(){t(6,_=!1),t(9,S=""),t(10,I=null),t(12,q=!1),t(13,W=""),t(14,z=null),t(15,U=""),t(17,oe=null),t(19,he=!1),t(20,fe=null),t(21,de=null),t(22,ke=null),t(23,ie=null),t(18,re=!1)}function be(){if(p){if(O&&!re){t(18,re=!0);return}const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Je.markAsUnlearned(Y.id),K(),m>=u.length-1&&t(45,m=0)}}async function ee(Y,Fe,Ke){var qe,Se,Re,Oe;const Pe=`You are a ${o} language teacher. Check the translation of a sentence from Russian to ${o}.

Russian sentence: "${Fe}"
Student's translation: "${Y}"
Key word that must be used: "${Ke}"

Task: check the grammar of the sentence and its correspondence to the translation.
- DO NOT check punctuation (commas, periods)
- Check only grammatical errors (tenses, articles, word order, word forms)
- Check that the meaning matches the translation

Response format:
- If the sentence is grammatically correct and conveys the meaning — reply only: 0
- If there are errors — reply in this format:
ERROR: [part of the sentence with the error]
CORRECTION: [correct version of the entire sentence]

Reply ONLY in the specified format, without additional explanations.`;try{const He=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Pe}],max_tokens:200,temperature:.3})});if(!He.ok){const ft=await He.json().catch(()=>({}));throw new Error(((qe=ft.error)==null?void 0:qe.message)||`Ошибка API: ${He.status}`)}const x=await He.json(),Le=((Oe=(Re=(Se=x.choices[0])==null?void 0:Se.message)==null?void 0:Re.content)==null?void 0:Oe.trim())||"";if(x.usage){const ft=x.usage.prompt_tokens/1e6*.15,Nt=x.usage.completion_tokens/1e6*.6,Ct=ft+Nt,Al=parseFloat(localStorage.getItem("ai_total_cost")||"0");localStorage.setItem("ai_total_cost",(Al+Ct).toString())}return Le}catch(He){throw console.error("Ошибка проверки грамматики:",He),He}}async function De(){if(!p||!W.trim())return;const Y=W.trim(),Fe=p.word.toLowerCase(),Ke=Y.toLowerCase();if(!new RegExp(`\\b${Fe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\w*\\b`,"i").test(Ke)){t(14,z="word_error"),t(20,fe=p.word),t(21,de=null),t(22,ke=null),setTimeout(()=>{const Se=p;t(47,V=[...V.filter(Re=>Re.id!==Se.id),Se]),Je.markAsUnlearned(Se.id),m>=u.length-1&&t(45,m=0),K()},3e3);return}t(19,he=!0),t(20,fe=null),t(21,de=null),t(22,ke=null);try{const Se=await ee(Y,U,p.word);if(Se==="0")t(14,z="correct"),setTimeout(()=>{Je.markAsLearned(p.id),m>=u.length-1&&t(45,m=Math.max(0,u.length-2)),K()},1500);else{t(14,z="grammar_error"),t(23,ie=Y);const Re=Se.match(/ERROR:\s*(.+)/i),Oe=Se.match(/CORRECTION:\s*(.+)/i);t(21,de=Re?Re[1].trim():null),t(22,ke=Oe?Oe[1].trim():Se)}}catch{t(14,z="correct"),setTimeout(()=>{Je.markAsLearned(p.id),m>=u.length-1&&t(45,m=Math.max(0,u.length-2)),K()},1500)}finally{t(19,he=!1)}}function me(Y){Y.key==="Enter"&&q&&!he&&z!=="grammar_error"&&De()}function te(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Je.markAsUnlearned(Y.id),m>=u.length-1&&t(45,m=0),K()}}function ne(){N||t(6,_=!_)}function Q(){if(!T)return"";const Y=C*.05;return`transform: translateX(${C}px) rotate(${Y}deg);`}function ue(){if(!p||!S.trim())return;const Y=S.trim().toLowerCase()===p.word.toLowerCase();t(10,I=Y?"correct":"incorrect"),setTimeout(()=>{Y?G():Z()},1e3)}function F(Y){Y.key==="Enter"&&N&&ue()}function Ae(Y){tt.call(this,l,Y)}const Ne=()=>t(11,k=!k),Ge=()=>t(11,k=!1),Ie=()=>t(11,k=!1),le=Y=>Y.key==="Escape"&&t(11,k=!1),_e=()=>Ce(p.word,p.translation);function se(){W=this.value,t(13,W)}function Ee(){S=this.value,t(9,S)}const ct=Y=>Y.key==="Enter"&&ne();return l.$$.update=()=>{if(l.$$.dirty[1]&2097152&&t(27,i=Ye(b)),l.$$.dirty[1]&2097152&&(o=nn(b)),l.$$.dirty[1]&32768&&t(4,c=X&&X.length>0),l.$$.dirty[0]&18&&!c&&O&&t(1,O=!1),l.$$.dirty[0]&3&&t(26,r=!N&&!O),l.$$.dirty[1]&1048576&&t(50,d=w||"default"),l.$$.dirty[0]&32|l.$$.dirty[1]&524288&&t(3,a=h.unlearned.filter(Y=>(Y.dictionaryId||"default")===d)),l.$$.dirty[0]&8|l.$$.dirty[1]&983040){const Y=new Set(a.map(Pe=>Pe.id)),Fe=ve!==d,Ke=Y.size!==pe.size||![...Y].every(Pe=>pe.has(Pe));Fe||Ke?(t(47,V=jn(a)),t(48,pe=Y),t(45,m=0),t(49,ve=d)):t(47,V=V.map(Pe=>a.find(Se=>Se.id===Pe.id)||Pe))}l.$$.dirty[0]&1|l.$$.dirty[1]&65536&&t(2,u=N?V.filter(Y=>Y.imageUrl):V),l.$$.dirty[0]&4|l.$$.dirty[1]&16384&&t(24,p=u[m]),l.$$.dirty[0]&4&&t(25,v=u.length>0)},[N,O,u,a,c,h,_,T,L,S,I,k,q,W,z,U,j,oe,re,he,fe,de,ke,ie,p,v,r,i,B,R,E,Ce,ce,we,Te,G,Z,be,De,me,te,ne,Q,ue,F,m,X,V,pe,ve,d,w,b,Ae,Ne,Ge,Ie,le,_e,se,Ee,ct]}class qn extends bt{constructor(e){super(),wt(this,e,Pn,Jn,at,{},null,[-1,-1,-1])}}function tl(l,e,t){const i=l.slice();return i[61]=e[t],i}function ll(l){let e,t,i,o,r=l[7].length+"",c,d,a,u,p,v=l[8].length+"",h,w,b,m,_,y=l[6].length+"",C,T,L;return{c(){e=f("div"),t=f("button"),i=J(`На проработку
          `),o=f("span"),c=J(r),d=g(),a=f("button"),u=J(`На повторение
          `),p=f("span"),h=J(v),w=g(),b=f("button"),m=J(`Изученные
          `),_=f("span"),C=J(y),n(o,"class","badge svelte-1rdpxoy"),n(t,"class","dropdown-item svelte-1rdpxoy"),A(t,"active",l[0]==="draft"),n(p,"class","badge svelte-1rdpxoy"),n(a,"class","dropdown-item svelte-1rdpxoy"),A(a,"active",l[0]==="unlearned"),n(_,"class","badge svelte-1rdpxoy"),n(b,"class","dropdown-item svelte-1rdpxoy"),A(b,"active",l[0]==="learned"),n(e,"class","tab-dropdown-menu svelte-1rdpxoy")},m(N,O){D(N,e,O),s(e,t),s(t,i),s(t,o),s(o,c),s(e,d),s(e,a),s(a,u),s(a,p),s(p,h),s(e,w),s(e,b),s(b,m),s(b,_),s(_,C),T||(L=[H(t,"click",l[39]),H(a,"click",l[40]),H(b,"click",l[41])],T=!0)},p(N,O){O[0]&128&&r!==(r=N[7].length+"")&&$(c,r),O[0]&1&&A(t,"active",N[0]==="draft"),O[0]&256&&v!==(v=N[8].length+"")&&$(h,v),O[0]&1&&A(a,"active",N[0]==="unlearned"),O[0]&64&&y!==(y=N[6].length+"")&&$(C,y),O[0]&1&&A(b,"active",N[0]==="learned")},d(N){N&&M(e),T=!1,je(L)}}}function nl(l){let e,t,i;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","search-clear svelte-1rdpxoy")},m(o,r){D(o,e,r),t||(i=H(e,"click",l[46]),t=!0)},p:ye,d(o){o&&M(e),t=!1,i()}}}function il(l){let e,t,i,o;return{c(){e=f("div"),t=f("button"),t.innerHTML=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
        Отправить все на повторение`,n(t,"class","bulk-action-btn svelte-1rdpxoy"),n(e,"class","bulk-actions svelte-1rdpxoy")},m(r,c){D(r,e,c),s(e,t),i||(o=H(t,"click",l[26]),i=!0)},p:ye,d(r){r&&M(e),i=!1,o()}}}function Fn(l){let e,t,i,o,r,c;function d(_,y){return _[0]==="learned"?Gn:_[0]==="draft"?Vn:zn}let a=d(l),u=a(l);function p(_,y){return _[0]==="learned"?Yn:_[0]==="draft"?Xn:Kn}let v=p(l),h=v(l);function w(_,y){return _[0]==="learned"?xn:_[0]==="draft"?Zn:Qn}let b=w(l),m=b(l);return{c(){e=f("div"),t=f("div"),u.c(),i=g(),o=f("h2"),h.c(),r=g(),c=f("p"),m.c(),n(t,"class","empty-icon svelte-1rdpxoy"),n(o,"class","svelte-1rdpxoy"),n(c,"class","svelte-1rdpxoy"),n(e,"class","empty-state svelte-1rdpxoy")},m(_,y){D(_,e,y),s(e,t),u.m(t,null),s(e,i),s(e,o),h.m(o,null),s(e,r),s(e,c),m.m(c,null)},p(_,y){a!==(a=d(_))&&(u.d(1),u=a(_),u&&(u.c(),u.m(t,null))),v!==(v=p(_))&&(h.d(1),h=v(_),h&&(h.c(),h.m(o,null))),b!==(b=w(_))&&(m.d(1),m=b(_),m&&(m.c(),m.m(c,null)))},d(_){_&&M(e),u.d(),h.d(),m.d()}}}function Wn(l){let e=[],t=new Map,i,o=_t(l[12]);const r=c=>c[61].id;for(let c=0;c<o.length;c+=1){let d=tl(l,o,c),a=r(d);t.set(a,e[c]=al(a,d))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=nt()},m(c,d){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,d);D(c,i,d)},p(c,d){d[0]&921601&&(o=_t(c[12]),e=Ql(e,d,r,1,c,o,t,i.parentNode,Yl,al,i,tl))},d(c){c&&M(i);for(let d=0;d<e.length;d+=1)e[d].d(c)}}}function zn(l){let e,t,i,o;return{c(){e=P("svg"),t=P("circle"),i=P("line"),o=P("line"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"x1","12"),n(i,"y1","8"),n(i,"x2","12"),n(i,"y2","12"),n(o,"x1","12"),n(o,"y1","16"),n(o,"x2","12.01"),n(o,"y2","16"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,c){D(r,e,c),s(e,t),s(e,i),s(e,o)},d(r){r&&M(e)}}}function Vn(l){let e,t,i;return{c(){e=P("svg"),t=P("path"),i=P("path"),n(t,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(i,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(o,r){D(o,e,r),s(e,t),s(e,i)},d(o){o&&M(e)}}}function Gn(l){let e,t,i;return{c(){e=P("svg"),t=P("circle"),i=P("polyline"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"points","16 10 11 15 8 12"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(o,r){D(o,e,r),s(e,t),s(e,i)},d(o){o&&M(e)}}}function Kn(l){let e;return{c(){e=J("Нет слов на повторение")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Xn(l){let e;return{c(){e=J("Нет слов на проработку")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Yn(l){let e;return{c(){e=J("Пока нет изученных слов")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Qn(l){let e;return{c(){e=J("Все слова успешно изучены!")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function Zn(l){let e;return{c(){e=J("Загрузите список слов на странице добавления")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function xn(l){let e;return{c(){e=J("Изучайте карточки, чтобы они появились здесь")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function $n(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',n(e,"class","card-thumbnail missing svelte-1rdpxoy")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function ei(l){let e,t,i;return{c(){e=f("div"),t=f("img"),Ve(t.src,i=l[61].imageUrl)||n(t,"src",i),n(t,"alt",""),n(t,"class","svelte-1rdpxoy"),n(e,"class","card-thumbnail svelte-1rdpxoy")},m(o,r){D(o,e,r),s(e,t)},p(o,r){r[0]&4096&&!Ve(t.src,i=o[61].imageUrl)&&n(t,"src",i)},d(o){o&&M(e)}}}function ti(l){let e;return{c(){e=f("p"),e.textContent="Добавьте перевод",n(e,"class","card-translation missing-text svelte-1rdpxoy")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function li(l){let e,t=l[61].translation+"",i;return{c(){e=f("p"),i=J(t),n(e,"class","card-translation svelte-1rdpxoy")},m(o,r){D(o,e,r),s(e,i)},p(o,r){r[0]&4096&&t!==(t=o[61].translation+"")&&$(i,t)},d(o){o&&M(e)}}}function sl(l){let e,t=l[61].association+"",i;return{c(){e=f("p"),i=J(t),n(e,"class","card-association svelte-1rdpxoy")},m(o,r){D(o,e,r),s(e,i)},p(o,r){r[0]&4096&&t!==(t=o[61].association+"")&&$(i,t)},d(o){o&&M(e)}}}function ol(l){let e,t,i,o,r,c,d,a,u,p;function v(y,C){var T;return C[0]&4096&&(o=null),o==null&&(o=!!((T=y[61].translation)!=null&&T.trim())),o?ii:ni}let h=v(l,[-1,-1,-1]),w=h(l);function b(y,C){var T;return C[0]&4096&&(u=null),u==null&&(u=!!((T=y[61].imageUrl)!=null&&T.trim())),u?oi:si}let m=b(l,[-1,-1,-1]),_=m(l);return{c(){var y,C;e=f("div"),t=f("span"),i=P("svg"),w.c(),r=J(`
                  Перевод`),c=g(),d=f("span"),a=P("svg"),_.c(),p=J(`
                  Картинка`),n(i,"width","12"),n(i,"height","12"),n(i,"viewBox","0 0 24 24"),n(i,"fill","none"),n(i,"stroke","currentColor"),n(i,"stroke-width","2"),n(t,"class","status-item svelte-1rdpxoy"),A(t,"complete",(y=l[61].translation)==null?void 0:y.trim()),n(a,"width","12"),n(a,"height","12"),n(a,"viewBox","0 0 24 24"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-width","2"),n(d,"class","status-item svelte-1rdpxoy"),A(d,"complete",(C=l[61].imageUrl)==null?void 0:C.trim()),n(e,"class","draft-status svelte-1rdpxoy")},m(y,C){D(y,e,C),s(e,t),s(t,i),w.m(i,null),s(t,r),s(e,c),s(e,d),s(d,a),_.m(a,null),s(d,p)},p(y,C){var T,L;h!==(h=v(y,C))&&(w.d(1),w=h(y),w&&(w.c(),w.m(i,null))),C[0]&4096&&A(t,"complete",(T=y[61].translation)==null?void 0:T.trim()),m!==(m=b(y,C))&&(_.d(1),_=m(y),_&&(_.c(),_.m(a,null))),C[0]&4096&&A(d,"complete",(L=y[61].imageUrl)==null?void 0:L.trim())},d(y){y&&M(e),w.d(),_.d()}}}function ni(l){let e;return{c(){e=P("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function ii(l){let e;return{c(){e=P("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function si(l){let e;return{c(){e=P("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function oi(l){let e;return{c(){e=P("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function rl(l){let e,t,i;function o(){return l[48](l[61])}return{c(){e=f("button"),e.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',n(e,"class","action-btn return svelte-1rdpxoy"),n(e,"title","Вернуть на повторение")},m(r,c){D(r,e,c),t||(i=H(e,"click",o),t=!0)},p(r,c){l=r},d(r){r&&M(e),t=!1,i()}}}function al(l,e){let t,i,o,r,c=e[61].word+"",d,a,u,p,v,h,w,b,m,_,y,C,T;function L(z,U){if(z[61].imageUrl)return ei;if(z[0]==="draft")return $n}let N=L(e),O=N&&N(e);function S(z,U){if(z[61].translation)return li;if(z[0]==="draft")return ti}let I=S(e),k=I&&I(e),B=e[61].association&&sl(e),R=e[0]==="draft"&&ol(e);function E(){return e[47](e[61])}let q=e[0]==="learned"&&rl(e);function W(){return e[49](e[61])}return{key:l,first:null,c(){t=f("div"),O&&O.c(),i=g(),o=f("div"),r=f("h3"),d=J(c),a=g(),k&&k.c(),u=g(),B&&B.c(),p=g(),R&&R.c(),v=g(),h=f("div"),w=f("button"),w.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',b=g(),q&&q.c(),m=g(),_=f("button"),_.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>',y=g(),n(r,"class","card-word svelte-1rdpxoy"),n(o,"class","card-content svelte-1rdpxoy"),n(w,"class","action-btn edit svelte-1rdpxoy"),n(w,"title","Редактировать"),n(_,"class","action-btn delete svelte-1rdpxoy"),n(_,"title","Удалить"),n(h,"class","card-actions svelte-1rdpxoy"),n(t,"class","card-item svelte-1rdpxoy"),A(t,"draft-card",e[0]==="draft"),this.first=t},m(z,U){D(z,t,U),O&&O.m(t,null),s(t,i),s(t,o),s(o,r),s(r,d),s(o,a),k&&k.m(o,null),s(o,u),B&&B.m(o,null),s(o,p),R&&R.m(o,null),s(t,v),s(t,h),s(h,w),s(h,b),q&&q.m(h,null),s(h,m),s(h,_),s(t,y),C||(T=[H(w,"click",E),H(_,"click",W)],C=!0)},p(z,U){e=z,N===(N=L(e))&&O?O.p(e,U):(O&&O.d(1),O=N&&N(e),O&&(O.c(),O.m(t,i))),U[0]&4096&&c!==(c=e[61].word+"")&&$(d,c),I===(I=S(e))&&k?k.p(e,U):(k&&k.d(1),k=I&&I(e),k&&(k.c(),k.m(o,u))),e[61].association?B?B.p(e,U):(B=sl(e),B.c(),B.m(o,p)):B&&(B.d(1),B=null),e[0]==="draft"?R?R.p(e,U):(R=ol(e),R.c(),R.m(o,null)):R&&(R.d(1),R=null),e[0]==="learned"?q?q.p(e,U):(q=rl(e),q.c(),q.m(h,m)):q&&(q.d(1),q=null),U[0]&1&&A(t,"draft-card",e[0]==="draft")},d(z){z&&M(t),O&&O.d(),k&&k.d(),B&&B.d(),R&&R.d(),q&&q.d(),C=!1,je(T)}}}function cl(l){let e,t,i,o,r,c,d,a,u,p,v,h=l[15].toLowerCase()+"",w,b,m,_=l[2].length+"",y,C,T,L,N,O,S,I,k,B=l[3].length+"",R,E,q,W,z,U,j,oe,re,he,fe,de=l[4].length+"",ke,ie,X,ae,ge,Me,Be,Ce,V,pe,ve,ce,we=l[0]==="draft"&&l[3].trim()&&l[5].trim(),Te,G,Z,K,be,ee,De,me,te=l[5]&&fl(l),ne=we&&ul();return{c(){e=f("div"),t=f("div"),i=f("div"),o=f("h2"),o.textContent="Редактировать карточку",r=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("div"),p=f("label"),v=J("Слово ("),w=J(h),b=J(`)
            `),m=f("span"),y=J(_),C=J("/35"),T=g(),L=f("input"),N=g(),O=f("div"),S=f("label"),I=J(`Перевод
            `),k=f("span"),R=J(B),E=J("/50"),q=g(),W=f("input"),z=g(),U=f("div"),j=f("label"),oe=J(`Ассоциация 
            `),re=f("span"),re.textContent="(необязательно)",he=g(),fe=f("span"),ke=J(de),ie=J("/95"),X=g(),ae=f("textarea"),ge=g(),Me=f("div"),Be=f("label"),Be.innerHTML=`Изображение 
            <span class="optional svelte-1rdpxoy">(URL)</span>`,Ce=g(),V=f("input"),pe=g(),te&&te.c(),ve=g(),ce=f("div"),ne&&ne.c(),Te=g(),G=f("button"),G.textContent="Отмена",Z=g(),K=f("button"),be=J("Сохранить"),n(o,"class","svelte-1rdpxoy"),n(c,"class","modal-close svelte-1rdpxoy"),n(i,"class","modal-header svelte-1rdpxoy"),n(m,"class","char-count svelte-1rdpxoy"),A(m,"limit",l[2].length>=35),n(p,"for","editWord"),n(p,"class","svelte-1rdpxoy"),n(L,"id","editWord"),n(L,"type","text"),n(L,"placeholder","например: serendipity"),n(L,"maxlength","35"),L.required=!0,n(L,"class","svelte-1rdpxoy"),n(u,"class","input-group svelte-1rdpxoy"),n(k,"class","char-count svelte-1rdpxoy"),A(k,"limit",l[3].length>=50),n(S,"for","editTranslation"),n(S,"class","svelte-1rdpxoy"),n(W,"id","editTranslation"),n(W,"type","text"),n(W,"placeholder","например: счастливая случайность"),n(W,"maxlength","50"),W.required=!0,n(W,"class","svelte-1rdpxoy"),n(O,"class","input-group svelte-1rdpxoy"),n(re,"class","optional svelte-1rdpxoy"),n(fe,"class","char-count svelte-1rdpxoy"),A(fe,"limit",l[4].length>=95),n(j,"for","editAssociation"),n(j,"class","svelte-1rdpxoy"),n(ae,"id","editAssociation"),n(ae,"placeholder","например: представьте, как вы случайно находите клад"),n(ae,"maxlength","95"),n(ae,"rows","2"),n(ae,"class","svelte-1rdpxoy"),n(U,"class","input-group svelte-1rdpxoy"),n(Be,"for","editImageUrl"),n(Be,"class","svelte-1rdpxoy"),n(V,"id","editImageUrl"),n(V,"type","url"),n(V,"placeholder","https://example.com/image.jpg"),n(V,"class","svelte-1rdpxoy"),n(Me,"class","input-group svelte-1rdpxoy"),n(a,"class","modal-body svelte-1rdpxoy"),n(G,"class","btn-secondary svelte-1rdpxoy"),n(K,"class","btn-primary svelte-1rdpxoy"),K.disabled=ee=!l[2].trim()||l[0]!=="draft"&&!l[3].trim(),n(ce,"class","modal-actions svelte-1rdpxoy"),n(t,"class","modal svelte-1rdpxoy"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1rdpxoy"),n(e,"role","button"),n(e,"tabindex","-1")},m(Q,ue){D(Q,e,ue),s(e,t),s(t,i),s(i,o),s(i,r),s(i,c),s(t,d),s(t,a),s(a,u),s(u,p),s(p,v),s(p,w),s(p,b),s(p,m),s(m,y),s(m,C),s(u,T),s(u,L),Ue(L,l[2]),s(a,N),s(a,O),s(O,S),s(S,I),s(S,k),s(k,R),s(k,E),s(O,q),s(O,W),Ue(W,l[3]),s(a,z),s(a,U),s(U,j),s(j,oe),s(j,re),s(j,he),s(j,fe),s(fe,ke),s(fe,ie),s(U,X),s(U,ae),Ue(ae,l[4]),s(a,ge),s(a,Me),s(Me,Be),s(Me,Ce),s(Me,V),Ue(V,l[5]),s(a,pe),te&&te.m(a,null),s(t,ve),s(t,ce),ne&&ne.m(ce,null),s(ce,Te),s(ce,G),s(ce,Z),s(ce,K),s(K,be),De||(me=[H(c,"click",l[50]),H(L,"input",l[51]),H(W,"input",l[52]),H(ae,"input",l[53]),H(V,"input",l[54]),H(G,"click",l[55]),H(K,"click",l[21]),H(t,"click",$e(l[37])),H(e,"click",l[56]),H(e,"keydown",l[57])],De=!0)},p(Q,ue){ue[0]&32768&&h!==(h=Q[15].toLowerCase()+"")&&$(w,h),ue[0]&4&&_!==(_=Q[2].length+"")&&$(y,_),ue[0]&4&&A(m,"limit",Q[2].length>=35),ue[0]&4&&L.value!==Q[2]&&Ue(L,Q[2]),ue[0]&8&&B!==(B=Q[3].length+"")&&$(R,B),ue[0]&8&&A(k,"limit",Q[3].length>=50),ue[0]&8&&W.value!==Q[3]&&Ue(W,Q[3]),ue[0]&16&&de!==(de=Q[4].length+"")&&$(ke,de),ue[0]&16&&A(fe,"limit",Q[4].length>=95),ue[0]&16&&Ue(ae,Q[4]),ue[0]&32&&V.value!==Q[5]&&Ue(V,Q[5]),Q[5]?te?te.p(Q,ue):(te=fl(Q),te.c(),te.m(a,null)):te&&(te.d(1),te=null),ue[0]&41&&(we=Q[0]==="draft"&&Q[3].trim()&&Q[5].trim()),we?ne||(ne=ul(),ne.c(),ne.m(ce,Te)):ne&&(ne.d(1),ne=null),ue[0]&13&&ee!==(ee=!Q[2].trim()||Q[0]!=="draft"&&!Q[3].trim())&&(K.disabled=ee)},d(Q){Q&&M(e),te&&te.d(),ne&&ne.d(),De=!1,je(me)}}}function fl(l){let e,t,i,o,r;function c(u,p){return u[11]?ai:ri}let d=c(l),a=d(l);return{c(){e=f("div"),a.c(),t=g(),i=f("button"),i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(i,"class","remove-image-btn svelte-1rdpxoy"),n(i,"title","Удалить изображение"),n(e,"class","image-preview-container svelte-1rdpxoy")},m(u,p){D(u,e,p),a.m(e,null),s(e,t),s(e,i),o||(r=H(i,"click",l[24]),o=!0)},p(u,p){d===(d=c(u))&&a?a.p(u,p):(a.d(1),a=d(u),a&&(a.c(),a.m(e,t)))},d(u){u&&M(e),a.d(),o=!1,r()}}}function ri(l){let e,t,i,o;return{c(){e=f("img"),Ve(e.src,t=l[5])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","modal-image-preview svelte-1rdpxoy")},m(r,c){D(r,e,c),i||(o=[H(e,"error",l[22]),H(e,"load",l[23])],i=!0)},p(r,c){c[0]&32&&!Ve(e.src,t=r[5])&&n(e,"src",t)},d(r){r&&M(e),i=!1,je(o)}}}function ai(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Ошибка загрузки</span>',n(e,"class","image-error svelte-1rdpxoy")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function ul(l){let e;return{c(){e=f("span"),e.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
            Карточка будет активирована`,n(e,"class","ready-hint svelte-1rdpxoy")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function ci(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y,C,T,L,N,O,S,I,k,B,R,E,q=l[7].length+"",W,z,U,j,oe,re,he,fe,de,ke=l[8].length+"",ie,X,ae,ge,Me,Be,Ce,V=l[6].length+"",pe,ve,ce,we,Te,G,Z,K,be,ee,De,me,te,ne,Q,ue,F=l[9]&&ll(l),Ae=l[1]&&nl(l),Ne=l[0]==="learned"&&l[6].length>0&&il(l);function Ge(se,Ee){return se[12].length>0?Wn:Fn}let Ie=Ge(l),le=Ie(l),_e=l[10]&&cl(l);return{c(){e=f("div"),t=f("div"),i=f("div"),o=f("h1"),o.textContent="Мои карточки",r=g(),c=f("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',d=g(),a=f("p"),a.textContent="Управляйте вашими словами",u=g(),p=f("div"),v=f("button"),h=f("span"),w=J(l[14]),b=g(),m=f("span"),_=J(l[13]),y=g(),C=P("svg"),T=P("polyline"),L=g(),F&&F.c(),N=g(),O=f("div"),S=f("button"),I=P("svg"),k=P("path"),B=P("path"),R=J(`
      На проработку
      `),E=f("span"),W=J(q),z=g(),U=f("button"),j=P("svg"),oe=P("circle"),re=P("line"),he=P("line"),fe=J(`
      На повторение
      `),de=f("span"),ie=J(ke),X=g(),ae=f("button"),ge=P("svg"),Me=P("polyline"),Be=J(`
      Изученные
      `),Ce=f("span"),pe=J(V),ve=g(),ce=f("div"),we=P("svg"),Te=P("circle"),G=P("line"),Z=g(),K=f("input"),be=g(),Ae&&Ae.c(),ee=g(),Ne&&Ne.c(),De=g(),me=f("div"),le.c(),te=g(),_e&&_e.c(),ne=nt(),n(o,"class","svelte-1rdpxoy"),n(c,"class","export-btn svelte-1rdpxoy"),n(c,"title","Экспорт в JSON"),n(i,"class","header-top svelte-1rdpxoy"),n(a,"class","subtitle svelte-1rdpxoy"),n(t,"class","header svelte-1rdpxoy"),n(h,"class","dropdown-label svelte-1rdpxoy"),n(m,"class","dropdown-badge svelte-1rdpxoy"),n(T,"points","6 9 12 15 18 9"),n(C,"class","dropdown-arrow svelte-1rdpxoy"),n(C,"width","16"),n(C,"height","16"),n(C,"viewBox","0 0 24 24"),n(C,"fill","none"),n(C,"stroke","currentColor"),n(C,"stroke-width","2"),A(C,"open",l[9]),n(v,"class","tab-dropdown-btn svelte-1rdpxoy"),n(p,"class","tabs-mobile svelte-1rdpxoy"),n(k,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(B,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(I,"width","18"),n(I,"height","18"),n(I,"viewBox","0 0 24 24"),n(I,"fill","none"),n(I,"stroke","currentColor"),n(I,"stroke-width","2"),n(E,"class","badge svelte-1rdpxoy"),n(S,"class","tab svelte-1rdpxoy"),A(S,"active",l[0]==="draft"),n(oe,"cx","12"),n(oe,"cy","12"),n(oe,"r","10"),n(re,"x1","12"),n(re,"y1","8"),n(re,"x2","12"),n(re,"y2","12"),n(he,"x1","12"),n(he,"y1","16"),n(he,"x2","12.01"),n(he,"y2","16"),n(j,"width","18"),n(j,"height","18"),n(j,"viewBox","0 0 24 24"),n(j,"fill","none"),n(j,"stroke","currentColor"),n(j,"stroke-width","2"),n(de,"class","badge svelte-1rdpxoy"),n(U,"class","tab svelte-1rdpxoy"),A(U,"active",l[0]==="unlearned"),n(Me,"points","20 6 9 17 4 12"),n(ge,"width","18"),n(ge,"height","18"),n(ge,"viewBox","0 0 24 24"),n(ge,"fill","none"),n(ge,"stroke","currentColor"),n(ge,"stroke-width","2"),n(Ce,"class","badge svelte-1rdpxoy"),n(ae,"class","tab svelte-1rdpxoy"),A(ae,"active",l[0]==="learned"),n(O,"class","tabs-desktop svelte-1rdpxoy"),n(Te,"cx","11"),n(Te,"cy","11"),n(Te,"r","8"),n(G,"x1","21"),n(G,"y1","21"),n(G,"x2","16.65"),n(G,"y2","16.65"),n(we,"class","search-icon svelte-1rdpxoy"),n(we,"width","18"),n(we,"height","18"),n(we,"viewBox","0 0 24 24"),n(we,"fill","none"),n(we,"stroke","currentColor"),n(we,"stroke-width","2"),n(K,"type","text"),n(K,"class","search-input svelte-1rdpxoy"),n(K,"placeholder","Поиск слова..."),n(ce,"class","search-box svelte-1rdpxoy"),n(me,"class","cards-list svelte-1rdpxoy"),n(e,"class","lists-container svelte-1rdpxoy")},m(se,Ee){D(se,e,Ee),s(e,t),s(t,i),s(i,o),s(i,r),s(i,c),s(t,d),s(t,a),s(e,u),s(e,p),s(p,v),s(v,h),s(h,w),s(v,b),s(v,m),s(m,_),s(v,y),s(v,C),s(C,T),s(p,L),F&&F.m(p,null),s(e,N),s(e,O),s(O,S),s(S,I),s(I,k),s(I,B),s(S,R),s(S,E),s(E,W),s(O,z),s(O,U),s(U,j),s(j,oe),s(j,re),s(j,he),s(U,fe),s(U,de),s(de,ie),s(O,X),s(O,ae),s(ae,ge),s(ge,Me),s(ae,Be),s(ae,Ce),s(Ce,pe),s(e,ve),s(e,ce),s(ce,we),s(we,Te),s(we,G),s(ce,Z),s(ce,K),Ue(K,l[1]),s(ce,be),Ae&&Ae.m(ce,null),s(e,ee),Ne&&Ne.m(e,null),s(e,De),s(e,me),le.m(me,null),D(se,te,Ee),_e&&_e.m(se,Ee),D(se,ne,Ee),Q||(ue=[H(c,"click",l[25]),H(v,"click",l[38]),H(S,"click",l[42]),H(U,"click",l[43]),H(ae,"click",l[44]),H(K,"input",l[45])],Q=!0)},p(se,Ee){Ee[0]&16384&&$(w,se[14]),Ee[0]&8192&&$(_,se[13]),Ee[0]&512&&A(C,"open",se[9]),se[9]?F?F.p(se,Ee):(F=ll(se),F.c(),F.m(p,null)):F&&(F.d(1),F=null),Ee[0]&128&&q!==(q=se[7].length+"")&&$(W,q),Ee[0]&1&&A(S,"active",se[0]==="draft"),Ee[0]&256&&ke!==(ke=se[8].length+"")&&$(ie,ke),Ee[0]&1&&A(U,"active",se[0]==="unlearned"),Ee[0]&64&&V!==(V=se[6].length+"")&&$(pe,V),Ee[0]&1&&A(ae,"active",se[0]==="learned"),Ee[0]&2&&K.value!==se[1]&&Ue(K,se[1]),se[1]?Ae?Ae.p(se,Ee):(Ae=nl(se),Ae.c(),Ae.m(ce,null)):Ae&&(Ae.d(1),Ae=null),se[0]==="learned"&&se[6].length>0?Ne?Ne.p(se,Ee):(Ne=il(se),Ne.c(),Ne.m(e,De)):Ne&&(Ne.d(1),Ne=null),Ie===(Ie=Ge(se))&&le?le.p(se,Ee):(le.d(1),le=Ie(se),le&&(le.c(),le.m(me,null))),se[10]?_e?_e.p(se,Ee):(_e=cl(se),_e.c(),_e.m(ne.parentNode,ne)):_e&&(_e.d(1),_e=null)},i:ye,o:ye,d(se){se&&(M(e),M(te),M(ne)),F&&F.d(),Ae&&Ae.d(),Ne&&Ne.d(),le.d(),_e&&_e.d(se),Q=!1,je(ue)}}}function fi(l,e,t){let i,o,r,c,d,a,u,p,v,h,w,b,m;Qe(l,Ze,F=>t(34,w=F)),Qe(l,Je,F=>t(35,b=F)),Qe(l,We,F=>t(36,m=F));let _="draft",y="",C=!1;const T={draft:"На проработку",unlearned:"На повторение",learned:"Изученные"};function L(F){t(0,_=F),t(9,C=!1)}let N=!1,O=null,S="",I="",k="",B="",R=!1,E="",q="",W="",z="";function U(F){Je.moveToStudy(F)}function j(F){Je.deleteCard(F,_)}function oe(F){t(27,O=F),t(2,S=F.word),t(3,I=F.translation||""),t(4,k=F.association||""),t(5,B=F.imageUrl||""),t(28,E=F.word),t(29,q=F.translation||""),t(30,W=F.association||""),t(31,z=F.imageUrl||""),t(11,R=!1),t(10,N=!0)}function re(F=!1){!F&&c&&!confirm("У вас есть несохранённые изменения. Закрыть без сохранения?")||(t(10,N=!1),t(27,O=null))}function he(){t(10,N=!1),t(27,O=null)}function fe(){S.trim()&&O&&(_==="draft"?Je.editDraftCard(O.id,{word:S.trim(),translation:I.trim(),association:k.trim(),imageUrl:B.trim()}):I.trim()&&Je.editCard(O.id,_,{word:S.trim(),translation:I.trim(),association:k.trim(),imageUrl:B.trim()}),he())}function de(){t(11,R=!0)}function ke(){t(11,R=!1)}function ie(){t(5,B="")}function X(){const F={learned:a,unlearned:u,draft:p,language:w||"en",exportedAt:new Date().toISOString()},Ae=JSON.stringify(F,null,2),Ne=new Blob([Ae],{type:"application/json"}),Ge=URL.createObjectURL(Ne),Ie=document.createElement("a");Ie.href=Ge,Ie.download=`flash-words-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(Ge)}function ae(){a.length>0&&confirm(`Отправить все ${a.length} слов на повторение?`)&&Je.moveAllToStudy()}function ge(F){tt.call(this,l,F)}const Me=()=>t(9,C=!C),Be=()=>L("draft"),Ce=()=>L("unlearned"),V=()=>L("learned"),pe=()=>t(0,_="draft"),ve=()=>t(0,_="unlearned"),ce=()=>t(0,_="learned");function we(){y=this.value,t(1,y)}const Te=()=>t(1,y=""),G=F=>oe(F),Z=F=>U(F.id),K=F=>j(F.id),be=()=>re();function ee(){S=this.value,t(2,S)}function De(){I=this.value,t(3,I)}function me(){k=this.value,t(4,k)}function te(){B=this.value,t(5,B)}const ne=()=>re(),Q=()=>re(),ue=F=>F.key==="Escape"&&re();return l.$$.update=()=>{l.$$.dirty[1]&8&&t(15,i=Ye(w)),l.$$.dirty[0]&1&&t(14,o=T[_]),l.$$.dirty[1]&32&&t(33,d=m||"default"),l.$$.dirty[1]&20&&t(7,p=(b.draft||[]).filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(8,u=b.unlearned.filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(6,a=b.learned.filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[0]&449&&t(13,r=_==="draft"?p.length:_==="unlearned"?u.length:a.length),l.$$.dirty[0]&2013265980|l.$$.dirty[1]&1&&(c=O&&(S!==E||I!==q||k!==W||B!==z)),l.$$.dirty[0]&449&&t(32,v=_==="learned"?a:_==="unlearned"?u:p),l.$$.dirty[0]&2|l.$$.dirty[1]&2&&t(12,h=y.trim()?v.filter(F=>F.word.toLowerCase().includes(y.toLowerCase())||F.translation&&F.translation.toLowerCase().includes(y.toLowerCase())):v)},[_,y,S,I,k,B,a,p,u,C,N,R,h,r,o,i,L,U,j,oe,re,fe,de,ke,ie,X,ae,O,E,q,W,z,v,d,w,b,m,ge,Me,Be,Ce,V,pe,ve,ce,we,Te,G,Z,K,be,ee,De,me,te,ne,Q,ue]}class ui extends bt{constructor(e){super(),wt(this,e,fi,ci,at,{},null,[-1,-1,-1])}}function dl(l,e,t){const i=l.slice();return i[52]=e[t],i}function pl(l){let e;return{c(){e=f("span"),n(e,"class","user-indicator svelte-kfa3ws")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function hl(l){let e;return{c(){e=f("span"),n(e,"class","token-indicator svelte-kfa3ws")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function vl(l){let e,t,i;function o(d,a){return d[3].length===0?pi:di}let r=o(l),c=r(l);return{c(){e=f("div"),c.c(),n(e,"class","dictionary-dropdown svelte-kfa3ws")},m(d,a){D(d,e,a),c.m(e,null),t||(i=H(e,"click",$e(l[33])),t=!0)},p(d,a){r===(r=o(d))&&c?c.p(d,a):(c.d(1),c=r(d),c&&(c.c(),c.m(e,null)))},d(d){d&&M(e),c.d(),t=!1,i()}}}function di(l){let e,t=_t(l[3]),i=[];for(let o=0;o<t.length;o+=1)i[o]=_l(dl(l,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=nt()},m(o,r){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(o,r);D(o,e,r)},p(o,r){if(r[0]&4194316){t=_t(o[3]);let c;for(c=0;c<t.length;c+=1){const d=dl(o,t,c);i[c]?i[c].p(d,r):(i[c]=_l(d),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=t.length}},d(o){o&&M(e),Rl(i,o)}}}function pi(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> <p class="svelte-kfa3ws">Загрузите словарь или добавьте карточку слова</p>',n(e,"class","dropdown-empty svelte-kfa3ws")},m(t,i){D(t,e,i)},p:ye,d(t){t&&M(e)}}}function ml(l){let e,t;return{c(){e=P("svg"),t=P("polyline"),n(t,"points","20 6 9 17 4 12"),n(e,"width","16"),n(e,"height","16"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(i,o){D(i,e,o),s(e,t)},d(i){i&&M(e)}}}function _l(l){let e,t,i=l[52].name+"",o,r,c,d,a,u=l[2]===l[52].id&&ml();function p(){return l[35](l[52])}return{c(){e=f("button"),t=f("span"),o=J(i),r=g(),u&&u.c(),c=g(),n(e,"class","dropdown-item svelte-kfa3ws"),A(e,"active",l[2]===l[52].id)},m(v,h){D(v,e,h),s(e,t),s(t,o),s(e,r),u&&u.m(e,null),s(e,c),d||(a=H(e,"click",p),d=!0)},p(v,h){l=v,h[0]&8&&i!==(i=l[52].name+"")&&$(o,i),l[2]===l[52].id?u||(u=ml(),u.c(),u.m(e,c)):u&&(u.d(1),u=null),h[0]&12&&A(e,"active",l[2]===l[52].id)},d(v){v&&M(e),u&&u.d(),d=!1,a()}}}function gl(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y,C,T,L,N,O,S=l[16]&&kl(l),I=l[7]>0&&wl(l);function k(E,q){return E[6]?vi:hi}let B=k(l),R=B(l);return{c(){e=f("div"),t=f("div"),i=f("div"),o=f("h2"),o.textContent="AI Токен",r=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("p"),u.textContent="Введите ваш API ключ для использования AI-функций",p=g(),v=f("div"),h=f("input"),w=g(),S&&S.c(),b=g(),I&&I.c(),m=g(),_=f("div"),y=f("button"),y.textContent="Отмена",C=g(),T=f("button"),R.c(),n(o,"class","svelte-kfa3ws"),n(c,"class","modal-close svelte-kfa3ws"),n(i,"class","modal-header svelte-kfa3ws"),n(u,"class","modal-description svelte-kfa3ws"),n(h,"type","password"),n(h,"class","token-input svelte-kfa3ws"),n(h,"placeholder","sk-..."),n(v,"class","token-input-wrapper svelte-kfa3ws"),n(a,"class","modal-body svelte-kfa3ws"),n(y,"class","cancel-btn svelte-kfa3ws"),n(T,"class","save-btn svelte-kfa3ws"),T.disabled=L=!l[0].trim(),A(T,"saved",l[6]),n(_,"class","modal-footer svelte-kfa3ws"),n(t,"class","modal svelte-kfa3ws"),n(e,"class","modal-overlay svelte-kfa3ws")},m(E,q){D(E,e,q),s(e,t),s(t,i),s(i,o),s(i,r),s(i,c),s(t,d),s(t,a),s(a,u),s(a,p),s(a,v),s(v,h),Ue(h,l[0]),s(v,w),S&&S.m(v,null),s(a,b),I&&I.m(a,null),s(t,m),s(t,_),s(_,y),s(_,C),s(_,T),R.m(T,null),N||(O=[H(c,"click",l[36]),H(h,"input",l[37]),H(y,"click",l[38]),H(T,"click",l[18]),H(t,"click",$e(l[32])),H(e,"click",l[39])],N=!0)},p(E,q){q[0]&1&&h.value!==E[0]&&Ue(h,E[0]),E[16]?S?S.p(E,q):(S=kl(E),S.c(),S.m(v,null)):S&&(S.d(1),S=null),E[7]>0?I?I.p(E,q):(I=wl(E),I.c(),I.m(a,null)):I&&(I.d(1),I=null),B!==(B=k(E))&&(R.d(1),R=B(E),R&&(R.c(),R.m(T,null))),q[0]&1&&L!==(L=!E[0].trim())&&(T.disabled=L),q[0]&64&&A(T,"saved",E[6])},d(E){E&&M(e),S&&S.d(),I&&I.d(),R.d(),N=!1,je(O)}}}function kl(l){let e,t,i;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-kfa3ws"),n(e,"title","Очистить токен")},m(o,r){D(o,e,r),t||(i=H(e,"click",l[19]),t=!0)},p:ye,d(o){o&&M(e),t=!1,i()}}}function wl(l){let e,t,i,o,r,c=Tl(l[7])+"",d;return{c(){e=f("div"),t=f("div"),i=f("span"),i.textContent="Стоимость всех запросов:",o=g(),r=f("span"),d=J(c),n(i,"class","cost-label svelte-kfa3ws"),n(r,"class","cost-value svelte-kfa3ws"),n(t,"class","cost-row svelte-kfa3ws"),n(e,"class","cost-info svelte-kfa3ws")},m(a,u){D(a,e,u),s(e,t),s(t,i),s(t,o),s(t,r),s(r,d)},p(a,u){u[0]&128&&c!==(c=Tl(a[7])+"")&&$(d,c)},d(a){a&&M(e)}}}function hi(l){let e;return{c(){e=J("Сохранить")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function vi(l){let e,t,i;return{c(){e=P("svg"),t=P("polyline"),i=J(`
              Сохранено`),n(t,"points","20 6 9 17 4 12"),n(e,"width","18"),n(e,"height","18"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(o,r){D(o,e,r),s(e,t),D(o,i,r)},d(o){o&&(M(e),M(i))}}}function bl(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y,C,T,L,N,O,S=l[9]&&yl(l),I=l[10]&&Cl(l),k=l[1]&&Sl(l);function B(q,W){return q[11]?_i:mi}let R=B(l),E=R(l);return{c(){e=f("div"),t=f("div"),i=f("div"),o=f("h2"),o.textContent="Загрузить слова",r=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("p"),u.textContent="Введите имя для загрузки персональных слов из файла",p=g(),v=f("div"),h=f("input"),w=g(),S&&S.c(),b=g(),I&&I.c(),m=g(),k&&k.c(),_=g(),y=f("div"),C=f("button"),C.textContent="Отмена",T=g(),L=f("button"),E.c(),n(o,"class","svelte-kfa3ws"),n(c,"class","modal-close svelte-kfa3ws"),n(i,"class","modal-header svelte-kfa3ws"),n(u,"class","modal-description svelte-kfa3ws"),n(h,"type","text"),n(h,"class","token-input user-input svelte-kfa3ws"),n(h,"placeholder","например: mycode"),A(h,"error",l[10]),n(v,"class","token-input-wrapper svelte-kfa3ws"),n(a,"class","modal-body svelte-kfa3ws"),n(C,"class","cancel-btn svelte-kfa3ws"),n(L,"class","save-btn svelte-kfa3ws"),L.disabled=l[11],n(y,"class","modal-footer svelte-kfa3ws"),n(t,"class","modal svelte-kfa3ws"),n(e,"class","modal-overlay svelte-kfa3ws")},m(q,W){D(q,e,W),s(e,t),s(t,i),s(i,o),s(i,r),s(i,c),s(t,d),s(t,a),s(a,u),s(a,p),s(a,v),s(v,h),Ue(h,l[9]),s(v,w),S&&S.m(v,null),s(a,b),I&&I.m(a,null),s(a,m),k&&k.m(a,null),s(t,_),s(t,y),s(y,C),s(y,T),s(y,L),E.m(L,null),N||(O=[H(c,"click",l[40]),H(h,"input",l[41]),H(h,"keydown",l[42]),H(C,"click",l[43]),H(L,"click",l[21]),H(t,"click",$e(l[31])),H(e,"click",l[44])],N=!0)},p(q,W){W[0]&512&&h.value!==q[9]&&Ue(h,q[9]),W[0]&1024&&A(h,"error",q[10]),q[9]?S?S.p(q,W):(S=yl(q),S.c(),S.m(v,null)):S&&(S.d(1),S=null),q[10]?I?I.p(q,W):(I=Cl(q),I.c(),I.m(a,m)):I&&(I.d(1),I=null),q[1]?k?k.p(q,W):(k=Sl(q),k.c(),k.m(a,null)):k&&(k.d(1),k=null),R!==(R=B(q))&&(E.d(1),E=R(q),E&&(E.c(),E.m(L,null))),W[0]&2048&&(L.disabled=q[11])},d(q){q&&M(e),S&&S.d(),I&&I.d(),k&&k.d(),E.d(),N=!1,je(O)}}}function yl(l){let e,t,i;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-kfa3ws"),n(e,"title","Очистить")},m(o,r){D(o,e,r),t||(i=H(e,"click",l[24]),t=!0)},p:ye,d(o){o&&M(e),t=!1,i()}}}function Cl(l){let e,t;return{c(){e=f("p"),t=J(l[10]),n(e,"class","error-text svelte-kfa3ws")},m(i,o){D(i,e,o),s(e,t)},p(i,o){o[0]&1024&&$(t,i[10])},d(i){i&&M(e)}}}function Sl(l){let e,t,i,o,r,c,d,a;return{c(){e=f("div"),t=P("svg"),i=P("polyline"),o=g(),r=f("span"),c=J("Загружены слова: "),d=f("strong"),a=J(l[1]),n(i,"points","20 6 9 17 4 12"),n(t,"width","16"),n(t,"height","16"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(d,"class","svelte-kfa3ws"),n(e,"class","current-user-info svelte-kfa3ws")},m(u,p){D(u,e,p),s(e,t),s(t,i),s(e,o),s(e,r),s(r,c),s(r,d),s(d,a)},p(u,p){p[0]&2&&$(a,u[1])},d(u){u&&M(e)}}}function mi(l){let e;return{c(){e=J("Загрузить")},m(t,i){D(t,e,i)},d(t){t&&M(e)}}}function _i(l){let e,t;return{c(){e=f("span"),t=J(`
              Загрузка...`),n(e,"class","loading-spinner-small svelte-kfa3ws")},m(i,o){D(i,e,o),D(i,t,o)},d(i){i&&(M(e),M(t))}}}function gi(l){let e,t;return e=new ui({}),{c(){Dt(e.$$.fragment)},m(i,o){gt(e,i,o),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){ht(e.$$.fragment,i),t=!1},d(i){kt(e,i)}}}function ki(l){let e,t;return e=new qn({}),{c(){Dt(e.$$.fragment)},m(i,o){gt(e,i,o),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){ht(e.$$.fragment,i),t=!1},d(i){kt(e,i)}}}function wi(l){let e,t;return e=new pn({}),{c(){Dt(e.$$.fragment)},m(i,o){gt(e,i,o),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){ht(e.$$.fragment,i),t=!1},d(i){kt(e,i)}}}function Ll(l){let e,t;return{c(){e=f("span"),t=J(l[13]),n(e,"class","study-badge svelte-kfa3ws")},m(i,o){D(i,e,o),s(e,t)},p(i,o){o[0]&8192&&$(t,i[13])},d(i){i&&M(e)}}}function bi(l){let e,t,i,o,r,c,d,a,u,p,v,h,w,b,m,_,y,C,T,L,N,O,S,I,k,B,R,E,q,W,z,U,j,oe,re,he,fe,de,ke,ie,X,ae,ge,Me,Be,Ce,V,pe,ve,ce,we,Te,G,Z,K,be,ee,De,me,te=l[15]&&pl(),ne=l[16]&&hl(),Q=l[12]&&vl(l),ue=l[5]&&gl(l),F=l[8]&&bl(l);const Ae=[wi,ki,gi],Ne=[];function Ge(le,_e){return le[4]==="add"?0:le[4]==="study"?1:le[4]==="lists"?2:-1}~(ie=Ge(l))&&(X=Ne[ie]=Ae[ie](l));let Ie=l[13]>0&&Ll(l);return{c(){e=f("div"),t=f("div"),i=g(),o=f("nav"),r=f("div"),r.innerHTML='<svg width="32" height="32" viewBox="0 0 100 100"><defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#6366f1"></stop><stop offset="100%" style="stop-color:#a855f7"></stop></linearGradient></defs><rect width="100" height="100" rx="20" fill="url(#logoGrad)"></rect><text x="50" y="65" font-family="Arial" font-size="50" font-weight="bold" fill="white" text-anchor="middle">F</text></svg> <span class="brand-name svelte-kfa3ws">Flash Words</span>',c=g(),d=f("div"),a=f("button"),u=P("svg"),p=P("path"),v=P("circle"),h=g(),te&&te.c(),w=g(),b=f("button"),m=P("svg"),_=P("path"),y=P("polyline"),C=P("polyline"),T=P("polyline"),L=P("polyline"),N=P("line"),O=g(),ne&&ne.c(),S=g(),I=f("div"),k=f("button"),B=P("svg"),R=P("path"),E=P("path"),q=g(),W=f("span"),z=J(l[14]),U=g(),j=P("svg"),oe=P("polyline"),re=g(),Q&&Q.c(),he=g(),ue&&ue.c(),fe=g(),F&&F.c(),de=g(),ke=f("main"),X&&X.c(),ae=g(),ge=f("nav"),Me=f("button"),Me.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg> <span class="svelte-kfa3ws">Добавить</span>',Be=g(),Ce=f("button"),V=f("div"),pe=P("svg"),ve=P("rect"),ce=P("path"),we=P("path"),Te=g(),Ie&&Ie.c(),G=g(),Z=f("span"),Z.textContent="Изучать",K=g(),be=f("button"),be.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> <span class="svelte-kfa3ws">Списки</span>',n(t,"class","background-pattern svelte-kfa3ws"),n(r,"class","nav-brand svelte-kfa3ws"),n(p,"d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"),n(v,"cx","12"),n(v,"cy","7"),n(v,"r","4"),n(u,"width","20"),n(u,"height","20"),n(u,"viewBox","0 0 24 24"),n(u,"fill","none"),n(u,"stroke","currentColor"),n(u,"stroke-width","2"),n(a,"class","user-btn svelte-kfa3ws"),n(a,"title","Загрузить слова пользователя"),A(a,"has-user",l[15]),n(_,"d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"),n(y,"points","7.5 4.21 12 6.81 16.5 4.21"),n(C,"points","7.5 19.79 7.5 14.6 3 12"),n(T,"points","21 12 16.5 14.6 16.5 19.79"),n(L,"points","3.27 6.96 12 12.01 20.73 6.96"),n(N,"x1","12"),n(N,"y1","22.08"),n(N,"x2","12"),n(N,"y2","12"),n(m,"width","20"),n(m,"height","20"),n(m,"viewBox","0 0 24 24"),n(m,"fill","none"),n(m,"stroke","currentColor"),n(m,"stroke-width","2"),n(b,"class","ai-token-btn svelte-kfa3ws"),n(b,"title","Настройка AI токена"),A(b,"has-token",l[16]),n(R,"d","M4 19.5A2.5 2.5 0 0 1 6.5 17H20"),n(E,"d","M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"),n(B,"width","18"),n(B,"height","18"),n(B,"viewBox","0 0 24 24"),n(B,"fill","none"),n(B,"stroke","currentColor"),n(B,"stroke-width","2"),n(W,"class","dictionary-label svelte-kfa3ws"),n(oe,"points","6 9 12 15 18 9"),n(j,"class","dropdown-arrow svelte-kfa3ws"),n(j,"width","14"),n(j,"height","14"),n(j,"viewBox","0 0 24 24"),n(j,"fill","none"),n(j,"stroke","currentColor"),n(j,"stroke-width","2"),A(j,"open",l[12]),n(k,"class","dictionary-btn svelte-kfa3ws"),n(k,"title","Выбрать словарь"),A(k,"has-dictionary",l[2]),n(I,"class","dictionary-selector svelte-kfa3ws"),n(d,"class","nav-stats svelte-kfa3ws"),n(o,"class","navbar svelte-kfa3ws"),n(ke,"class","main-content svelte-kfa3ws"),n(Me,"class","nav-item svelte-kfa3ws"),A(Me,"active",l[4]==="add"),n(ve,"x","2"),n(ve,"y","4"),n(ve,"width","20"),n(ve,"height","16"),n(ve,"rx","2"),n(ce,"d","M12 8v8"),n(we,"d","M8 12h8"),n(pe,"width","28"),n(pe,"height","28"),n(pe,"viewBox","0 0 24 24"),n(pe,"fill","none"),n(pe,"stroke","currentColor"),n(pe,"stroke-width","2"),n(pe,"class","svelte-kfa3ws"),n(V,"class","study-btn-inner svelte-kfa3ws"),n(Z,"class","svelte-kfa3ws"),n(Ce,"class","nav-item study svelte-kfa3ws"),A(Ce,"active",l[4]==="study"),n(be,"class","nav-item svelte-kfa3ws"),A(be,"active",l[4]==="lists"),n(ge,"class","bottom-nav svelte-kfa3ws"),n(e,"class","app svelte-kfa3ws")},m(le,_e){D(le,e,_e),s(e,t),s(e,i),s(e,o),s(o,r),s(o,c),s(o,d),s(d,a),s(a,u),s(u,p),s(u,v),s(a,h),te&&te.m(a,null),s(d,w),s(d,b),s(b,m),s(m,_),s(m,y),s(m,C),s(m,T),s(m,L),s(m,N),s(b,O),ne&&ne.m(b,null),s(d,S),s(d,I),s(I,k),s(k,B),s(B,R),s(B,E),s(k,q),s(k,W),s(W,z),s(k,U),s(k,j),s(j,oe),s(I,re),Q&&Q.m(I,null),s(e,he),ue&&ue.m(e,null),s(e,fe),F&&F.m(e,null),s(e,de),s(e,ke),~ie&&Ne[ie].m(ke,null),s(e,ae),s(e,ge),s(ge,Me),s(ge,Be),s(ge,Ce),s(Ce,V),s(V,pe),s(pe,ve),s(pe,ce),s(pe,we),s(V,Te),Ie&&Ie.m(V,null),s(Ce,G),s(Ce,Z),s(ge,K),s(ge,be),ee=!0,De||(me=[H(a,"click",l[20]),H(b,"click",l[17]),H(k,"click",$e(l[34])),H(Me,"click",l[45]),H(Ce,"click",l[46]),H(be,"click",l[47]),H(e,"click",l[23])],De=!0)},p(le,_e){le[15]?te||(te=pl(),te.c(),te.m(a,null)):te&&(te.d(1),te=null),(!ee||_e[0]&32768)&&A(a,"has-user",le[15]),le[16]?ne||(ne=hl(),ne.c(),ne.m(b,null)):ne&&(ne.d(1),ne=null),(!ee||_e[0]&65536)&&A(b,"has-token",le[16]),(!ee||_e[0]&16384)&&$(z,le[14]),(!ee||_e[0]&4096)&&A(j,"open",le[12]),(!ee||_e[0]&4)&&A(k,"has-dictionary",le[2]),le[12]?Q?Q.p(le,_e):(Q=vl(le),Q.c(),Q.m(I,null)):Q&&(Q.d(1),Q=null),le[5]?ue?ue.p(le,_e):(ue=gl(le),ue.c(),ue.m(e,fe)):ue&&(ue.d(1),ue=null),le[8]?F?F.p(le,_e):(F=bl(le),F.c(),F.m(e,de)):F&&(F.d(1),F=null);let se=ie;ie=Ge(le),ie!==se&&(X&&(Kl(),ht(Ne[se],1,1,()=>{Ne[se]=null}),Xl()),~ie?(X=Ne[ie],X||(X=Ne[ie]=Ae[ie](le),X.c()),lt(X,1),X.m(ke,null)):X=null),(!ee||_e[0]&16)&&A(Me,"active",le[4]==="add"),le[13]>0?Ie?Ie.p(le,_e):(Ie=Ll(le),Ie.c(),Ie.m(V,null)):Ie&&(Ie.d(1),Ie=null),(!ee||_e[0]&16)&&A(Ce,"active",le[4]==="study"),(!ee||_e[0]&16)&&A(be,"active",le[4]==="lists")},i(le){ee||(lt(X),ee=!0)},o(le){ht(X),ee=!1},d(le){le&&M(e),te&&te.d(),ne&&ne.d(),Q&&Q.d(),ue&&ue.d(),F&&F.d(),~ie&&Ne[ie].d(),Ie&&Ie.d(),De=!1,je(me)}}}function Tl(l){return l<.01?`$${l.toFixed(6)}`:l<1?`$${l.toFixed(4)}`:`$${l.toFixed(2)}`}function yi(l,e,t){let i,o,r,c,d,a,u,p,v,h,w,b;Qe(l,Je,G=>t(28,h=G)),Qe(l,We,G=>t(29,w=G)),Qe(l,Xe,G=>t(30,b=G));let m="study",_=!1,y="",C=!1,T=0,L=!1,N="",O="",S=!1,I="",k=!1;function B(){typeof localStorage<"u"&&t(7,T=parseFloat(localStorage.getItem("ai_total_cost")||"0")),t(5,_=!0)}function R(){typeof localStorage<"u"&&(localStorage.setItem("ai_token",y),t(6,C=!0),setTimeout(()=>{t(6,C=!1),t(5,_=!1)},1e3))}function E(){t(0,y=""),typeof localStorage<"u"&&localStorage.removeItem("ai_token")}function q(){t(9,N=I),t(10,O=""),t(8,L=!0)}async function W(){if(!N.trim()){t(1,I=""),typeof localStorage<"u"&&localStorage.removeItem("user_name"),t(8,L=!1);return}t(11,S=!0),t(10,O="");try{const Z=await fetch(`/flash/words/${N.trim()}.json`);if(!Z.ok)throw new Error("Файл не найден");const K=await Z.json(),be=K.language||"en";K.language&&Ze.set(K.language),t(1,I=N.trim()),typeof localStorage<"u"&&localStorage.setItem("user_name",I);let ee;if(be==="en"?ee="default":(ee=I,Je.resetDictionary(ee)),Je.importCards(K,ee),be==="en"){if(!i.find(me=>me.id==="default")){const me=`${Ye("en")} (default)`;Xe.addDictionary("default",me,"en",!1)}We.set("default")}else{const De=`${I} (${Ye(be)})`;Xe.addDictionary(I,De,be,!1),We.set(I)}t(8,L=!1)}catch{t(10,O=`Файл "${N.trim()}.json" не найден`)}finally{t(11,S=!1)}}async function z(G){if(!G){We.set(""),t(12,k=!1);return}const Z=i.find(K=>K.id===G);if(Z){We.set(G),Z.language&&Ze.set(Z.language),t(12,k=!1);return}t(11,S=!0);try{const be=await fetch(`/flash/words/${G}.json`);if(!be.ok)throw new Error("Файл не найден");const ee=await be.json(),De=ee.language||"en";ee.language&&Ze.set(ee.language);let me;if(De==="en"?me="default":(me=G,Je.resetDictionary(me)),Je.importCards(ee,me),De==="en"){if(!i.find(ne=>ne.id==="default")){const ne=`${Ye("en")} (default)`;Xe.addDictionary("default",ne,"en",!1)}We.set("default")}else{const te=`${G} (${Ye(De)})`;Xe.addDictionary(G,te,De,!1),We.set(G)}t(12,k=!1)}catch(K){console.error("Ошибка загрузки словаря:",K),alert(`Ошибка загрузки словаря "${G}"`)}finally{t(11,S=!1)}}function U(G){if(G===o){t(12,k=!1);return}z(G)}Nl(()=>{if(!i.find(Z=>Z.id==="default")){const Z=`${Ye("en")} (default)`;Xe.addDictionary("default",Z,"en",!1),(!o||o==="")&&We.set("default")}if(o){const Z=i.find(K=>K.id===o);Z&&(Z.isImported||o==="default")?Z.language&&Ze.set(Z.language):z(o)}else{We.set("default");const Z=i.find(K=>K.id==="default");Z&&Z.language&&Ze.set(Z.language)}});function j(G){k&&!G.target.closest(".dictionary-selector")&&t(12,k=!1)}function oe(){t(9,N=""),t(1,I=""),typeof localStorage<"u"&&localStorage.removeItem("user_name")}const re=(G,Z)=>G.filter(K=>(K.dictionaryId||"default")===Z);function he(G){tt.call(this,l,G)}function fe(G){tt.call(this,l,G)}function de(G){tt.call(this,l,G)}const ke=()=>t(12,k=!k),ie=G=>U(G.id),X=()=>t(5,_=!1);function ae(){y=this.value,t(0,y)}const ge=()=>t(5,_=!1),Me=()=>t(5,_=!1),Be=()=>t(8,L=!1);function Ce(){N=this.value,t(9,N)}const V=G=>G.key==="Enter"&&W(),pe=()=>t(8,L=!1),ve=()=>t(8,L=!1),ce=()=>t(4,m="add"),we=()=>t(4,m="study"),Te=()=>t(4,m="lists");return l.$$.update=()=>{var G;if(l.$$.dirty[0]&536870912&&t(2,o=w),l.$$.dirty[0]&268435460&&o){const Z={learned:h.learned.filter(K=>(K.dictionaryId||"default")===o),unlearned:h.unlearned.filter(K=>(K.dictionaryId||"default")===o),draft:(h.draft||[]).filter(K=>(K.dictionaryId||"default")===o)};Xe.updateDictionaryData(o,Z)}l.$$.dirty[0]&1073741824&&t(3,i=b),l.$$.dirty[0]&1&&t(16,r=y&&y.length>0),l.$$.dirty[0]&2&&t(15,c=I&&I.length>0),l.$$.dirty[0]&12&&i.length>0&&(!o||o==="")&&(i.find(K=>K.id==="default")?We.set("default"):i.length>0&&We.set(i[0].id)),l.$$.dirty[0]&12&&t(14,d=((G=i.find(Z=>Z.id===o))==null?void 0:G.name)||(i.length>0?"Выберите словарь":"Нет словарей")),l.$$.dirty[0]&268435460&&t(27,a=re(h.learned,o)),l.$$.dirty[0]&268435460&&t(26,u=re(h.unlearned,o)),l.$$.dirty[0]&268435460&&t(25,p=re(h.draft||[],o)),l.$$.dirty[0]&234881024&&a.length+u.length+p.length,l.$$.dirty[0]&67108864&&t(13,v=u.length),l.$$.dirty[0]&33554432&&p.length},[y,I,o,i,m,_,C,T,L,N,O,S,k,v,d,c,r,B,R,E,q,W,U,j,oe,p,u,a,h,w,b,he,fe,de,ke,ie,X,ae,ge,Me,Be,Ce,V,pe,ve,ce,we,Te]}class Ci extends bt{constructor(e){super(),wt(this,e,yi,bi,at,{},null,[-1,-1])}}new Ci({target:document.getElementById("app")});
