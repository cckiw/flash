var Bl=Object.defineProperty;var Al=(l,e,t)=>e in l?Bl(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var xe=(l,e,t)=>Al(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function ye(){}function Ll(l){return l()}function Dt(){return Object.create(null)}function Re(l){l.forEach(Ll)}function Tl(l){return typeof l=="function"}function at(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let ht;function Ve(l,e){return l===e?!0:(ht||(ht=document.createElement("a")),ht.href=e,l===ht.href)}function El(l){return Object.keys(l).length===0}function Ol(l,...e){if(l==null){for(const i of e)i(void 0);return ye}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Qe(l,e,t){l.$$.on_destroy.push(Ol(e,t))}function s(l,e){l.appendChild(e)}function I(l,e,t){l.insertBefore(e,t||null)}function T(l){l.parentNode&&l.parentNode.removeChild(l)}function Ul(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function f(l){return document.createElement(l)}function J(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function H(l){return document.createTextNode(l)}function _(){return H(" ")}function nt(){return H("")}function O(l,e,t,i){return l.addEventListener(e,t,i),()=>l.removeEventListener(e,t,i)}function Hl(l){return function(e){return e.preventDefault(),l.call(this,e)}}function $e(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function n(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Rl(l){return Array.from(l.childNodes)}function $(l,e){e=""+e,l.data!==e&&(l.data=e)}function Ee(l,e){l.value=e??""}function Jl(l,e,t,i){l.style.setProperty(e,t,"")}function N(l,e,t){l.classList.toggle(e,!!t)}class Pl{constructor(e=!1){xe(this,"is_svg",!1);xe(this,"e");xe(this,"n");xe(this,"t");xe(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=J(t.nodeName):this.e=f(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)I(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(T)}}let pt;function dt(l){pt=l}function Il(){if(!pt)throw new Error("Function called outside component initialization");return pt}function Ml(l){Il().$$.on_mount.push(l)}function Fl(l){Il().$$.on_destroy.push(l)}function tt(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const rt=[],jt=[];let ot=[];const Nt=[],Wl=Promise.resolve();let qt=!1;function zl(){qt||(qt=!0,Wl.then(Dl))}function Lt(l){ot.push(l)}const St=new Set;let it=0;function Dl(){if(it!==0)return;const l=pt;do{try{for(;it<rt.length;){const e=rt[it];it++,dt(e),Vl(e.$$)}}catch(e){throw rt.length=0,it=0,e}for(dt(null),rt.length=0,it=0;jt.length;)jt.pop()();for(let e=0;e<ot.length;e+=1){const t=ot[e];St.has(t)||(St.add(t),t())}ot.length=0}while(rt.length);for(;Nt.length;)Nt.pop()();qt=!1,St.clear(),dt(l)}function Vl(l){if(l.fragment!==null){l.update(),Re(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Lt)}}function Gl(l){const e=[],t=[];ot.forEach(i=>l.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),ot=e}const vt=new Set;let et;function Kl(){et={r:0,c:[],p:et}}function Xl(){et.r||Re(et.c),et=et.p}function lt(l,e){l&&l.i&&(vt.delete(l),l.i(e))}function gt(l,e,t,i){if(l&&l.o){if(vt.has(l))return;vt.add(l),et.c.push(()=>{vt.delete(l),i&&(t&&l.d(1),i())}),l.o(e)}else i&&i()}function mt(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Yl(l,e){l.d(1),e.delete(l.key)}function Ql(l,e,t,i,r,o,c,d,a,u,p,h){let g=l.length,w=o.length,b=g;const v={};for(;b--;)v[l[b].key]=b;const m=[],y=new Map,C=new Map,q=[];for(b=w;b--;){const S=h(r,o,b),L=t(S);let k=c.get(L);k?q.push(()=>k.p(S,e)):(k=u(L,S),k.c()),y.set(L,m[b]=k),L in v&&C.set(L,Math.abs(b-v[L]))}const j=new Set,M=new Set;function A(S){lt(S,1),S.m(d,p),c.set(S.key,S),p=S.first,w--}for(;g&&w;){const S=m[w-1],L=l[g-1],k=S.key,D=L.key;S===L?(p=S.first,g--,w--):y.has(D)?!c.has(k)||j.has(k)?A(S):M.has(D)?g--:C.get(k)>C.get(D)?(M.add(k),A(S)):(j.add(D),g--):(a(L,c),g--)}for(;g--;){const S=l[g];y.has(S.key)||a(S,c)}for(;w;)A(m[w-1]);return Re(q),m}function It(l){l&&l.c()}function _t(l,e,t){const{fragment:i,after_update:r}=l.$$;i&&i.m(e,t),Lt(()=>{const o=l.$$.on_mount.map(Ll).filter(Tl);l.$$.on_destroy?l.$$.on_destroy.push(...o):Re(o),l.$$.on_mount=[]}),r.forEach(Lt)}function kt(l,e){const t=l.$$;t.fragment!==null&&(Gl(t.after_update),Re(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Zl(l,e){l.$$.dirty[0]===-1&&(rt.push(l),zl(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function wt(l,e,t,i,r,o,c=null,d=[-1]){const a=pt;dt(l);const u=l.$$={fragment:null,ctx:[],props:o,update:ye,not_equal:r,bound:Dt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Dt(),dirty:d,skip_bound:!1,root:e.target||a.$$.root};c&&c(u.root);let p=!1;if(u.ctx=t?t(l,e.props||{},(h,g,...w)=>{const b=w.length?w[0]:g;return u.ctx&&r(u.ctx[h],u.ctx[h]=b)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](b),p&&Zl(l,h)),g}):[],u.update(),p=!0,Re(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const h=Rl(e.target);u.fragment&&u.fragment.l(h),h.forEach(T)}else u.fragment&&u.fragment.c();e.intro&&lt(l.$$.fragment),_t(l,e.target,e.anchor),Dl()}dt(a)}class bt{constructor(){xe(this,"$$");xe(this,"$$set")}$destroy(){kt(this,1),this.$destroy=ye}$on(e,t){if(!Tl(t))return ye;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!El(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xl);const st=[];function yt(l,e=ye){let t;const i=new Set;function r(d){if(at(l,d)&&(l=d,t)){const a=!st.length;for(const u of i)u[1](),st.push(u,l);if(a){for(let u=0;u<st.length;u+=2)st[u][0](st[u+1]);st.length=0}}}function o(d){r(d(l))}function c(d,a=ye){const u=[d,a];return i.add(u),i.size===1&&(t=e(r,o)||ye),d(l),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:r,update:o,subscribe:c}}const ze="flash-cards-data";function $l(){const l=typeof localStorage<"u"?localStorage.getItem(ze):null,e=l?JSON.parse(l):{learned:[],unlearned:[],draft:[]};e.cards&&e.cards.length>0&&(e.unlearned=[...e.unlearned,...e.cards],delete e.cards),e.draft||(e.draft=[]);const t=a=>a.map(u=>({...u,dictionaryId:u.dictionaryId||"default"}));e.learned=t(e.learned),e.unlearned=t(e.unlearned),e.draft=t(e.draft);const i=new Set,r=a=>a.filter(u=>i.has(u.id)?!1:(i.add(u.id),!0));e.learned=r(e.learned),e.unlearned=r(e.unlearned),e.draft=r(e.draft),typeof localStorage<"u"&&l&&localStorage.setItem(ze,JSON.stringify(e));const{subscribe:o,set:c,update:d}=yt(e);return{subscribe:o,addCard:(a,u,p="",h="",g="default")=>{d(w=>{const b={id:Date.now(),word:a,translation:u,association:p,imageUrl:h,dictionaryId:g,createdAt:new Date().toISOString()},v={...w,unlearned:[...w.unlearned,b]};return localStorage.setItem(ze,JSON.stringify(v)),v})},markAsLearned:a=>{d(u=>{const p=u.unlearned.find(g=>g.id===a);if(!p)return u;const h={...u,unlearned:u.unlearned.filter(g=>g.id!==a),learned:[...u.learned,{...p,learnedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(h)),h})},markAsUnlearned:a=>{d(u=>{const p=u.unlearned.find(g=>g.id===a);if(!p)return u;const h={...u,unlearned:[...u.unlearned.filter(g=>g.id!==a),{...p,reviewedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(h)),h})},moveToStudy:a=>{d(u=>{const p=u.learned.find(g=>g.id===a);if(!p)return u;const h={...u,learned:u.learned.filter(g=>g.id!==a),unlearned:[...u.unlearned,p]};return localStorage.setItem(ze,JSON.stringify(h)),h})},moveAllToStudy:()=>{d(a=>{if(a.learned.length===0)return a;const u={...a,learned:[],unlearned:[...a.unlearned,...a.learned]};return localStorage.setItem(ze,JSON.stringify(u)),u})},deleteCard:(a,u="unlearned")=>{d(p=>{const h={...p,[u]:p[u].filter(g=>g.id!==a)};return localStorage.setItem(ze,JSON.stringify(h)),h})},editCard:(a,u,p)=>{d(h=>{const g={...h,[u]:h[u].map(w=>w.id===a?{...w,...p,updatedAt:new Date().toISOString()}:w)};return localStorage.setItem(ze,JSON.stringify(g)),g})},addDraftCards:(a,u="default")=>{d(p=>{const h=new Set([...p.unlearned.map(v=>v.word.toLowerCase()),...p.learned.map(v=>v.word.toLowerCase()),...p.draft.map(v=>v.word.toLowerCase())]);let g=0;const w=a.filter(v=>v.trim()&&!h.has(v.trim().toLowerCase())).map(v=>({id:`draft_${Date.now()}_${g++}_${Math.random().toString(36).substr(2,9)}`,word:v.trim(),translation:"",association:"",imageUrl:"",dictionaryId:u,createdAt:new Date().toISOString(),isDraft:!0})),b={...p,draft:[...p.draft,...w]};return localStorage.setItem(ze,JSON.stringify(b)),b})},activateCard:a=>{d(u=>{const p=u.draft.find(b=>b.id===a);if(!p)return u;const{isDraft:h,...g}=p,w={...u,draft:u.draft.filter(b=>b.id!==a),unlearned:[...u.unlearned,{...g,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(w)),w})},editDraftCard:(a,u)=>{d(p=>{var b,v;const h=p.draft.find(m=>m.id===a);if(!h)return p;const g={...h,...u,updatedAt:new Date().toISOString()};if(((b=g.translation)==null?void 0:b.trim())&&((v=g.imageUrl)==null?void 0:v.trim())){const{isDraft:m,...y}=g,C={...p,draft:p.draft.filter(q=>q.id!==a),unlearned:[...p.unlearned,{...y,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(C)),C}else{const m={...p,draft:p.draft.map(y=>y.id===a?g:y)};return localStorage.setItem(ze,JSON.stringify(m)),m}})},reset:()=>{const a={learned:[],unlearned:[],draft:[]};localStorage.setItem(ze,JSON.stringify(a)),c(a)},resetDictionary:a=>{d(u=>{const p={learned:u.learned.filter(h=>(h.dictionaryId||"default")!==a),unlearned:u.unlearned.filter(h=>(h.dictionaryId||"default")!==a),draft:u.draft.filter(h=>(h.dictionaryId||"default")!==a)};return localStorage.setItem(ze,JSON.stringify(p)),p})},importCards:(a,u)=>{d(p=>{const h=a.unlearned||[],g=a.learned||[],w=a.draft||[],b=S=>S.map(L=>({...L,dictionaryId:u||"default"})),v=b(h),m=b(g),y=b(w),C=new Set([...p.unlearned.map(S=>S.word.toLowerCase()),...p.learned.map(S=>S.word.toLowerCase()),...p.draft.map(S=>S.word.toLowerCase())]),q=v.filter(S=>!C.has(S.word.toLowerCase())),j=m.filter(S=>!C.has(S.word.toLowerCase())),M=y.filter(S=>!C.has(S.word.toLowerCase())),A={learned:[...p.learned,...j],unlearned:[...p.unlearned,...q],draft:[...p.draft,...M]};return localStorage.setItem(ze,JSON.stringify(A)),A})}}}const He=$l(),en={en:"Английский",pt:"Португальский",es:"Испанский"},tn={en:"English",pt:"Portuguese",es:"Spanish"},ln=typeof localStorage<"u"&&localStorage.getItem("target_language")||"en",Ze=yt(ln);Ze.subscribe(l=>{typeof localStorage<"u"&&localStorage.setItem("target_language",l)});function Ye(l){return en[l]||l}function nn(l){return tn[l]||l}const ut="loaded-dictionaries",Tt="current_dictionary",sn=typeof localStorage<"u"&&localStorage.getItem(Tt)||"",We=yt(sn);We.subscribe(l=>{typeof localStorage<"u"&&(l?localStorage.setItem(Tt,l):localStorage.removeItem(Tt))});function rn(){const l=typeof localStorage<"u"?localStorage.getItem(ut):null,e=l?JSON.parse(l):[],{subscribe:t,set:i,update:r}=yt(e);return{subscribe:t,addDictionary:(o,c,d,a=!1)=>{r(u=>{if(u.find(w=>w.id===o))return u.map(w=>w.id===o?{...w,name:c,language:d,isImported:a}:w);const h={id:o,name:c,language:d,isImported:a},g=[...u,h];return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(g)),g})},removeDictionary:o=>{r(c=>{const d=c.filter(a=>a.id!==o);return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(d)),d})},clear:()=>{typeof localStorage<"u"&&localStorage.removeItem(ut),i([])},updateDictionaryData:(o,c)=>{r(d=>{const a=d.map(u=>u.id===o?{...u,data:c}:u);return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(a)),a})}}}const Xe=rn();function on(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-1wg5uvi"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg> <span class="svelte-1wg5uvi">Нажмите, чтобы добавить изображение</span>',n(e,"class","image-placeholder svelte-1wg5uvi")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function an(l){let e,t,i,r;return{c(){e=f("img"),Ve(e.src,t=l[4])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","preview-image svelte-1wg5uvi")},m(o,c){I(o,e,c),i||(r=O(e,"error",l[21]),i=!0)},p(o,c){c[0]&16&&!Ve(e.src,t=o[4])&&n(e,"src",t)},d(o){o&&T(e),i=!1,r()}}}function Bt(l){let e;return{c(){e=f("div"),e.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
      Карточка добавлена!`,n(e,"class","success-toast svelte-1wg5uvi")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function At(l){let e,t,i,r,o,c=l[9]>0?`Импортировано ${l[9]} карточек!`:"Новых карточек не найдено",d;return{c(){e=f("div"),t=J("svg"),i=J("polyline"),r=J("line"),o=_(),d=H(c),n(i,"points","17 8 12 3 7 8"),n(r,"x1","12"),n(r,"y1","3"),n(r,"x2","12"),n(r,"y2","15"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast import svelte-1wg5uvi")},m(a,u){I(a,e,u),s(e,t),s(t,i),s(t,r),s(e,o),s(e,d)},p(a,u){u[0]&512&&c!==(c=a[9]>0?`Импортировано ${a[9]} карточек!`:"Новых карточек не найдено")&&$(d,c)},d(a){a&&T(e)}}}function Et(l){let e,t,i,r,o,c,d,a,u,p=l[12]>0?`Добавлено ${l[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)",h;return{c(){e=f("div"),t=J("svg"),i=J("line"),r=J("line"),o=J("line"),c=J("line"),d=J("line"),a=J("line"),u=_(),h=H(p),n(i,"x1","8"),n(i,"y1","6"),n(i,"x2","21"),n(i,"y2","6"),n(r,"x1","8"),n(r,"y1","12"),n(r,"x2","21"),n(r,"y2","12"),n(o,"x1","8"),n(o,"y1","18"),n(o,"x2","21"),n(o,"y2","18"),n(c,"x1","3"),n(c,"y1","6"),n(c,"x2","3.01"),n(c,"y2","6"),n(d,"x1","3"),n(d,"y1","12"),n(d,"x2","3.01"),n(d,"y2","12"),n(a,"x1","3"),n(a,"y1","18"),n(a,"x2","3.01"),n(a,"y2","18"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast bulk svelte-1wg5uvi")},m(g,w){I(g,e,w),s(e,t),s(t,i),s(t,r),s(t,o),s(t,c),s(t,d),s(t,a),s(e,u),s(e,h)},p(g,w){w[0]&4096&&p!==(p=g[12]>0?`Добавлено ${g[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)")&&$(h,p)},d(g){g&&T(e)}}}function Ot(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y,C,q,j,M,A,S,L=l[7]&&Ut(l),k=l[4]&&Ht(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="Добавить изображение",o=_(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=_(),a=f("div"),u=f("div"),p=f("label"),p.textContent="Ссылка на изображение",h=_(),g=f("input"),w=_(),L&&L.c(),b=_(),v=f("div"),k&&k.c(),m=_(),y=f("button"),y.textContent="Отмена",C=_(),q=f("button"),j=H("Сохранить"),n(r,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(p,"for","imageUrl"),n(p,"class","svelte-1wg5uvi"),n(g,"id","imageUrl"),n(g,"type","url"),n(g,"placeholder","https://example.com/image.jpg"),n(g,"class","svelte-1wg5uvi"),n(u,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(y,"class","btn-secondary svelte-1wg5uvi"),n(q,"class","btn-primary svelte-1wg5uvi"),q.disabled=M=l[8]&&l[7],n(v,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(D,U){I(D,e,U),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(u,p),s(u,h),s(u,g),Ee(g,l[7]),s(a,w),L&&L.m(a,null),s(t,b),s(t,v),k&&k.m(v,null),s(v,m),s(v,y),s(v,C),s(v,q),s(q,j),A||(S=[O(c,"click",l[35]),O(g,"input",l[36]),O(y,"click",l[37]),O(q,"click",l[19]),O(t,"click",$e(l[30])),O(e,"click",l[38]),O(e,"keydown",l[39])],A=!0)},p(D,U){U[0]&128&&g.value!==D[7]&&Ee(g,D[7]),D[7]?L?L.p(D,U):(L=Ut(D),L.c(),L.m(a,null)):L&&(L.d(1),L=null),D[4]?k?k.p(D,U):(k=Ht(D),k.c(),k.m(v,m)):k&&(k.d(1),k=null),U[0]&384&&M!==(M=D[8]&&D[7])&&(q.disabled=M)},d(D){D&&T(e),L&&L.d(),k&&k.d(),A=!1,Re(S)}}}function Ut(l){let e;function t(o,c){return o[8]?fn:cn}let i=t(l),r=i(l);return{c(){e=f("div"),r.c(),n(e,"class","image-preview-container svelte-1wg5uvi")},m(o,c){I(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null)))},d(o){o&&T(e),r.d()}}}function cn(l){let e,t,i,r;return{c(){e=f("img"),Ve(e.src,t=l[7])||n(e,"src",t),n(e,"alt","Превью изображения"),n(e,"class","modal-image-preview svelte-1wg5uvi")},m(o,c){I(o,e,c),i||(r=[O(e,"error",l[21]),O(e,"load",l[22])],i=!0)},p(o,c){c[0]&128&&!Ve(e.src,t=o[7])&&n(e,"src",t)},d(o){o&&T(e),i=!1,Re(r)}}}function fn(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Не удалось загрузить изображение</span>',n(e,"class","image-error svelte-1wg5uvi")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function Ht(l){let e,t,i;return{c(){e=f("button"),e.textContent="Удалить",n(e,"class","btn-secondary danger svelte-1wg5uvi")},m(r,o){I(r,e,o),t||(i=O(e,"click",l[20]),t=!0)},p:ye,d(r){r&&T(e),t=!1,i()}}}function Rt(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y,C,q,j,M,A,S,L,k=(l[15]>0?l[15]:"")+"",D,U,B=l[15]===1?"слово":l[15]>1&&l[15]<5?"слова":l[15]>=5?"слов":"",P,W,z,E,R=l[15]>0&&Jt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="Загрузить список слов",o=_(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=_(),a=f("div"),u=f("div"),u.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg> <p class="svelte-1wg5uvi">Введите слова списком — каждое слово на новой строке. Слова будут добавлены в раздел &quot;На проработку&quot;, где вы сможете добавить перевод и изображение.</p>',p=_(),h=f("div"),g=f("label"),w=H(`Слова
            `),R&&R.c(),b=_(),v=f("textarea"),m=_(),y=f("div"),C=f("button"),C.textContent="Отмена",q=_(),j=f("button"),M=J("svg"),A=J("line"),S=J("line"),L=H(`
          Добавить `),D=H(k),U=_(),P=H(B),n(r,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(u,"class","bulk-info svelte-1wg5uvi"),n(g,"for","bulkWords"),n(g,"class","svelte-1wg5uvi"),n(v,"id","bulkWords"),n(v,"placeholder",`serendipity
ephemeral
ubiquitous
eloquent
resilient`),n(v,"rows","10"),n(v,"class","bulk-textarea svelte-1wg5uvi"),n(h,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(C,"class","btn-secondary svelte-1wg5uvi"),n(A,"x1","12"),n(A,"y1","5"),n(A,"x2","12"),n(A,"y2","19"),n(S,"x1","5"),n(S,"y1","12"),n(S,"x2","19"),n(S,"y2","12"),n(M,"width","18"),n(M,"height","18"),n(M,"viewBox","0 0 24 24"),n(M,"fill","none"),n(M,"stroke","currentColor"),n(M,"stroke-width","2"),n(j,"class","btn-primary svelte-1wg5uvi"),j.disabled=W=l[15]===0,n(y,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal bulk-modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(re,oe){I(re,e,oe),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(a,p),s(a,h),s(h,g),s(g,w),R&&R.m(g,null),s(h,b),s(h,v),Ee(v,l[0]),s(t,m),s(t,y),s(y,C),s(y,q),s(y,j),s(j,M),s(M,A),s(M,S),s(j,L),s(j,D),s(j,U),s(j,P),z||(E=[O(c,"click",l[26]),O(v,"input",l[40]),O(C,"click",l[26]),O(j,"click",l[27]),O(t,"click",$e(l[29])),O(e,"click",l[26]),O(e,"keydown",l[41])],z=!0)},p(re,oe){re[15]>0?R?R.p(re,oe):(R=Jt(re),R.c(),R.m(g,null)):R&&(R.d(1),R=null),oe[0]&1&&Ee(v,re[0]),oe[0]&32768&&k!==(k=(re[15]>0?re[15]:"")+"")&&$(D,k),oe[0]&32768&&B!==(B=re[15]===1?"слово":re[15]>1&&re[15]<5?"слова":re[15]>=5?"слов":"")&&$(P,B),oe[0]&32768&&W!==(W=re[15]===0)&&(j.disabled=W)},d(re){re&&T(e),R&&R.d(),z=!1,Re(E)}}}function Jt(l){let e,t,i,r=l[15]===1?"слово":l[15]<5?"слова":"слов",o;return{c(){e=f("span"),t=H(l[15]),i=_(),o=H(r),n(e,"class","word-count svelte-1wg5uvi")},m(c,d){I(c,e,d),s(e,t),s(e,i),s(e,o)},p(c,d){d[0]&32768&&$(t,c[15]),d[0]&32768&&r!==(r=c[15]===1?"слово":c[15]<5?"слова":"слов")&&$(o,r)},d(c){c&&T(e)}}}function un(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y,C,q,j=l[16].toLowerCase()+"",M,A,S,L=l[1].length+"",k,D,U,B,P,W,z,E,R,re=l[2].length+"",oe,ge,fe,de,ke,ie,X,ae,_e,Te,De,Ce=l[3].length+"",V,pe,he,ce,we,qe,G,Z,K,be,ee,Ie,ve,te,ne=(l[1]||"Слово")+"",Q,ue,F,Ne=(l[2]||"Перевод")+"",Me,Ge,Le,le,me,se,Be,ct,Y;function Fe(x,je){return x[4]?an:on}let Ke=Fe(l),Je=Ke(l),Pe=l[5]&&Bt(),Se=l[10]&&At(l),Ue=l[13]&&Et(l),Ae=l[6]&&Ot(l),Oe=l[11]&&Rt(l);return{c(){e=f("input"),t=_(),i=f("div"),r=f("div"),o=f("div"),c=f("h1"),c.textContent="Новая карточка",d=_(),a=f("div"),u=f("button"),u.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',p=_(),h=f("button"),h.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>',g=_(),w=f("p"),w.textContent="Добавьте слово для изучения",b=_(),v=f("div"),m=f("form"),y=f("div"),C=f("label"),q=H("Слово ("),M=H(j),A=H(`)
          `),S=f("span"),k=H(L),D=H("/35"),U=_(),B=f("input"),P=_(),W=f("div"),z=f("label"),E=H(`Перевод
          `),R=f("span"),oe=H(re),ge=H("/50"),fe=_(),de=f("input"),ke=_(),ie=f("div"),X=f("label"),ae=H(`Ассоциация 
          `),_e=f("span"),_e.textContent="(необязательно)",Te=_(),De=f("span"),V=H(Ce),pe=H("/95"),he=_(),ce=f("textarea"),we=_(),qe=f("button"),qe.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        Добавить карточку`,G=_(),Z=f("div"),K=f("span"),K.textContent="Превью карточки",be=_(),ee=f("button"),Je.c(),Ie=_(),ve=f("div"),te=f("div"),Q=H(ne),ue=_(),F=f("div"),Me=H(Ne),Ge=_(),Pe&&Pe.c(),Le=_(),Se&&Se.c(),le=_(),Ue&&Ue.c(),me=_(),Ae&&Ae.c(),se=_(),Oe&&Oe.c(),Be=nt(),n(e,"type","file"),n(e,"accept",".json"),Jl(e,"display","none"),n(e,"class","svelte-1wg5uvi"),n(c,"class","svelte-1wg5uvi"),n(u,"type","button"),n(u,"class","import-btn bulk svelte-1wg5uvi"),n(u,"title","Загрузить список слов"),n(h,"type","button"),n(h,"class","import-btn svelte-1wg5uvi"),n(h,"title","Импорт из JSON"),n(a,"class","header-actions svelte-1wg5uvi"),n(o,"class","header-top svelte-1wg5uvi"),n(w,"class","subtitle svelte-1wg5uvi"),n(r,"class","header svelte-1wg5uvi"),n(S,"class","char-count svelte-1wg5uvi"),N(S,"limit",l[1].length>=35),n(C,"for","word"),n(C,"class","svelte-1wg5uvi"),n(B,"id","word"),n(B,"type","text"),n(B,"placeholder","например: serendipity"),n(B,"maxlength","35"),B.required=!0,n(B,"class","svelte-1wg5uvi"),n(y,"class","input-group svelte-1wg5uvi"),n(R,"class","char-count svelte-1wg5uvi"),N(R,"limit",l[2].length>=50),n(z,"for","translation"),n(z,"class","svelte-1wg5uvi"),n(de,"id","translation"),n(de,"type","text"),n(de,"placeholder","например: счастливая случайность"),n(de,"maxlength","50"),de.required=!0,n(de,"class","svelte-1wg5uvi"),n(W,"class","input-group svelte-1wg5uvi"),n(_e,"class","optional svelte-1wg5uvi"),n(De,"class","char-count svelte-1wg5uvi"),N(De,"limit",l[3].length>=95),n(X,"for","association"),n(X,"class","svelte-1wg5uvi"),n(ce,"id","association"),n(ce,"placeholder","например: представьте, как вы случайно находите клад под деревом"),n(ce,"maxlength","95"),n(ce,"rows","2"),n(ce,"class","svelte-1wg5uvi"),n(ie,"class","input-group svelte-1wg5uvi"),n(qe,"type","submit"),n(qe,"class","submit-btn svelte-1wg5uvi"),n(m,"class","form svelte-1wg5uvi"),n(K,"class","preview-label svelte-1wg5uvi"),n(te,"class","preview-word svelte-1wg5uvi"),n(F,"class","preview-translation svelte-1wg5uvi"),n(ve,"class","card-content-preview svelte-1wg5uvi"),n(ee,"type","button"),n(ee,"class","card-preview svelte-1wg5uvi"),N(ee,"has-image",l[4]),n(Z,"class","card-preview-wrapper svelte-1wg5uvi"),n(v,"class","card-editor svelte-1wg5uvi"),n(i,"class","add-card-container svelte-1wg5uvi")},m(x,je){I(x,e,je),l[31](e),I(x,t,je),I(x,i,je),s(i,r),s(r,o),s(o,c),s(o,d),s(o,a),s(a,u),s(a,p),s(a,h),s(r,g),s(r,w),s(i,b),s(i,v),s(v,m),s(m,y),s(y,C),s(C,q),s(C,M),s(C,A),s(C,S),s(S,k),s(S,D),s(y,U),s(y,B),Ee(B,l[1]),s(m,P),s(m,W),s(W,z),s(z,E),s(z,R),s(R,oe),s(R,ge),s(W,fe),s(W,de),Ee(de,l[2]),s(m,ke),s(m,ie),s(ie,X),s(X,ae),s(X,_e),s(X,Te),s(X,De),s(De,V),s(De,pe),s(ie,he),s(ie,ce),Ee(ce,l[3]),s(m,we),s(m,qe),s(v,G),s(v,Z),s(Z,K),s(Z,be),s(Z,ee),Je.m(ee,null),s(ee,Ie),s(ee,ve),s(ve,te),s(te,Q),s(ve,ue),s(ve,F),s(F,Me),s(i,Ge),Pe&&Pe.m(i,null),s(i,Le),Se&&Se.m(i,null),s(i,le),Ue&&Ue.m(i,null),I(x,me,je),Ae&&Ae.m(x,je),I(x,se,je),Oe&&Oe.m(x,je),I(x,Be,je),ct||(Y=[O(e,"change",l[24]),O(u,"click",l[25]),O(h,"click",l[23]),O(B,"input",l[32]),O(de,"input",l[33]),O(ce,"input",l[34]),O(m,"submit",Hl(l[17])),O(ee,"click",l[18])],ct=!0)},p(x,je){je[0]&65536&&j!==(j=x[16].toLowerCase()+"")&&$(M,j),je[0]&2&&L!==(L=x[1].length+"")&&$(k,L),je[0]&2&&N(S,"limit",x[1].length>=35),je[0]&2&&B.value!==x[1]&&Ee(B,x[1]),je[0]&4&&re!==(re=x[2].length+"")&&$(oe,re),je[0]&4&&N(R,"limit",x[2].length>=50),je[0]&4&&de.value!==x[2]&&Ee(de,x[2]),je[0]&8&&Ce!==(Ce=x[3].length+"")&&$(V,Ce),je[0]&8&&N(De,"limit",x[3].length>=95),je[0]&8&&Ee(ce,x[3]),Ke===(Ke=Fe(x))&&Je?Je.p(x,je):(Je.d(1),Je=Ke(x),Je&&(Je.c(),Je.m(ee,Ie))),je[0]&2&&ne!==(ne=(x[1]||"Слово")+"")&&$(Q,ne),je[0]&4&&Ne!==(Ne=(x[2]||"Перевод")+"")&&$(Me,Ne),je[0]&16&&N(ee,"has-image",x[4]),x[5]?Pe||(Pe=Bt(),Pe.c(),Pe.m(i,Le)):Pe&&(Pe.d(1),Pe=null),x[10]?Se?Se.p(x,je):(Se=At(x),Se.c(),Se.m(i,le)):Se&&(Se.d(1),Se=null),x[13]?Ue?Ue.p(x,je):(Ue=Et(x),Ue.c(),Ue.m(i,null)):Ue&&(Ue.d(1),Ue=null),x[6]?Ae?Ae.p(x,je):(Ae=Ot(x),Ae.c(),Ae.m(se.parentNode,se)):Ae&&(Ae.d(1),Ae=null),x[11]?Oe?Oe.p(x,je):(Oe=Rt(x),Oe.c(),Oe.m(Be.parentNode,Be)):Oe&&(Oe.d(1),Oe=null)},i:ye,o:ye,d(x){x&&(T(e),T(t),T(i),T(me),T(se),T(Be)),l[31](null),Je.d(),Pe&&Pe.d(),Se&&Se.d(),Ue&&Ue.d(),Ae&&Ae.d(x),Oe&&Oe.d(x),ct=!1,Re(Y)}}}function dn(l,e,t){let i,r,o,c,d;Qe(l,He,V=>t(42,o=V)),Qe(l,Xe,V=>t(43,c=V)),Qe(l,Ze,V=>t(28,d=V));let a="",u="",p="",h="",g=!1,w=!1,b="",v=!1,m=0,y=!1,C=!1,q="",j=0,M=!1;function A(){if(a.trim()&&u.trim()){let V=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"";if(!(c.length>0)||!V||V===""){const ce=`${Ye("en")} (default)`;Xe.addDictionary("default",ce,"en",!1),We.set("default"),V="default"}const he=V||"default";He.addCard(a.trim(),u.trim(),p.trim(),h.trim(),he),t(1,a=""),t(2,u=""),t(3,p=""),t(4,h=""),t(5,g=!0),setTimeout(()=>t(5,g=!1),2e3)}}function S(){t(7,b=h),t(8,v=!1),t(6,w=!0)}function L(){b.trim()&&t(4,h=b.trim()),t(6,w=!1)}function k(){t(4,h=""),t(7,b=""),t(6,w=!1)}function D(){t(8,v=!0)}function U(){t(8,v=!1)}let B;function P(){B.click()}function W(V){const pe=V.target.files[0];if(!pe)return;const he=new FileReader;he.onload=ce=>{var we,qe,G;try{const Z=JSON.parse(ce.target.result),K=pe.name.replace(/\.json$/i,""),be=Z.language||"en";Z.language&&Ze.set(Z.language);let ee;be==="en"?ee="default":(ee=K,He.resetDictionary(ee));const Ie=(((we=o.learned)==null?void 0:we.length)||0)+(((qe=o.unlearned)==null?void 0:qe.length)||0)+(((G=o.draft)==null?void 0:G.length)||0);if(He.importCards(Z,ee),be==="en"){if(!c.find(te=>te.id==="default")){const te=`${Ye("en")} (default)`;Xe.addDictionary("default",te,"en",!0)}We.set("default")}else{const ve=`${K} (${Ye(be)})`;Xe.addDictionary(K,ve,be,!0),We.set(K)}setTimeout(()=>{var te,ne,Q;const ve=(((te=o.learned)==null?void 0:te.length)||0)+(((ne=o.unlearned)==null?void 0:ne.length)||0)+(((Q=o.draft)==null?void 0:Q.length)||0);t(9,m=ve-Ie),t(10,y=!0),setTimeout(()=>t(10,y=!1),3e3)},100)}catch{alert("Ошибка чтения файла. Убедитесь, что это корректный JSON файл.")}},he.readAsText(pe),V.target.value=""}function z(){t(0,q=""),t(11,C=!0)}function E(){t(11,C=!1),t(0,q="")}function R(){var pe;const V=q.split(`
`).map(he=>he.trim()).filter(he=>he.length>0);if(V.length>0){const he=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"default";if(he===""){const qe=`${Ye("en")} (default)`;Xe.addDictionary("default",qe,"en",!1),We.set("default")}const ce=he,we=((pe=o.draft)==null?void 0:pe.length)||0;He.addDraftCards(V,ce),setTimeout(()=>{var G;const qe=((G=o.draft)==null?void 0:G.length)||0;t(12,j=qe-we),t(13,M=!0),setTimeout(()=>t(13,M=!1),3e3)},100)}E()}function re(V){tt.call(this,l,V)}function oe(V){tt.call(this,l,V)}function ge(V){jt[V?"unshift":"push"](()=>{B=V,t(14,B)})}function fe(){a=this.value,t(1,a)}function de(){u=this.value,t(2,u)}function ke(){p=this.value,t(3,p)}const ie=()=>t(6,w=!1);function X(){b=this.value,t(7,b)}const ae=()=>t(6,w=!1),_e=()=>t(6,w=!1),Te=V=>V.key==="Escape"&&t(6,w=!1);function De(){q=this.value,t(0,q)}const Ce=V=>V.key==="Escape"&&E();return l.$$.update=()=>{l.$$.dirty[0]&268435456&&t(16,i=Ye(d)),l.$$.dirty[0]&1&&t(15,r=q.split(`
`).filter(V=>V.trim().length>0).length)},[q,a,u,p,h,g,w,b,v,m,y,C,j,M,B,r,i,A,S,L,k,D,U,P,W,z,E,R,d,re,oe,ge,fe,de,ke,ie,X,ae,_e,Te,De,Ce]}class pn extends bt{constructor(e){super(),wt(this,e,dn,un,at,{},null,[-1,-1])}}function gn(l){let e;return{c(){e=H("Добавьте карточки для начала")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function hn(l){let e;return{c(){e=H("Нет карточек с изображениями")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function vn(l){let e,t,i=l[2].length+"",r,o,c,d=l[0]&&l[2].length<l[3].length&&Pt();return{c(){e=H("Осталось карточек: "),t=f("span"),r=H(i),o=_(),d&&d.c(),c=nt(),n(t,"class","count svelte-1j0aegq")},m(a,u){I(a,e,u),I(a,t,u),s(t,r),I(a,o,u),d&&d.m(a,u),I(a,c,u)},p(a,u){u[0]&4&&i!==(i=a[2].length+"")&&$(r,i),a[0]&&a[2].length<a[3].length?d||(d=Pt(),d.c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null)},d(a){a&&(T(e),T(t),T(o),T(c)),d&&d.d(a)}}}function Pt(l){let e;return{c(){e=f("span"),e.textContent="(с изображениями)",n(e,"class","filter-note svelte-1j0aegq")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function Ft(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y,C,q,j,M,A,S,L,k,D,U,B=!l[4]&&Wt();function P(E,R){return E[4]?mn:_n}let W=P(l),z=W(l);return{c(){e=f("div"),t=f("div"),i=f("button"),i.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',r=_(),o=f("h2"),o.textContent="Выбери тип упражнения",c=_(),d=f("div"),a=f("button"),u=f("span"),p=_(),h=f("div"),h.innerHTML='<span class="option-title svelte-1j0aegq">Flash Cards</span> <span class="option-desc svelte-1j0aegq">Классические карточки с переворотом</span>',g=_(),w=f("button"),b=f("span"),v=_(),m=f("div"),m.innerHTML='<span class="option-title svelte-1j0aegq">Только изображения</span> <span class="option-desc svelte-1j0aegq">Введите слово по изображению</span>',y=_(),C=f("button"),q=f("span"),j=_(),M=f("div"),A=f("span"),S=H(`Перевод предложения
                `),B&&B.c(),L=_(),k=f("span"),z.c(),n(i,"class","modal-close-btn svelte-1j0aegq"),n(o,"class","modal-title svelte-1j0aegq"),n(u,"class","option-radio svelte-1j0aegq"),N(u,"checked",l[26]),n(h,"class","option-content svelte-1j0aegq"),n(a,"class","exercise-option svelte-1j0aegq"),N(a,"active",l[26]),n(b,"class","option-radio svelte-1j0aegq"),N(b,"checked",l[0]),n(m,"class","option-content svelte-1j0aegq"),n(w,"class","exercise-option svelte-1j0aegq"),N(w,"active",l[0]),n(q,"class","option-radio svelte-1j0aegq"),N(q,"checked",l[1]),N(q,"disabled",!l[4]),n(A,"class","option-title svelte-1j0aegq"),n(k,"class","option-desc svelte-1j0aegq"),n(M,"class","option-content svelte-1j0aegq"),n(C,"class","exercise-option svelte-1j0aegq"),N(C,"active",l[1]),N(C,"disabled",!l[4]),n(d,"class","settings-options svelte-1j0aegq"),n(t,"class","settings-modal svelte-1j0aegq"),n(t,"role","dialog"),n(t,"aria-modal","true"),n(e,"class","settings-overlay svelte-1j0aegq"),n(e,"role","button"),n(e,"tabindex","-1")},m(E,R){I(E,e,R),s(e,t),s(t,i),s(t,r),s(t,o),s(t,c),s(t,d),s(d,a),s(a,u),s(a,p),s(a,h),s(d,g),s(d,w),s(w,b),s(w,v),s(w,m),s(d,y),s(d,C),s(C,q),s(C,j),s(C,M),s(M,A),s(A,S),B&&B.m(A,null),s(M,L),s(M,k),z.m(k,null),D||(U=[O(i,"click",l[55]),O(a,"click",l[28]),O(w,"click",l[29]),O(C,"click",l[30]),O(t,"click",$e(l[53])),O(e,"click",l[56]),O(e,"keydown",l[57])],D=!0)},p(E,R){R[0]&67108864&&N(u,"checked",E[26]),R[0]&67108864&&N(a,"active",E[26]),R[0]&1&&N(b,"checked",E[0]),R[0]&1&&N(w,"active",E[0]),R[0]&2&&N(q,"checked",E[1]),R[0]&16&&N(q,"disabled",!E[4]),E[4]?B&&(B.d(1),B=null):B||(B=Wt(),B.c(),B.m(A,null)),W===(W=P(E))&&z?z.p(E,R):(z.d(1),z=W(E),z&&(z.c(),z.m(k,null))),R[0]&2&&N(C,"active",E[1]),R[0]&16&&N(C,"disabled",!E[4])},d(E){E&&T(e),B&&B.d(),z.d(),D=!1,Re(U)}}}function Wt(l){let e;return{c(){e=f("span"),e.textContent="AI",n(e,"class","ai-badge svelte-1j0aegq")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function mn(l){let e,t=l[27].toLowerCase()+"",i;return{c(){e=H("Переведите предложение на "),i=H(t)},m(r,o){I(r,e,o),I(r,i,o)},p(r,o){o[0]&134217728&&t!==(t=r[27].toLowerCase()+"")&&$(i,t)},d(r){r&&(T(e),T(i))}}}function _n(l){let e;return{c(){e=H("Требуется AI токен")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function kn(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="empty-icon svelte-1j0aegq"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line></svg></div> <h2 class="svelte-1j0aegq">Нет карточек для изучения</h2> <p class="svelte-1j0aegq">Добавьте новые слова или верните карточки из списков</p>',n(e,"class","empty-state svelte-1j0aegq")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function wn(l){let e;function t(o,c){return o[1]?Cn:o[0]?yn:bn}let i=t(l),r=i(l);return{c(){e=f("div"),r.c(),n(e,"class","card-area svelte-1j0aegq"),N(e,"translation-mode",l[1]&&l[12])},m(o,c){I(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),c[0]&4098&&N(e,"translation-mode",o[1]&&o[12])},d(o){o&&T(e),r.d()}}}function bn(l){let e=l[24].id,t,i,r,o,c,d,a,u=Gt(l);return{c(){u.c(),t=_(),i=f("div"),r=f("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',o=_(),c=f("button"),c.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(r,"class","action-btn unknown svelte-1j0aegq"),n(c,"class","action-btn known svelte-1j0aegq"),n(i,"class","action-buttons svelte-1j0aegq")},m(p,h){u.m(p,h),I(p,t,h),I(p,i,h),s(i,r),s(i,o),s(i,c),d||(a=[O(r,"click",l[36]),O(c,"click",l[35])],d=!0)},p(p,h){h[0]&16777216&&at(e,e=p[24].id)?(u.d(1),u=Gt(p),u.c(),u.m(t.parentNode,t)):u.p(p,h)},d(p){p&&(T(t),T(i)),u.d(p),d=!1,Re(a)}}}function yn(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y=l[24].imageUrl&&Kt(l),C=l[10]&&Xt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),y&&y.c(),r=_(),C&&C.c(),o=_(),c=f("div"),d=f("input"),u=_(),p=f("button"),h=J("svg"),g=J("polyline"),w=J("path"),n(i,"class","card-front has-image image-only svelte-1j0aegq"),n(t,"class","card-inner svelte-1j0aegq"),n(e,"class","card image-only-card svelte-1j0aegq"),N(e,"correct",l[10]==="correct"),N(e,"incorrect",l[10]==="incorrect"),n(d,"type","text"),n(d,"class","answer-input svelte-1j0aegq"),n(d,"placeholder","Введите слово..."),d.disabled=a=l[10]!==null,N(d,"correct",l[10]==="correct"),N(d,"incorrect",l[10]==="incorrect"),n(g,"points","9 11 12 14 22 4"),n(w,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(h,"width","24"),n(h,"height","24"),n(h,"viewBox","0 0 24 24"),n(h,"fill","none"),n(h,"stroke","currentColor"),n(h,"stroke-width","2"),n(p,"class","check-btn svelte-1j0aegq"),p.disabled=b=!l[9].trim()||l[10]!==null,n(c,"class","answer-input-area svelte-1j0aegq")},m(q,j){I(q,e,j),s(e,t),s(t,i),y&&y.m(i,null),s(i,r),C&&C.m(i,null),I(q,o,j),I(q,c,j),s(c,d),Ee(d,l[9]),s(c,u),s(c,p),s(p,h),s(h,g),s(h,w),v||(m=[O(d,"input",l[60]),O(d,"keydown",l[44]),O(p,"click",l[43])],v=!0)},p(q,j){q[24].imageUrl?y?y.p(q,j):(y=Kt(q),y.c(),y.m(i,r)):y&&(y.d(1),y=null),q[10]?C?C.p(q,j):(C=Xt(q),C.c(),C.m(i,null)):C&&(C.d(1),C=null),j[0]&1024&&N(e,"correct",q[10]==="correct"),j[0]&1024&&N(e,"incorrect",q[10]==="incorrect"),j[0]&1024&&a!==(a=q[10]!==null)&&(d.disabled=a),j[0]&512&&d.value!==q[9]&&Ee(d,q[9]),j[0]&1024&&N(d,"correct",q[10]==="correct"),j[0]&1024&&N(d,"incorrect",q[10]==="incorrect"),j[0]&1536&&b!==(b=!q[9].trim()||q[10]!==null)&&(p.disabled=b)},d(q){q&&(T(e),T(o),T(c)),y&&y.d(),C&&C.d(),v=!1,Re(m)}}}function Cn(l){let e,t,i,r,o,c,d,a,u=l[24].translation+"",p,h,g,w,b,v,m,y,C,q,j,M=l[24].word+"",A,S,L,k=l[14]&&l[14]!=="grammar_error"&&Yt(l),D=l[19]&&Qt(),U=l[24].imageUrl&&Zt(l),B=l[24].association&&xt(l);function P(E,R){return E[18]?Mn:E[12]?In:Tn}let W=P(l),z=W(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("div"),o=f("div"),c=f("span"),c.textContent="Перевод",d=_(),a=f("h2"),p=H(u),h=_(),k&&k.c(),g=_(),D&&D.c(),w=_(),b=f("div"),U&&U.c(),v=_(),m=f("div"),y=f("span"),C=H(l[27]),q=_(),j=f("h2"),A=H(M),S=_(),B&&B.c(),L=_(),z.c(),n(c,"class","card-label svelte-1j0aegq"),n(a,"class","card-word svelte-1j0aegq"),n(o,"class","card-text-content svelte-1j0aegq"),n(r,"class","card-front translation-front svelte-1j0aegq"),n(y,"class","card-label svelte-1j0aegq"),n(j,"class","card-word svelte-1j0aegq"),n(m,"class","card-text-content svelte-1j0aegq"),n(b,"class","card-back translation-back svelte-1j0aegq"),N(b,"has-image",l[24].imageUrl),n(i,"class","card-inner svelte-1j0aegq"),n(t,"class","card translation-card svelte-1j0aegq"),N(t,"correct",l[14]==="correct"),N(t,"incorrect",l[14]==="incorrect"),N(t,"flipped",l[18]),n(e,"class","translation-exercise-layout svelte-1j0aegq"),N(e,"with-input",l[12]),N(e,"card-flipped",l[18])},m(E,R){I(E,e,R),s(e,t),s(t,i),s(i,r),s(r,o),s(o,c),s(o,d),s(o,a),s(a,p),s(r,h),k&&k.m(r,null),s(r,g),D&&D.m(r,null),s(i,w),s(i,b),U&&U.m(b,null),s(b,v),s(b,m),s(m,y),s(y,C),s(m,q),s(m,j),s(j,A),s(m,S),B&&B.m(m,null),s(e,L),z.m(e,null)},p(E,R){R[0]&16777216&&u!==(u=E[24].translation+"")&&$(p,u),E[14]&&E[14]!=="grammar_error"?k?k.p(E,R):(k=Yt(E),k.c(),k.m(r,g)):k&&(k.d(1),k=null),E[19]?D||(D=Qt(),D.c(),D.m(r,null)):D&&(D.d(1),D=null),E[24].imageUrl?U?U.p(E,R):(U=Zt(E),U.c(),U.m(b,v)):U&&(U.d(1),U=null),R[0]&134217728&&$(C,E[27]),R[0]&16777216&&M!==(M=E[24].word+"")&&$(A,M),E[24].association?B?B.p(E,R):(B=xt(E),B.c(),B.m(m,null)):B&&(B.d(1),B=null),R[0]&16777216&&N(b,"has-image",E[24].imageUrl),R[0]&16384&&N(t,"correct",E[14]==="correct"),R[0]&16384&&N(t,"incorrect",E[14]==="incorrect"),R[0]&262144&&N(t,"flipped",E[18]),W===(W=P(E))&&z?z.p(E,R):(z.d(1),z=W(E),z&&(z.c(),z.m(e,null))),R[0]&4096&&N(e,"with-input",E[12]),R[0]&262144&&N(e,"card-flipped",E[18])},d(E){E&&T(e),k&&k.d(),D&&D.d(),U&&U.d(),B&&B.d(),z.d()}}}function zt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-1j0aegq")},m(i,r){I(i,e,r)},p(i,r){r[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&T(e)}}}function Vt(l){let e,t,i,r,o=l[24].association+"",c;return{c(){e=f("div"),t=f("span"),t.textContent="Ассоциация:",i=_(),r=f("p"),c=H(o),n(t,"class","association-label svelte-1j0aegq"),n(r,"class","svelte-1j0aegq"),n(e,"class","association svelte-1j0aegq")},m(d,a){I(d,e,a),s(e,t),s(e,i),s(e,r),s(r,c)},p(d,a){a[0]&16777216&&o!==(o=d[24].association+"")&&$(c,o)},d(d){d&&T(e)}}}function Gt(l){let e,t,i,r,o,c,d,a,u=l[24].word+"",p,h,g,w,b,v,m,y,C,q,j=l[24].translation+"",M,A,S,L,k=l[24].imageUrl&&zt(l),D=l[24].association&&Vt(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("div"),o=f("span"),c=H(l[27]),d=_(),a=f("h2"),p=H(u),h=_(),g=f("p"),g.textContent="Нажмите, чтобы увидеть перевод",w=_(),b=f("div"),k&&k.c(),v=_(),m=f("div"),y=f("span"),y.textContent="Перевод",C=_(),q=f("h2"),M=H(j),A=_(),D&&D.c(),n(o,"class","card-label svelte-1j0aegq"),n(a,"class","card-word svelte-1j0aegq"),n(g,"class","card-hint svelte-1j0aegq"),n(r,"class","card-text-content svelte-1j0aegq"),n(i,"class","card-front svelte-1j0aegq"),n(y,"class","card-label svelte-1j0aegq"),n(q,"class","card-word svelte-1j0aegq"),n(m,"class","card-text-content svelte-1j0aegq"),n(b,"class","card-back svelte-1j0aegq"),N(b,"has-image",l[24].imageUrl),n(t,"class","card-inner svelte-1j0aegq"),n(e,"class","card svelte-1j0aegq"),n(e,"style",l[42]()),n(e,"role","button"),n(e,"tabindex","0"),N(e,"flipped",l[6]),N(e,"dragging",l[7]),N(e,"swipe-left",l[8]==="left"),N(e,"swipe-right",l[8]==="right")},m(U,B){I(U,e,B),s(e,t),s(t,i),s(i,r),s(r,o),s(o,c),s(r,d),s(r,a),s(a,p),s(r,h),s(r,g),s(t,w),s(t,b),k&&k.m(b,null),s(b,v),s(b,m),s(m,y),s(m,C),s(m,q),s(q,M),s(m,A),D&&D.m(m,null),S||(L=[O(e,"mousedown",l[32]),O(e,"mousemove",l[33]),O(e,"mouseup",l[34]),O(e,"mouseleave",l[34]),O(e,"touchstart",l[32]),O(e,"touchmove",l[33]),O(e,"touchend",l[34],{passive:!0}),O(e,"click",l[41]),O(e,"keydown",l[61])],S=!0)},p(U,B){B[0]&134217728&&$(c,U[27]),B[0]&16777216&&u!==(u=U[24].word+"")&&$(p,u),U[24].imageUrl?k?k.p(U,B):(k=zt(U),k.c(),k.m(b,v)):k&&(k.d(1),k=null),B[0]&16777216&&j!==(j=U[24].translation+"")&&$(M,j),U[24].association?D?D.p(U,B):(D=Vt(U),D.c(),D.m(m,null)):D&&(D.d(1),D=null),B[0]&16777216&&N(b,"has-image",U[24].imageUrl),B[0]&64&&N(e,"flipped",U[6]),B[0]&128&&N(e,"dragging",U[7]),B[0]&256&&N(e,"swipe-left",U[8]==="left"),B[0]&256&&N(e,"swipe-right",U[8]==="right")},d(U){U&&T(e),k&&k.d(),D&&D.d(),S=!1,Re(L)}}}function Kt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image-full svelte-1j0aegq")},m(i,r){I(i,e,r)},p(i,r){r[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&T(e)}}}function Xt(l){let e;function t(o,c){return o[10]==="correct"?jn:Sn}let i=t(l),r=i(l);return{c(){e=f("div"),r.c(),n(e,"class","answer-overlay svelte-1j0aegq"),N(e,"correct",l[10]==="correct"),N(e,"incorrect",l[10]==="incorrect")},m(o,c){I(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),c[0]&1024&&N(e,"correct",o[10]==="correct"),c[0]&1024&&N(e,"incorrect",o[10]==="incorrect")},d(o){o&&T(e),r.d()}}}function Sn(l){let e,t,i,r,o,c=l[24].word+"",d;return{c(){e=J("svg"),t=J("line"),i=J("line"),r=_(),o=f("span"),d=H(c),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1j0aegq"),n(o,"class","svelte-1j0aegq")},m(a,u){I(a,e,u),s(e,t),s(e,i),I(a,r,u),I(a,o,u),s(o,d)},p(a,u){u[0]&16777216&&c!==(c=a[24].word+"")&&$(d,c)},d(a){a&&(T(e),T(r),T(o))}}}function jn(l){let e,t,i,r;return{c(){e=J("svg"),t=J("polyline"),i=_(),r=f("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1j0aegq"),n(r,"class","svelte-1j0aegq")},m(o,c){I(o,e,c),s(e,t),I(o,i,c),I(o,r,c)},p:ye,d(o){o&&(T(e),T(i),T(r))}}}function Yt(l){let e;function t(o,c){if(o[14]==="correct")return Ln;if(o[14]==="word_error")return qn}let i=t(l),r=i&&i(l);return{c(){e=f("div"),r&&r.c(),n(e,"class","answer-overlay svelte-1j0aegq"),N(e,"correct",l[14]==="correct"),N(e,"incorrect",l[14]==="word_error")},m(o,c){I(o,e,c),r&&r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r&&r.d(1),r=i&&i(o),r&&(r.c(),r.m(e,null))),c[0]&16384&&N(e,"correct",o[14]==="correct"),c[0]&16384&&N(e,"incorrect",o[14]==="word_error")},d(o){o&&T(e),r&&r.d()}}}function qn(l){let e,t,i,r,o,c,d,a,u,p,h;return{c(){e=J("svg"),t=J("line"),i=J("line"),r=_(),o=f("div"),c=f("span"),c.textContent="Ошибка в слове",d=_(),a=f("span"),u=H("Ожидалось: "),p=f("strong"),h=H(l[20]),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1j0aegq"),n(c,"class","error-title svelte-1j0aegq"),n(p,"class","svelte-1j0aegq"),n(a,"class","expected-word svelte-1j0aegq"),n(o,"class","error-details svelte-1j0aegq")},m(g,w){I(g,e,w),s(e,t),s(e,i),I(g,r,w),I(g,o,w),s(o,c),s(o,d),s(o,a),s(a,u),s(a,p),s(p,h)},p(g,w){w[0]&1048576&&$(h,g[20])},d(g){g&&(T(e),T(r),T(o))}}}function Ln(l){let e,t,i,r;return{c(){e=J("svg"),t=J("polyline"),i=_(),r=f("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1j0aegq"),n(r,"class","svelte-1j0aegq")},m(o,c){I(o,e,c),s(e,t),I(o,i,c),I(o,r,c)},p:ye,d(o){o&&(T(e),T(i),T(r))}}}function Qt(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="checking-spinner svelte-1j0aegq"></div> <span class="svelte-1j0aegq">Проверка...</span>',n(e,"class","answer-overlay checking svelte-1j0aegq")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function Zt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-1j0aegq")},m(i,r){I(i,e,r)},p(i,r){r[0]&16777216&&!Ve(e.src,t=i[24].imageUrl)&&n(e,"src",t)},d(i){i&&T(e)}}}function xt(l){let e,t,i,r,o=l[24].association+"",c;return{c(){e=f("div"),t=f("span"),t.textContent="Ассоциация:",i=_(),r=f("p"),c=H(o),n(t,"class","association-label svelte-1j0aegq"),n(r,"class","svelte-1j0aegq"),n(e,"class","association svelte-1j0aegq")},m(d,a){I(d,e,a),s(e,t),s(e,i),s(e,r),s(r,c)},p(d,a){a[0]&16777216&&o!==(o=d[24].association+"")&&$(c,o)},d(d){d&&T(e)}}}function Tn(l){let e,t,i,r,o,c;return{c(){e=f("div"),t=f("button"),t.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',i=_(),r=f("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(t,"class","action-btn unknown svelte-1j0aegq"),n(r,"class","action-btn known svelte-1j0aegq"),n(e,"class","action-buttons svelte-1j0aegq")},m(d,a){I(d,e,a),s(e,t),s(e,i),s(e,r),o||(c=[O(t,"click",l[37]),O(r,"click",l[35])],o=!0)},p:ye,d(d){d&&T(e),o=!1,Re(c)}}}function In(l){let e,t,i,r,o=l[27].toLowerCase()+"",c,d,a,u,p,h,g,w,b,v;function m(j,M){return j[16]?Bn:j[17]?Nn:Dn}let y=m(l),C=y(l),q=!l[16]&&!l[17]&&$t(l);return{c(){e=f("div"),t=f("div"),i=f("span"),r=H("Переведите на "),c=H(o),d=H(":"),a=_(),C.c(),u=_(),q&&q.c(),p=_(),h=f("button"),g=H("Пропустить"),n(i,"class","sentence-label svelte-1j0aegq"),n(t,"class","sentence-prompt svelte-1j0aegq"),N(t,"loading",l[16]),N(t,"error",l[17]),n(h,"class","skip-sentence-btn svelte-1j0aegq"),h.disabled=w=l[14]!==null||l[16]||l[19],n(e,"class","sentence-exercise svelte-1j0aegq")},m(j,M){I(j,e,M),s(e,t),s(t,i),s(i,r),s(i,c),s(i,d),s(t,a),C.m(t,null),s(e,u),q&&q.m(e,null),s(e,p),s(e,h),s(h,g),b||(v=O(h,"click",l[37]),b=!0)},p(j,M){M[0]&134217728&&o!==(o=j[27].toLowerCase()+"")&&$(c,o),y===(y=m(j))&&C?C.p(j,M):(C.d(1),C=y(j),C&&(C.c(),C.m(t,null))),M[0]&65536&&N(t,"loading",j[16]),M[0]&131072&&N(t,"error",j[17]),!j[16]&&!j[17]?q?q.p(j,M):(q=$t(j),q.c(),q.m(e,p)):q&&(q.d(1),q=null),M[0]&606208&&w!==(w=j[14]!==null||j[16]||j[19])&&(h.disabled=w)},d(j){j&&T(e),C.d(),q&&q.d(),b=!1,v()}}}function Mn(l){let e,t,i,r;return{c(){e=f("div"),t=f("button"),t.textContent="Продолжить",n(t,"class","continue-btn svelte-1j0aegq"),n(e,"class","card-back-actions svelte-1j0aegq")},m(o,c){I(o,e,c),s(e,t),i||(r=O(t,"click",l[37]),i=!0)},p:ye,d(o){o&&T(e),i=!1,r()}}}function Dn(l){let e,t;return{c(){e=f("p"),t=H(l[15]),n(e,"class","sentence-text svelte-1j0aegq")},m(i,r){I(i,e,r),s(e,t)},p(i,r){r[0]&32768&&$(t,i[15])},d(i){i&&T(e)}}}function Nn(l){let e,t,i,r,o,c;return{c(){e=f("p"),t=H(l[17]),i=_(),r=f("button"),r.textContent="Попробовать снова",n(e,"class","sentence-error svelte-1j0aegq"),n(r,"class","retry-btn svelte-1j0aegq")},m(d,a){I(d,e,a),s(e,t),I(d,i,a),I(d,r,a),o||(c=O(r,"click",l[58]),o=!0)},p(d,a){a[0]&131072&&$(t,d[17])},d(d){d&&(T(e),T(i),T(r)),o=!1,c()}}}function Bn(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="loading-spinner svelte-1j0aegq"></div> <span>Генерация предложения...</span>',n(e,"class","sentence-loading svelte-1j0aegq")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function $t(l){let e;function t(o,c){return o[14]==="grammar_error"?En:An}let i=t(l),r=i(l);return{c(){r.c(),e=nt()},m(o,c){r.m(o,c),I(o,e,c)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&T(e),r.d(o)}}}function An(l){let e,t,i,r,o,c,d,a,u,p,h;return{c(){e=f("div"),t=f("input"),r=_(),o=f("button"),c=J("svg"),d=J("polyline"),a=J("path"),n(t,"type","text"),n(t,"class","answer-input sentence-input svelte-1j0aegq"),n(t,"placeholder","Введите перевод..."),t.disabled=i=l[14]!==null||l[19],N(t,"correct",l[14]==="correct"),N(t,"incorrect",l[14]==="incorrect"),n(d,"points","9 11 12 14 22 4"),n(a,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(c,"width","24"),n(c,"height","24"),n(c,"viewBox","0 0 24 24"),n(c,"fill","none"),n(c,"stroke","currentColor"),n(c,"stroke-width","2"),n(o,"class","check-btn svelte-1j0aegq"),o.disabled=u=!l[13].trim()||l[14]!==null||l[19],n(e,"class","answer-input-area svelte-1j0aegq")},m(g,w){I(g,e,w),s(e,t),Ee(t,l[13]),s(e,r),s(e,o),s(o,c),s(c,d),s(c,a),p||(h=[O(t,"input",l[59]),O(t,"keydown",l[39]),O(o,"click",l[38])],p=!0)},p(g,w){w[0]&540672&&i!==(i=g[14]!==null||g[19])&&(t.disabled=i),w[0]&8192&&t.value!==g[13]&&Ee(t,g[13]),w[0]&16384&&N(t,"correct",g[14]==="correct"),w[0]&16384&&N(t,"incorrect",g[14]==="incorrect"),w[0]&548864&&u!==(u=!g[13].trim()||g[14]!==null||g[19])&&(o.disabled=u)},d(g){g&&T(e),p=!1,Re(h)}}}function En(l){let e,t,i,r,o,c,d,a,u,p,h,g;function w(m,y){return m[21]?Un:On}let b=w(l),v=b(l);return{c(){e=f("div"),t=f("div"),v.c(),i=_(),r=f("div"),o=f("span"),o.textContent="Правильный вариант:",c=_(),d=f("p"),a=H(l[22]),u=_(),p=f("button"),p.textContent="Продолжить",n(t,"class","user-sentence-error svelte-1j0aegq"),n(o,"class","correction-label svelte-1j0aegq"),n(d,"class","correction-text svelte-1j0aegq"),n(r,"class","correction-block svelte-1j0aegq"),n(p,"class","continue-btn svelte-1j0aegq"),n(e,"class","grammar-error-block svelte-1j0aegq")},m(m,y){I(m,e,y),s(e,t),v.m(t,null),s(e,i),s(e,r),s(r,o),s(r,c),s(r,d),s(d,a),s(e,u),s(e,p),h||(g=O(p,"click",l[40]),h=!0)},p(m,y){b===(b=w(m))&&v?v.p(m,y):(v.d(1),v=b(m),v&&(v.c(),v.m(t,null))),y[0]&4194304&&$(a,m[22])},d(m){m&&T(e),v.d(),h=!1,g()}}}function On(l){let e,t;return{c(){e=f("span"),t=H(l[23]),n(e,"class","error-text svelte-1j0aegq")},m(i,r){I(i,e,r),s(e,t)},p(i,r){r[0]&8388608&&$(t,i[23])},d(i){i&&T(e)}}}function Un(l){let e,t=el(l[23],l[21])+"",i;return{c(){e=new Pl(!1),i=nt(),e.a=i},m(r,o){e.m(t,r,o),I(r,i,o)},p(r,o){o[0]&10485760&&t!==(t=el(r[23],r[21])+"")&&e.p(t)},d(r){r&&(T(i),e.d())}}}function Hn(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y,C,q=l[5].learned.length+"",j,M,A,S,L,k,D,U,B,P,W=l[5].unlearned.length+"",z,E,R;function re(X,ae){return X[25]?vn:X[0]?hn:gn}let oe=re(l),ge=oe(l),fe=l[11]&&Ft(l);function de(X,ae){return X[25]&&X[24]?wn:kn}let ke=de(l),ie=ke(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h1"),r.textContent="Изучение",o=_(),c=f("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1j0aegq"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',d=_(),a=f("p"),ge.c(),u=_(),fe&&fe.c(),p=_(),ie.c(),h=_(),g=f("div"),w=f("div"),b=J("svg"),v=J("polyline"),m=_(),y=f("span"),C=H("Изучено: "),j=H(q),M=_(),A=f("div"),S=J("svg"),L=J("circle"),k=J("line"),D=J("line"),U=_(),B=f("span"),P=H("На повторение: "),z=H(W),n(r,"class","svelte-1j0aegq"),n(c,"class","settings-btn svelte-1j0aegq"),N(c,"active",l[11]),n(i,"class","header-top svelte-1j0aegq"),n(a,"class","subtitle svelte-1j0aegq"),n(t,"class","header svelte-1j0aegq"),n(v,"points","20 6 9 17 4 12"),n(b,"width","20"),n(b,"height","20"),n(b,"viewBox","0 0 24 24"),n(b,"fill","none"),n(b,"stroke","currentColor"),n(b,"stroke-width","2"),n(w,"class","stat-item learned svelte-1j0aegq"),n(L,"cx","12"),n(L,"cy","12"),n(L,"r","10"),n(k,"x1","12"),n(k,"y1","8"),n(k,"x2","12"),n(k,"y2","12"),n(D,"x1","12"),n(D,"y1","16"),n(D,"x2","12.01"),n(D,"y2","16"),n(S,"width","20"),n(S,"height","20"),n(S,"viewBox","0 0 24 24"),n(S,"fill","none"),n(S,"stroke","currentColor"),n(S,"stroke-width","2"),n(A,"class","stat-item unlearned svelte-1j0aegq"),n(g,"class","stats svelte-1j0aegq"),n(e,"class","flashcards-container svelte-1j0aegq")},m(X,ae){I(X,e,ae),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),ge.m(a,null),s(e,u),fe&&fe.m(e,null),s(e,p),ie.m(e,null),s(e,h),s(e,g),s(g,w),s(w,b),s(b,v),s(w,m),s(w,y),s(y,C),s(y,j),s(g,M),s(g,A),s(A,S),s(S,L),s(S,k),s(S,D),s(A,U),s(A,B),s(B,P),s(B,z),E||(R=O(c,"click",l[54]),E=!0)},p(X,ae){ae[0]&2048&&N(c,"active",X[11]),oe===(oe=re(X))&&ge?ge.p(X,ae):(ge.d(1),ge=oe(X),ge&&(ge.c(),ge.m(a,null))),X[11]?fe?fe.p(X,ae):(fe=Ft(X),fe.c(),fe.m(e,p)):fe&&(fe.d(1),fe=null),ke===(ke=de(X))&&ie?ie.p(X,ae):(ie.d(1),ie=ke(X),ie&&(ie.c(),ie.m(e,h))),ae[0]&32&&q!==(q=X[5].learned.length+"")&&$(j,q),ae[0]&32&&W!==(W=X[5].unlearned.length+"")&&$(z,W)},i:ye,o:ye,d(X){X&&T(e),ge.d(),fe&&fe.d(),ie.d(),E=!1,R()}}}function Rn(l){const e=[...l];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function el(l,e){if(!e)return l;const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${t})`,"gi");return l.replace(i,'<span class="highlighted-error">$1</span>')}function Jn(l,e,t){let i,r,o,c,d,a,u,p,h,g,w,b;Qe(l,He,Y=>t(5,g=Y)),Qe(l,We,Y=>t(51,w=Y)),Qe(l,Ze,Y=>t(52,b=Y));let v=0,m=!1,y=0,C=0,q=!1,j=null,M=!1,A=!1,S="",L=null,k=!1;function D(){t(0,M=!1),t(1,A=!1),K()}function U(){M?t(0,M=!1):(t(0,M=!0),t(1,A=!1)),K()}function B(){c&&(A?t(1,A=!1):(t(1,A=!0),t(0,M=!1)),K())}let P=!1,W="",z=null,E="",R=!1,re=null,oe=!1,ge=!1,fe=null,de=null,ke=null,ie=null,X="";function ae(){t(46,X=localStorage.getItem("ai_token")||"")}function _e(){ae()}function Te(Y){Y.key==="ai_token"&&ae()}let De;Ml(()=>{ae(),window.addEventListener("focus",_e),window.addEventListener("storage",Te),De=setInterval(()=>{k&&ae()},500)}),Fl(()=>{window.removeEventListener("focus",_e),window.removeEventListener("storage",Te),De&&clearInterval(De)});async function Ce(Y,Fe){var Je,Pe,Se,Ue;t(16,R=!0),t(17,re=null),t(15,E="");const Ke=`You are a ${r} language learning assistant. Student level: A1-A2 (beginner).

Task: Create ONE short and simple sentence in RUSSIAN that will need to be translated into ${r}.

${r} word: "${Y}"
Russian translation: "${Fe}"

Requirements:
- The sentence must be in Russian
- The sentence must contain the word "${Fe}" (or its form)
- Length: 3-10 words
- Simple A1-A2 level grammar
- Use simple tenses (Present Simple, Past Simple, Future Simple, Present Continuous, Present Perfect)
- Avoid complex constructions

Reply ONLY with the sentence in Russian, without quotes or explanations.`;try{const Ae=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Ke}],max_tokens:100,temperature:.7})});if(!Ae.ok){const x=await Ae.json().catch(()=>({}));throw new Error(((Je=x.error)==null?void 0:Je.message)||`Ошибка API: ${Ae.status}`)}const Oe=await Ae.json();if(t(15,E=((Ue=(Se=(Pe=Oe.choices[0])==null?void 0:Pe.message)==null?void 0:Se.content)==null?void 0:Ue.trim())||""),!E)throw new Error("Пустой ответ от AI");if(Oe.usage){const x=Oe.usage.prompt_tokens/1e6*.15,je=Oe.usage.completion_tokens/1e6*.6,ft=x+je,Ct=parseFloat(localStorage.getItem("ai_total_cost")||"0")+ft;localStorage.setItem("ai_total_cost",Ct.toString())}}catch(Ae){console.error("Ошибка генерации:",Ae),t(17,re=Ae.message),t(15,E="")}finally{t(16,R=!1)}}let V=[],pe=new Set,he=d;function ce(Y){M||(t(7,q=!0),y=Y.type==="touchstart"?Y.touches[0].clientX:Y.clientX,t(8,j=null))}function we(Y){if(!q||M)return;C=(Y.type==="touchmove"?Y.touches[0].clientX:Y.clientX)-y,C>50?t(8,j="right"):C<-50?t(8,j="left"):t(8,j=null)}function qe(){!q||M||(t(7,q=!1),Math.abs(C)>100&&p&&(C>0?G():Z()),C=0,t(8,j=null))}async function G(){if(p){if(A&&!P){t(12,P=!0),t(13,W=""),t(14,z=null),await Ce(p.word,p.translation);return}He.markAsLearned(p.id),K(),v>=u.length-1&&t(45,v=Math.max(0,u.length-2))}}function Z(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),He.markAsUnlearned(Y.id),K(),v>=u.length-1&&t(45,v=0)}}function K(){t(6,m=!1),t(9,S=""),t(10,L=null),t(12,P=!1),t(13,W=""),t(14,z=null),t(15,E=""),t(17,re=null),t(19,ge=!1),t(20,fe=null),t(21,de=null),t(22,ke=null),t(23,ie=null),t(18,oe=!1)}function be(){if(p){if(A&&!oe){t(18,oe=!0);return}const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),He.markAsUnlearned(Y.id),K(),v>=u.length-1&&t(45,v=0)}}async function ee(Y,Fe,Ke){var Pe,Se,Ue,Ae;const Je=`You are a ${r} language teacher. Check the translation of a sentence from Russian to ${r}.

Russian sentence: "${Fe}"
Student's translation: "${Y}"
Key word that must be used: "${Ke}"

Task: check the grammar of the sentence and its correspondence to the translation.
- DO NOT check punctuation (commas, periods)
- Check only grammatical errors (tenses, articles, word order, word forms)
- Check that the meaning matches the translation

Response format:
- If the sentence is grammatically correct and conveys the meaning — reply only: 0
- If there are errors — reply in this format:
ERROR: [part of the sentence with the error]
CORRECTION: [correct version of the entire sentence]

Reply ONLY in the specified format, without additional explanations.`;try{const Oe=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Je}],max_tokens:200,temperature:.3})});if(!Oe.ok){const ft=await Oe.json().catch(()=>({}));throw new Error(((Pe=ft.error)==null?void 0:Pe.message)||`Ошибка API: ${Oe.status}`)}const x=await Oe.json(),je=((Ae=(Ue=(Se=x.choices[0])==null?void 0:Se.message)==null?void 0:Ue.content)==null?void 0:Ae.trim())||"";if(x.usage){const ft=x.usage.prompt_tokens/1e6*.15,Mt=x.usage.completion_tokens/1e6*.6,Ct=ft+Mt,Nl=parseFloat(localStorage.getItem("ai_total_cost")||"0");localStorage.setItem("ai_total_cost",(Nl+Ct).toString())}return je}catch(Oe){throw console.error("Ошибка проверки грамматики:",Oe),Oe}}async function Ie(){if(!p||!W.trim())return;const Y=W.trim(),Fe=p.word.toLowerCase(),Ke=Y.toLowerCase();if(!new RegExp(`\\b${Fe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\w*\\b`,"i").test(Ke)){t(14,z="word_error"),t(20,fe=p.word),t(21,de=null),t(22,ke=null),setTimeout(()=>{const Se=p;t(47,V=[...V.filter(Ue=>Ue.id!==Se.id),Se]),He.markAsUnlearned(Se.id),v>=u.length-1&&t(45,v=0),K()},3e3);return}t(19,ge=!0),t(20,fe=null),t(21,de=null),t(22,ke=null);try{const Se=await ee(Y,E,p.word);if(Se==="0")t(14,z="correct"),setTimeout(()=>{He.markAsLearned(p.id),v>=u.length-1&&t(45,v=Math.max(0,u.length-2)),K()},1500);else{t(14,z="grammar_error"),t(23,ie=Y);const Ue=Se.match(/ERROR:\s*(.+)/i),Ae=Se.match(/CORRECTION:\s*(.+)/i);t(21,de=Ue?Ue[1].trim():null),t(22,ke=Ae?Ae[1].trim():Se)}}catch{t(14,z="correct"),setTimeout(()=>{He.markAsLearned(p.id),v>=u.length-1&&t(45,v=Math.max(0,u.length-2)),K()},1500)}finally{t(19,ge=!1)}}function ve(Y){Y.key==="Enter"&&P&&!ge&&z!=="grammar_error"&&Ie()}function te(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),He.markAsUnlearned(Y.id),v>=u.length-1&&t(45,v=0),K()}}function ne(){M||t(6,m=!m)}function Q(){if(!q)return"";const Y=C*.05;return`transform: translateX(${C}px) rotate(${Y}deg);`}function ue(){if(!p||!S.trim())return;const Y=S.trim().toLowerCase()===p.word.toLowerCase();t(10,L=Y?"correct":"incorrect"),setTimeout(()=>{Y?G():Z()},1e3)}function F(Y){Y.key==="Enter"&&M&&ue()}function Ne(Y){tt.call(this,l,Y)}const Me=()=>t(11,k=!k),Ge=()=>t(11,k=!1),Le=()=>t(11,k=!1),le=Y=>Y.key==="Escape"&&t(11,k=!1),me=()=>Ce(p.word,p.translation);function se(){W=this.value,t(13,W)}function Be(){S=this.value,t(9,S)}const ct=Y=>Y.key==="Enter"&&ne();return l.$$.update=()=>{if(l.$$.dirty[1]&2097152&&t(27,i=Ye(b)),l.$$.dirty[1]&2097152&&(r=nn(b)),l.$$.dirty[1]&32768&&t(4,c=X&&X.length>0),l.$$.dirty[0]&18&&!c&&A&&t(1,A=!1),l.$$.dirty[0]&3&&t(26,o=!M&&!A),l.$$.dirty[1]&1048576&&t(50,d=w||"default"),l.$$.dirty[0]&32|l.$$.dirty[1]&524288&&t(3,a=g.unlearned.filter(Y=>(Y.dictionaryId||"default")===d)),l.$$.dirty[0]&8|l.$$.dirty[1]&983040){const Y=new Set(a.map(Je=>Je.id)),Fe=he!==d,Ke=Y.size!==pe.size||![...Y].every(Je=>pe.has(Je));Fe||Ke?(t(47,V=Rn(a)),t(48,pe=Y),t(45,v=0),t(49,he=d)):t(47,V=V.map(Je=>a.find(Se=>Se.id===Je.id)||Je))}l.$$.dirty[0]&1|l.$$.dirty[1]&65536&&t(2,u=M?V.filter(Y=>Y.imageUrl):V),l.$$.dirty[0]&4|l.$$.dirty[1]&16384&&t(24,p=u[v]),l.$$.dirty[0]&4&&t(25,h=u.length>0)},[M,A,u,a,c,g,m,q,j,S,L,k,P,W,z,E,R,re,oe,ge,fe,de,ke,ie,p,h,o,i,D,U,B,Ce,ce,we,qe,G,Z,be,Ie,ve,te,ne,Q,ue,F,v,X,V,pe,he,d,w,b,Ne,Me,Ge,Le,le,me,se,Be,ct]}class Pn extends bt{constructor(e){super(),wt(this,e,Jn,Hn,at,{},null,[-1,-1,-1])}}function tl(l,e,t){const i=l.slice();return i[61]=e[t],i}function ll(l){let e,t,i,r,o=l[7].length+"",c,d,a,u,p,h=l[8].length+"",g,w,b,v,m,y=l[6].length+"",C,q,j;return{c(){e=f("div"),t=f("button"),i=H(`На проработку
          `),r=f("span"),c=H(o),d=_(),a=f("button"),u=H(`На повторение
          `),p=f("span"),g=H(h),w=_(),b=f("button"),v=H(`Изученные
          `),m=f("span"),C=H(y),n(r,"class","badge svelte-1rdpxoy"),n(t,"class","dropdown-item svelte-1rdpxoy"),N(t,"active",l[0]==="draft"),n(p,"class","badge svelte-1rdpxoy"),n(a,"class","dropdown-item svelte-1rdpxoy"),N(a,"active",l[0]==="unlearned"),n(m,"class","badge svelte-1rdpxoy"),n(b,"class","dropdown-item svelte-1rdpxoy"),N(b,"active",l[0]==="learned"),n(e,"class","tab-dropdown-menu svelte-1rdpxoy")},m(M,A){I(M,e,A),s(e,t),s(t,i),s(t,r),s(r,c),s(e,d),s(e,a),s(a,u),s(a,p),s(p,g),s(e,w),s(e,b),s(b,v),s(b,m),s(m,C),q||(j=[O(t,"click",l[39]),O(a,"click",l[40]),O(b,"click",l[41])],q=!0)},p(M,A){A[0]&128&&o!==(o=M[7].length+"")&&$(c,o),A[0]&1&&N(t,"active",M[0]==="draft"),A[0]&256&&h!==(h=M[8].length+"")&&$(g,h),A[0]&1&&N(a,"active",M[0]==="unlearned"),A[0]&64&&y!==(y=M[6].length+"")&&$(C,y),A[0]&1&&N(b,"active",M[0]==="learned")},d(M){M&&T(e),q=!1,Re(j)}}}function nl(l){let e,t,i;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","search-clear svelte-1rdpxoy")},m(r,o){I(r,e,o),t||(i=O(e,"click",l[46]),t=!0)},p:ye,d(r){r&&T(e),t=!1,i()}}}function il(l){let e,t,i,r;return{c(){e=f("div"),t=f("button"),t.innerHTML=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
        Отправить все на повторение`,n(t,"class","bulk-action-btn svelte-1rdpxoy"),n(e,"class","bulk-actions svelte-1rdpxoy")},m(o,c){I(o,e,c),s(e,t),i||(r=O(t,"click",l[26]),i=!0)},p:ye,d(o){o&&T(e),i=!1,r()}}}function Fn(l){let e,t,i,r,o,c;function d(m,y){return m[0]==="learned"?Gn:m[0]==="draft"?Vn:zn}let a=d(l),u=a(l);function p(m,y){return m[0]==="learned"?Yn:m[0]==="draft"?Xn:Kn}let h=p(l),g=h(l);function w(m,y){return m[0]==="learned"?xn:m[0]==="draft"?Zn:Qn}let b=w(l),v=b(l);return{c(){e=f("div"),t=f("div"),u.c(),i=_(),r=f("h2"),g.c(),o=_(),c=f("p"),v.c(),n(t,"class","empty-icon svelte-1rdpxoy"),n(r,"class","svelte-1rdpxoy"),n(c,"class","svelte-1rdpxoy"),n(e,"class","empty-state svelte-1rdpxoy")},m(m,y){I(m,e,y),s(e,t),u.m(t,null),s(e,i),s(e,r),g.m(r,null),s(e,o),s(e,c),v.m(c,null)},p(m,y){a!==(a=d(m))&&(u.d(1),u=a(m),u&&(u.c(),u.m(t,null))),h!==(h=p(m))&&(g.d(1),g=h(m),g&&(g.c(),g.m(r,null))),b!==(b=w(m))&&(v.d(1),v=b(m),v&&(v.c(),v.m(c,null)))},d(m){m&&T(e),u.d(),g.d(),v.d()}}}function Wn(l){let e=[],t=new Map,i,r=mt(l[12]);const o=c=>c[61].id;for(let c=0;c<r.length;c+=1){let d=tl(l,r,c),a=o(d);t.set(a,e[c]=al(a,d))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=nt()},m(c,d){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,d);I(c,i,d)},p(c,d){d[0]&921601&&(r=mt(c[12]),e=Ql(e,d,o,1,c,r,t,i.parentNode,Yl,al,i,tl))},d(c){c&&T(i);for(let d=0;d<e.length;d+=1)e[d].d(c)}}}function zn(l){let e,t,i,r;return{c(){e=J("svg"),t=J("circle"),i=J("line"),r=J("line"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"x1","12"),n(i,"y1","8"),n(i,"x2","12"),n(i,"y2","12"),n(r,"x1","12"),n(r,"y1","16"),n(r,"x2","12.01"),n(r,"y2","16"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(o,c){I(o,e,c),s(e,t),s(e,i),s(e,r)},d(o){o&&T(e)}}}function Vn(l){let e,t,i;return{c(){e=J("svg"),t=J("path"),i=J("path"),n(t,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(i,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){I(r,e,o),s(e,t),s(e,i)},d(r){r&&T(e)}}}function Gn(l){let e,t,i;return{c(){e=J("svg"),t=J("circle"),i=J("polyline"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"points","16 10 11 15 8 12"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){I(r,e,o),s(e,t),s(e,i)},d(r){r&&T(e)}}}function Kn(l){let e;return{c(){e=H("Нет слов на повторение")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function Xn(l){let e;return{c(){e=H("Нет слов на проработку")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function Yn(l){let e;return{c(){e=H("Пока нет изученных слов")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function Qn(l){let e;return{c(){e=H("Все слова успешно изучены!")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function Zn(l){let e;return{c(){e=H("Загрузите список слов на странице добавления")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function xn(l){let e;return{c(){e=H("Изучайте карточки, чтобы они появились здесь")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function $n(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',n(e,"class","card-thumbnail missing svelte-1rdpxoy")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function ei(l){let e,t,i;return{c(){e=f("div"),t=f("img"),Ve(t.src,i=l[61].imageUrl)||n(t,"src",i),n(t,"alt",""),n(t,"class","svelte-1rdpxoy"),n(e,"class","card-thumbnail svelte-1rdpxoy")},m(r,o){I(r,e,o),s(e,t)},p(r,o){o[0]&4096&&!Ve(t.src,i=r[61].imageUrl)&&n(t,"src",i)},d(r){r&&T(e)}}}function ti(l){let e;return{c(){e=f("p"),e.textContent="Добавьте перевод",n(e,"class","card-translation missing-text svelte-1rdpxoy")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function li(l){let e,t=l[61].translation+"",i;return{c(){e=f("p"),i=H(t),n(e,"class","card-translation svelte-1rdpxoy")},m(r,o){I(r,e,o),s(e,i)},p(r,o){o[0]&4096&&t!==(t=r[61].translation+"")&&$(i,t)},d(r){r&&T(e)}}}function sl(l){let e,t=l[61].association+"",i;return{c(){e=f("p"),i=H(t),n(e,"class","card-association svelte-1rdpxoy")},m(r,o){I(r,e,o),s(e,i)},p(r,o){o[0]&4096&&t!==(t=r[61].association+"")&&$(i,t)},d(r){r&&T(e)}}}function rl(l){let e,t,i,r,o,c,d,a,u,p;function h(y,C){var q;return C[0]&4096&&(r=null),r==null&&(r=!!((q=y[61].translation)!=null&&q.trim())),r?ii:ni}let g=h(l,[-1,-1,-1]),w=g(l);function b(y,C){var q;return C[0]&4096&&(u=null),u==null&&(u=!!((q=y[61].imageUrl)!=null&&q.trim())),u?ri:si}let v=b(l,[-1,-1,-1]),m=v(l);return{c(){var y,C;e=f("div"),t=f("span"),i=J("svg"),w.c(),o=H(`
                  Перевод`),c=_(),d=f("span"),a=J("svg"),m.c(),p=H(`
                  Картинка`),n(i,"width","12"),n(i,"height","12"),n(i,"viewBox","0 0 24 24"),n(i,"fill","none"),n(i,"stroke","currentColor"),n(i,"stroke-width","2"),n(t,"class","status-item svelte-1rdpxoy"),N(t,"complete",(y=l[61].translation)==null?void 0:y.trim()),n(a,"width","12"),n(a,"height","12"),n(a,"viewBox","0 0 24 24"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-width","2"),n(d,"class","status-item svelte-1rdpxoy"),N(d,"complete",(C=l[61].imageUrl)==null?void 0:C.trim()),n(e,"class","draft-status svelte-1rdpxoy")},m(y,C){I(y,e,C),s(e,t),s(t,i),w.m(i,null),s(t,o),s(e,c),s(e,d),s(d,a),m.m(a,null),s(d,p)},p(y,C){var q,j;g!==(g=h(y,C))&&(w.d(1),w=g(y),w&&(w.c(),w.m(i,null))),C[0]&4096&&N(t,"complete",(q=y[61].translation)==null?void 0:q.trim()),v!==(v=b(y,C))&&(m.d(1),m=v(y),m&&(m.c(),m.m(a,null))),C[0]&4096&&N(d,"complete",(j=y[61].imageUrl)==null?void 0:j.trim())},d(y){y&&T(e),w.d(),m.d()}}}function ni(l){let e;return{c(){e=J("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function ii(l){let e;return{c(){e=J("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function si(l){let e;return{c(){e=J("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function ri(l){let e;return{c(){e=J("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function ol(l){let e,t,i;function r(){return l[48](l[61])}return{c(){e=f("button"),e.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',n(e,"class","action-btn return svelte-1rdpxoy"),n(e,"title","Вернуть на повторение")},m(o,c){I(o,e,c),t||(i=O(e,"click",r),t=!0)},p(o,c){l=o},d(o){o&&T(e),t=!1,i()}}}function al(l,e){let t,i,r,o,c=e[61].word+"",d,a,u,p,h,g,w,b,v,m,y,C,q;function j(z,E){if(z[61].imageUrl)return ei;if(z[0]==="draft")return $n}let M=j(e),A=M&&M(e);function S(z,E){if(z[61].translation)return li;if(z[0]==="draft")return ti}let L=S(e),k=L&&L(e),D=e[61].association&&sl(e),U=e[0]==="draft"&&rl(e);function B(){return e[47](e[61])}let P=e[0]==="learned"&&ol(e);function W(){return e[49](e[61])}return{key:l,first:null,c(){t=f("div"),A&&A.c(),i=_(),r=f("div"),o=f("h3"),d=H(c),a=_(),k&&k.c(),u=_(),D&&D.c(),p=_(),U&&U.c(),h=_(),g=f("div"),w=f("button"),w.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',b=_(),P&&P.c(),v=_(),m=f("button"),m.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>',y=_(),n(o,"class","card-word svelte-1rdpxoy"),n(r,"class","card-content svelte-1rdpxoy"),n(w,"class","action-btn edit svelte-1rdpxoy"),n(w,"title","Редактировать"),n(m,"class","action-btn delete svelte-1rdpxoy"),n(m,"title","Удалить"),n(g,"class","card-actions svelte-1rdpxoy"),n(t,"class","card-item svelte-1rdpxoy"),N(t,"draft-card",e[0]==="draft"),this.first=t},m(z,E){I(z,t,E),A&&A.m(t,null),s(t,i),s(t,r),s(r,o),s(o,d),s(r,a),k&&k.m(r,null),s(r,u),D&&D.m(r,null),s(r,p),U&&U.m(r,null),s(t,h),s(t,g),s(g,w),s(g,b),P&&P.m(g,null),s(g,v),s(g,m),s(t,y),C||(q=[O(w,"click",B),O(m,"click",W)],C=!0)},p(z,E){e=z,M===(M=j(e))&&A?A.p(e,E):(A&&A.d(1),A=M&&M(e),A&&(A.c(),A.m(t,i))),E[0]&4096&&c!==(c=e[61].word+"")&&$(d,c),L===(L=S(e))&&k?k.p(e,E):(k&&k.d(1),k=L&&L(e),k&&(k.c(),k.m(r,u))),e[61].association?D?D.p(e,E):(D=sl(e),D.c(),D.m(r,p)):D&&(D.d(1),D=null),e[0]==="draft"?U?U.p(e,E):(U=rl(e),U.c(),U.m(r,null)):U&&(U.d(1),U=null),e[0]==="learned"?P?P.p(e,E):(P=ol(e),P.c(),P.m(g,v)):P&&(P.d(1),P=null),E[0]&1&&N(t,"draft-card",e[0]==="draft")},d(z){z&&T(t),A&&A.d(),k&&k.d(),D&&D.d(),U&&U.d(),P&&P.d(),C=!1,Re(q)}}}function cl(l){let e,t,i,r,o,c,d,a,u,p,h,g=l[15].toLowerCase()+"",w,b,v,m=l[2].length+"",y,C,q,j,M,A,S,L,k,D=l[3].length+"",U,B,P,W,z,E,R,re,oe,ge,fe,de=l[4].length+"",ke,ie,X,ae,_e,Te,De,Ce,V,pe,he,ce,we=l[0]==="draft"&&l[3].trim()&&l[5].trim(),qe,G,Z,K,be,ee,Ie,ve,te=l[5]&&fl(l),ne=we&&ul();return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="Редактировать карточку",o=_(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=_(),a=f("div"),u=f("div"),p=f("label"),h=H("Слово ("),w=H(g),b=H(`)
            `),v=f("span"),y=H(m),C=H("/35"),q=_(),j=f("input"),M=_(),A=f("div"),S=f("label"),L=H(`Перевод
            `),k=f("span"),U=H(D),B=H("/50"),P=_(),W=f("input"),z=_(),E=f("div"),R=f("label"),re=H(`Ассоциация 
            `),oe=f("span"),oe.textContent="(необязательно)",ge=_(),fe=f("span"),ke=H(de),ie=H("/95"),X=_(),ae=f("textarea"),_e=_(),Te=f("div"),De=f("label"),De.innerHTML=`Изображение 
            <span class="optional svelte-1rdpxoy">(URL)</span>`,Ce=_(),V=f("input"),pe=_(),te&&te.c(),he=_(),ce=f("div"),ne&&ne.c(),qe=_(),G=f("button"),G.textContent="Отмена",Z=_(),K=f("button"),be=H("Сохранить"),n(r,"class","svelte-1rdpxoy"),n(c,"class","modal-close svelte-1rdpxoy"),n(i,"class","modal-header svelte-1rdpxoy"),n(v,"class","char-count svelte-1rdpxoy"),N(v,"limit",l[2].length>=35),n(p,"for","editWord"),n(p,"class","svelte-1rdpxoy"),n(j,"id","editWord"),n(j,"type","text"),n(j,"placeholder","например: serendipity"),n(j,"maxlength","35"),j.required=!0,n(j,"class","svelte-1rdpxoy"),n(u,"class","input-group svelte-1rdpxoy"),n(k,"class","char-count svelte-1rdpxoy"),N(k,"limit",l[3].length>=50),n(S,"for","editTranslation"),n(S,"class","svelte-1rdpxoy"),n(W,"id","editTranslation"),n(W,"type","text"),n(W,"placeholder","например: счастливая случайность"),n(W,"maxlength","50"),W.required=!0,n(W,"class","svelte-1rdpxoy"),n(A,"class","input-group svelte-1rdpxoy"),n(oe,"class","optional svelte-1rdpxoy"),n(fe,"class","char-count svelte-1rdpxoy"),N(fe,"limit",l[4].length>=95),n(R,"for","editAssociation"),n(R,"class","svelte-1rdpxoy"),n(ae,"id","editAssociation"),n(ae,"placeholder","например: представьте, как вы случайно находите клад"),n(ae,"maxlength","95"),n(ae,"rows","2"),n(ae,"class","svelte-1rdpxoy"),n(E,"class","input-group svelte-1rdpxoy"),n(De,"for","editImageUrl"),n(De,"class","svelte-1rdpxoy"),n(V,"id","editImageUrl"),n(V,"type","url"),n(V,"placeholder","https://example.com/image.jpg"),n(V,"class","svelte-1rdpxoy"),n(Te,"class","input-group svelte-1rdpxoy"),n(a,"class","modal-body svelte-1rdpxoy"),n(G,"class","btn-secondary svelte-1rdpxoy"),n(K,"class","btn-primary svelte-1rdpxoy"),K.disabled=ee=!l[2].trim()||l[0]!=="draft"&&!l[3].trim(),n(ce,"class","modal-actions svelte-1rdpxoy"),n(t,"class","modal svelte-1rdpxoy"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1rdpxoy"),n(e,"role","button"),n(e,"tabindex","-1")},m(Q,ue){I(Q,e,ue),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(u,p),s(p,h),s(p,w),s(p,b),s(p,v),s(v,y),s(v,C),s(u,q),s(u,j),Ee(j,l[2]),s(a,M),s(a,A),s(A,S),s(S,L),s(S,k),s(k,U),s(k,B),s(A,P),s(A,W),Ee(W,l[3]),s(a,z),s(a,E),s(E,R),s(R,re),s(R,oe),s(R,ge),s(R,fe),s(fe,ke),s(fe,ie),s(E,X),s(E,ae),Ee(ae,l[4]),s(a,_e),s(a,Te),s(Te,De),s(Te,Ce),s(Te,V),Ee(V,l[5]),s(a,pe),te&&te.m(a,null),s(t,he),s(t,ce),ne&&ne.m(ce,null),s(ce,qe),s(ce,G),s(ce,Z),s(ce,K),s(K,be),Ie||(ve=[O(c,"click",l[50]),O(j,"input",l[51]),O(W,"input",l[52]),O(ae,"input",l[53]),O(V,"input",l[54]),O(G,"click",l[55]),O(K,"click",l[21]),O(t,"click",$e(l[37])),O(e,"click",l[56]),O(e,"keydown",l[57])],Ie=!0)},p(Q,ue){ue[0]&32768&&g!==(g=Q[15].toLowerCase()+"")&&$(w,g),ue[0]&4&&m!==(m=Q[2].length+"")&&$(y,m),ue[0]&4&&N(v,"limit",Q[2].length>=35),ue[0]&4&&j.value!==Q[2]&&Ee(j,Q[2]),ue[0]&8&&D!==(D=Q[3].length+"")&&$(U,D),ue[0]&8&&N(k,"limit",Q[3].length>=50),ue[0]&8&&W.value!==Q[3]&&Ee(W,Q[3]),ue[0]&16&&de!==(de=Q[4].length+"")&&$(ke,de),ue[0]&16&&N(fe,"limit",Q[4].length>=95),ue[0]&16&&Ee(ae,Q[4]),ue[0]&32&&V.value!==Q[5]&&Ee(V,Q[5]),Q[5]?te?te.p(Q,ue):(te=fl(Q),te.c(),te.m(a,null)):te&&(te.d(1),te=null),ue[0]&41&&(we=Q[0]==="draft"&&Q[3].trim()&&Q[5].trim()),we?ne||(ne=ul(),ne.c(),ne.m(ce,qe)):ne&&(ne.d(1),ne=null),ue[0]&13&&ee!==(ee=!Q[2].trim()||Q[0]!=="draft"&&!Q[3].trim())&&(K.disabled=ee)},d(Q){Q&&T(e),te&&te.d(),ne&&ne.d(),Ie=!1,Re(ve)}}}function fl(l){let e,t,i,r,o;function c(u,p){return u[11]?ai:oi}let d=c(l),a=d(l);return{c(){e=f("div"),a.c(),t=_(),i=f("button"),i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(i,"class","remove-image-btn svelte-1rdpxoy"),n(i,"title","Удалить изображение"),n(e,"class","image-preview-container svelte-1rdpxoy")},m(u,p){I(u,e,p),a.m(e,null),s(e,t),s(e,i),r||(o=O(i,"click",l[24]),r=!0)},p(u,p){d===(d=c(u))&&a?a.p(u,p):(a.d(1),a=d(u),a&&(a.c(),a.m(e,t)))},d(u){u&&T(e),a.d(),r=!1,o()}}}function oi(l){let e,t,i,r;return{c(){e=f("img"),Ve(e.src,t=l[5])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","modal-image-preview svelte-1rdpxoy")},m(o,c){I(o,e,c),i||(r=[O(e,"error",l[22]),O(e,"load",l[23])],i=!0)},p(o,c){c[0]&32&&!Ve(e.src,t=o[5])&&n(e,"src",t)},d(o){o&&T(e),i=!1,Re(r)}}}function ai(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Ошибка загрузки</span>',n(e,"class","image-error svelte-1rdpxoy")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function ul(l){let e;return{c(){e=f("span"),e.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
            Карточка будет активирована`,n(e,"class","ready-hint svelte-1rdpxoy")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function ci(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y,C,q,j,M,A,S,L,k,D,U,B,P=l[7].length+"",W,z,E,R,re,oe,ge,fe,de,ke=l[8].length+"",ie,X,ae,_e,Te,De,Ce,V=l[6].length+"",pe,he,ce,we,qe,G,Z,K,be,ee,Ie,ve,te,ne,Q,ue,F=l[9]&&ll(l),Ne=l[1]&&nl(l),Me=l[0]==="learned"&&l[6].length>0&&il(l);function Ge(se,Be){return se[12].length>0?Wn:Fn}let Le=Ge(l),le=Le(l),me=l[10]&&cl(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h1"),r.textContent="Мои карточки",o=_(),c=f("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',d=_(),a=f("p"),a.textContent="Управляйте вашими словами",u=_(),p=f("div"),h=f("button"),g=f("span"),w=H(l[14]),b=_(),v=f("span"),m=H(l[13]),y=_(),C=J("svg"),q=J("polyline"),j=_(),F&&F.c(),M=_(),A=f("div"),S=f("button"),L=J("svg"),k=J("path"),D=J("path"),U=H(`
      На проработку
      `),B=f("span"),W=H(P),z=_(),E=f("button"),R=J("svg"),re=J("circle"),oe=J("line"),ge=J("line"),fe=H(`
      На повторение
      `),de=f("span"),ie=H(ke),X=_(),ae=f("button"),_e=J("svg"),Te=J("polyline"),De=H(`
      Изученные
      `),Ce=f("span"),pe=H(V),he=_(),ce=f("div"),we=J("svg"),qe=J("circle"),G=J("line"),Z=_(),K=f("input"),be=_(),Ne&&Ne.c(),ee=_(),Me&&Me.c(),Ie=_(),ve=f("div"),le.c(),te=_(),me&&me.c(),ne=nt(),n(r,"class","svelte-1rdpxoy"),n(c,"class","export-btn svelte-1rdpxoy"),n(c,"title","Экспорт в JSON"),n(i,"class","header-top svelte-1rdpxoy"),n(a,"class","subtitle svelte-1rdpxoy"),n(t,"class","header svelte-1rdpxoy"),n(g,"class","dropdown-label svelte-1rdpxoy"),n(v,"class","dropdown-badge svelte-1rdpxoy"),n(q,"points","6 9 12 15 18 9"),n(C,"class","dropdown-arrow svelte-1rdpxoy"),n(C,"width","16"),n(C,"height","16"),n(C,"viewBox","0 0 24 24"),n(C,"fill","none"),n(C,"stroke","currentColor"),n(C,"stroke-width","2"),N(C,"open",l[9]),n(h,"class","tab-dropdown-btn svelte-1rdpxoy"),n(p,"class","tabs-mobile svelte-1rdpxoy"),n(k,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(D,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(L,"width","18"),n(L,"height","18"),n(L,"viewBox","0 0 24 24"),n(L,"fill","none"),n(L,"stroke","currentColor"),n(L,"stroke-width","2"),n(B,"class","badge svelte-1rdpxoy"),n(S,"class","tab svelte-1rdpxoy"),N(S,"active",l[0]==="draft"),n(re,"cx","12"),n(re,"cy","12"),n(re,"r","10"),n(oe,"x1","12"),n(oe,"y1","8"),n(oe,"x2","12"),n(oe,"y2","12"),n(ge,"x1","12"),n(ge,"y1","16"),n(ge,"x2","12.01"),n(ge,"y2","16"),n(R,"width","18"),n(R,"height","18"),n(R,"viewBox","0 0 24 24"),n(R,"fill","none"),n(R,"stroke","currentColor"),n(R,"stroke-width","2"),n(de,"class","badge svelte-1rdpxoy"),n(E,"class","tab svelte-1rdpxoy"),N(E,"active",l[0]==="unlearned"),n(Te,"points","20 6 9 17 4 12"),n(_e,"width","18"),n(_e,"height","18"),n(_e,"viewBox","0 0 24 24"),n(_e,"fill","none"),n(_e,"stroke","currentColor"),n(_e,"stroke-width","2"),n(Ce,"class","badge svelte-1rdpxoy"),n(ae,"class","tab svelte-1rdpxoy"),N(ae,"active",l[0]==="learned"),n(A,"class","tabs-desktop svelte-1rdpxoy"),n(qe,"cx","11"),n(qe,"cy","11"),n(qe,"r","8"),n(G,"x1","21"),n(G,"y1","21"),n(G,"x2","16.65"),n(G,"y2","16.65"),n(we,"class","search-icon svelte-1rdpxoy"),n(we,"width","18"),n(we,"height","18"),n(we,"viewBox","0 0 24 24"),n(we,"fill","none"),n(we,"stroke","currentColor"),n(we,"stroke-width","2"),n(K,"type","text"),n(K,"class","search-input svelte-1rdpxoy"),n(K,"placeholder","Поиск слова..."),n(ce,"class","search-box svelte-1rdpxoy"),n(ve,"class","cards-list svelte-1rdpxoy"),n(e,"class","lists-container svelte-1rdpxoy")},m(se,Be){I(se,e,Be),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(e,u),s(e,p),s(p,h),s(h,g),s(g,w),s(h,b),s(h,v),s(v,m),s(h,y),s(h,C),s(C,q),s(p,j),F&&F.m(p,null),s(e,M),s(e,A),s(A,S),s(S,L),s(L,k),s(L,D),s(S,U),s(S,B),s(B,W),s(A,z),s(A,E),s(E,R),s(R,re),s(R,oe),s(R,ge),s(E,fe),s(E,de),s(de,ie),s(A,X),s(A,ae),s(ae,_e),s(_e,Te),s(ae,De),s(ae,Ce),s(Ce,pe),s(e,he),s(e,ce),s(ce,we),s(we,qe),s(we,G),s(ce,Z),s(ce,K),Ee(K,l[1]),s(ce,be),Ne&&Ne.m(ce,null),s(e,ee),Me&&Me.m(e,null),s(e,Ie),s(e,ve),le.m(ve,null),I(se,te,Be),me&&me.m(se,Be),I(se,ne,Be),Q||(ue=[O(c,"click",l[25]),O(h,"click",l[38]),O(S,"click",l[42]),O(E,"click",l[43]),O(ae,"click",l[44]),O(K,"input",l[45])],Q=!0)},p(se,Be){Be[0]&16384&&$(w,se[14]),Be[0]&8192&&$(m,se[13]),Be[0]&512&&N(C,"open",se[9]),se[9]?F?F.p(se,Be):(F=ll(se),F.c(),F.m(p,null)):F&&(F.d(1),F=null),Be[0]&128&&P!==(P=se[7].length+"")&&$(W,P),Be[0]&1&&N(S,"active",se[0]==="draft"),Be[0]&256&&ke!==(ke=se[8].length+"")&&$(ie,ke),Be[0]&1&&N(E,"active",se[0]==="unlearned"),Be[0]&64&&V!==(V=se[6].length+"")&&$(pe,V),Be[0]&1&&N(ae,"active",se[0]==="learned"),Be[0]&2&&K.value!==se[1]&&Ee(K,se[1]),se[1]?Ne?Ne.p(se,Be):(Ne=nl(se),Ne.c(),Ne.m(ce,null)):Ne&&(Ne.d(1),Ne=null),se[0]==="learned"&&se[6].length>0?Me?Me.p(se,Be):(Me=il(se),Me.c(),Me.m(e,Ie)):Me&&(Me.d(1),Me=null),Le===(Le=Ge(se))&&le?le.p(se,Be):(le.d(1),le=Le(se),le&&(le.c(),le.m(ve,null))),se[10]?me?me.p(se,Be):(me=cl(se),me.c(),me.m(ne.parentNode,ne)):me&&(me.d(1),me=null)},i:ye,o:ye,d(se){se&&(T(e),T(te),T(ne)),F&&F.d(),Ne&&Ne.d(),Me&&Me.d(),le.d(),me&&me.d(se),Q=!1,Re(ue)}}}function fi(l,e,t){let i,r,o,c,d,a,u,p,h,g,w,b,v;Qe(l,Ze,F=>t(34,w=F)),Qe(l,He,F=>t(35,b=F)),Qe(l,We,F=>t(36,v=F));let m="draft",y="",C=!1;const q={draft:"На проработку",unlearned:"На повторение",learned:"Изученные"};function j(F){t(0,m=F),t(9,C=!1)}let M=!1,A=null,S="",L="",k="",D="",U=!1,B="",P="",W="",z="";function E(F){He.moveToStudy(F)}function R(F){He.deleteCard(F,m)}function re(F){t(27,A=F),t(2,S=F.word),t(3,L=F.translation||""),t(4,k=F.association||""),t(5,D=F.imageUrl||""),t(28,B=F.word),t(29,P=F.translation||""),t(30,W=F.association||""),t(31,z=F.imageUrl||""),t(11,U=!1),t(10,M=!0)}function oe(F=!1){!F&&c&&!confirm("У вас есть несохранённые изменения. Закрыть без сохранения?")||(t(10,M=!1),t(27,A=null))}function ge(){t(10,M=!1),t(27,A=null)}function fe(){S.trim()&&A&&(m==="draft"?He.editDraftCard(A.id,{word:S.trim(),translation:L.trim(),association:k.trim(),imageUrl:D.trim()}):L.trim()&&He.editCard(A.id,m,{word:S.trim(),translation:L.trim(),association:k.trim(),imageUrl:D.trim()}),ge())}function de(){t(11,U=!0)}function ke(){t(11,U=!1)}function ie(){t(5,D="")}function X(){const F={learned:a,unlearned:u,draft:p,language:w||"en",exportedAt:new Date().toISOString()},Ne=JSON.stringify(F,null,2),Me=new Blob([Ne],{type:"application/json"}),Ge=URL.createObjectURL(Me),Le=document.createElement("a");Le.href=Ge,Le.download=`flash-words-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(Ge)}function ae(){a.length>0&&confirm(`Отправить все ${a.length} слов на повторение?`)&&He.moveAllToStudy()}function _e(F){tt.call(this,l,F)}const Te=()=>t(9,C=!C),De=()=>j("draft"),Ce=()=>j("unlearned"),V=()=>j("learned"),pe=()=>t(0,m="draft"),he=()=>t(0,m="unlearned"),ce=()=>t(0,m="learned");function we(){y=this.value,t(1,y)}const qe=()=>t(1,y=""),G=F=>re(F),Z=F=>E(F.id),K=F=>R(F.id),be=()=>oe();function ee(){S=this.value,t(2,S)}function Ie(){L=this.value,t(3,L)}function ve(){k=this.value,t(4,k)}function te(){D=this.value,t(5,D)}const ne=()=>oe(),Q=()=>oe(),ue=F=>F.key==="Escape"&&oe();return l.$$.update=()=>{l.$$.dirty[1]&8&&t(15,i=Ye(w)),l.$$.dirty[0]&1&&t(14,r=q[m]),l.$$.dirty[1]&32&&t(33,d=v||"default"),l.$$.dirty[1]&20&&t(7,p=(b.draft||[]).filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(8,u=b.unlearned.filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(6,a=b.learned.filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[0]&449&&t(13,o=m==="draft"?p.length:m==="unlearned"?u.length:a.length),l.$$.dirty[0]&2013265980|l.$$.dirty[1]&1&&(c=A&&(S!==B||L!==P||k!==W||D!==z)),l.$$.dirty[0]&449&&t(32,h=m==="learned"?a:m==="unlearned"?u:p),l.$$.dirty[0]&2|l.$$.dirty[1]&2&&t(12,g=y.trim()?h.filter(F=>F.word.toLowerCase().includes(y.toLowerCase())||F.translation&&F.translation.toLowerCase().includes(y.toLowerCase())):h)},[m,y,S,L,k,D,a,p,u,C,M,U,g,o,r,i,j,E,R,re,oe,fe,de,ke,ie,X,ae,A,B,P,W,z,h,d,w,b,v,_e,Te,De,Ce,V,pe,he,ce,we,qe,G,Z,K,be,ee,Ie,ve,te,ne,Q,ue]}class ui extends bt{constructor(e){super(),wt(this,e,fi,ci,at,{},null,[-1,-1,-1])}}function dl(l,e,t){const i=l.slice();return i[52]=e[t],i}function pl(l){let e;return{c(){e=f("span"),n(e,"class","user-indicator svelte-kfa3ws")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function gl(l){let e;return{c(){e=f("span"),n(e,"class","token-indicator svelte-kfa3ws")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function hl(l){let e,t,i;function r(d,a){return d[3].length===0?pi:di}let o=r(l),c=o(l);return{c(){e=f("div"),c.c(),n(e,"class","dictionary-dropdown svelte-kfa3ws")},m(d,a){I(d,e,a),c.m(e,null),t||(i=O(e,"click",$e(l[33])),t=!0)},p(d,a){o===(o=r(d))&&c?c.p(d,a):(c.d(1),c=o(d),c&&(c.c(),c.m(e,null)))},d(d){d&&T(e),c.d(),t=!1,i()}}}function di(l){let e,t=mt(l[3]),i=[];for(let r=0;r<t.length;r+=1)i[r]=ml(dl(l,t,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=nt()},m(r,o){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,o);I(r,e,o)},p(r,o){if(o[0]&4194316){t=mt(r[3]);let c;for(c=0;c<t.length;c+=1){const d=dl(r,t,c);i[c]?i[c].p(d,o):(i[c]=ml(d),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=t.length}},d(r){r&&T(e),Ul(i,r)}}}function pi(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> <p class="svelte-kfa3ws">Загрузите словарь или добавьте карточку слова</p>',n(e,"class","dropdown-empty svelte-kfa3ws")},m(t,i){I(t,e,i)},p:ye,d(t){t&&T(e)}}}function vl(l){let e,t;return{c(){e=J("svg"),t=J("polyline"),n(t,"points","20 6 9 17 4 12"),n(e,"width","16"),n(e,"height","16"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(i,r){I(i,e,r),s(e,t)},d(i){i&&T(e)}}}function ml(l){let e,t,i=l[52].name+"",r,o,c,d,a,u=l[2]===l[52].id&&vl();function p(){return l[35](l[52])}return{c(){e=f("button"),t=f("span"),r=H(i),o=_(),u&&u.c(),c=_(),n(e,"class","dropdown-item svelte-kfa3ws"),N(e,"active",l[2]===l[52].id)},m(h,g){I(h,e,g),s(e,t),s(t,r),s(e,o),u&&u.m(e,null),s(e,c),d||(a=O(e,"click",p),d=!0)},p(h,g){l=h,g[0]&8&&i!==(i=l[52].name+"")&&$(r,i),l[2]===l[52].id?u||(u=vl(),u.c(),u.m(e,c)):u&&(u.d(1),u=null),g[0]&12&&N(e,"active",l[2]===l[52].id)},d(h){h&&T(e),u&&u.d(),d=!1,a()}}}function _l(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y,C,q,j,M,A,S=l[16]&&kl(l),L=l[7]>0&&wl(l);function k(B,P){return B[6]?hi:gi}let D=k(l),U=D(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="AI Токен",o=_(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=_(),a=f("div"),u=f("p"),u.textContent="Введите ваш API ключ для использования AI-функций",p=_(),h=f("div"),g=f("input"),w=_(),S&&S.c(),b=_(),L&&L.c(),v=_(),m=f("div"),y=f("button"),y.textContent="Отмена",C=_(),q=f("button"),U.c(),n(r,"class","svelte-kfa3ws"),n(c,"class","modal-close svelte-kfa3ws"),n(i,"class","modal-header svelte-kfa3ws"),n(u,"class","modal-description svelte-kfa3ws"),n(g,"type","password"),n(g,"class","token-input svelte-kfa3ws"),n(g,"placeholder","sk-..."),n(h,"class","token-input-wrapper svelte-kfa3ws"),n(a,"class","modal-body svelte-kfa3ws"),n(y,"class","cancel-btn svelte-kfa3ws"),n(q,"class","save-btn svelte-kfa3ws"),q.disabled=j=!l[0].trim(),N(q,"saved",l[6]),n(m,"class","modal-footer svelte-kfa3ws"),n(t,"class","modal svelte-kfa3ws"),n(e,"class","modal-overlay svelte-kfa3ws")},m(B,P){I(B,e,P),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(a,p),s(a,h),s(h,g),Ee(g,l[0]),s(h,w),S&&S.m(h,null),s(a,b),L&&L.m(a,null),s(t,v),s(t,m),s(m,y),s(m,C),s(m,q),U.m(q,null),M||(A=[O(c,"click",l[36]),O(g,"input",l[37]),O(y,"click",l[38]),O(q,"click",l[18]),O(t,"click",$e(l[32])),O(e,"click",l[39])],M=!0)},p(B,P){P[0]&1&&g.value!==B[0]&&Ee(g,B[0]),B[16]?S?S.p(B,P):(S=kl(B),S.c(),S.m(h,null)):S&&(S.d(1),S=null),B[7]>0?L?L.p(B,P):(L=wl(B),L.c(),L.m(a,null)):L&&(L.d(1),L=null),D!==(D=k(B))&&(U.d(1),U=D(B),U&&(U.c(),U.m(q,null))),P[0]&1&&j!==(j=!B[0].trim())&&(q.disabled=j),P[0]&64&&N(q,"saved",B[6])},d(B){B&&T(e),S&&S.d(),L&&L.d(),U.d(),M=!1,Re(A)}}}function kl(l){let e,t,i;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-kfa3ws"),n(e,"title","Очистить токен")},m(r,o){I(r,e,o),t||(i=O(e,"click",l[19]),t=!0)},p:ye,d(r){r&&T(e),t=!1,i()}}}function wl(l){let e,t,i,r,o,c=ql(l[7])+"",d;return{c(){e=f("div"),t=f("div"),i=f("span"),i.textContent="Стоимость всех запросов:",r=_(),o=f("span"),d=H(c),n(i,"class","cost-label svelte-kfa3ws"),n(o,"class","cost-value svelte-kfa3ws"),n(t,"class","cost-row svelte-kfa3ws"),n(e,"class","cost-info svelte-kfa3ws")},m(a,u){I(a,e,u),s(e,t),s(t,i),s(t,r),s(t,o),s(o,d)},p(a,u){u[0]&128&&c!==(c=ql(a[7])+"")&&$(d,c)},d(a){a&&T(e)}}}function gi(l){let e;return{c(){e=H("Сохранить")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function hi(l){let e,t,i;return{c(){e=J("svg"),t=J("polyline"),i=H(`
              Сохранено`),n(t,"points","20 6 9 17 4 12"),n(e,"width","18"),n(e,"height","18"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(r,o){I(r,e,o),s(e,t),I(r,i,o)},d(r){r&&(T(e),T(i))}}}function bl(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y,C,q,j,M,A,S=l[9]&&yl(l),L=l[10]&&Cl(l),k=l[1]&&Sl(l);function D(P,W){return P[11]?mi:vi}let U=D(l),B=U(l);return{c(){e=f("div"),t=f("div"),i=f("div"),r=f("h2"),r.textContent="Загрузить слова",o=_(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=_(),a=f("div"),u=f("p"),u.textContent="Введите имя для загрузки персональных слов из файла",p=_(),h=f("div"),g=f("input"),w=_(),S&&S.c(),b=_(),L&&L.c(),v=_(),k&&k.c(),m=_(),y=f("div"),C=f("button"),C.textContent="Отмена",q=_(),j=f("button"),B.c(),n(r,"class","svelte-kfa3ws"),n(c,"class","modal-close svelte-kfa3ws"),n(i,"class","modal-header svelte-kfa3ws"),n(u,"class","modal-description svelte-kfa3ws"),n(g,"type","text"),n(g,"class","token-input user-input svelte-kfa3ws"),n(g,"placeholder","например: mycode"),N(g,"error",l[10]),n(h,"class","token-input-wrapper svelte-kfa3ws"),n(a,"class","modal-body svelte-kfa3ws"),n(C,"class","cancel-btn svelte-kfa3ws"),n(j,"class","save-btn svelte-kfa3ws"),j.disabled=l[11],n(y,"class","modal-footer svelte-kfa3ws"),n(t,"class","modal svelte-kfa3ws"),n(e,"class","modal-overlay svelte-kfa3ws")},m(P,W){I(P,e,W),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,u),s(a,p),s(a,h),s(h,g),Ee(g,l[9]),s(h,w),S&&S.m(h,null),s(a,b),L&&L.m(a,null),s(a,v),k&&k.m(a,null),s(t,m),s(t,y),s(y,C),s(y,q),s(y,j),B.m(j,null),M||(A=[O(c,"click",l[40]),O(g,"input",l[41]),O(g,"keydown",l[42]),O(C,"click",l[43]),O(j,"click",l[21]),O(t,"click",$e(l[31])),O(e,"click",l[44])],M=!0)},p(P,W){W[0]&512&&g.value!==P[9]&&Ee(g,P[9]),W[0]&1024&&N(g,"error",P[10]),P[9]?S?S.p(P,W):(S=yl(P),S.c(),S.m(h,null)):S&&(S.d(1),S=null),P[10]?L?L.p(P,W):(L=Cl(P),L.c(),L.m(a,v)):L&&(L.d(1),L=null),P[1]?k?k.p(P,W):(k=Sl(P),k.c(),k.m(a,null)):k&&(k.d(1),k=null),U!==(U=D(P))&&(B.d(1),B=U(P),B&&(B.c(),B.m(j,null))),W[0]&2048&&(j.disabled=P[11])},d(P){P&&T(e),S&&S.d(),L&&L.d(),k&&k.d(),B.d(),M=!1,Re(A)}}}function yl(l){let e,t,i;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-kfa3ws"),n(e,"title","Очистить")},m(r,o){I(r,e,o),t||(i=O(e,"click",l[24]),t=!0)},p:ye,d(r){r&&T(e),t=!1,i()}}}function Cl(l){let e,t;return{c(){e=f("p"),t=H(l[10]),n(e,"class","error-text svelte-kfa3ws")},m(i,r){I(i,e,r),s(e,t)},p(i,r){r[0]&1024&&$(t,i[10])},d(i){i&&T(e)}}}function Sl(l){let e,t,i,r,o,c,d,a;return{c(){e=f("div"),t=J("svg"),i=J("polyline"),r=_(),o=f("span"),c=H("Загружены слова: "),d=f("strong"),a=H(l[1]),n(i,"points","20 6 9 17 4 12"),n(t,"width","16"),n(t,"height","16"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(d,"class","svelte-kfa3ws"),n(e,"class","current-user-info svelte-kfa3ws")},m(u,p){I(u,e,p),s(e,t),s(t,i),s(e,r),s(e,o),s(o,c),s(o,d),s(d,a)},p(u,p){p[0]&2&&$(a,u[1])},d(u){u&&T(e)}}}function vi(l){let e;return{c(){e=H("Загрузить")},m(t,i){I(t,e,i)},d(t){t&&T(e)}}}function mi(l){let e,t;return{c(){e=f("span"),t=H(`
              Загрузка...`),n(e,"class","loading-spinner-small svelte-kfa3ws")},m(i,r){I(i,e,r),I(i,t,r)},d(i){i&&(T(e),T(t))}}}function _i(l){let e,t;return e=new ui({}),{c(){It(e.$$.fragment)},m(i,r){_t(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){gt(e.$$.fragment,i),t=!1},d(i){kt(e,i)}}}function ki(l){let e,t;return e=new Pn({}),{c(){It(e.$$.fragment)},m(i,r){_t(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){gt(e.$$.fragment,i),t=!1},d(i){kt(e,i)}}}function wi(l){let e,t;return e=new pn({}),{c(){It(e.$$.fragment)},m(i,r){_t(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){gt(e.$$.fragment,i),t=!1},d(i){kt(e,i)}}}function jl(l){let e,t;return{c(){e=f("span"),t=H(l[13]),n(e,"class","study-badge svelte-kfa3ws")},m(i,r){I(i,e,r),s(e,t)},p(i,r){r[0]&8192&&$(t,i[13])},d(i){i&&T(e)}}}function bi(l){let e,t,i,r,o,c,d,a,u,p,h,g,w,b,v,m,y,C,q,j,M,A,S,L,k,D,U,B,P,W,z,E,R,re,oe,ge,fe,de,ke,ie,X,ae,_e,Te,De,Ce,V,pe,he,ce,we,qe,G,Z,K,be,ee,Ie,ve,te=l[15]&&pl(),ne=l[16]&&gl(),Q=l[12]&&hl(l),ue=l[5]&&_l(l),F=l[8]&&bl(l);const Ne=[wi,ki,_i],Me=[];function Ge(le,me){return le[4]==="add"?0:le[4]==="study"?1:le[4]==="lists"?2:-1}~(ie=Ge(l))&&(X=Me[ie]=Ne[ie](l));let Le=l[13]>0&&jl(l);return{c(){e=f("div"),t=f("div"),i=_(),r=f("nav"),o=f("div"),o.innerHTML='<svg width="32" height="32" viewBox="0 0 100 100"><defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#6366f1"></stop><stop offset="100%" style="stop-color:#a855f7"></stop></linearGradient></defs><rect width="100" height="100" rx="20" fill="url(#logoGrad)"></rect><text x="50" y="65" font-family="Arial" font-size="50" font-weight="bold" fill="white" text-anchor="middle">F</text></svg> <span class="brand-name svelte-kfa3ws">Flash Words</span>',c=_(),d=f("div"),a=f("button"),u=J("svg"),p=J("path"),h=J("circle"),g=_(),te&&te.c(),w=_(),b=f("button"),v=J("svg"),m=J("path"),y=J("polyline"),C=J("polyline"),q=J("polyline"),j=J("polyline"),M=J("line"),A=_(),ne&&ne.c(),S=_(),L=f("div"),k=f("button"),D=J("svg"),U=J("path"),B=J("path"),P=_(),W=f("span"),z=H(l[14]),E=_(),R=J("svg"),re=J("polyline"),oe=_(),Q&&Q.c(),ge=_(),ue&&ue.c(),fe=_(),F&&F.c(),de=_(),ke=f("main"),X&&X.c(),ae=_(),_e=f("nav"),Te=f("button"),Te.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg> <span class="svelte-kfa3ws">Добавить</span>',De=_(),Ce=f("button"),V=f("div"),pe=J("svg"),he=J("rect"),ce=J("path"),we=J("path"),qe=_(),Le&&Le.c(),G=_(),Z=f("span"),Z.textContent="Изучать",K=_(),be=f("button"),be.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kfa3ws"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> <span class="svelte-kfa3ws">Списки</span>',n(t,"class","background-pattern svelte-kfa3ws"),n(o,"class","nav-brand svelte-kfa3ws"),n(p,"d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"),n(h,"cx","12"),n(h,"cy","7"),n(h,"r","4"),n(u,"width","20"),n(u,"height","20"),n(u,"viewBox","0 0 24 24"),n(u,"fill","none"),n(u,"stroke","currentColor"),n(u,"stroke-width","2"),n(a,"class","user-btn svelte-kfa3ws"),n(a,"title","Загрузить слова пользователя"),N(a,"has-user",l[15]),n(m,"d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"),n(y,"points","7.5 4.21 12 6.81 16.5 4.21"),n(C,"points","7.5 19.79 7.5 14.6 3 12"),n(q,"points","21 12 16.5 14.6 16.5 19.79"),n(j,"points","3.27 6.96 12 12.01 20.73 6.96"),n(M,"x1","12"),n(M,"y1","22.08"),n(M,"x2","12"),n(M,"y2","12"),n(v,"width","20"),n(v,"height","20"),n(v,"viewBox","0 0 24 24"),n(v,"fill","none"),n(v,"stroke","currentColor"),n(v,"stroke-width","2"),n(b,"class","ai-token-btn svelte-kfa3ws"),n(b,"title","Настройка AI токена"),N(b,"has-token",l[16]),n(U,"d","M4 19.5A2.5 2.5 0 0 1 6.5 17H20"),n(B,"d","M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"),n(D,"width","18"),n(D,"height","18"),n(D,"viewBox","0 0 24 24"),n(D,"fill","none"),n(D,"stroke","currentColor"),n(D,"stroke-width","2"),n(W,"class","dictionary-label svelte-kfa3ws"),n(re,"points","6 9 12 15 18 9"),n(R,"class","dropdown-arrow svelte-kfa3ws"),n(R,"width","14"),n(R,"height","14"),n(R,"viewBox","0 0 24 24"),n(R,"fill","none"),n(R,"stroke","currentColor"),n(R,"stroke-width","2"),N(R,"open",l[12]),n(k,"class","dictionary-btn svelte-kfa3ws"),n(k,"title","Выбрать словарь"),N(k,"has-dictionary",l[2]),n(L,"class","dictionary-selector svelte-kfa3ws"),n(d,"class","nav-stats svelte-kfa3ws"),n(r,"class","navbar svelte-kfa3ws"),n(ke,"class","main-content svelte-kfa3ws"),n(Te,"class","nav-item svelte-kfa3ws"),N(Te,"active",l[4]==="add"),n(he,"x","2"),n(he,"y","4"),n(he,"width","20"),n(he,"height","16"),n(he,"rx","2"),n(ce,"d","M12 8v8"),n(we,"d","M8 12h8"),n(pe,"width","28"),n(pe,"height","28"),n(pe,"viewBox","0 0 24 24"),n(pe,"fill","none"),n(pe,"stroke","currentColor"),n(pe,"stroke-width","2"),n(pe,"class","svelte-kfa3ws"),n(V,"class","study-btn-inner svelte-kfa3ws"),n(Z,"class","svelte-kfa3ws"),n(Ce,"class","nav-item study svelte-kfa3ws"),N(Ce,"active",l[4]==="study"),n(be,"class","nav-item svelte-kfa3ws"),N(be,"active",l[4]==="lists"),n(_e,"class","bottom-nav svelte-kfa3ws"),n(e,"class","app svelte-kfa3ws")},m(le,me){I(le,e,me),s(e,t),s(e,i),s(e,r),s(r,o),s(r,c),s(r,d),s(d,a),s(a,u),s(u,p),s(u,h),s(a,g),te&&te.m(a,null),s(d,w),s(d,b),s(b,v),s(v,m),s(v,y),s(v,C),s(v,q),s(v,j),s(v,M),s(b,A),ne&&ne.m(b,null),s(d,S),s(d,L),s(L,k),s(k,D),s(D,U),s(D,B),s(k,P),s(k,W),s(W,z),s(k,E),s(k,R),s(R,re),s(L,oe),Q&&Q.m(L,null),s(e,ge),ue&&ue.m(e,null),s(e,fe),F&&F.m(e,null),s(e,de),s(e,ke),~ie&&Me[ie].m(ke,null),s(e,ae),s(e,_e),s(_e,Te),s(_e,De),s(_e,Ce),s(Ce,V),s(V,pe),s(pe,he),s(pe,ce),s(pe,we),s(V,qe),Le&&Le.m(V,null),s(Ce,G),s(Ce,Z),s(_e,K),s(_e,be),ee=!0,Ie||(ve=[O(a,"click",l[20]),O(b,"click",l[17]),O(k,"click",$e(l[34])),O(Te,"click",l[45]),O(Ce,"click",l[46]),O(be,"click",l[47]),O(e,"click",l[23])],Ie=!0)},p(le,me){le[15]?te||(te=pl(),te.c(),te.m(a,null)):te&&(te.d(1),te=null),(!ee||me[0]&32768)&&N(a,"has-user",le[15]),le[16]?ne||(ne=gl(),ne.c(),ne.m(b,null)):ne&&(ne.d(1),ne=null),(!ee||me[0]&65536)&&N(b,"has-token",le[16]),(!ee||me[0]&16384)&&$(z,le[14]),(!ee||me[0]&4096)&&N(R,"open",le[12]),(!ee||me[0]&4)&&N(k,"has-dictionary",le[2]),le[12]?Q?Q.p(le,me):(Q=hl(le),Q.c(),Q.m(L,null)):Q&&(Q.d(1),Q=null),le[5]?ue?ue.p(le,me):(ue=_l(le),ue.c(),ue.m(e,fe)):ue&&(ue.d(1),ue=null),le[8]?F?F.p(le,me):(F=bl(le),F.c(),F.m(e,de)):F&&(F.d(1),F=null);let se=ie;ie=Ge(le),ie!==se&&(X&&(Kl(),gt(Me[se],1,1,()=>{Me[se]=null}),Xl()),~ie?(X=Me[ie],X||(X=Me[ie]=Ne[ie](le),X.c()),lt(X,1),X.m(ke,null)):X=null),(!ee||me[0]&16)&&N(Te,"active",le[4]==="add"),le[13]>0?Le?Le.p(le,me):(Le=jl(le),Le.c(),Le.m(V,null)):Le&&(Le.d(1),Le=null),(!ee||me[0]&16)&&N(Ce,"active",le[4]==="study"),(!ee||me[0]&16)&&N(be,"active",le[4]==="lists")},i(le){ee||(lt(X),ee=!0)},o(le){gt(X),ee=!1},d(le){le&&T(e),te&&te.d(),ne&&ne.d(),Q&&Q.d(),ue&&ue.d(),F&&F.d(),~ie&&Me[ie].d(),Le&&Le.d(),Ie=!1,Re(ve)}}}function ql(l){return l<.01?`$${l.toFixed(6)}`:l<1?`$${l.toFixed(4)}`:`$${l.toFixed(2)}`}function yi(l,e,t){let i,r,o,c,d,a,u,p,h,g,w,b;Qe(l,He,G=>t(28,g=G)),Qe(l,We,G=>t(29,w=G)),Qe(l,Xe,G=>t(30,b=G));let v="study",m=!1,y="",C=!1,q=0,j=!1,M="",A="",S=!1,L="",k=!1;function D(){typeof localStorage<"u"&&t(7,q=parseFloat(localStorage.getItem("ai_total_cost")||"0")),t(5,m=!0)}function U(){typeof localStorage<"u"&&(localStorage.setItem("ai_token",y),t(6,C=!0),setTimeout(()=>{t(6,C=!1),t(5,m=!1)},1e3))}function B(){t(0,y=""),typeof localStorage<"u"&&localStorage.removeItem("ai_token")}function P(){t(9,M=L),t(10,A=""),t(8,j=!0)}async function W(){if(!M.trim()){t(1,L=""),typeof localStorage<"u"&&localStorage.removeItem("user_name"),t(8,j=!1);return}t(11,S=!0),t(10,A="");try{const Z=await fetch(`/flash/words/${M.trim()}.json`);if(!Z.ok)throw new Error("Файл не найден");const K=await Z.json(),be=K.language||"en";K.language&&Ze.set(K.language),t(1,L=M.trim()),typeof localStorage<"u"&&localStorage.setItem("user_name",L);let ee;if(be==="en"?ee="default":(ee=L,He.resetDictionary(ee)),He.importCards(K,ee),be==="en"){if(!i.find(ve=>ve.id==="default")){const ve=`${Ye("en")} (default)`;Xe.addDictionary("default",ve,"en",!1)}We.set("default")}else{const Ie=`${L} (${Ye(be)})`;Xe.addDictionary(L,Ie,be,!1),We.set(L)}t(8,j=!1)}catch{t(10,A=`Файл "${M.trim()}.json" не найден`)}finally{t(11,S=!1)}}async function z(G){if(!G){We.set(""),t(12,k=!1);return}const Z=i.find(K=>K.id===G);if(Z){We.set(G),Z.language&&Ze.set(Z.language),t(12,k=!1);return}t(11,S=!0);try{const be=await fetch(`/flash/words/${G}.json`);if(!be.ok)throw new Error("Файл не найден");const ee=await be.json(),Ie=ee.language||"en";ee.language&&Ze.set(ee.language);let ve;if(Ie==="en"?ve="default":(ve=G,He.resetDictionary(ve)),He.importCards(ee,ve),Ie==="en"){if(!i.find(ne=>ne.id==="default")){const ne=`${Ye("en")} (default)`;Xe.addDictionary("default",ne,"en",!1)}We.set("default")}else{const te=`${G} (${Ye(Ie)})`;Xe.addDictionary(G,te,Ie,!1),We.set(G)}t(12,k=!1)}catch(K){console.error("Ошибка загрузки словаря:",K),alert(`Ошибка загрузки словаря "${G}"`)}finally{t(11,S=!1)}}function E(G){if(G===r){t(12,k=!1);return}z(G)}Ml(()=>{if(!i.find(Z=>Z.id==="default")){const Z=`${Ye("en")} (default)`;Xe.addDictionary("default",Z,"en",!1),(!r||r==="")&&We.set("default")}if(r){const Z=i.find(K=>K.id===r);Z&&(Z.isImported||r==="default")?Z.language&&Ze.set(Z.language):z(r)}else{We.set("default");const Z=i.find(K=>K.id==="default");Z&&Z.language&&Ze.set(Z.language)}});function R(G){k&&!G.target.closest(".dictionary-selector")&&t(12,k=!1)}function re(){t(9,M=""),t(1,L=""),typeof localStorage<"u"&&localStorage.removeItem("user_name")}const oe=(G,Z)=>G.filter(K=>(K.dictionaryId||"default")===Z);function ge(G){tt.call(this,l,G)}function fe(G){tt.call(this,l,G)}function de(G){tt.call(this,l,G)}const ke=()=>t(12,k=!k),ie=G=>E(G.id),X=()=>t(5,m=!1);function ae(){y=this.value,t(0,y)}const _e=()=>t(5,m=!1),Te=()=>t(5,m=!1),De=()=>t(8,j=!1);function Ce(){M=this.value,t(9,M)}const V=G=>G.key==="Enter"&&W(),pe=()=>t(8,j=!1),he=()=>t(8,j=!1),ce=()=>t(4,v="add"),we=()=>t(4,v="study"),qe=()=>t(4,v="lists");return l.$$.update=()=>{var G;if(l.$$.dirty[0]&536870912&&t(2,r=w),l.$$.dirty[0]&268435460&&r){const Z={learned:g.learned.filter(K=>(K.dictionaryId||"default")===r),unlearned:g.unlearned.filter(K=>(K.dictionaryId||"default")===r),draft:(g.draft||[]).filter(K=>(K.dictionaryId||"default")===r)};Xe.updateDictionaryData(r,Z)}l.$$.dirty[0]&1073741824&&t(3,i=b),l.$$.dirty[0]&1&&t(16,o=y&&y.length>0),l.$$.dirty[0]&2&&t(15,c=L&&L.length>0),l.$$.dirty[0]&12&&i.length>0&&(!r||r==="")&&(i.find(K=>K.id==="default")?We.set("default"):i.length>0&&We.set(i[0].id)),l.$$.dirty[0]&12&&t(14,d=((G=i.find(Z=>Z.id===r))==null?void 0:G.name)||(i.length>0?"Выберите словарь":"Нет словарей")),l.$$.dirty[0]&268435460&&t(27,a=oe(g.learned,r)),l.$$.dirty[0]&268435460&&t(26,u=oe(g.unlearned,r)),l.$$.dirty[0]&268435460&&t(25,p=oe(g.draft||[],r)),l.$$.dirty[0]&234881024&&a.length+u.length+p.length,l.$$.dirty[0]&67108864&&t(13,h=u.length),l.$$.dirty[0]&33554432&&p.length},[y,L,r,i,v,m,C,q,j,M,A,S,k,h,d,c,o,D,U,B,P,W,E,R,re,p,u,a,g,w,b,ge,fe,de,ke,ie,X,ae,_e,Te,De,Ce,V,pe,he,ce,we,qe]}class Ci extends bt{constructor(e){super(),wt(this,e,yi,bi,at,{},null,[-1,-1])}}new Ci({target:document.getElementById("app")});
