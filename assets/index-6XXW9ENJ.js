var Al=Object.defineProperty;var El=(l,e,t)=>e in l?Al(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var xe=(l,e,t)=>El(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function ye(){}function Il(l){return l()}function Nt(){return Object.create(null)}function Je(l){l.forEach(Il)}function Ml(l){return typeof l=="function"}function at(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let ht;function Ve(l,e){return l===e?!0:(ht||(ht=document.createElement("a")),ht.href=e,l===ht.href)}function Ol(l){return Object.keys(l).length===0}function Ul(l,...e){if(l==null){for(const s of e)s(void 0);return ye}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Qe(l,e,t){l.$$.on_destroy.push(Ul(e,t))}function i(l,e){l.appendChild(e)}function D(l,e,t){l.insertBefore(e,t||null)}function M(l){l.parentNode&&l.parentNode.removeChild(l)}function Hl(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function f(l){return document.createElement(l)}function j(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function R(l){return document.createTextNode(l)}function g(){return R(" ")}function nt(){return R("")}function U(l,e,t,s){return l.addEventListener(e,t,s),()=>l.removeEventListener(e,t,s)}function Rl(l){return function(e){return e.preventDefault(),l.call(this,e)}}function $e(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function n(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Jl(l){return Array.from(l.childNodes)}function $(l,e){e=""+e,l.data!==e&&(l.data=e)}function Oe(l,e){l.value=e??""}function jl(l,e,t,s){l.style.setProperty(e,t,"")}function B(l,e,t){l.classList.toggle(e,!!t)}class Pl{constructor(e=!1){xe(this,"is_svg",!1);xe(this,"e");xe(this,"n");xe(this,"t");xe(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,s=null){this.e||(this.is_svg?this.e=j(t.nodeName):this.e=f(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(s)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)D(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(M)}}let pt;function dt(l){pt=l}function Dl(){if(!pt)throw new Error("Function called outside component initialization");return pt}function ql(l){Dl().$$.on_mount.push(l)}function Fl(l){Dl().$$.on_destroy.push(l)}function tt(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const rt=[],Lt=[];let ot=[];const Bt=[],Wl=Promise.resolve();let Tt=!1;function zl(){Tt||(Tt=!0,Wl.then(Nl))}function It(l){ot.push(l)}const St=new Set;let st=0;function Nl(){if(st!==0)return;const l=pt;do{try{for(;st<rt.length;){const e=rt[st];st++,dt(e),Vl(e.$$)}}catch(e){throw rt.length=0,st=0,e}for(dt(null),rt.length=0,st=0;Lt.length;)Lt.pop()();for(let e=0;e<ot.length;e+=1){const t=ot[e];St.has(t)||(St.add(t),t())}ot.length=0}while(rt.length);for(;Bt.length;)Bt.pop()();Tt=!1,St.clear(),dt(l)}function Vl(l){if(l.fragment!==null){l.update(),Je(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(It)}}function Gl(l){const e=[],t=[];ot.forEach(s=>l.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),ot=e}const _t=new Set;let et;function Kl(){et={r:0,c:[],p:et}}function Xl(){et.r||Je(et.c),et=et.p}function lt(l,e){l&&l.i&&(_t.delete(l),l.i(e))}function mt(l,e,t,s){if(l&&l.o){if(_t.has(l))return;_t.add(l),et.c.push(()=>{_t.delete(l),s&&(t&&l.d(1),s())}),l.o(e)}else s&&s()}function vt(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Yl(l,e){l.d(1),e.delete(l.key)}function Ql(l,e,t,s,r,o,c,d,a,u,p,h){let m=l.length,k=o.length,w=m;const _={};for(;w--;)_[l[w].key]=w;const v=[],y=new Map,C=new Map,T=[];for(w=k;w--;){const S=h(r,o,w),I=t(S);let b=c.get(I);b?T.push(()=>b.p(S,e)):(b=u(I,S),b.c()),y.set(I,v[w]=b),I in _&&C.set(I,Math.abs(w-_[I]))}const L=new Set,q=new Set;function E(S){lt(S,1),S.m(d,p),c.set(S.key,S),p=S.first,k--}for(;m&&k;){const S=v[k-1],I=l[m-1],b=S.key,N=I.key;S===I?(p=S.first,m--,k--):y.has(N)?!c.has(b)||L.has(b)?E(S):q.has(N)?m--:C.get(b)>C.get(N)?(q.add(b),E(S)):(L.add(N),m--):(a(I,c),m--)}for(;m--;){const S=l[m];y.has(S.key)||a(S,c)}for(;k;)E(v[k-1]);return Je(T),v}function Dt(l){l&&l.c()}function gt(l,e,t){const{fragment:s,after_update:r}=l.$$;s&&s.m(e,t),It(()=>{const o=l.$$.on_mount.map(Il).filter(Ml);l.$$.on_destroy?l.$$.on_destroy.push(...o):Je(o),l.$$.on_mount=[]}),r.forEach(It)}function bt(l,e){const t=l.$$;t.fragment!==null&&(Gl(t.after_update),Je(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Zl(l,e){l.$$.dirty[0]===-1&&(rt.push(l),zl(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function kt(l,e,t,s,r,o,c=null,d=[-1]){const a=pt;dt(l);const u=l.$$={fragment:null,ctx:[],props:o,update:ye,not_equal:r,bound:Nt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Nt(),dirty:d,skip_bound:!1,root:e.target||a.$$.root};c&&c(u.root);let p=!1;if(u.ctx=t?t(l,e.props||{},(h,m,...k)=>{const w=k.length?k[0]:m;return u.ctx&&r(u.ctx[h],u.ctx[h]=w)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](w),p&&Zl(l,h)),m}):[],u.update(),p=!0,Je(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const h=Jl(e.target);u.fragment&&u.fragment.l(h),h.forEach(M)}else u.fragment&&u.fragment.c();e.intro&&lt(l.$$.fragment),gt(l,e.target,e.anchor),Nl()}dt(a)}class wt{constructor(){xe(this,"$$");xe(this,"$$set")}$destroy(){bt(this,1),this.$destroy=ye}$on(e,t){if(!Ml(t))return ye;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!Ol(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xl);const it=[];function yt(l,e=ye){let t;const s=new Set;function r(d){if(at(l,d)&&(l=d,t)){const a=!it.length;for(const u of s)u[1](),it.push(u,l);if(a){for(let u=0;u<it.length;u+=2)it[u][0](it[u+1]);it.length=0}}}function o(d){r(d(l))}function c(d,a=ye){const u=[d,a];return s.add(u),s.size===1&&(t=e(r,o)||ye),d(l),()=>{s.delete(u),s.size===0&&t&&(t(),t=null)}}return{set:r,update:o,subscribe:c}}const ze="flash-cards-data";function $l(){const l=typeof localStorage<"u"?localStorage.getItem(ze):null,e=l?JSON.parse(l):{learned:[],unlearned:[],draft:[]};e.cards&&e.cards.length>0&&(e.unlearned=[...e.unlearned,...e.cards],delete e.cards),e.draft||(e.draft=[]);const t=a=>a.map(u=>({...u,dictionaryId:u.dictionaryId||"default"}));e.learned=t(e.learned),e.unlearned=t(e.unlearned),e.draft=t(e.draft);const s=new Set,r=a=>a.filter(u=>s.has(u.id)?!1:(s.add(u.id),!0));e.learned=r(e.learned),e.unlearned=r(e.unlearned),e.draft=r(e.draft),typeof localStorage<"u"&&l&&localStorage.setItem(ze,JSON.stringify(e));const{subscribe:o,set:c,update:d}=yt(e);return{subscribe:o,addCard:(a,u,p="",h="",m="default")=>{d(k=>{const w={id:Date.now(),word:a,translation:u,association:p,imageUrl:h,dictionaryId:m,createdAt:new Date().toISOString()},_={...k,unlearned:[...k.unlearned,w]};return localStorage.setItem(ze,JSON.stringify(_)),_})},markAsLearned:a=>{d(u=>{const p=u.unlearned.find(m=>m.id===a);if(!p)return u;const h={...u,unlearned:u.unlearned.filter(m=>m.id!==a),learned:[...u.learned,{...p,learnedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(h)),h})},markAsUnlearned:a=>{d(u=>{const p=u.unlearned.find(m=>m.id===a);if(!p)return u;const h={...u,unlearned:[...u.unlearned.filter(m=>m.id!==a),{...p,reviewedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(h)),h})},moveToStudy:a=>{d(u=>{const p=u.learned.find(m=>m.id===a);if(!p)return u;const h={...u,learned:u.learned.filter(m=>m.id!==a),unlearned:[...u.unlearned,p]};return localStorage.setItem(ze,JSON.stringify(h)),h})},moveAllToStudy:()=>{d(a=>{if(a.learned.length===0)return a;const u={...a,learned:[],unlearned:[...a.unlearned,...a.learned]};return localStorage.setItem(ze,JSON.stringify(u)),u})},deleteCard:(a,u="unlearned")=>{d(p=>{const h={...p,[u]:p[u].filter(m=>m.id!==a)};return localStorage.setItem(ze,JSON.stringify(h)),h})},editCard:(a,u,p)=>{d(h=>{const m={...h,[u]:h[u].map(k=>k.id===a?{...k,...p,updatedAt:new Date().toISOString()}:k)};return localStorage.setItem(ze,JSON.stringify(m)),m})},addDraftCards:(a,u="default")=>{d(p=>{const h=new Set([...p.unlearned.map(_=>_.word.toLowerCase()),...p.learned.map(_=>_.word.toLowerCase()),...p.draft.map(_=>_.word.toLowerCase())]);let m=0;const k=a.filter(_=>_.trim()&&!h.has(_.trim().toLowerCase())).map(_=>({id:`draft_${Date.now()}_${m++}_${Math.random().toString(36).substr(2,9)}`,word:_.trim(),translation:"",association:"",imageUrl:"",dictionaryId:u,createdAt:new Date().toISOString(),isDraft:!0})),w={...p,draft:[...p.draft,...k]};return localStorage.setItem(ze,JSON.stringify(w)),w})},activateCard:a=>{d(u=>{const p=u.draft.find(w=>w.id===a);if(!p)return u;const{isDraft:h,...m}=p,k={...u,draft:u.draft.filter(w=>w.id!==a),unlearned:[...u.unlearned,{...m,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(k)),k})},editDraftCard:(a,u)=>{d(p=>{var w,_;const h=p.draft.find(v=>v.id===a);if(!h)return p;const m={...h,...u,updatedAt:new Date().toISOString()};if(((w=m.translation)==null?void 0:w.trim())&&((_=m.imageUrl)==null?void 0:_.trim())){const{isDraft:v,...y}=m,C={...p,draft:p.draft.filter(T=>T.id!==a),unlearned:[...p.unlearned,{...y,activatedAt:new Date().toISOString()}]};return localStorage.setItem(ze,JSON.stringify(C)),C}else{const v={...p,draft:p.draft.map(y=>y.id===a?m:y)};return localStorage.setItem(ze,JSON.stringify(v)),v}})},reset:()=>{const a={learned:[],unlearned:[],draft:[]};localStorage.setItem(ze,JSON.stringify(a)),c(a)},resetDictionary:a=>{d(u=>{const p={learned:u.learned.filter(h=>(h.dictionaryId||"default")!==a),unlearned:u.unlearned.filter(h=>(h.dictionaryId||"default")!==a),draft:u.draft.filter(h=>(h.dictionaryId||"default")!==a)};return localStorage.setItem(ze,JSON.stringify(p)),p})},importCards:(a,u)=>{d(p=>{const h=a.unlearned||[],m=a.learned||[],k=a.draft||[],w=S=>S.map(I=>({...I,dictionaryId:u||"default"})),_=w(h),v=w(m),y=w(k),C=new Set([...p.unlearned.map(S=>S.word.toLowerCase()),...p.learned.map(S=>S.word.toLowerCase()),...p.draft.map(S=>S.word.toLowerCase())]),T=_.filter(S=>!C.has(S.word.toLowerCase())),L=v.filter(S=>!C.has(S.word.toLowerCase())),q=y.filter(S=>!C.has(S.word.toLowerCase())),E={learned:[...p.learned,...L],unlearned:[...p.unlearned,...T],draft:[...p.draft,...q]};return localStorage.setItem(ze,JSON.stringify(E)),E})}}}const Re=$l(),en={en:"Английский",pt:"Португальский",es:"Испанский"},tn={en:"English",pt:"Portuguese",es:"Spanish"},ln=typeof localStorage<"u"&&localStorage.getItem("target_language")||"en",Ze=yt(ln);Ze.subscribe(l=>{typeof localStorage<"u"&&localStorage.setItem("target_language",l)});function Ye(l){return en[l]||l}function nn(l){return tn[l]||l}const ut="loaded-dictionaries",Mt="current_dictionary",sn=typeof localStorage<"u"&&localStorage.getItem(Mt)||"",We=yt(sn);We.subscribe(l=>{typeof localStorage<"u"&&(l?localStorage.setItem(Mt,l):localStorage.removeItem(Mt))});function rn(){const l=typeof localStorage<"u"?localStorage.getItem(ut):null,e=l?JSON.parse(l):[],{subscribe:t,set:s,update:r}=yt(e);return{subscribe:t,addDictionary:(o,c,d,a=!1)=>{r(u=>{if(u.find(k=>k.id===o))return u.map(k=>k.id===o?{...k,name:c,language:d,isImported:a}:k);const h={id:o,name:c,language:d,isImported:a},m=[...u,h];return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(m)),m})},removeDictionary:o=>{r(c=>{const d=c.filter(a=>a.id!==o);return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(d)),d})},clear:()=>{typeof localStorage<"u"&&localStorage.removeItem(ut),s([])},updateDictionaryData:(o,c)=>{r(d=>{const a=d.map(u=>u.id===o?{...u,data:c}:u);return typeof localStorage<"u"&&localStorage.setItem(ut,JSON.stringify(a)),a})}}}const Xe=rn();function on(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg> <span class="svelte-1fsq4u7">Нажмите, чтобы добавить изображение</span>',n(e,"class","image-placeholder svelte-1fsq4u7")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function an(l){let e,t,s,r;return{c(){e=f("img"),Ve(e.src,t=l[4])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","preview-image svelte-1fsq4u7")},m(o,c){D(o,e,c),s||(r=U(e,"error",l[21]),s=!0)},p(o,c){c[0]&16&&!Ve(e.src,t=o[4])&&n(e,"src",t)},d(o){o&&M(e),s=!1,r()}}}function At(l){let e;return{c(){e=f("div"),e.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
      Карточка добавлена!`,n(e,"class","success-toast svelte-1fsq4u7")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function Et(l){let e,t,s,r,o,c=l[9]>0?`Импортировано ${l[9]} карточек!`:"Новых карточек не найдено",d;return{c(){e=f("div"),t=j("svg"),s=j("polyline"),r=j("line"),o=g(),d=R(c),n(s,"points","17 8 12 3 7 8"),n(r,"x1","12"),n(r,"y1","3"),n(r,"x2","12"),n(r,"y2","15"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast import svelte-1fsq4u7")},m(a,u){D(a,e,u),i(e,t),i(t,s),i(t,r),i(e,o),i(e,d)},p(a,u){u[0]&512&&c!==(c=a[9]>0?`Импортировано ${a[9]} карточек!`:"Новых карточек не найдено")&&$(d,c)},d(a){a&&M(e)}}}function Ot(l){let e,t,s,r,o,c,d,a,u,p=l[12]>0?`Добавлено ${l[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)",h;return{c(){e=f("div"),t=j("svg"),s=j("line"),r=j("line"),o=j("line"),c=j("line"),d=j("line"),a=j("line"),u=g(),h=R(p),n(s,"x1","8"),n(s,"y1","6"),n(s,"x2","21"),n(s,"y2","6"),n(r,"x1","8"),n(r,"y1","12"),n(r,"x2","21"),n(r,"y2","12"),n(o,"x1","8"),n(o,"y1","18"),n(o,"x2","21"),n(o,"y2","18"),n(c,"x1","3"),n(c,"y1","6"),n(c,"x2","3.01"),n(c,"y2","6"),n(d,"x1","3"),n(d,"y1","12"),n(d,"x2","3.01"),n(d,"y2","12"),n(a,"x1","3"),n(a,"y1","18"),n(a,"x2","3.01"),n(a,"y2","18"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast bulk svelte-1fsq4u7")},m(m,k){D(m,e,k),i(e,t),i(t,s),i(t,r),i(t,o),i(t,c),i(t,d),i(t,a),i(e,u),i(e,h)},p(m,k){k[0]&4096&&p!==(p=m[12]>0?`Добавлено ${m[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)")&&$(h,p)},d(m){m&&M(e)}}}function Ut(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y,C,T,L,q,E,S,I=l[7]&&Ht(l),b=l[4]&&Rt(l);return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("h2"),r.textContent="Добавить изображение",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("div"),p=f("label"),p.textContent="Ссылка на изображение",h=g(),m=f("input"),k=g(),I&&I.c(),w=g(),_=f("div"),b&&b.c(),v=g(),y=f("button"),y.textContent="Отмена",C=g(),T=f("button"),L=R("Сохранить"),n(r,"class","svelte-1fsq4u7"),n(c,"class","modal-close svelte-1fsq4u7"),n(s,"class","modal-header svelte-1fsq4u7"),n(p,"for","imageUrl"),n(p,"class","svelte-1fsq4u7"),n(m,"id","imageUrl"),n(m,"type","url"),n(m,"placeholder","https://example.com/image.jpg"),n(m,"class","svelte-1fsq4u7"),n(u,"class","input-group svelte-1fsq4u7"),n(a,"class","modal-body svelte-1fsq4u7"),n(y,"class","btn-secondary svelte-1fsq4u7"),n(T,"class","btn-primary svelte-1fsq4u7"),T.disabled=q=l[8]&&l[7],n(_,"class","modal-actions svelte-1fsq4u7"),n(t,"class","modal svelte-1fsq4u7"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1fsq4u7"),n(e,"role","button"),n(e,"tabindex","-1")},m(N,H){D(N,e,H),i(e,t),i(t,s),i(s,r),i(s,o),i(s,c),i(t,d),i(t,a),i(a,u),i(u,p),i(u,h),i(u,m),Oe(m,l[7]),i(a,k),I&&I.m(a,null),i(t,w),i(t,_),b&&b.m(_,null),i(_,v),i(_,y),i(_,C),i(_,T),i(T,L),E||(S=[U(c,"click",l[35]),U(m,"input",l[36]),U(y,"click",l[37]),U(T,"click",l[19]),U(t,"click",$e(l[30])),U(e,"click",l[38]),U(e,"keydown",l[39])],E=!0)},p(N,H){H[0]&128&&m.value!==N[7]&&Oe(m,N[7]),N[7]?I?I.p(N,H):(I=Ht(N),I.c(),I.m(a,null)):I&&(I.d(1),I=null),N[4]?b?b.p(N,H):(b=Rt(N),b.c(),b.m(_,v)):b&&(b.d(1),b=null),H[0]&384&&q!==(q=N[8]&&N[7])&&(T.disabled=q)},d(N){N&&M(e),I&&I.d(),b&&b.d(),E=!1,Je(S)}}}function Ht(l){let e;function t(o,c){return o[8]?fn:cn}let s=t(l),r=s(l);return{c(){e=f("div"),r.c(),n(e,"class","image-preview-container svelte-1fsq4u7")},m(o,c){D(o,e,c),r.m(e,null)},p(o,c){s===(s=t(o))&&r?r.p(o,c):(r.d(1),r=s(o),r&&(r.c(),r.m(e,null)))},d(o){o&&M(e),r.d()}}}function cn(l){let e,t,s,r;return{c(){e=f("img"),Ve(e.src,t=l[7])||n(e,"src",t),n(e,"alt","Превью изображения"),n(e,"class","modal-image-preview svelte-1fsq4u7")},m(o,c){D(o,e,c),s||(r=[U(e,"error",l[21]),U(e,"load",l[22])],s=!0)},p(o,c){c[0]&128&&!Ve(e.src,t=o[7])&&n(e,"src",t)},d(o){o&&M(e),s=!1,Je(r)}}}function fn(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Не удалось загрузить изображение</span>',n(e,"class","image-error svelte-1fsq4u7")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function Rt(l){let e,t,s;return{c(){e=f("button"),e.textContent="Удалить",n(e,"class","btn-secondary danger svelte-1fsq4u7")},m(r,o){D(r,e,o),t||(s=U(e,"click",l[20]),t=!0)},p:ye,d(r){r&&M(e),t=!1,s()}}}function Jt(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y,C,T,L,q,E,S,I,b=(l[15]>0?l[15]:"")+"",N,H,A=l[15]===1?"слово":l[15]>1&&l[15]<5?"слова":l[15]>=5?"слов":"",P,W,z,O,J=l[15]>0&&jt(l);return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("h2"),r.textContent="Загрузить список слов",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("div"),u.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1fsq4u7"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg> <p class="svelte-1fsq4u7">Введите слова списком — каждое слово на новой строке. Слова будут добавлены в раздел &quot;На проработку&quot;, где вы сможете добавить перевод и изображение.</p>',p=g(),h=f("div"),m=f("label"),k=R(`Слова
            `),J&&J.c(),w=g(),_=f("textarea"),v=g(),y=f("div"),C=f("button"),C.textContent="Отмена",T=g(),L=f("button"),q=j("svg"),E=j("line"),S=j("line"),I=R(`
          Добавить `),N=R(b),H=g(),P=R(A),n(r,"class","svelte-1fsq4u7"),n(c,"class","modal-close svelte-1fsq4u7"),n(s,"class","modal-header svelte-1fsq4u7"),n(u,"class","bulk-info svelte-1fsq4u7"),n(m,"for","bulkWords"),n(m,"class","svelte-1fsq4u7"),n(_,"id","bulkWords"),n(_,"placeholder",`serendipity
ephemeral
ubiquitous
eloquent
resilient`),n(_,"rows","10"),n(_,"class","bulk-textarea svelte-1fsq4u7"),n(h,"class","input-group svelte-1fsq4u7"),n(a,"class","modal-body svelte-1fsq4u7"),n(C,"class","btn-secondary svelte-1fsq4u7"),n(E,"x1","12"),n(E,"y1","5"),n(E,"x2","12"),n(E,"y2","19"),n(S,"x1","5"),n(S,"y1","12"),n(S,"x2","19"),n(S,"y2","12"),n(q,"width","18"),n(q,"height","18"),n(q,"viewBox","0 0 24 24"),n(q,"fill","none"),n(q,"stroke","currentColor"),n(q,"stroke-width","2"),n(L,"class","btn-primary svelte-1fsq4u7"),L.disabled=W=l[15]===0,n(y,"class","modal-actions svelte-1fsq4u7"),n(t,"class","modal bulk-modal svelte-1fsq4u7"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1fsq4u7"),n(e,"role","button"),n(e,"tabindex","-1")},m(re,oe){D(re,e,oe),i(e,t),i(t,s),i(s,r),i(s,o),i(s,c),i(t,d),i(t,a),i(a,u),i(a,p),i(a,h),i(h,m),i(m,k),J&&J.m(m,null),i(h,w),i(h,_),Oe(_,l[0]),i(t,v),i(t,y),i(y,C),i(y,T),i(y,L),i(L,q),i(q,E),i(q,S),i(L,I),i(L,N),i(L,H),i(L,P),z||(O=[U(c,"click",l[26]),U(_,"input",l[40]),U(C,"click",l[26]),U(L,"click",l[27]),U(t,"click",$e(l[29])),U(e,"click",l[26]),U(e,"keydown",l[41])],z=!0)},p(re,oe){re[15]>0?J?J.p(re,oe):(J=jt(re),J.c(),J.m(m,null)):J&&(J.d(1),J=null),oe[0]&1&&Oe(_,re[0]),oe[0]&32768&&b!==(b=(re[15]>0?re[15]:"")+"")&&$(N,b),oe[0]&32768&&A!==(A=re[15]===1?"слово":re[15]>1&&re[15]<5?"слова":re[15]>=5?"слов":"")&&$(P,A),oe[0]&32768&&W!==(W=re[15]===0)&&(L.disabled=W)},d(re){re&&M(e),J&&J.d(),z=!1,Je(O)}}}function jt(l){let e,t,s,r=l[15]===1?"слово":l[15]<5?"слова":"слов",o;return{c(){e=f("span"),t=R(l[15]),s=g(),o=R(r),n(e,"class","word-count svelte-1fsq4u7")},m(c,d){D(c,e,d),i(e,t),i(e,s),i(e,o)},p(c,d){d[0]&32768&&$(t,c[15]),d[0]&32768&&r!==(r=c[15]===1?"слово":c[15]<5?"слова":"слов")&&$(o,r)},d(c){c&&M(e)}}}function un(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y,C,T,L=l[16].toLowerCase()+"",q,E,S,I=l[1].length+"",b,N,H,A,P,W,z,O,J,re=l[2].length+"",oe,me,fe,de,be,se,X,ae,ge,Me,Ne,Ce=l[3].length+"",V,pe,he,ce,ke,Te,G,Z,K,we,ee,De,_e,te,ne=(l[1]||"Слово")+"",Q,ue,F,Be=(l[2]||"Перевод")+"",qe,Ge,Ie,le,ve,ie,Ae,ct,Y;function Fe(x,Le){return x[4]?an:on}let Ke=Fe(l),je=Ke(l),Pe=l[5]&&At(),Se=l[10]&&Et(l),He=l[13]&&Ot(l),Ee=l[6]&&Ut(l),Ue=l[11]&&Jt(l);return{c(){e=f("input"),t=g(),s=f("div"),r=f("div"),o=f("div"),c=f("h1"),c.textContent="Новая карточка",d=g(),a=f("div"),u=f("button"),u.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',p=g(),h=f("button"),h.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>',m=g(),k=f("p"),k.textContent="Добавьте слово для изучения",w=g(),_=f("div"),v=f("form"),y=f("div"),C=f("label"),T=R("Слово ("),q=R(L),E=R(`)
          `),S=f("span"),b=R(I),N=R("/35"),H=g(),A=f("input"),P=g(),W=f("div"),z=f("label"),O=R(`Перевод
          `),J=f("span"),oe=R(re),me=R("/50"),fe=g(),de=f("input"),be=g(),se=f("div"),X=f("label"),ae=R(`Ассоциация 
          `),ge=f("span"),ge.textContent="(необязательно)",Me=g(),Ne=f("span"),V=R(Ce),pe=R("/95"),he=g(),ce=f("textarea"),ke=g(),Te=f("button"),Te.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        Добавить карточку`,G=g(),Z=f("div"),K=f("span"),K.textContent="Превью карточки",we=g(),ee=f("button"),je.c(),De=g(),_e=f("div"),te=f("div"),Q=R(ne),ue=g(),F=f("div"),qe=R(Be),Ge=g(),Pe&&Pe.c(),Ie=g(),Se&&Se.c(),le=g(),He&&He.c(),ve=g(),Ee&&Ee.c(),ie=g(),Ue&&Ue.c(),Ae=nt(),n(e,"type","file"),n(e,"accept",".json"),jl(e,"display","none"),n(e,"class","svelte-1fsq4u7"),n(c,"class","svelte-1fsq4u7"),n(u,"type","button"),n(u,"class","import-btn bulk svelte-1fsq4u7"),n(u,"title","Загрузить список слов"),n(h,"type","button"),n(h,"class","import-btn svelte-1fsq4u7"),n(h,"title","Импорт из JSON"),n(a,"class","header-actions svelte-1fsq4u7"),n(o,"class","header-top svelte-1fsq4u7"),n(k,"class","subtitle svelte-1fsq4u7"),n(r,"class","header svelte-1fsq4u7"),n(S,"class","char-count svelte-1fsq4u7"),B(S,"limit",l[1].length>=35),n(C,"for","word"),n(C,"class","svelte-1fsq4u7"),n(A,"id","word"),n(A,"type","text"),n(A,"placeholder","например: serendipity"),n(A,"maxlength","35"),A.required=!0,n(A,"class","svelte-1fsq4u7"),n(y,"class","input-group svelte-1fsq4u7"),n(J,"class","char-count svelte-1fsq4u7"),B(J,"limit",l[2].length>=50),n(z,"for","translation"),n(z,"class","svelte-1fsq4u7"),n(de,"id","translation"),n(de,"type","text"),n(de,"placeholder","например: счастливая случайность"),n(de,"maxlength","50"),de.required=!0,n(de,"class","svelte-1fsq4u7"),n(W,"class","input-group svelte-1fsq4u7"),n(ge,"class","optional svelte-1fsq4u7"),n(Ne,"class","char-count svelte-1fsq4u7"),B(Ne,"limit",l[3].length>=95),n(X,"for","association"),n(X,"class","svelte-1fsq4u7"),n(ce,"id","association"),n(ce,"placeholder","например: представьте, как вы случайно находите клад под деревом"),n(ce,"maxlength","95"),n(ce,"rows","2"),n(ce,"class","svelte-1fsq4u7"),n(se,"class","input-group svelte-1fsq4u7"),n(Te,"type","submit"),n(Te,"class","submit-btn svelte-1fsq4u7"),n(v,"class","form svelte-1fsq4u7"),n(K,"class","preview-label svelte-1fsq4u7"),n(te,"class","preview-word svelte-1fsq4u7"),n(F,"class","preview-translation svelte-1fsq4u7"),n(_e,"class","card-content-preview svelte-1fsq4u7"),n(ee,"type","button"),n(ee,"class","card-preview svelte-1fsq4u7"),B(ee,"has-image",l[4]),n(Z,"class","card-preview-wrapper svelte-1fsq4u7"),n(_,"class","card-editor svelte-1fsq4u7"),n(s,"class","add-card-container svelte-1fsq4u7")},m(x,Le){D(x,e,Le),l[31](e),D(x,t,Le),D(x,s,Le),i(s,r),i(r,o),i(o,c),i(o,d),i(o,a),i(a,u),i(a,p),i(a,h),i(r,m),i(r,k),i(s,w),i(s,_),i(_,v),i(v,y),i(y,C),i(C,T),i(C,q),i(C,E),i(C,S),i(S,b),i(S,N),i(y,H),i(y,A),Oe(A,l[1]),i(v,P),i(v,W),i(W,z),i(z,O),i(z,J),i(J,oe),i(J,me),i(W,fe),i(W,de),Oe(de,l[2]),i(v,be),i(v,se),i(se,X),i(X,ae),i(X,ge),i(X,Me),i(X,Ne),i(Ne,V),i(Ne,pe),i(se,he),i(se,ce),Oe(ce,l[3]),i(v,ke),i(v,Te),i(_,G),i(_,Z),i(Z,K),i(Z,we),i(Z,ee),je.m(ee,null),i(ee,De),i(ee,_e),i(_e,te),i(te,Q),i(_e,ue),i(_e,F),i(F,qe),i(s,Ge),Pe&&Pe.m(s,null),i(s,Ie),Se&&Se.m(s,null),i(s,le),He&&He.m(s,null),D(x,ve,Le),Ee&&Ee.m(x,Le),D(x,ie,Le),Ue&&Ue.m(x,Le),D(x,Ae,Le),ct||(Y=[U(e,"change",l[24]),U(u,"click",l[25]),U(h,"click",l[23]),U(A,"input",l[32]),U(de,"input",l[33]),U(ce,"input",l[34]),U(v,"submit",Rl(l[17])),U(ee,"click",l[18])],ct=!0)},p(x,Le){Le[0]&65536&&L!==(L=x[16].toLowerCase()+"")&&$(q,L),Le[0]&2&&I!==(I=x[1].length+"")&&$(b,I),Le[0]&2&&B(S,"limit",x[1].length>=35),Le[0]&2&&A.value!==x[1]&&Oe(A,x[1]),Le[0]&4&&re!==(re=x[2].length+"")&&$(oe,re),Le[0]&4&&B(J,"limit",x[2].length>=50),Le[0]&4&&de.value!==x[2]&&Oe(de,x[2]),Le[0]&8&&Ce!==(Ce=x[3].length+"")&&$(V,Ce),Le[0]&8&&B(Ne,"limit",x[3].length>=95),Le[0]&8&&Oe(ce,x[3]),Ke===(Ke=Fe(x))&&je?je.p(x,Le):(je.d(1),je=Ke(x),je&&(je.c(),je.m(ee,De))),Le[0]&2&&ne!==(ne=(x[1]||"Слово")+"")&&$(Q,ne),Le[0]&4&&Be!==(Be=(x[2]||"Перевод")+"")&&$(qe,Be),Le[0]&16&&B(ee,"has-image",x[4]),x[5]?Pe||(Pe=At(),Pe.c(),Pe.m(s,Ie)):Pe&&(Pe.d(1),Pe=null),x[10]?Se?Se.p(x,Le):(Se=Et(x),Se.c(),Se.m(s,le)):Se&&(Se.d(1),Se=null),x[13]?He?He.p(x,Le):(He=Ot(x),He.c(),He.m(s,null)):He&&(He.d(1),He=null),x[6]?Ee?Ee.p(x,Le):(Ee=Ut(x),Ee.c(),Ee.m(ie.parentNode,ie)):Ee&&(Ee.d(1),Ee=null),x[11]?Ue?Ue.p(x,Le):(Ue=Jt(x),Ue.c(),Ue.m(Ae.parentNode,Ae)):Ue&&(Ue.d(1),Ue=null)},i:ye,o:ye,d(x){x&&(M(e),M(t),M(s),M(ve),M(ie),M(Ae)),l[31](null),je.d(),Pe&&Pe.d(),Se&&Se.d(),He&&He.d(),Ee&&Ee.d(x),Ue&&Ue.d(x),ct=!1,Je(Y)}}}function dn(l,e,t){let s,r,o,c,d;Qe(l,Re,V=>t(42,o=V)),Qe(l,Xe,V=>t(43,c=V)),Qe(l,Ze,V=>t(28,d=V));let a="",u="",p="",h="",m=!1,k=!1,w="",_=!1,v=0,y=!1,C=!1,T="",L=0,q=!1;function E(){if(a.trim()&&u.trim()){let V=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"";if(!(c.length>0)||!V||V===""){const ce=`${Ye("en")} (default)`;Xe.addDictionary("default",ce,"en",!1),We.set("default"),V="default"}const he=V||"default";Re.addCard(a.trim(),u.trim(),p.trim(),h.trim(),he),t(1,a=""),t(2,u=""),t(3,p=""),t(4,h=""),t(5,m=!0),setTimeout(()=>t(5,m=!1),2e3)}}function S(){t(7,w=h),t(8,_=!1),t(6,k=!0)}function I(){w.trim()&&t(4,h=w.trim()),t(6,k=!1)}function b(){t(4,h=""),t(7,w=""),t(6,k=!1)}function N(){t(8,_=!0)}function H(){t(8,_=!1)}let A;function P(){A.click()}function W(V){const pe=V.target.files[0];if(!pe)return;const he=new FileReader;he.onload=ce=>{var ke,Te,G;try{const Z=JSON.parse(ce.target.result),K=pe.name.replace(/\.json$/i,""),we=Z.language||"en";Z.language&&Ze.set(Z.language);let ee;we==="en"?ee="default":(ee=K,Re.resetDictionary(ee));const De=(((ke=o.learned)==null?void 0:ke.length)||0)+(((Te=o.unlearned)==null?void 0:Te.length)||0)+(((G=o.draft)==null?void 0:G.length)||0);if(Re.importCards(Z,ee),we==="en"){if(!c.find(te=>te.id==="default")){const te=`${Ye("en")} (default)`;Xe.addDictionary("default",te,"en",!0)}We.set("default")}else{const _e=`${K} (${Ye(we)})`;Xe.addDictionary(K,_e,we,!0),We.set(K)}setTimeout(()=>{var te,ne,Q;const _e=(((te=o.learned)==null?void 0:te.length)||0)+(((ne=o.unlearned)==null?void 0:ne.length)||0)+(((Q=o.draft)==null?void 0:Q.length)||0);t(9,v=_e-De),t(10,y=!0),setTimeout(()=>t(10,y=!1),3e3)},100)}catch{alert("Ошибка чтения файла. Убедитесь, что это корректный JSON файл.")}},he.readAsText(pe),V.target.value=""}function z(){t(0,T=""),t(11,C=!0)}function O(){t(11,C=!1),t(0,T="")}function J(){var pe;const V=T.split(`
`).map(he=>he.trim()).filter(he=>he.length>0);if(V.length>0){const he=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"default";if(he===""){const Te=`${Ye("en")} (default)`;Xe.addDictionary("default",Te,"en",!1),We.set("default")}const ce=he,ke=((pe=o.draft)==null?void 0:pe.length)||0;Re.addDraftCards(V,ce),setTimeout(()=>{var G;const Te=((G=o.draft)==null?void 0:G.length)||0;t(12,L=Te-ke),t(13,q=!0),setTimeout(()=>t(13,q=!1),3e3)},100)}O()}function re(V){tt.call(this,l,V)}function oe(V){tt.call(this,l,V)}function me(V){Lt[V?"unshift":"push"](()=>{A=V,t(14,A)})}function fe(){a=this.value,t(1,a)}function de(){u=this.value,t(2,u)}function be(){p=this.value,t(3,p)}const se=()=>t(6,k=!1);function X(){w=this.value,t(7,w)}const ae=()=>t(6,k=!1),ge=()=>t(6,k=!1),Me=V=>V.key==="Escape"&&t(6,k=!1);function Ne(){T=this.value,t(0,T)}const Ce=V=>V.key==="Escape"&&O();return l.$$.update=()=>{l.$$.dirty[0]&268435456&&t(16,s=Ye(d)),l.$$.dirty[0]&1&&t(15,r=T.split(`
`).filter(V=>V.trim().length>0).length)},[T,a,u,p,h,m,k,w,_,v,y,C,L,q,A,r,s,E,S,I,b,N,H,P,W,z,O,J,d,re,oe,me,fe,de,be,se,X,ae,ge,Me,Ne,Ce]}class pn extends wt{constructor(e){super(),kt(this,e,dn,un,at,{},null,[-1,-1])}}function mn(l){let e;return{c(){e=R("Добавьте карточки для начала")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function hn(l){let e;return{c(){e=R("Нет карточек с изображениями")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function _n(l){let e,t,s=l[2].length+"",r,o,c,d=l[0]&&l[2].length<l[3].length&&Pt();return{c(){e=R("Осталось карточек: "),t=f("span"),r=R(s),o=g(),d&&d.c(),c=nt(),n(t,"class","count svelte-d7f8es")},m(a,u){D(a,e,u),D(a,t,u),i(t,r),D(a,o,u),d&&d.m(a,u),D(a,c,u)},p(a,u){u[0]&4&&s!==(s=a[2].length+"")&&$(r,s),a[0]&&a[2].length<a[3].length?d||(d=Pt(),d.c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null)},d(a){a&&(M(e),M(t),M(o),M(c)),d&&d.d(a)}}}function Pt(l){let e;return{c(){e=f("span"),e.textContent="(с изображениями)",n(e,"class","filter-note svelte-d7f8es")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function Ft(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y,C,T,L,q,E,S,I,b,N,H,A=!l[4]&&Wt();function P(O,J){return O[4]?vn:gn}let W=P(l),z=W(l);return{c(){e=f("div"),t=f("div"),s=f("button"),s.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',r=g(),o=f("h2"),o.textContent="Выбери тип упражнения",c=g(),d=f("div"),a=f("button"),u=f("span"),p=g(),h=f("div"),h.innerHTML='<span class="option-title svelte-d7f8es">Flash Cards</span> <span class="option-desc svelte-d7f8es">Классические карточки с переворотом</span>',m=g(),k=f("button"),w=f("span"),_=g(),v=f("div"),v.innerHTML='<span class="option-title svelte-d7f8es">Только изображения</span> <span class="option-desc svelte-d7f8es">Введите слово по изображению</span>',y=g(),C=f("button"),T=f("span"),L=g(),q=f("div"),E=f("span"),S=R(`Перевод предложения
                `),A&&A.c(),I=g(),b=f("span"),z.c(),n(s,"class","modal-close-btn svelte-d7f8es"),n(o,"class","modal-title svelte-d7f8es"),n(u,"class","option-radio svelte-d7f8es"),B(u,"checked",l[26]),n(h,"class","option-content svelte-d7f8es"),n(a,"class","exercise-option svelte-d7f8es"),B(a,"active",l[26]),n(w,"class","option-radio svelte-d7f8es"),B(w,"checked",l[0]),n(v,"class","option-content svelte-d7f8es"),n(k,"class","exercise-option svelte-d7f8es"),B(k,"active",l[0]),n(T,"class","option-radio svelte-d7f8es"),B(T,"checked",l[1]),B(T,"disabled",!l[4]),n(E,"class","option-title svelte-d7f8es"),n(b,"class","option-desc svelte-d7f8es"),n(q,"class","option-content svelte-d7f8es"),n(C,"class","exercise-option svelte-d7f8es"),B(C,"active",l[1]),B(C,"disabled",!l[4]),n(d,"class","settings-options svelte-d7f8es"),n(t,"class","settings-modal svelte-d7f8es"),n(t,"role","dialog"),n(t,"aria-modal","true"),n(e,"class","settings-overlay svelte-d7f8es"),n(e,"role","button"),n(e,"tabindex","-1")},m(O,J){D(O,e,J),i(e,t),i(t,s),i(t,r),i(t,o),i(t,c),i(t,d),i(d,a),i(a,u),i(a,p),i(a,h),i(d,m),i(d,k),i(k,w),i(k,_),i(k,v),i(d,y),i(d,C),i(C,T),i(C,L),i(C,q),i(q,E),i(E,S),A&&A.m(E,null),i(q,I),i(q,b),z.m(b,null),N||(H=[U(s,"click",l[55]),U(a,"click",l[28]),U(k,"click",l[29]),U(C,"click",l[30]),U(t,"click",$e(l[53])),U(e,"click",l[56]),U(e,"keydown",l[57])],N=!0)},p(O,J){J[0]&67108864&&B(u,"checked",O[26]),J[0]&67108864&&B(a,"active",O[26]),J[0]&1&&B(w,"checked",O[0]),J[0]&1&&B(k,"active",O[0]),J[0]&2&&B(T,"checked",O[1]),J[0]&16&&B(T,"disabled",!O[4]),O[4]?A&&(A.d(1),A=null):A||(A=Wt(),A.c(),A.m(E,null)),W===(W=P(O))&&z?z.p(O,J):(z.d(1),z=W(O),z&&(z.c(),z.m(b,null))),J[0]&2&&B(C,"active",O[1]),J[0]&16&&B(C,"disabled",!O[4])},d(O){O&&M(e),A&&A.d(),z.d(),N=!1,Je(H)}}}function Wt(l){let e;return{c(){e=f("span"),e.textContent="AI",n(e,"class","ai-badge svelte-d7f8es")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function vn(l){let e,t=l[27].toLowerCase()+"",s;return{c(){e=R("Переведите предложение на "),s=R(t)},m(r,o){D(r,e,o),D(r,s,o)},p(r,o){o[0]&134217728&&t!==(t=r[27].toLowerCase()+"")&&$(s,t)},d(r){r&&(M(e),M(s))}}}function gn(l){let e;return{c(){e=R("Требуется AI токен")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function bn(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="empty-icon svelte-d7f8es"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line></svg></div> <h2 class="svelte-d7f8es">Нет карточек для изучения</h2> <p class="svelte-d7f8es">Добавьте новые слова или верните карточки из списков</p>',n(e,"class","empty-state svelte-d7f8es")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function kn(l){let e;function t(o,c){return o[1]?Cn:o[0]?yn:wn}let s=t(l),r=s(l);return{c(){e=f("div"),r.c(),n(e,"class","card-area svelte-d7f8es"),B(e,"translation-mode",l[1]&&l[12])},m(o,c){D(o,e,c),r.m(e,null)},p(o,c){s===(s=t(o))&&r?r.p(o,c):(r.d(1),r=s(o),r&&(r.c(),r.m(e,null))),c[0]&4098&&B(e,"translation-mode",o[1]&&o[12])},d(o){o&&M(e),r.d()}}}function wn(l){let e=l[24].id,t,s,r,o,c,d,a,u=Gt(l);return{c(){u.c(),t=g(),s=f("div"),r=f("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',o=g(),c=f("button"),c.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(r,"class","action-btn unknown svelte-d7f8es"),n(c,"class","action-btn known svelte-d7f8es"),n(s,"class","action-buttons svelte-d7f8es")},m(p,h){u.m(p,h),D(p,t,h),D(p,s,h),i(s,r),i(s,o),i(s,c),d||(a=[U(r,"click",l[36]),U(c,"click",l[35])],d=!0)},p(p,h){h[0]&16777216&&at(e,e=p[24].id)?(u.d(1),u=Gt(p),u.c(),u.m(t.parentNode,t)):u.p(p,h)},d(p){p&&(M(t),M(s)),u.d(p),d=!1,Je(a)}}}function yn(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y=l[24].imageUrl&&Kt(l),C=l[10]&&Xt(l);return{c(){e=f("div"),t=f("div"),s=f("div"),y&&y.c(),r=g(),C&&C.c(),o=g(),c=f("div"),d=f("input"),u=g(),p=f("button"),h=j("svg"),m=j("polyline"),k=j("path"),n(s,"class","card-front has-image image-only svelte-d7f8es"),n(t,"class","card-inner svelte-d7f8es"),n(e,"class","card image-only-card svelte-d7f8es"),B(e,"correct",l[10]==="correct"),B(e,"incorrect",l[10]==="incorrect"),n(d,"type","text"),n(d,"class","answer-input svelte-d7f8es"),n(d,"placeholder","Введите слово..."),d.disabled=a=l[10]!==null,B(d,"correct",l[10]==="correct"),B(d,"incorrect",l[10]==="incorrect"),n(m,"points","9 11 12 14 22 4"),n(k,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(h,"width","24"),n(h,"height","24"),n(h,"viewBox","0 0 24 24"),n(h,"fill","none"),n(h,"stroke","currentColor"),n(h,"stroke-width","2"),n(p,"class","check-btn svelte-d7f8es"),p.disabled=w=!l[9].trim()||l[10]!==null,n(c,"class","answer-input-area svelte-d7f8es")},m(T,L){D(T,e,L),i(e,t),i(t,s),y&&y.m(s,null),i(s,r),C&&C.m(s,null),D(T,o,L),D(T,c,L),i(c,d),Oe(d,l[9]),i(c,u),i(c,p),i(p,h),i(h,m),i(h,k),_||(v=[U(d,"input",l[60]),U(d,"keydown",l[44]),U(p,"click",l[43])],_=!0)},p(T,L){T[24].imageUrl?y?y.p(T,L):(y=Kt(T),y.c(),y.m(s,r)):y&&(y.d(1),y=null),T[10]?C?C.p(T,L):(C=Xt(T),C.c(),C.m(s,null)):C&&(C.d(1),C=null),L[0]&1024&&B(e,"correct",T[10]==="correct"),L[0]&1024&&B(e,"incorrect",T[10]==="incorrect"),L[0]&1024&&a!==(a=T[10]!==null)&&(d.disabled=a),L[0]&512&&d.value!==T[9]&&Oe(d,T[9]),L[0]&1024&&B(d,"correct",T[10]==="correct"),L[0]&1024&&B(d,"incorrect",T[10]==="incorrect"),L[0]&1536&&w!==(w=!T[9].trim()||T[10]!==null)&&(p.disabled=w)},d(T){T&&(M(e),M(o),M(c)),y&&y.d(),C&&C.d(),_=!1,Je(v)}}}function Cn(l){let e,t,s,r,o,c,d,a,u=l[24].translation+"",p,h,m,k,w,_,v,y,C,T,L,q=l[24].word+"",E,S,I,b=l[14]&&l[14]!=="grammar_error"&&Yt(l),N=l[19]&&Qt(),H=l[24].imageUrl&&Zt(l),A=l[24].association&&xt(l);function P(O,J){return O[18]?qn:O[12]?Dn:Mn}let W=P(l),z=W(l);return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("div"),o=f("div"),c=f("span"),c.textContent="Перевод",d=g(),a=f("h2"),p=R(u),h=g(),b&&b.c(),m=g(),N&&N.c(),k=g(),w=f("div"),H&&H.c(),_=g(),v=f("div"),y=f("span"),C=R(l[27]),T=g(),L=f("h2"),E=R(q),S=g(),A&&A.c(),I=g(),z.c(),n(c,"class","card-label svelte-d7f8es"),n(a,"class","card-word svelte-d7f8es"),n(o,"class","card-text-content svelte-d7f8es"),n(r,"class","card-front translation-front svelte-d7f8es"),n(y,"class","card-label svelte-d7f8es"),n(L,"class","card-word svelte-d7f8es"),n(v,"class","card-text-content svelte-d7f8es"),n(w,"class","card-back translation-back svelte-d7f8es"),B(w,"has-image",l[24].imageUrl),n(s,"class","card-inner svelte-d7f8es"),n(t,"class","card translation-card svelte-d7f8es"),B(t,"correct",l[14]==="correct"),B(t,"incorrect",l[14]==="incorrect"),B(t,"flipped",l[18]),n(e,"class","translation-exercise-layout svelte-d7f8es"),B(e,"with-input",l[12]),B(e,"card-flipped",l[18])},m(O,J){D(O,e,J),i(e,t),i(t,s),i(s,r),i(r,o),i(o,c),i(o,d),i(o,a),i(a,p),i(r,h),b&&b.m(r,null),i(r,m),N&&N.m(r,null),i(s,k),i(s,w),H&&H.m(w,null),i(w,_),i(w,v),i(v,y),i(y,C),i(v,T),i(v,L),i(L,E),i(v,S),A&&A.m(v,null),i(e,I),z.m(e,null)},p(O,J){J[0]&16777216&&u!==(u=O[24].translation+"")&&$(p,u),O[14]&&O[14]!=="grammar_error"?b?b.p(O,J):(b=Yt(O),b.c(),b.m(r,m)):b&&(b.d(1),b=null),O[19]?N||(N=Qt(),N.c(),N.m(r,null)):N&&(N.d(1),N=null),O[24].imageUrl?H?H.p(O,J):(H=Zt(O),H.c(),H.m(w,_)):H&&(H.d(1),H=null),J[0]&134217728&&$(C,O[27]),J[0]&16777216&&q!==(q=O[24].word+"")&&$(E,q),O[24].association?A?A.p(O,J):(A=xt(O),A.c(),A.m(v,null)):A&&(A.d(1),A=null),J[0]&16777216&&B(w,"has-image",O[24].imageUrl),J[0]&16384&&B(t,"correct",O[14]==="correct"),J[0]&16384&&B(t,"incorrect",O[14]==="incorrect"),J[0]&262144&&B(t,"flipped",O[18]),W===(W=P(O))&&z?z.p(O,J):(z.d(1),z=W(O),z&&(z.c(),z.m(e,null))),J[0]&4096&&B(e,"with-input",O[12]),J[0]&262144&&B(e,"card-flipped",O[18])},d(O){O&&M(e),b&&b.d(),N&&N.d(),H&&H.d(),A&&A.d(),z.d()}}}function zt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-d7f8es")},m(s,r){D(s,e,r)},p(s,r){r[0]&16777216&&!Ve(e.src,t=s[24].imageUrl)&&n(e,"src",t)},d(s){s&&M(e)}}}function Vt(l){let e,t,s,r,o=l[24].association+"",c;return{c(){e=f("div"),t=f("span"),t.textContent="Ассоциация:",s=g(),r=f("p"),c=R(o),n(t,"class","association-label svelte-d7f8es"),n(r,"class","svelte-d7f8es"),n(e,"class","association svelte-d7f8es")},m(d,a){D(d,e,a),i(e,t),i(e,s),i(e,r),i(r,c)},p(d,a){a[0]&16777216&&o!==(o=d[24].association+"")&&$(c,o)},d(d){d&&M(e)}}}function Gt(l){let e,t,s,r,o,c,d,a,u=l[24].word+"",p,h,m,k,w,_,v,y,C,T,L=l[24].translation+"",q,E,S,I,b=l[24].imageUrl&&zt(l),N=l[24].association&&Vt(l);return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("div"),o=f("span"),c=R(l[27]),d=g(),a=f("h2"),p=R(u),h=g(),m=f("p"),m.textContent="Нажмите, чтобы увидеть перевод",k=g(),w=f("div"),b&&b.c(),_=g(),v=f("div"),y=f("span"),y.textContent="Перевод",C=g(),T=f("h2"),q=R(L),E=g(),N&&N.c(),n(o,"class","card-label svelte-d7f8es"),n(a,"class","card-word svelte-d7f8es"),n(m,"class","card-hint svelte-d7f8es"),n(r,"class","card-text-content svelte-d7f8es"),n(s,"class","card-front svelte-d7f8es"),n(y,"class","card-label svelte-d7f8es"),n(T,"class","card-word svelte-d7f8es"),n(v,"class","card-text-content svelte-d7f8es"),n(w,"class","card-back svelte-d7f8es"),B(w,"has-image",l[24].imageUrl),n(t,"class","card-inner svelte-d7f8es"),n(e,"class","card svelte-d7f8es"),n(e,"style",l[42]()),n(e,"role","button"),n(e,"tabindex","0"),B(e,"flipped",l[6]),B(e,"dragging",l[7]),B(e,"swipe-left",l[8]==="left"),B(e,"swipe-right",l[8]==="right")},m(H,A){D(H,e,A),i(e,t),i(t,s),i(s,r),i(r,o),i(o,c),i(r,d),i(r,a),i(a,p),i(r,h),i(r,m),i(t,k),i(t,w),b&&b.m(w,null),i(w,_),i(w,v),i(v,y),i(v,C),i(v,T),i(T,q),i(v,E),N&&N.m(v,null),S||(I=[U(e,"mousedown",l[32]),U(e,"mousemove",l[33]),U(e,"mouseup",l[34]),U(e,"mouseleave",l[34]),U(e,"touchstart",l[32]),U(e,"touchmove",l[33]),U(e,"touchend",l[34],{passive:!0}),U(e,"click",l[41]),U(e,"keydown",l[61])],S=!0)},p(H,A){A[0]&134217728&&$(c,H[27]),A[0]&16777216&&u!==(u=H[24].word+"")&&$(p,u),H[24].imageUrl?b?b.p(H,A):(b=zt(H),b.c(),b.m(w,_)):b&&(b.d(1),b=null),A[0]&16777216&&L!==(L=H[24].translation+"")&&$(q,L),H[24].association?N?N.p(H,A):(N=Vt(H),N.c(),N.m(v,null)):N&&(N.d(1),N=null),A[0]&16777216&&B(w,"has-image",H[24].imageUrl),A[0]&64&&B(e,"flipped",H[6]),A[0]&128&&B(e,"dragging",H[7]),A[0]&256&&B(e,"swipe-left",H[8]==="left"),A[0]&256&&B(e,"swipe-right",H[8]==="right")},d(H){H&&M(e),b&&b.d(),N&&N.d(),S=!1,Je(I)}}}function Kt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image-full svelte-d7f8es")},m(s,r){D(s,e,r)},p(s,r){r[0]&16777216&&!Ve(e.src,t=s[24].imageUrl)&&n(e,"src",t)},d(s){s&&M(e)}}}function Xt(l){let e;function t(o,c){return o[10]==="correct"?Ln:Sn}let s=t(l),r=s(l);return{c(){e=f("div"),r.c(),n(e,"class","answer-overlay svelte-d7f8es"),B(e,"correct",l[10]==="correct"),B(e,"incorrect",l[10]==="incorrect")},m(o,c){D(o,e,c),r.m(e,null)},p(o,c){s===(s=t(o))&&r?r.p(o,c):(r.d(1),r=s(o),r&&(r.c(),r.m(e,null))),c[0]&1024&&B(e,"correct",o[10]==="correct"),c[0]&1024&&B(e,"incorrect",o[10]==="incorrect")},d(o){o&&M(e),r.d()}}}function Sn(l){let e,t,s,r,o,c=l[24].word+"",d;return{c(){e=j("svg"),t=j("line"),s=j("line"),r=g(),o=f("span"),d=R(c),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(s,"x1","6"),n(s,"y1","6"),n(s,"x2","18"),n(s,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-d7f8es"),n(o,"class","svelte-d7f8es")},m(a,u){D(a,e,u),i(e,t),i(e,s),D(a,r,u),D(a,o,u),i(o,d)},p(a,u){u[0]&16777216&&c!==(c=a[24].word+"")&&$(d,c)},d(a){a&&(M(e),M(r),M(o))}}}function Ln(l){let e,t,s,r;return{c(){e=j("svg"),t=j("polyline"),s=g(),r=f("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-d7f8es"),n(r,"class","svelte-d7f8es")},m(o,c){D(o,e,c),i(e,t),D(o,s,c),D(o,r,c)},p:ye,d(o){o&&(M(e),M(s),M(r))}}}function Yt(l){let e;function t(o,c){if(o[14]==="correct")return In;if(o[14]==="word_error")return Tn}let s=t(l),r=s&&s(l);return{c(){e=f("div"),r&&r.c(),n(e,"class","answer-overlay svelte-d7f8es"),B(e,"correct",l[14]==="correct"),B(e,"incorrect",l[14]==="word_error")},m(o,c){D(o,e,c),r&&r.m(e,null)},p(o,c){s===(s=t(o))&&r?r.p(o,c):(r&&r.d(1),r=s&&s(o),r&&(r.c(),r.m(e,null))),c[0]&16384&&B(e,"correct",o[14]==="correct"),c[0]&16384&&B(e,"incorrect",o[14]==="word_error")},d(o){o&&M(e),r&&r.d()}}}function Tn(l){let e,t,s,r,o,c,d,a,u,p,h;return{c(){e=j("svg"),t=j("line"),s=j("line"),r=g(),o=f("div"),c=f("span"),c.textContent="Ошибка в слове",d=g(),a=f("span"),u=R("Ожидалось: "),p=f("strong"),h=R(l[20]),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(s,"x1","6"),n(s,"y1","6"),n(s,"x2","18"),n(s,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-d7f8es"),n(c,"class","error-title svelte-d7f8es"),n(p,"class","svelte-d7f8es"),n(a,"class","expected-word svelte-d7f8es"),n(o,"class","error-details svelte-d7f8es")},m(m,k){D(m,e,k),i(e,t),i(e,s),D(m,r,k),D(m,o,k),i(o,c),i(o,d),i(o,a),i(a,u),i(a,p),i(p,h)},p(m,k){k[0]&1048576&&$(h,m[20])},d(m){m&&(M(e),M(r),M(o))}}}function In(l){let e,t,s,r;return{c(){e=j("svg"),t=j("polyline"),s=g(),r=f("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-d7f8es"),n(r,"class","svelte-d7f8es")},m(o,c){D(o,e,c),i(e,t),D(o,s,c),D(o,r,c)},p:ye,d(o){o&&(M(e),M(s),M(r))}}}function Qt(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="checking-spinner svelte-d7f8es"></div> <span class="svelte-d7f8es">Проверка...</span>',n(e,"class","answer-overlay checking svelte-d7f8es")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function Zt(l){let e,t;return{c(){e=f("img"),Ve(e.src,t=l[24].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-d7f8es")},m(s,r){D(s,e,r)},p(s,r){r[0]&16777216&&!Ve(e.src,t=s[24].imageUrl)&&n(e,"src",t)},d(s){s&&M(e)}}}function xt(l){let e,t,s,r,o=l[24].association+"",c;return{c(){e=f("div"),t=f("span"),t.textContent="Ассоциация:",s=g(),r=f("p"),c=R(o),n(t,"class","association-label svelte-d7f8es"),n(r,"class","svelte-d7f8es"),n(e,"class","association svelte-d7f8es")},m(d,a){D(d,e,a),i(e,t),i(e,s),i(e,r),i(r,c)},p(d,a){a[0]&16777216&&o!==(o=d[24].association+"")&&$(c,o)},d(d){d&&M(e)}}}function Mn(l){let e,t,s,r,o,c;return{c(){e=f("div"),t=f("button"),t.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',s=g(),r=f("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(t,"class","action-btn unknown svelte-d7f8es"),n(r,"class","action-btn known svelte-d7f8es"),n(e,"class","action-buttons svelte-d7f8es")},m(d,a){D(d,e,a),i(e,t),i(e,s),i(e,r),o||(c=[U(t,"click",l[37]),U(r,"click",l[35])],o=!0)},p:ye,d(d){d&&M(e),o=!1,Je(c)}}}function Dn(l){let e,t,s,r,o=l[27].toLowerCase()+"",c,d,a,u,p,h,m,k,w,_;function v(L,q){return L[16]?An:L[17]?Bn:Nn}let y=v(l),C=y(l),T=!l[16]&&!l[17]&&$t(l);return{c(){e=f("div"),t=f("div"),s=f("span"),r=R("Переведите на "),c=R(o),d=R(":"),a=g(),C.c(),u=g(),T&&T.c(),p=g(),h=f("button"),m=R("Пропустить"),n(s,"class","sentence-label svelte-d7f8es"),n(t,"class","sentence-prompt svelte-d7f8es"),B(t,"loading",l[16]),B(t,"error",l[17]),n(h,"class","skip-sentence-btn svelte-d7f8es"),h.disabled=k=l[14]!==null||l[16]||l[19],n(e,"class","sentence-exercise svelte-d7f8es")},m(L,q){D(L,e,q),i(e,t),i(t,s),i(s,r),i(s,c),i(s,d),i(t,a),C.m(t,null),i(e,u),T&&T.m(e,null),i(e,p),i(e,h),i(h,m),w||(_=U(h,"click",l[37]),w=!0)},p(L,q){q[0]&134217728&&o!==(o=L[27].toLowerCase()+"")&&$(c,o),y===(y=v(L))&&C?C.p(L,q):(C.d(1),C=y(L),C&&(C.c(),C.m(t,null))),q[0]&65536&&B(t,"loading",L[16]),q[0]&131072&&B(t,"error",L[17]),!L[16]&&!L[17]?T?T.p(L,q):(T=$t(L),T.c(),T.m(e,p)):T&&(T.d(1),T=null),q[0]&606208&&k!==(k=L[14]!==null||L[16]||L[19])&&(h.disabled=k)},d(L){L&&M(e),C.d(),T&&T.d(),w=!1,_()}}}function qn(l){let e,t,s,r;return{c(){e=f("div"),t=f("button"),t.textContent="Продолжить",n(t,"class","continue-btn svelte-d7f8es"),n(e,"class","card-back-actions svelte-d7f8es")},m(o,c){D(o,e,c),i(e,t),s||(r=U(t,"click",l[37]),s=!0)},p:ye,d(o){o&&M(e),s=!1,r()}}}function Nn(l){let e,t;return{c(){e=f("p"),t=R(l[15]),n(e,"class","sentence-text svelte-d7f8es")},m(s,r){D(s,e,r),i(e,t)},p(s,r){r[0]&32768&&$(t,s[15])},d(s){s&&M(e)}}}function Bn(l){let e,t,s,r,o,c;return{c(){e=f("p"),t=R(l[17]),s=g(),r=f("button"),r.textContent="Попробовать снова",n(e,"class","sentence-error svelte-d7f8es"),n(r,"class","retry-btn svelte-d7f8es")},m(d,a){D(d,e,a),i(e,t),D(d,s,a),D(d,r,a),o||(c=U(r,"click",l[58]),o=!0)},p(d,a){a[0]&131072&&$(t,d[17])},d(d){d&&(M(e),M(s),M(r)),o=!1,c()}}}function An(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="loading-spinner svelte-d7f8es"></div> <span>Генерация предложения...</span>',n(e,"class","sentence-loading svelte-d7f8es")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function $t(l){let e;function t(o,c){return o[14]==="grammar_error"?On:En}let s=t(l),r=s(l);return{c(){r.c(),e=nt()},m(o,c){r.m(o,c),D(o,e,c)},p(o,c){s===(s=t(o))&&r?r.p(o,c):(r.d(1),r=s(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&M(e),r.d(o)}}}function En(l){let e,t,s,r,o,c,d,a,u,p,h;return{c(){e=f("div"),t=f("input"),r=g(),o=f("button"),c=j("svg"),d=j("polyline"),a=j("path"),n(t,"type","text"),n(t,"class","answer-input sentence-input svelte-d7f8es"),n(t,"placeholder","Введите перевод..."),t.disabled=s=l[14]!==null||l[19],B(t,"correct",l[14]==="correct"),B(t,"incorrect",l[14]==="incorrect"),n(d,"points","9 11 12 14 22 4"),n(a,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(c,"width","24"),n(c,"height","24"),n(c,"viewBox","0 0 24 24"),n(c,"fill","none"),n(c,"stroke","currentColor"),n(c,"stroke-width","2"),n(o,"class","check-btn svelte-d7f8es"),o.disabled=u=!l[13].trim()||l[14]!==null||l[19],n(e,"class","answer-input-area svelte-d7f8es")},m(m,k){D(m,e,k),i(e,t),Oe(t,l[13]),i(e,r),i(e,o),i(o,c),i(c,d),i(c,a),p||(h=[U(t,"input",l[59]),U(t,"keydown",l[39]),U(o,"click",l[38])],p=!0)},p(m,k){k[0]&540672&&s!==(s=m[14]!==null||m[19])&&(t.disabled=s),k[0]&8192&&t.value!==m[13]&&Oe(t,m[13]),k[0]&16384&&B(t,"correct",m[14]==="correct"),k[0]&16384&&B(t,"incorrect",m[14]==="incorrect"),k[0]&548864&&u!==(u=!m[13].trim()||m[14]!==null||m[19])&&(o.disabled=u)},d(m){m&&M(e),p=!1,Je(h)}}}function On(l){let e,t,s,r,o,c,d,a,u,p,h,m;function k(v,y){return v[21]?Hn:Un}let w=k(l),_=w(l);return{c(){e=f("div"),t=f("div"),_.c(),s=g(),r=f("div"),o=f("span"),o.textContent="Правильный вариант:",c=g(),d=f("p"),a=R(l[22]),u=g(),p=f("button"),p.textContent="Продолжить",n(t,"class","user-sentence-error svelte-d7f8es"),n(o,"class","correction-label svelte-d7f8es"),n(d,"class","correction-text svelte-d7f8es"),n(r,"class","correction-block svelte-d7f8es"),n(p,"class","continue-btn svelte-d7f8es"),n(e,"class","grammar-error-block svelte-d7f8es")},m(v,y){D(v,e,y),i(e,t),_.m(t,null),i(e,s),i(e,r),i(r,o),i(r,c),i(r,d),i(d,a),i(e,u),i(e,p),h||(m=U(p,"click",l[40]),h=!0)},p(v,y){w===(w=k(v))&&_?_.p(v,y):(_.d(1),_=w(v),_&&(_.c(),_.m(t,null))),y[0]&4194304&&$(a,v[22])},d(v){v&&M(e),_.d(),h=!1,m()}}}function Un(l){let e,t;return{c(){e=f("span"),t=R(l[23]),n(e,"class","error-text svelte-d7f8es")},m(s,r){D(s,e,r),i(e,t)},p(s,r){r[0]&8388608&&$(t,s[23])},d(s){s&&M(e)}}}function Hn(l){let e,t=el(l[23],l[21])+"",s;return{c(){e=new Pl(!1),s=nt(),e.a=s},m(r,o){e.m(t,r,o),D(r,s,o)},p(r,o){o[0]&10485760&&t!==(t=el(r[23],r[21])+"")&&e.p(t)},d(r){r&&(M(s),e.d())}}}function Rn(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y,C,T=l[5].learned.length+"",L,q,E,S,I,b,N,H,A,P,W=l[5].unlearned.length+"",z,O,J;function re(X,ae){return X[25]?_n:X[0]?hn:mn}let oe=re(l),me=oe(l),fe=l[11]&&Ft(l);function de(X,ae){return X[25]&&X[24]?kn:bn}let be=de(l),se=be(l);return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("h1"),r.textContent="Изучение",o=g(),c=f("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',d=g(),a=f("p"),me.c(),u=g(),fe&&fe.c(),p=g(),se.c(),h=g(),m=f("div"),k=f("div"),w=j("svg"),_=j("polyline"),v=g(),y=f("span"),C=R("Изучено: "),L=R(T),q=g(),E=f("div"),S=j("svg"),I=j("circle"),b=j("line"),N=j("line"),H=g(),A=f("span"),P=R("На повторение: "),z=R(W),n(r,"class","svelte-d7f8es"),n(c,"class","settings-btn svelte-d7f8es"),B(c,"active",l[11]),n(s,"class","header-top svelte-d7f8es"),n(a,"class","subtitle svelte-d7f8es"),n(t,"class","header svelte-d7f8es"),n(_,"points","20 6 9 17 4 12"),n(w,"width","20"),n(w,"height","20"),n(w,"viewBox","0 0 24 24"),n(w,"fill","none"),n(w,"stroke","currentColor"),n(w,"stroke-width","2"),n(k,"class","stat-item learned svelte-d7f8es"),n(I,"cx","12"),n(I,"cy","12"),n(I,"r","10"),n(b,"x1","12"),n(b,"y1","8"),n(b,"x2","12"),n(b,"y2","12"),n(N,"x1","12"),n(N,"y1","16"),n(N,"x2","12.01"),n(N,"y2","16"),n(S,"width","20"),n(S,"height","20"),n(S,"viewBox","0 0 24 24"),n(S,"fill","none"),n(S,"stroke","currentColor"),n(S,"stroke-width","2"),n(E,"class","stat-item unlearned svelte-d7f8es"),n(m,"class","stats svelte-d7f8es"),n(e,"class","flashcards-container svelte-d7f8es")},m(X,ae){D(X,e,ae),i(e,t),i(t,s),i(s,r),i(s,o),i(s,c),i(t,d),i(t,a),me.m(a,null),i(e,u),fe&&fe.m(e,null),i(e,p),se.m(e,null),i(e,h),i(e,m),i(m,k),i(k,w),i(w,_),i(k,v),i(k,y),i(y,C),i(y,L),i(m,q),i(m,E),i(E,S),i(S,I),i(S,b),i(S,N),i(E,H),i(E,A),i(A,P),i(A,z),O||(J=U(c,"click",l[54]),O=!0)},p(X,ae){ae[0]&2048&&B(c,"active",X[11]),oe===(oe=re(X))&&me?me.p(X,ae):(me.d(1),me=oe(X),me&&(me.c(),me.m(a,null))),X[11]?fe?fe.p(X,ae):(fe=Ft(X),fe.c(),fe.m(e,p)):fe&&(fe.d(1),fe=null),be===(be=de(X))&&se?se.p(X,ae):(se.d(1),se=be(X),se&&(se.c(),se.m(e,h))),ae[0]&32&&T!==(T=X[5].learned.length+"")&&$(L,T),ae[0]&32&&W!==(W=X[5].unlearned.length+"")&&$(z,W)},i:ye,o:ye,d(X){X&&M(e),me.d(),fe&&fe.d(),se.d(),O=!1,J()}}}function Jn(l){const e=[...l];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}function el(l,e){if(!e)return l;const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`(${t})`,"gi");return l.replace(s,'<span class="highlighted-error">$1</span>')}function jn(l,e,t){let s,r,o,c,d,a,u,p,h,m,k,w;Qe(l,Re,Y=>t(5,m=Y)),Qe(l,We,Y=>t(51,k=Y)),Qe(l,Ze,Y=>t(52,w=Y));let _=0,v=!1,y=0,C=0,T=!1,L=null,q=!1,E=!1,S="",I=null,b=!1;function N(){t(0,q=!1),t(1,E=!1),K()}function H(){q?t(0,q=!1):(t(0,q=!0),t(1,E=!1)),K()}function A(){c&&(E?t(1,E=!1):(t(1,E=!0),t(0,q=!1)),K())}let P=!1,W="",z=null,O="",J=!1,re=null,oe=!1,me=!1,fe=null,de=null,be=null,se=null,X="";function ae(){t(46,X=localStorage.getItem("ai_token")||"")}function ge(){ae()}function Me(Y){Y.key==="ai_token"&&ae()}let Ne;ql(()=>{ae(),window.addEventListener("focus",ge),window.addEventListener("storage",Me),Ne=setInterval(()=>{b&&ae()},500)}),Fl(()=>{window.removeEventListener("focus",ge),window.removeEventListener("storage",Me),Ne&&clearInterval(Ne)});async function Ce(Y,Fe){var je,Pe,Se,He;t(16,J=!0),t(17,re=null),t(15,O="");const Ke=`You are a ${r} language learning assistant. Student level: A1-A2 (beginner).

Task: Create ONE short and simple sentence in RUSSIAN that will need to be translated into ${r}.

${r} word: "${Y}"
Russian translation: "${Fe}"

Requirements:
- The sentence must be in Russian
- The sentence must contain the word "${Fe}" (or its form)
- Length: 3-10 words
- Simple A1-A2 level grammar
- Use simple tenses (Present Simple, Past Simple, Future Simple, Present Continuous, Present Perfect)
- Avoid complex constructions

Reply ONLY with the sentence in Russian, without quotes or explanations.`;try{const Ee=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Ke}],max_tokens:100,temperature:.7})});if(!Ee.ok){const x=await Ee.json().catch(()=>({}));throw new Error(((je=x.error)==null?void 0:je.message)||`Ошибка API: ${Ee.status}`)}const Ue=await Ee.json();if(t(15,O=((He=(Se=(Pe=Ue.choices[0])==null?void 0:Pe.message)==null?void 0:Se.content)==null?void 0:He.trim())||""),!O)throw new Error("Пустой ответ от AI");if(Ue.usage){const x=Ue.usage.prompt_tokens/1e6*.15,Le=Ue.usage.completion_tokens/1e6*.6,ft=x+Le,Ct=parseFloat(localStorage.getItem("ai_total_cost")||"0")+ft;localStorage.setItem("ai_total_cost",Ct.toString())}}catch(Ee){console.error("Ошибка генерации:",Ee),t(17,re=Ee.message),t(15,O="")}finally{t(16,J=!1)}}let V=[],pe=new Set,he=d;function ce(Y){q||(t(7,T=!0),y=Y.type==="touchstart"?Y.touches[0].clientX:Y.clientX,t(8,L=null))}function ke(Y){if(!T||q)return;C=(Y.type==="touchmove"?Y.touches[0].clientX:Y.clientX)-y,C>50?t(8,L="right"):C<-50?t(8,L="left"):t(8,L=null)}function Te(){!T||q||(t(7,T=!1),Math.abs(C)>100&&p&&(C>0?G():Z()),C=0,t(8,L=null))}async function G(){if(p){if(E&&!P){t(12,P=!0),t(13,W=""),t(14,z=null),await Ce(p.word,p.translation);return}Re.markAsLearned(p.id),K(),_>=u.length-1&&t(45,_=Math.max(0,u.length-2))}}function Z(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Re.markAsUnlearned(Y.id),K(),_>=u.length-1&&t(45,_=0)}}function K(){t(6,v=!1),t(9,S=""),t(10,I=null),t(12,P=!1),t(13,W=""),t(14,z=null),t(15,O=""),t(17,re=null),t(19,me=!1),t(20,fe=null),t(21,de=null),t(22,be=null),t(23,se=null),t(18,oe=!1)}function we(){if(p){if(E&&!oe){t(18,oe=!0);return}const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Re.markAsUnlearned(Y.id),K(),_>=u.length-1&&t(45,_=0)}}async function ee(Y,Fe,Ke){var Pe,Se,He,Ee;const je=`You are a ${r} language teacher. Check the translation of a sentence from Russian to ${r}.

Russian sentence: "${Fe}"
Student's translation: "${Y}"
Key word that must be used: "${Ke}"

Task: check the grammar of the sentence and its correspondence to the translation.
- DO NOT check punctuation (commas, periods)
- Check only grammatical errors (tenses, articles, word order, word forms)
- Check that the meaning matches the translation

Response format:
- If the sentence is grammatically correct and conveys the meaning — reply only: 0
- If there are errors — reply in this format:
ERROR: [part of the sentence with the error]
CORRECTION: [correct version of the entire sentence]

Reply ONLY in the specified format, without additional explanations.`;try{const Ue=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:je}],max_tokens:200,temperature:.3})});if(!Ue.ok){const ft=await Ue.json().catch(()=>({}));throw new Error(((Pe=ft.error)==null?void 0:Pe.message)||`Ошибка API: ${Ue.status}`)}const x=await Ue.json(),Le=((Ee=(He=(Se=x.choices[0])==null?void 0:Se.message)==null?void 0:He.content)==null?void 0:Ee.trim())||"";if(x.usage){const ft=x.usage.prompt_tokens/1e6*.15,qt=x.usage.completion_tokens/1e6*.6,Ct=ft+qt,Bl=parseFloat(localStorage.getItem("ai_total_cost")||"0");localStorage.setItem("ai_total_cost",(Bl+Ct).toString())}return Le}catch(Ue){throw console.error("Ошибка проверки грамматики:",Ue),Ue}}async function De(){if(!p||!W.trim())return;const Y=W.trim(),Fe=p.word.toLowerCase(),Ke=Y.toLowerCase();if(!new RegExp(`\\b${Fe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\w*\\b`,"i").test(Ke)){t(14,z="word_error"),t(20,fe=p.word),t(21,de=null),t(22,be=null),setTimeout(()=>{const Se=p;t(47,V=[...V.filter(He=>He.id!==Se.id),Se]),Re.markAsUnlearned(Se.id),_>=u.length-1&&t(45,_=0),K()},3e3);return}t(19,me=!0),t(20,fe=null),t(21,de=null),t(22,be=null);try{const Se=await ee(Y,O,p.word);if(Se==="0")t(14,z="correct"),setTimeout(()=>{Re.markAsLearned(p.id),_>=u.length-1&&t(45,_=Math.max(0,u.length-2)),K()},1500);else{t(14,z="grammar_error"),t(23,se=Y);const He=Se.match(/ERROR:\s*(.+)/i),Ee=Se.match(/CORRECTION:\s*(.+)/i);t(21,de=He?He[1].trim():null),t(22,be=Ee?Ee[1].trim():Se)}}catch{t(14,z="correct"),setTimeout(()=>{Re.markAsLearned(p.id),_>=u.length-1&&t(45,_=Math.max(0,u.length-2)),K()},1500)}finally{t(19,me=!1)}}function _e(Y){Y.key==="Enter"&&P&&!me&&z!=="grammar_error"&&De()}function te(){if(p){const Y=p;t(47,V=[...V.filter(Fe=>Fe.id!==Y.id),Y]),Re.markAsUnlearned(Y.id),_>=u.length-1&&t(45,_=0),K()}}function ne(){q||t(6,v=!v)}function Q(){if(!T)return"";const Y=C*.05;return`transform: translateX(${C}px) rotate(${Y}deg);`}function ue(){if(!p||!S.trim())return;const Y=S.trim().toLowerCase()===p.word.toLowerCase();t(10,I=Y?"correct":"incorrect"),setTimeout(()=>{Y?G():Z()},1e3)}function F(Y){Y.key==="Enter"&&q&&ue()}function Be(Y){tt.call(this,l,Y)}const qe=()=>t(11,b=!b),Ge=()=>t(11,b=!1),Ie=()=>t(11,b=!1),le=Y=>Y.key==="Escape"&&t(11,b=!1),ve=()=>Ce(p.word,p.translation);function ie(){W=this.value,t(13,W)}function Ae(){S=this.value,t(9,S)}const ct=Y=>Y.key==="Enter"&&ne();return l.$$.update=()=>{if(l.$$.dirty[1]&2097152&&t(27,s=Ye(w)),l.$$.dirty[1]&2097152&&(r=nn(w)),l.$$.dirty[1]&32768&&t(4,c=X&&X.length>0),l.$$.dirty[0]&18&&!c&&E&&t(1,E=!1),l.$$.dirty[0]&3&&t(26,o=!q&&!E),l.$$.dirty[1]&1048576&&t(50,d=k||"default"),l.$$.dirty[0]&32|l.$$.dirty[1]&524288&&t(3,a=m.unlearned.filter(Y=>(Y.dictionaryId||"default")===d)),l.$$.dirty[0]&8|l.$$.dirty[1]&983040){const Y=new Set(a.map(je=>je.id)),Fe=he!==d,Ke=Y.size!==pe.size||![...Y].every(je=>pe.has(je));Fe||Ke?(t(47,V=Jn(a)),t(48,pe=Y),t(45,_=0),t(49,he=d)):t(47,V=V.map(je=>a.find(Se=>Se.id===je.id)||je))}l.$$.dirty[0]&1|l.$$.dirty[1]&65536&&t(2,u=q?V.filter(Y=>Y.imageUrl):V),l.$$.dirty[0]&4|l.$$.dirty[1]&16384&&t(24,p=u[_]),l.$$.dirty[0]&4&&t(25,h=u.length>0)},[q,E,u,a,c,m,v,T,L,S,I,b,P,W,z,O,J,re,oe,me,fe,de,be,se,p,h,o,s,N,H,A,Ce,ce,ke,Te,G,Z,we,De,_e,te,ne,Q,ue,F,_,X,V,pe,he,d,k,w,Be,qe,Ge,Ie,le,ve,ie,Ae,ct]}class Pn extends wt{constructor(e){super(),kt(this,e,jn,Rn,at,{},null,[-1,-1,-1])}}function tl(l,e,t){const s=l.slice();return s[61]=e[t],s}function ll(l){let e,t,s,r,o=l[7].length+"",c,d,a,u,p,h=l[8].length+"",m,k,w,_,v,y=l[6].length+"",C,T,L;return{c(){e=f("div"),t=f("button"),s=R(`На проработку
          `),r=f("span"),c=R(o),d=g(),a=f("button"),u=R(`На повторение
          `),p=f("span"),m=R(h),k=g(),w=f("button"),_=R(`Изученные
          `),v=f("span"),C=R(y),n(r,"class","badge svelte-t5nbu3"),n(t,"class","dropdown-item svelte-t5nbu3"),B(t,"active",l[0]==="draft"),n(p,"class","badge svelte-t5nbu3"),n(a,"class","dropdown-item svelte-t5nbu3"),B(a,"active",l[0]==="unlearned"),n(v,"class","badge svelte-t5nbu3"),n(w,"class","dropdown-item svelte-t5nbu3"),B(w,"active",l[0]==="learned"),n(e,"class","tab-dropdown-menu svelte-t5nbu3")},m(q,E){D(q,e,E),i(e,t),i(t,s),i(t,r),i(r,c),i(e,d),i(e,a),i(a,u),i(a,p),i(p,m),i(e,k),i(e,w),i(w,_),i(w,v),i(v,C),T||(L=[U(t,"click",l[39]),U(a,"click",l[40]),U(w,"click",l[41])],T=!0)},p(q,E){E[0]&128&&o!==(o=q[7].length+"")&&$(c,o),E[0]&1&&B(t,"active",q[0]==="draft"),E[0]&256&&h!==(h=q[8].length+"")&&$(m,h),E[0]&1&&B(a,"active",q[0]==="unlearned"),E[0]&64&&y!==(y=q[6].length+"")&&$(C,y),E[0]&1&&B(w,"active",q[0]==="learned")},d(q){q&&M(e),T=!1,Je(L)}}}function nl(l){let e,t,s;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","search-clear svelte-t5nbu3")},m(r,o){D(r,e,o),t||(s=U(e,"click",l[46]),t=!0)},p:ye,d(r){r&&M(e),t=!1,s()}}}function sl(l){let e,t,s,r;return{c(){e=f("div"),t=f("button"),t.innerHTML=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
        Отправить все на повторение`,n(t,"class","bulk-action-btn svelte-t5nbu3"),n(e,"class","bulk-actions svelte-t5nbu3")},m(o,c){D(o,e,c),i(e,t),s||(r=U(t,"click",l[26]),s=!0)},p:ye,d(o){o&&M(e),s=!1,r()}}}function Fn(l){let e,t,s,r,o,c;function d(v,y){return v[0]==="learned"?Gn:v[0]==="draft"?Vn:zn}let a=d(l),u=a(l);function p(v,y){return v[0]==="learned"?Yn:v[0]==="draft"?Xn:Kn}let h=p(l),m=h(l);function k(v,y){return v[0]==="learned"?xn:v[0]==="draft"?Zn:Qn}let w=k(l),_=w(l);return{c(){e=f("div"),t=f("div"),u.c(),s=g(),r=f("h2"),m.c(),o=g(),c=f("p"),_.c(),n(t,"class","empty-icon svelte-t5nbu3"),n(r,"class","svelte-t5nbu3"),n(c,"class","svelte-t5nbu3"),n(e,"class","empty-state svelte-t5nbu3")},m(v,y){D(v,e,y),i(e,t),u.m(t,null),i(e,s),i(e,r),m.m(r,null),i(e,o),i(e,c),_.m(c,null)},p(v,y){a!==(a=d(v))&&(u.d(1),u=a(v),u&&(u.c(),u.m(t,null))),h!==(h=p(v))&&(m.d(1),m=h(v),m&&(m.c(),m.m(r,null))),w!==(w=k(v))&&(_.d(1),_=w(v),_&&(_.c(),_.m(c,null)))},d(v){v&&M(e),u.d(),m.d(),_.d()}}}function Wn(l){let e=[],t=new Map,s,r=vt(l[12]);const o=c=>c[61].id;for(let c=0;c<r.length;c+=1){let d=tl(l,r,c),a=o(d);t.set(a,e[c]=al(a,d))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();s=nt()},m(c,d){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,d);D(c,s,d)},p(c,d){d[0]&921601&&(r=vt(c[12]),e=Ql(e,d,o,1,c,r,t,s.parentNode,Yl,al,s,tl))},d(c){c&&M(s);for(let d=0;d<e.length;d+=1)e[d].d(c)}}}function zn(l){let e,t,s,r;return{c(){e=j("svg"),t=j("circle"),s=j("line"),r=j("line"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(s,"x1","12"),n(s,"y1","8"),n(s,"x2","12"),n(s,"y2","12"),n(r,"x1","12"),n(r,"y1","16"),n(r,"x2","12.01"),n(r,"y2","16"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(o,c){D(o,e,c),i(e,t),i(e,s),i(e,r)},d(o){o&&M(e)}}}function Vn(l){let e,t,s;return{c(){e=j("svg"),t=j("path"),s=j("path"),n(t,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(s,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){D(r,e,o),i(e,t),i(e,s)},d(r){r&&M(e)}}}function Gn(l){let e,t,s;return{c(){e=j("svg"),t=j("circle"),s=j("polyline"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(s,"points","16 10 11 15 8 12"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){D(r,e,o),i(e,t),i(e,s)},d(r){r&&M(e)}}}function Kn(l){let e;return{c(){e=R("Нет слов на повторение")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function Xn(l){let e;return{c(){e=R("Нет слов на проработку")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function Yn(l){let e;return{c(){e=R("Пока нет изученных слов")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function Qn(l){let e;return{c(){e=R("Все слова успешно изучены!")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function Zn(l){let e;return{c(){e=R("Загрузите список слов на странице добавления")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function xn(l){let e;return{c(){e=R("Изучайте карточки, чтобы они появились здесь")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function $n(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',n(e,"class","card-thumbnail missing svelte-t5nbu3")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function es(l){let e,t,s;return{c(){e=f("div"),t=f("img"),Ve(t.src,s=l[61].imageUrl)||n(t,"src",s),n(t,"alt",""),n(t,"class","svelte-t5nbu3"),n(e,"class","card-thumbnail svelte-t5nbu3")},m(r,o){D(r,e,o),i(e,t)},p(r,o){o[0]&4096&&!Ve(t.src,s=r[61].imageUrl)&&n(t,"src",s)},d(r){r&&M(e)}}}function ts(l){let e;return{c(){e=f("p"),e.textContent="Добавьте перевод",n(e,"class","card-translation missing-text svelte-t5nbu3")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function ls(l){let e,t=l[61].translation+"",s;return{c(){e=f("p"),s=R(t),n(e,"class","card-translation svelte-t5nbu3")},m(r,o){D(r,e,o),i(e,s)},p(r,o){o[0]&4096&&t!==(t=r[61].translation+"")&&$(s,t)},d(r){r&&M(e)}}}function il(l){let e,t=l[61].association+"",s;return{c(){e=f("p"),s=R(t),n(e,"class","card-association svelte-t5nbu3")},m(r,o){D(r,e,o),i(e,s)},p(r,o){o[0]&4096&&t!==(t=r[61].association+"")&&$(s,t)},d(r){r&&M(e)}}}function rl(l){let e,t,s,r,o,c,d,a,u,p;function h(y,C){var T;return C[0]&4096&&(r=null),r==null&&(r=!!((T=y[61].translation)!=null&&T.trim())),r?ss:ns}let m=h(l,[-1,-1,-1]),k=m(l);function w(y,C){var T;return C[0]&4096&&(u=null),u==null&&(u=!!((T=y[61].imageUrl)!=null&&T.trim())),u?rs:is}let _=w(l,[-1,-1,-1]),v=_(l);return{c(){var y,C;e=f("div"),t=f("span"),s=j("svg"),k.c(),o=R(`
                  Перевод`),c=g(),d=f("span"),a=j("svg"),v.c(),p=R(`
                  Картинка`),n(s,"width","12"),n(s,"height","12"),n(s,"viewBox","0 0 24 24"),n(s,"fill","none"),n(s,"stroke","currentColor"),n(s,"stroke-width","2"),n(t,"class","status-item svelte-t5nbu3"),B(t,"complete",(y=l[61].translation)==null?void 0:y.trim()),n(a,"width","12"),n(a,"height","12"),n(a,"viewBox","0 0 24 24"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-width","2"),n(d,"class","status-item svelte-t5nbu3"),B(d,"complete",(C=l[61].imageUrl)==null?void 0:C.trim()),n(e,"class","draft-status svelte-t5nbu3")},m(y,C){D(y,e,C),i(e,t),i(t,s),k.m(s,null),i(t,o),i(e,c),i(e,d),i(d,a),v.m(a,null),i(d,p)},p(y,C){var T,L;m!==(m=h(y,C))&&(k.d(1),k=m(y),k&&(k.c(),k.m(s,null))),C[0]&4096&&B(t,"complete",(T=y[61].translation)==null?void 0:T.trim()),_!==(_=w(y,C))&&(v.d(1),v=_(y),v&&(v.c(),v.m(a,null))),C[0]&4096&&B(d,"complete",(L=y[61].imageUrl)==null?void 0:L.trim())},d(y){y&&M(e),k.d(),v.d()}}}function ns(l){let e;return{c(){e=j("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function ss(l){let e;return{c(){e=j("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function is(l){let e;return{c(){e=j("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function rs(l){let e;return{c(){e=j("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function ol(l){let e,t,s;function r(){return l[48](l[61])}return{c(){e=f("button"),e.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',n(e,"class","action-btn return svelte-t5nbu3"),n(e,"title","Вернуть на повторение")},m(o,c){D(o,e,c),t||(s=U(e,"click",r),t=!0)},p(o,c){l=o},d(o){o&&M(e),t=!1,s()}}}function al(l,e){let t,s,r,o,c=e[61].word+"",d,a,u,p,h,m,k,w,_,v,y,C,T;function L(z,O){if(z[61].imageUrl)return es;if(z[0]==="draft")return $n}let q=L(e),E=q&&q(e);function S(z,O){if(z[61].translation)return ls;if(z[0]==="draft")return ts}let I=S(e),b=I&&I(e),N=e[61].association&&il(e),H=e[0]==="draft"&&rl(e);function A(){return e[47](e[61])}let P=e[0]==="learned"&&ol(e);function W(){return e[49](e[61])}return{key:l,first:null,c(){t=f("div"),E&&E.c(),s=g(),r=f("div"),o=f("h3"),d=R(c),a=g(),b&&b.c(),u=g(),N&&N.c(),p=g(),H&&H.c(),h=g(),m=f("div"),k=f("button"),k.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',w=g(),P&&P.c(),_=g(),v=f("button"),v.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>',y=g(),n(o,"class","card-word svelte-t5nbu3"),n(r,"class","card-content svelte-t5nbu3"),n(k,"class","action-btn edit svelte-t5nbu3"),n(k,"title","Редактировать"),n(v,"class","action-btn delete svelte-t5nbu3"),n(v,"title","Удалить"),n(m,"class","card-actions svelte-t5nbu3"),n(t,"class","card-item svelte-t5nbu3"),B(t,"draft-card",e[0]==="draft"),this.first=t},m(z,O){D(z,t,O),E&&E.m(t,null),i(t,s),i(t,r),i(r,o),i(o,d),i(r,a),b&&b.m(r,null),i(r,u),N&&N.m(r,null),i(r,p),H&&H.m(r,null),i(t,h),i(t,m),i(m,k),i(m,w),P&&P.m(m,null),i(m,_),i(m,v),i(t,y),C||(T=[U(k,"click",A),U(v,"click",W)],C=!0)},p(z,O){e=z,q===(q=L(e))&&E?E.p(e,O):(E&&E.d(1),E=q&&q(e),E&&(E.c(),E.m(t,s))),O[0]&4096&&c!==(c=e[61].word+"")&&$(d,c),I===(I=S(e))&&b?b.p(e,O):(b&&b.d(1),b=I&&I(e),b&&(b.c(),b.m(r,u))),e[61].association?N?N.p(e,O):(N=il(e),N.c(),N.m(r,p)):N&&(N.d(1),N=null),e[0]==="draft"?H?H.p(e,O):(H=rl(e),H.c(),H.m(r,null)):H&&(H.d(1),H=null),e[0]==="learned"?P?P.p(e,O):(P=ol(e),P.c(),P.m(m,_)):P&&(P.d(1),P=null),O[0]&1&&B(t,"draft-card",e[0]==="draft")},d(z){z&&M(t),E&&E.d(),b&&b.d(),N&&N.d(),H&&H.d(),P&&P.d(),C=!1,Je(T)}}}function cl(l){let e,t,s,r,o,c,d,a,u,p,h,m=l[15].toLowerCase()+"",k,w,_,v=l[2].length+"",y,C,T,L,q,E,S,I,b,N=l[3].length+"",H,A,P,W,z,O,J,re,oe,me,fe,de=l[4].length+"",be,se,X,ae,ge,Me,Ne,Ce,V,pe,he,ce,ke=l[0]==="draft"&&l[3].trim()&&l[5].trim(),Te,G,Z,K,we,ee,De,_e,te=l[5]&&fl(l),ne=ke&&ul();return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("h2"),r.textContent="Редактировать карточку",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("div"),p=f("label"),h=R("Слово ("),k=R(m),w=R(`)
            `),_=f("span"),y=R(v),C=R("/35"),T=g(),L=f("input"),q=g(),E=f("div"),S=f("label"),I=R(`Перевод
            `),b=f("span"),H=R(N),A=R("/50"),P=g(),W=f("input"),z=g(),O=f("div"),J=f("label"),re=R(`Ассоциация 
            `),oe=f("span"),oe.textContent="(необязательно)",me=g(),fe=f("span"),be=R(de),se=R("/95"),X=g(),ae=f("textarea"),ge=g(),Me=f("div"),Ne=f("label"),Ne.innerHTML=`Изображение 
            <span class="optional svelte-t5nbu3">(URL)</span>`,Ce=g(),V=f("input"),pe=g(),te&&te.c(),he=g(),ce=f("div"),ne&&ne.c(),Te=g(),G=f("button"),G.textContent="Отмена",Z=g(),K=f("button"),we=R("Сохранить"),n(r,"class","svelte-t5nbu3"),n(c,"class","modal-close svelte-t5nbu3"),n(s,"class","modal-header svelte-t5nbu3"),n(_,"class","char-count svelte-t5nbu3"),B(_,"limit",l[2].length>=35),n(p,"for","editWord"),n(p,"class","svelte-t5nbu3"),n(L,"id","editWord"),n(L,"type","text"),n(L,"placeholder","например: serendipity"),n(L,"maxlength","35"),L.required=!0,n(L,"class","svelte-t5nbu3"),n(u,"class","input-group svelte-t5nbu3"),n(b,"class","char-count svelte-t5nbu3"),B(b,"limit",l[3].length>=50),n(S,"for","editTranslation"),n(S,"class","svelte-t5nbu3"),n(W,"id","editTranslation"),n(W,"type","text"),n(W,"placeholder","например: счастливая случайность"),n(W,"maxlength","50"),W.required=!0,n(W,"class","svelte-t5nbu3"),n(E,"class","input-group svelte-t5nbu3"),n(oe,"class","optional svelte-t5nbu3"),n(fe,"class","char-count svelte-t5nbu3"),B(fe,"limit",l[4].length>=95),n(J,"for","editAssociation"),n(J,"class","svelte-t5nbu3"),n(ae,"id","editAssociation"),n(ae,"placeholder","например: представьте, как вы случайно находите клад"),n(ae,"maxlength","95"),n(ae,"rows","2"),n(ae,"class","svelte-t5nbu3"),n(O,"class","input-group svelte-t5nbu3"),n(Ne,"for","editImageUrl"),n(Ne,"class","svelte-t5nbu3"),n(V,"id","editImageUrl"),n(V,"type","url"),n(V,"placeholder","https://example.com/image.jpg"),n(V,"class","svelte-t5nbu3"),n(Me,"class","input-group svelte-t5nbu3"),n(a,"class","modal-body svelte-t5nbu3"),n(G,"class","btn-secondary svelte-t5nbu3"),n(K,"class","btn-primary svelte-t5nbu3"),K.disabled=ee=!l[2].trim()||l[0]!=="draft"&&!l[3].trim(),n(ce,"class","modal-actions svelte-t5nbu3"),n(t,"class","modal svelte-t5nbu3"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-t5nbu3"),n(e,"role","button"),n(e,"tabindex","-1")},m(Q,ue){D(Q,e,ue),i(e,t),i(t,s),i(s,r),i(s,o),i(s,c),i(t,d),i(t,a),i(a,u),i(u,p),i(p,h),i(p,k),i(p,w),i(p,_),i(_,y),i(_,C),i(u,T),i(u,L),Oe(L,l[2]),i(a,q),i(a,E),i(E,S),i(S,I),i(S,b),i(b,H),i(b,A),i(E,P),i(E,W),Oe(W,l[3]),i(a,z),i(a,O),i(O,J),i(J,re),i(J,oe),i(J,me),i(J,fe),i(fe,be),i(fe,se),i(O,X),i(O,ae),Oe(ae,l[4]),i(a,ge),i(a,Me),i(Me,Ne),i(Me,Ce),i(Me,V),Oe(V,l[5]),i(a,pe),te&&te.m(a,null),i(t,he),i(t,ce),ne&&ne.m(ce,null),i(ce,Te),i(ce,G),i(ce,Z),i(ce,K),i(K,we),De||(_e=[U(c,"click",l[50]),U(L,"input",l[51]),U(W,"input",l[52]),U(ae,"input",l[53]),U(V,"input",l[54]),U(G,"click",l[55]),U(K,"click",l[21]),U(t,"click",$e(l[37])),U(e,"click",l[56]),U(e,"keydown",l[57])],De=!0)},p(Q,ue){ue[0]&32768&&m!==(m=Q[15].toLowerCase()+"")&&$(k,m),ue[0]&4&&v!==(v=Q[2].length+"")&&$(y,v),ue[0]&4&&B(_,"limit",Q[2].length>=35),ue[0]&4&&L.value!==Q[2]&&Oe(L,Q[2]),ue[0]&8&&N!==(N=Q[3].length+"")&&$(H,N),ue[0]&8&&B(b,"limit",Q[3].length>=50),ue[0]&8&&W.value!==Q[3]&&Oe(W,Q[3]),ue[0]&16&&de!==(de=Q[4].length+"")&&$(be,de),ue[0]&16&&B(fe,"limit",Q[4].length>=95),ue[0]&16&&Oe(ae,Q[4]),ue[0]&32&&V.value!==Q[5]&&Oe(V,Q[5]),Q[5]?te?te.p(Q,ue):(te=fl(Q),te.c(),te.m(a,null)):te&&(te.d(1),te=null),ue[0]&41&&(ke=Q[0]==="draft"&&Q[3].trim()&&Q[5].trim()),ke?ne||(ne=ul(),ne.c(),ne.m(ce,Te)):ne&&(ne.d(1),ne=null),ue[0]&13&&ee!==(ee=!Q[2].trim()||Q[0]!=="draft"&&!Q[3].trim())&&(K.disabled=ee)},d(Q){Q&&M(e),te&&te.d(),ne&&ne.d(),De=!1,Je(_e)}}}function fl(l){let e,t,s,r,o;function c(u,p){return u[11]?as:os}let d=c(l),a=d(l);return{c(){e=f("div"),a.c(),t=g(),s=f("button"),s.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(s,"class","remove-image-btn svelte-t5nbu3"),n(s,"title","Удалить изображение"),n(e,"class","image-preview-container svelte-t5nbu3")},m(u,p){D(u,e,p),a.m(e,null),i(e,t),i(e,s),r||(o=U(s,"click",l[24]),r=!0)},p(u,p){d===(d=c(u))&&a?a.p(u,p):(a.d(1),a=d(u),a&&(a.c(),a.m(e,t)))},d(u){u&&M(e),a.d(),r=!1,o()}}}function os(l){let e,t,s,r;return{c(){e=f("img"),Ve(e.src,t=l[5])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","modal-image-preview svelte-t5nbu3")},m(o,c){D(o,e,c),s||(r=[U(e,"error",l[22]),U(e,"load",l[23])],s=!0)},p(o,c){c[0]&32&&!Ve(e.src,t=o[5])&&n(e,"src",t)},d(o){o&&M(e),s=!1,Je(r)}}}function as(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Ошибка загрузки</span>',n(e,"class","image-error svelte-t5nbu3")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function ul(l){let e;return{c(){e=f("span"),e.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
            Карточка будет активирована`,n(e,"class","ready-hint svelte-t5nbu3")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function cs(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y,C,T,L,q,E,S,I,b,N,H,A,P=l[7].length+"",W,z,O,J,re,oe,me,fe,de,be=l[8].length+"",se,X,ae,ge,Me,Ne,Ce,V=l[6].length+"",pe,he,ce,ke,Te,G,Z,K,we,ee,De,_e,te,ne,Q,ue,F=l[9]&&ll(l),Be=l[1]&&nl(l),qe=l[0]==="learned"&&l[6].length>0&&sl(l);function Ge(ie,Ae){return ie[12].length>0?Wn:Fn}let Ie=Ge(l),le=Ie(l),ve=l[10]&&cl(l);return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("h1"),r.textContent="Мои карточки",o=g(),c=f("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',d=g(),a=f("p"),a.textContent="Управляйте вашими словами",u=g(),p=f("div"),h=f("button"),m=f("span"),k=R(l[14]),w=g(),_=f("span"),v=R(l[13]),y=g(),C=j("svg"),T=j("polyline"),L=g(),F&&F.c(),q=g(),E=f("div"),S=f("button"),I=j("svg"),b=j("path"),N=j("path"),H=R(`
      На проработку
      `),A=f("span"),W=R(P),z=g(),O=f("button"),J=j("svg"),re=j("circle"),oe=j("line"),me=j("line"),fe=R(`
      На повторение
      `),de=f("span"),se=R(be),X=g(),ae=f("button"),ge=j("svg"),Me=j("polyline"),Ne=R(`
      Изученные
      `),Ce=f("span"),pe=R(V),he=g(),ce=f("div"),ke=j("svg"),Te=j("circle"),G=j("line"),Z=g(),K=f("input"),we=g(),Be&&Be.c(),ee=g(),qe&&qe.c(),De=g(),_e=f("div"),le.c(),te=g(),ve&&ve.c(),ne=nt(),n(r,"class","svelte-t5nbu3"),n(c,"class","export-btn svelte-t5nbu3"),n(c,"title","Экспорт в JSON"),n(s,"class","header-top svelte-t5nbu3"),n(a,"class","subtitle svelte-t5nbu3"),n(t,"class","header svelte-t5nbu3"),n(m,"class","dropdown-label svelte-t5nbu3"),n(_,"class","dropdown-badge svelte-t5nbu3"),n(T,"points","6 9 12 15 18 9"),n(C,"class","dropdown-arrow svelte-t5nbu3"),n(C,"width","16"),n(C,"height","16"),n(C,"viewBox","0 0 24 24"),n(C,"fill","none"),n(C,"stroke","currentColor"),n(C,"stroke-width","2"),B(C,"open",l[9]),n(h,"class","tab-dropdown-btn svelte-t5nbu3"),n(p,"class","tabs-mobile svelte-t5nbu3"),n(b,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(N,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(I,"width","18"),n(I,"height","18"),n(I,"viewBox","0 0 24 24"),n(I,"fill","none"),n(I,"stroke","currentColor"),n(I,"stroke-width","2"),n(A,"class","badge svelte-t5nbu3"),n(S,"class","tab svelte-t5nbu3"),B(S,"active",l[0]==="draft"),n(re,"cx","12"),n(re,"cy","12"),n(re,"r","10"),n(oe,"x1","12"),n(oe,"y1","8"),n(oe,"x2","12"),n(oe,"y2","12"),n(me,"x1","12"),n(me,"y1","16"),n(me,"x2","12.01"),n(me,"y2","16"),n(J,"width","18"),n(J,"height","18"),n(J,"viewBox","0 0 24 24"),n(J,"fill","none"),n(J,"stroke","currentColor"),n(J,"stroke-width","2"),n(de,"class","badge svelte-t5nbu3"),n(O,"class","tab svelte-t5nbu3"),B(O,"active",l[0]==="unlearned"),n(Me,"points","20 6 9 17 4 12"),n(ge,"width","18"),n(ge,"height","18"),n(ge,"viewBox","0 0 24 24"),n(ge,"fill","none"),n(ge,"stroke","currentColor"),n(ge,"stroke-width","2"),n(Ce,"class","badge svelte-t5nbu3"),n(ae,"class","tab svelte-t5nbu3"),B(ae,"active",l[0]==="learned"),n(E,"class","tabs-desktop svelte-t5nbu3"),n(Te,"cx","11"),n(Te,"cy","11"),n(Te,"r","8"),n(G,"x1","21"),n(G,"y1","21"),n(G,"x2","16.65"),n(G,"y2","16.65"),n(ke,"class","search-icon svelte-t5nbu3"),n(ke,"width","18"),n(ke,"height","18"),n(ke,"viewBox","0 0 24 24"),n(ke,"fill","none"),n(ke,"stroke","currentColor"),n(ke,"stroke-width","2"),n(K,"type","text"),n(K,"class","search-input svelte-t5nbu3"),n(K,"placeholder","Поиск слова..."),n(ce,"class","search-box svelte-t5nbu3"),n(_e,"class","cards-list svelte-t5nbu3"),n(e,"class","lists-container svelte-t5nbu3")},m(ie,Ae){D(ie,e,Ae),i(e,t),i(t,s),i(s,r),i(s,o),i(s,c),i(t,d),i(t,a),i(e,u),i(e,p),i(p,h),i(h,m),i(m,k),i(h,w),i(h,_),i(_,v),i(h,y),i(h,C),i(C,T),i(p,L),F&&F.m(p,null),i(e,q),i(e,E),i(E,S),i(S,I),i(I,b),i(I,N),i(S,H),i(S,A),i(A,W),i(E,z),i(E,O),i(O,J),i(J,re),i(J,oe),i(J,me),i(O,fe),i(O,de),i(de,se),i(E,X),i(E,ae),i(ae,ge),i(ge,Me),i(ae,Ne),i(ae,Ce),i(Ce,pe),i(e,he),i(e,ce),i(ce,ke),i(ke,Te),i(ke,G),i(ce,Z),i(ce,K),Oe(K,l[1]),i(ce,we),Be&&Be.m(ce,null),i(e,ee),qe&&qe.m(e,null),i(e,De),i(e,_e),le.m(_e,null),D(ie,te,Ae),ve&&ve.m(ie,Ae),D(ie,ne,Ae),Q||(ue=[U(c,"click",l[25]),U(h,"click",l[38]),U(S,"click",l[42]),U(O,"click",l[43]),U(ae,"click",l[44]),U(K,"input",l[45])],Q=!0)},p(ie,Ae){Ae[0]&16384&&$(k,ie[14]),Ae[0]&8192&&$(v,ie[13]),Ae[0]&512&&B(C,"open",ie[9]),ie[9]?F?F.p(ie,Ae):(F=ll(ie),F.c(),F.m(p,null)):F&&(F.d(1),F=null),Ae[0]&128&&P!==(P=ie[7].length+"")&&$(W,P),Ae[0]&1&&B(S,"active",ie[0]==="draft"),Ae[0]&256&&be!==(be=ie[8].length+"")&&$(se,be),Ae[0]&1&&B(O,"active",ie[0]==="unlearned"),Ae[0]&64&&V!==(V=ie[6].length+"")&&$(pe,V),Ae[0]&1&&B(ae,"active",ie[0]==="learned"),Ae[0]&2&&K.value!==ie[1]&&Oe(K,ie[1]),ie[1]?Be?Be.p(ie,Ae):(Be=nl(ie),Be.c(),Be.m(ce,null)):Be&&(Be.d(1),Be=null),ie[0]==="learned"&&ie[6].length>0?qe?qe.p(ie,Ae):(qe=sl(ie),qe.c(),qe.m(e,De)):qe&&(qe.d(1),qe=null),Ie===(Ie=Ge(ie))&&le?le.p(ie,Ae):(le.d(1),le=Ie(ie),le&&(le.c(),le.m(_e,null))),ie[10]?ve?ve.p(ie,Ae):(ve=cl(ie),ve.c(),ve.m(ne.parentNode,ne)):ve&&(ve.d(1),ve=null)},i:ye,o:ye,d(ie){ie&&(M(e),M(te),M(ne)),F&&F.d(),Be&&Be.d(),qe&&qe.d(),le.d(),ve&&ve.d(ie),Q=!1,Je(ue)}}}function fs(l,e,t){let s,r,o,c,d,a,u,p,h,m,k,w,_;Qe(l,Ze,F=>t(34,k=F)),Qe(l,Re,F=>t(35,w=F)),Qe(l,We,F=>t(36,_=F));let v="draft",y="",C=!1;const T={draft:"На проработку",unlearned:"На повторение",learned:"Изученные"};function L(F){t(0,v=F),t(9,C=!1)}let q=!1,E=null,S="",I="",b="",N="",H=!1,A="",P="",W="",z="";function O(F){Re.moveToStudy(F)}function J(F){Re.deleteCard(F,v)}function re(F){t(27,E=F),t(2,S=F.word),t(3,I=F.translation||""),t(4,b=F.association||""),t(5,N=F.imageUrl||""),t(28,A=F.word),t(29,P=F.translation||""),t(30,W=F.association||""),t(31,z=F.imageUrl||""),t(11,H=!1),t(10,q=!0)}function oe(F=!1){!F&&c&&!confirm("У вас есть несохранённые изменения. Закрыть без сохранения?")||(t(10,q=!1),t(27,E=null))}function me(){t(10,q=!1),t(27,E=null)}function fe(){S.trim()&&E&&(v==="draft"?Re.editDraftCard(E.id,{word:S.trim(),translation:I.trim(),association:b.trim(),imageUrl:N.trim()}):I.trim()&&Re.editCard(E.id,v,{word:S.trim(),translation:I.trim(),association:b.trim(),imageUrl:N.trim()}),me())}function de(){t(11,H=!0)}function be(){t(11,H=!1)}function se(){t(5,N="")}function X(){const F={learned:a,unlearned:u,draft:p,language:k||"en",exportedAt:new Date().toISOString()},Be=JSON.stringify(F,null,2),qe=new Blob([Be],{type:"application/json"}),Ge=URL.createObjectURL(qe),Ie=document.createElement("a");Ie.href=Ge,Ie.download=`flash-words-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(Ge)}function ae(){a.length>0&&confirm(`Отправить все ${a.length} слов на повторение?`)&&Re.moveAllToStudy()}function ge(F){tt.call(this,l,F)}const Me=()=>t(9,C=!C),Ne=()=>L("draft"),Ce=()=>L("unlearned"),V=()=>L("learned"),pe=()=>t(0,v="draft"),he=()=>t(0,v="unlearned"),ce=()=>t(0,v="learned");function ke(){y=this.value,t(1,y)}const Te=()=>t(1,y=""),G=F=>re(F),Z=F=>O(F.id),K=F=>J(F.id),we=()=>oe();function ee(){S=this.value,t(2,S)}function De(){I=this.value,t(3,I)}function _e(){b=this.value,t(4,b)}function te(){N=this.value,t(5,N)}const ne=()=>oe(),Q=()=>oe(),ue=F=>F.key==="Escape"&&oe();return l.$$.update=()=>{l.$$.dirty[1]&8&&t(15,s=Ye(k)),l.$$.dirty[0]&1&&t(14,r=T[v]),l.$$.dirty[1]&32&&t(33,d=_||"default"),l.$$.dirty[1]&20&&t(7,p=(w.draft||[]).filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(8,u=w.unlearned.filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(6,a=w.learned.filter(F=>(F.dictionaryId||"default")===d)),l.$$.dirty[0]&449&&t(13,o=v==="draft"?p.length:v==="unlearned"?u.length:a.length),l.$$.dirty[0]&2013265980|l.$$.dirty[1]&1&&(c=E&&(S!==A||I!==P||b!==W||N!==z)),l.$$.dirty[0]&449&&t(32,h=v==="learned"?a:v==="unlearned"?u:p),l.$$.dirty[0]&2|l.$$.dirty[1]&2&&t(12,m=y.trim()?h.filter(F=>F.word.toLowerCase().includes(y.toLowerCase())||F.translation&&F.translation.toLowerCase().includes(y.toLowerCase())):h)},[v,y,S,I,b,N,a,p,u,C,q,H,m,o,r,s,L,O,J,re,oe,fe,de,be,se,X,ae,E,A,P,W,z,h,d,k,w,_,ge,Me,Ne,Ce,V,pe,he,ce,ke,Te,G,Z,K,we,ee,De,_e,te,ne,Q,ue]}class us extends wt{constructor(e){super(),kt(this,e,fs,cs,at,{},null,[-1,-1,-1])}}function dl(l,e,t){const s=l.slice();return s[52]=e[t],s}function pl(l){let e;return{c(){e=f("span"),n(e,"class","user-indicator svelte-1ms30mp")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function ml(l){let e;return{c(){e=f("span"),n(e,"class","token-indicator svelte-1ms30mp")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function hl(l){let e,t,s;function r(d,a){return d[3].length===0?ps:ds}let o=r(l),c=o(l);return{c(){e=f("div"),c.c(),n(e,"class","dictionary-dropdown svelte-1ms30mp")},m(d,a){D(d,e,a),c.m(e,null),t||(s=U(e,"click",$e(l[33])),t=!0)},p(d,a){o===(o=r(d))&&c?c.p(d,a):(c.d(1),c=o(d),c&&(c.c(),c.m(e,null)))},d(d){d&&M(e),c.d(),t=!1,s()}}}function ds(l){let e,t=vt(l[3]),s=[];for(let r=0;r<t.length;r+=1)s[r]=vl(dl(l,t,r));return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=nt()},m(r,o){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(r,o);D(r,e,o)},p(r,o){if(o[0]&4194316){t=vt(r[3]);let c;for(c=0;c<t.length;c+=1){const d=dl(r,t,c);s[c]?s[c].p(d,o):(s[c]=vl(d),s[c].c(),s[c].m(e.parentNode,e))}for(;c<s.length;c+=1)s[c].d(1);s.length=t.length}},d(r){r&&M(e),Hl(s,r)}}}function ps(l){let e;return{c(){e=f("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ms30mp"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> <p class="svelte-1ms30mp">Загрузите словарь или добавьте карточку слова</p>',n(e,"class","dropdown-empty svelte-1ms30mp")},m(t,s){D(t,e,s)},p:ye,d(t){t&&M(e)}}}function _l(l){let e,t;return{c(){e=j("svg"),t=j("polyline"),n(t,"points","20 6 9 17 4 12"),n(e,"width","16"),n(e,"height","16"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(s,r){D(s,e,r),i(e,t)},d(s){s&&M(e)}}}function vl(l){let e,t,s=l[52].name+"",r,o,c,d,a,u=l[2]===l[52].id&&_l();function p(){return l[35](l[52])}return{c(){e=f("button"),t=f("span"),r=R(s),o=g(),u&&u.c(),c=g(),n(e,"class","dropdown-item svelte-1ms30mp"),B(e,"active",l[2]===l[52].id)},m(h,m){D(h,e,m),i(e,t),i(t,r),i(e,o),u&&u.m(e,null),i(e,c),d||(a=U(e,"click",p),d=!0)},p(h,m){l=h,m[0]&8&&s!==(s=l[52].name+"")&&$(r,s),l[2]===l[52].id?u||(u=_l(),u.c(),u.m(e,c)):u&&(u.d(1),u=null),m[0]&12&&B(e,"active",l[2]===l[52].id)},d(h){h&&M(e),u&&u.d(),d=!1,a()}}}function gl(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y,C,T,L,q,E,S=l[16]&&bl(l),I=l[7]>0&&kl(l);function b(A,P){return A[6]?hs:ms}let N=b(l),H=N(l);return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("h2"),r.textContent="AI Токен",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("p"),u.textContent="Введите ваш API ключ для использования AI-функций",p=g(),h=f("div"),m=f("input"),k=g(),S&&S.c(),w=g(),I&&I.c(),_=g(),v=f("div"),y=f("button"),y.textContent="Отмена",C=g(),T=f("button"),H.c(),n(r,"class","svelte-1ms30mp"),n(c,"class","modal-close svelte-1ms30mp"),n(s,"class","modal-header svelte-1ms30mp"),n(u,"class","modal-description svelte-1ms30mp"),n(m,"type","password"),n(m,"class","token-input svelte-1ms30mp"),n(m,"placeholder","sk-..."),n(h,"class","token-input-wrapper svelte-1ms30mp"),n(a,"class","modal-body svelte-1ms30mp"),n(y,"class","cancel-btn svelte-1ms30mp"),n(T,"class","save-btn svelte-1ms30mp"),T.disabled=L=!l[0].trim(),B(T,"saved",l[6]),n(v,"class","modal-footer svelte-1ms30mp"),n(t,"class","modal svelte-1ms30mp"),n(e,"class","modal-overlay svelte-1ms30mp")},m(A,P){D(A,e,P),i(e,t),i(t,s),i(s,r),i(s,o),i(s,c),i(t,d),i(t,a),i(a,u),i(a,p),i(a,h),i(h,m),Oe(m,l[0]),i(h,k),S&&S.m(h,null),i(a,w),I&&I.m(a,null),i(t,_),i(t,v),i(v,y),i(v,C),i(v,T),H.m(T,null),q||(E=[U(c,"click",l[36]),U(m,"input",l[37]),U(y,"click",l[38]),U(T,"click",l[18]),U(t,"click",$e(l[32])),U(e,"click",l[39])],q=!0)},p(A,P){P[0]&1&&m.value!==A[0]&&Oe(m,A[0]),A[16]?S?S.p(A,P):(S=bl(A),S.c(),S.m(h,null)):S&&(S.d(1),S=null),A[7]>0?I?I.p(A,P):(I=kl(A),I.c(),I.m(a,null)):I&&(I.d(1),I=null),N!==(N=b(A))&&(H.d(1),H=N(A),H&&(H.c(),H.m(T,null))),P[0]&1&&L!==(L=!A[0].trim())&&(T.disabled=L),P[0]&64&&B(T,"saved",A[6])},d(A){A&&M(e),S&&S.d(),I&&I.d(),H.d(),q=!1,Je(E)}}}function bl(l){let e,t,s;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-1ms30mp"),n(e,"title","Очистить токен")},m(r,o){D(r,e,o),t||(s=U(e,"click",l[19]),t=!0)},p:ye,d(r){r&&M(e),t=!1,s()}}}function kl(l){let e,t,s,r,o,c=Tl(l[7])+"",d;return{c(){e=f("div"),t=f("div"),s=f("span"),s.textContent="Стоимость всех запросов:",r=g(),o=f("span"),d=R(c),n(s,"class","cost-label svelte-1ms30mp"),n(o,"class","cost-value svelte-1ms30mp"),n(t,"class","cost-row svelte-1ms30mp"),n(e,"class","cost-info svelte-1ms30mp")},m(a,u){D(a,e,u),i(e,t),i(t,s),i(t,r),i(t,o),i(o,d)},p(a,u){u[0]&128&&c!==(c=Tl(a[7])+"")&&$(d,c)},d(a){a&&M(e)}}}function ms(l){let e;return{c(){e=R("Сохранить")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function hs(l){let e,t,s;return{c(){e=j("svg"),t=j("polyline"),s=R(`
              Сохранено`),n(t,"points","20 6 9 17 4 12"),n(e,"width","18"),n(e,"height","18"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(r,o){D(r,e,o),i(e,t),D(r,s,o)},d(r){r&&(M(e),M(s))}}}function wl(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y,C,T,L,q,E,S=l[9]&&yl(l),I=l[10]&&Cl(l),b=l[1]&&Sl(l);function N(P,W){return P[11]?vs:_s}let H=N(l),A=H(l);return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("h2"),r.textContent="Загрузить слова",o=g(),c=f("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=f("div"),u=f("p"),u.textContent="Введите имя для загрузки персональных слов из файла",p=g(),h=f("div"),m=f("input"),k=g(),S&&S.c(),w=g(),I&&I.c(),_=g(),b&&b.c(),v=g(),y=f("div"),C=f("button"),C.textContent="Отмена",T=g(),L=f("button"),A.c(),n(r,"class","svelte-1ms30mp"),n(c,"class","modal-close svelte-1ms30mp"),n(s,"class","modal-header svelte-1ms30mp"),n(u,"class","modal-description svelte-1ms30mp"),n(m,"type","text"),n(m,"class","token-input user-input svelte-1ms30mp"),n(m,"placeholder","например: mycode"),B(m,"error",l[10]),n(h,"class","token-input-wrapper svelte-1ms30mp"),n(a,"class","modal-body svelte-1ms30mp"),n(C,"class","cancel-btn svelte-1ms30mp"),n(L,"class","save-btn svelte-1ms30mp"),L.disabled=l[11],n(y,"class","modal-footer svelte-1ms30mp"),n(t,"class","modal svelte-1ms30mp"),n(e,"class","modal-overlay svelte-1ms30mp")},m(P,W){D(P,e,W),i(e,t),i(t,s),i(s,r),i(s,o),i(s,c),i(t,d),i(t,a),i(a,u),i(a,p),i(a,h),i(h,m),Oe(m,l[9]),i(h,k),S&&S.m(h,null),i(a,w),I&&I.m(a,null),i(a,_),b&&b.m(a,null),i(t,v),i(t,y),i(y,C),i(y,T),i(y,L),A.m(L,null),q||(E=[U(c,"click",l[40]),U(m,"input",l[41]),U(m,"keydown",l[42]),U(C,"click",l[43]),U(L,"click",l[21]),U(t,"click",$e(l[31])),U(e,"click",l[44])],q=!0)},p(P,W){W[0]&512&&m.value!==P[9]&&Oe(m,P[9]),W[0]&1024&&B(m,"error",P[10]),P[9]?S?S.p(P,W):(S=yl(P),S.c(),S.m(h,null)):S&&(S.d(1),S=null),P[10]?I?I.p(P,W):(I=Cl(P),I.c(),I.m(a,_)):I&&(I.d(1),I=null),P[1]?b?b.p(P,W):(b=Sl(P),b.c(),b.m(a,null)):b&&(b.d(1),b=null),H!==(H=N(P))&&(A.d(1),A=H(P),A&&(A.c(),A.m(L,null))),W[0]&2048&&(L.disabled=P[11])},d(P){P&&M(e),S&&S.d(),I&&I.d(),b&&b.d(),A.d(),q=!1,Je(E)}}}function yl(l){let e,t,s;return{c(){e=f("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-1ms30mp"),n(e,"title","Очистить")},m(r,o){D(r,e,o),t||(s=U(e,"click",l[24]),t=!0)},p:ye,d(r){r&&M(e),t=!1,s()}}}function Cl(l){let e,t;return{c(){e=f("p"),t=R(l[10]),n(e,"class","error-text svelte-1ms30mp")},m(s,r){D(s,e,r),i(e,t)},p(s,r){r[0]&1024&&$(t,s[10])},d(s){s&&M(e)}}}function Sl(l){let e,t,s,r,o,c,d,a;return{c(){e=f("div"),t=j("svg"),s=j("polyline"),r=g(),o=f("span"),c=R("Загружены слова: "),d=f("strong"),a=R(l[1]),n(s,"points","20 6 9 17 4 12"),n(t,"width","16"),n(t,"height","16"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(d,"class","svelte-1ms30mp"),n(e,"class","current-user-info svelte-1ms30mp")},m(u,p){D(u,e,p),i(e,t),i(t,s),i(e,r),i(e,o),i(o,c),i(o,d),i(d,a)},p(u,p){p[0]&2&&$(a,u[1])},d(u){u&&M(e)}}}function _s(l){let e;return{c(){e=R("Загрузить")},m(t,s){D(t,e,s)},d(t){t&&M(e)}}}function vs(l){let e,t;return{c(){e=f("span"),t=R(`
              Загрузка...`),n(e,"class","loading-spinner-small svelte-1ms30mp")},m(s,r){D(s,e,r),D(s,t,r)},d(s){s&&(M(e),M(t))}}}function gs(l){let e,t;return e=new us({}),{c(){Dt(e.$$.fragment)},m(s,r){gt(e,s,r),t=!0},i(s){t||(lt(e.$$.fragment,s),t=!0)},o(s){mt(e.$$.fragment,s),t=!1},d(s){bt(e,s)}}}function bs(l){let e,t;return e=new Pn({}),{c(){Dt(e.$$.fragment)},m(s,r){gt(e,s,r),t=!0},i(s){t||(lt(e.$$.fragment,s),t=!0)},o(s){mt(e.$$.fragment,s),t=!1},d(s){bt(e,s)}}}function ks(l){let e,t;return e=new pn({}),{c(){Dt(e.$$.fragment)},m(s,r){gt(e,s,r),t=!0},i(s){t||(lt(e.$$.fragment,s),t=!0)},o(s){mt(e.$$.fragment,s),t=!1},d(s){bt(e,s)}}}function Ll(l){let e,t;return{c(){e=f("span"),t=R(l[13]),n(e,"class","study-badge svelte-1ms30mp")},m(s,r){D(s,e,r),i(e,t)},p(s,r){r[0]&8192&&$(t,s[13])},d(s){s&&M(e)}}}function ws(l){let e,t,s,r,o,c,d,a,u,p,h,m,k,w,_,v,y,C,T,L,q,E,S,I,b,N,H,A,P,W,z,O,J,re,oe,me,fe,de,be,se,X,ae,ge,Me,Ne,Ce,V,pe,he,ce,ke,Te,G,Z,K,we,ee,De,_e,te=l[15]&&pl(),ne=l[16]&&ml(),Q=l[12]&&hl(l),ue=l[5]&&gl(l),F=l[8]&&wl(l);const Be=[ks,bs,gs],qe=[];function Ge(le,ve){return le[4]==="add"?0:le[4]==="study"?1:le[4]==="lists"?2:-1}~(se=Ge(l))&&(X=qe[se]=Be[se](l));let Ie=l[13]>0&&Ll(l);return{c(){e=f("div"),t=f("div"),s=g(),r=f("nav"),o=f("div"),o.innerHTML='<svg width="32" height="32" viewBox="0 0 100 100"><defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#6366f1"></stop><stop offset="100%" style="stop-color:#a855f7"></stop></linearGradient></defs><rect width="100" height="100" rx="20" fill="url(#logoGrad)"></rect><text x="50" y="65" font-family="Arial" font-size="50" font-weight="bold" fill="white" text-anchor="middle">F</text></svg> <span class="brand-name svelte-1ms30mp">Flash Words</span>',c=g(),d=f("div"),a=f("button"),u=j("svg"),p=j("path"),h=j("circle"),m=g(),te&&te.c(),k=g(),w=f("button"),_=j("svg"),v=j("path"),y=j("polyline"),C=j("polyline"),T=j("polyline"),L=j("polyline"),q=j("line"),E=g(),ne&&ne.c(),S=g(),I=f("div"),b=f("button"),N=j("svg"),H=j("path"),A=j("path"),P=g(),W=f("span"),z=R(l[14]),O=g(),J=j("svg"),re=j("polyline"),oe=g(),Q&&Q.c(),me=g(),ue&&ue.c(),fe=g(),F&&F.c(),de=g(),be=f("main"),X&&X.c(),ae=g(),ge=f("nav"),Me=f("button"),Me.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg> <span>Добавить</span>',Ne=g(),Ce=f("button"),V=f("div"),pe=j("svg"),he=j("rect"),ce=j("path"),ke=j("path"),Te=g(),Ie&&Ie.c(),G=g(),Z=f("span"),Z.textContent="Изучать",K=g(),we=f("button"),we.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> <span>Списки</span>',n(t,"class","background-pattern svelte-1ms30mp"),n(o,"class","nav-brand svelte-1ms30mp"),n(p,"d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"),n(h,"cx","12"),n(h,"cy","7"),n(h,"r","4"),n(u,"width","20"),n(u,"height","20"),n(u,"viewBox","0 0 24 24"),n(u,"fill","none"),n(u,"stroke","currentColor"),n(u,"stroke-width","2"),n(a,"class","user-btn svelte-1ms30mp"),n(a,"title","Загрузить слова пользователя"),B(a,"has-user",l[15]),n(v,"d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"),n(y,"points","7.5 4.21 12 6.81 16.5 4.21"),n(C,"points","7.5 19.79 7.5 14.6 3 12"),n(T,"points","21 12 16.5 14.6 16.5 19.79"),n(L,"points","3.27 6.96 12 12.01 20.73 6.96"),n(q,"x1","12"),n(q,"y1","22.08"),n(q,"x2","12"),n(q,"y2","12"),n(_,"width","20"),n(_,"height","20"),n(_,"viewBox","0 0 24 24"),n(_,"fill","none"),n(_,"stroke","currentColor"),n(_,"stroke-width","2"),n(w,"class","ai-token-btn svelte-1ms30mp"),n(w,"title","Настройка AI токена"),B(w,"has-token",l[16]),n(H,"d","M4 19.5A2.5 2.5 0 0 1 6.5 17H20"),n(A,"d","M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"),n(N,"width","18"),n(N,"height","18"),n(N,"viewBox","0 0 24 24"),n(N,"fill","none"),n(N,"stroke","currentColor"),n(N,"stroke-width","2"),n(W,"class","dictionary-label svelte-1ms30mp"),n(re,"points","6 9 12 15 18 9"),n(J,"class","dropdown-arrow svelte-1ms30mp"),n(J,"width","14"),n(J,"height","14"),n(J,"viewBox","0 0 24 24"),n(J,"fill","none"),n(J,"stroke","currentColor"),n(J,"stroke-width","2"),B(J,"open",l[12]),n(b,"class","dictionary-btn svelte-1ms30mp"),n(b,"title","Выбрать словарь"),B(b,"has-dictionary",l[2]),n(I,"class","dictionary-selector svelte-1ms30mp"),n(d,"class","nav-stats svelte-1ms30mp"),n(r,"class","navbar svelte-1ms30mp"),n(be,"class","main-content svelte-1ms30mp"),n(Me,"class","nav-item svelte-1ms30mp"),B(Me,"active",l[4]==="add"),n(he,"x","2"),n(he,"y","4"),n(he,"width","20"),n(he,"height","16"),n(he,"rx","2"),n(ce,"d","M12 8v8"),n(ke,"d","M8 12h8"),n(pe,"width","28"),n(pe,"height","28"),n(pe,"viewBox","0 0 24 24"),n(pe,"fill","none"),n(pe,"stroke","currentColor"),n(pe,"stroke-width","2"),n(pe,"class","svelte-1ms30mp"),n(V,"class","study-btn-inner svelte-1ms30mp"),n(Z,"class","svelte-1ms30mp"),n(Ce,"class","nav-item study svelte-1ms30mp"),B(Ce,"active",l[4]==="study"),n(we,"class","nav-item svelte-1ms30mp"),B(we,"active",l[4]==="lists"),n(ge,"class","bottom-nav svelte-1ms30mp"),n(e,"class","app svelte-1ms30mp")},m(le,ve){D(le,e,ve),i(e,t),i(e,s),i(e,r),i(r,o),i(r,c),i(r,d),i(d,a),i(a,u),i(u,p),i(u,h),i(a,m),te&&te.m(a,null),i(d,k),i(d,w),i(w,_),i(_,v),i(_,y),i(_,C),i(_,T),i(_,L),i(_,q),i(w,E),ne&&ne.m(w,null),i(d,S),i(d,I),i(I,b),i(b,N),i(N,H),i(N,A),i(b,P),i(b,W),i(W,z),i(b,O),i(b,J),i(J,re),i(I,oe),Q&&Q.m(I,null),i(e,me),ue&&ue.m(e,null),i(e,fe),F&&F.m(e,null),i(e,de),i(e,be),~se&&qe[se].m(be,null),i(e,ae),i(e,ge),i(ge,Me),i(ge,Ne),i(ge,Ce),i(Ce,V),i(V,pe),i(pe,he),i(pe,ce),i(pe,ke),i(V,Te),Ie&&Ie.m(V,null),i(Ce,G),i(Ce,Z),i(ge,K),i(ge,we),ee=!0,De||(_e=[U(a,"click",l[20]),U(w,"click",l[17]),U(b,"click",$e(l[34])),U(Me,"click",l[45]),U(Ce,"click",l[46]),U(we,"click",l[47]),U(e,"click",l[23])],De=!0)},p(le,ve){le[15]?te||(te=pl(),te.c(),te.m(a,null)):te&&(te.d(1),te=null),(!ee||ve[0]&32768)&&B(a,"has-user",le[15]),le[16]?ne||(ne=ml(),ne.c(),ne.m(w,null)):ne&&(ne.d(1),ne=null),(!ee||ve[0]&65536)&&B(w,"has-token",le[16]),(!ee||ve[0]&16384)&&$(z,le[14]),(!ee||ve[0]&4096)&&B(J,"open",le[12]),(!ee||ve[0]&4)&&B(b,"has-dictionary",le[2]),le[12]?Q?Q.p(le,ve):(Q=hl(le),Q.c(),Q.m(I,null)):Q&&(Q.d(1),Q=null),le[5]?ue?ue.p(le,ve):(ue=gl(le),ue.c(),ue.m(e,fe)):ue&&(ue.d(1),ue=null),le[8]?F?F.p(le,ve):(F=wl(le),F.c(),F.m(e,de)):F&&(F.d(1),F=null);let ie=se;se=Ge(le),se!==ie&&(X&&(Kl(),mt(qe[ie],1,1,()=>{qe[ie]=null}),Xl()),~se?(X=qe[se],X||(X=qe[se]=Be[se](le),X.c()),lt(X,1),X.m(be,null)):X=null),(!ee||ve[0]&16)&&B(Me,"active",le[4]==="add"),le[13]>0?Ie?Ie.p(le,ve):(Ie=Ll(le),Ie.c(),Ie.m(V,null)):Ie&&(Ie.d(1),Ie=null),(!ee||ve[0]&16)&&B(Ce,"active",le[4]==="study"),(!ee||ve[0]&16)&&B(we,"active",le[4]==="lists")},i(le){ee||(lt(X),ee=!0)},o(le){mt(X),ee=!1},d(le){le&&M(e),te&&te.d(),ne&&ne.d(),Q&&Q.d(),ue&&ue.d(),F&&F.d(),~se&&qe[se].d(),Ie&&Ie.d(),De=!1,Je(_e)}}}function Tl(l){return l<.01?`$${l.toFixed(6)}`:l<1?`$${l.toFixed(4)}`:`$${l.toFixed(2)}`}function ys(l,e,t){let s,r,o,c,d,a,u,p,h,m,k,w;Qe(l,Re,G=>t(28,m=G)),Qe(l,We,G=>t(29,k=G)),Qe(l,Xe,G=>t(30,w=G));let _="study",v=!1,y="",C=!1,T=0,L=!1,q="",E="",S=!1,I="",b=!1;function N(){typeof localStorage<"u"&&t(7,T=parseFloat(localStorage.getItem("ai_total_cost")||"0")),t(5,v=!0)}function H(){typeof localStorage<"u"&&(localStorage.setItem("ai_token",y),t(6,C=!0),setTimeout(()=>{t(6,C=!1),t(5,v=!1)},1e3))}function A(){t(0,y=""),typeof localStorage<"u"&&localStorage.removeItem("ai_token")}function P(){t(9,q=I),t(10,E=""),t(8,L=!0)}async function W(){if(!q.trim()){t(1,I=""),typeof localStorage<"u"&&localStorage.removeItem("user_name"),t(8,L=!1);return}t(11,S=!0),t(10,E="");try{const Z=await fetch(`/flash/words/${q.trim()}.json`);if(!Z.ok)throw new Error("Файл не найден");const K=await Z.json(),we=K.language||"en";K.language&&Ze.set(K.language),t(1,I=q.trim()),typeof localStorage<"u"&&localStorage.setItem("user_name",I);let ee;if(we==="en"?ee="default":(ee=I,Re.resetDictionary(ee)),Re.importCards(K,ee),we==="en"){if(!s.find(_e=>_e.id==="default")){const _e=`${Ye("en")} (default)`;Xe.addDictionary("default",_e,"en",!1)}We.set("default")}else{const De=`${I} (${Ye(we)})`;Xe.addDictionary(I,De,we,!1),We.set(I)}t(8,L=!1)}catch{t(10,E=`Файл "${q.trim()}.json" не найден`)}finally{t(11,S=!1)}}async function z(G){if(!G){We.set(""),t(12,b=!1);return}const Z=s.find(K=>K.id===G);if(Z){We.set(G),Z.language&&Ze.set(Z.language),t(12,b=!1);return}t(11,S=!0);try{const we=await fetch(`/flash/words/${G}.json`);if(!we.ok)throw new Error("Файл не найден");const ee=await we.json(),De=ee.language||"en";ee.language&&Ze.set(ee.language);let _e;if(De==="en"?_e="default":(_e=G,Re.resetDictionary(_e)),Re.importCards(ee,_e),De==="en"){if(!s.find(ne=>ne.id==="default")){const ne=`${Ye("en")} (default)`;Xe.addDictionary("default",ne,"en",!1)}We.set("default")}else{const te=`${G} (${Ye(De)})`;Xe.addDictionary(G,te,De,!1),We.set(G)}t(12,b=!1)}catch(K){console.error("Ошибка загрузки словаря:",K),alert(`Ошибка загрузки словаря "${G}"`)}finally{t(11,S=!1)}}function O(G){if(G===r){t(12,b=!1);return}z(G)}ql(()=>{if(!s.find(Z=>Z.id==="default")){const Z=`${Ye("en")} (default)`;Xe.addDictionary("default",Z,"en",!1),(!r||r==="")&&We.set("default")}if(r){const Z=s.find(K=>K.id===r);Z&&(Z.isImported||r==="default")?Z.language&&Ze.set(Z.language):z(r)}else{We.set("default");const Z=s.find(K=>K.id==="default");Z&&Z.language&&Ze.set(Z.language)}});function J(G){b&&!G.target.closest(".dictionary-selector")&&t(12,b=!1)}function re(){t(9,q=""),t(1,I=""),typeof localStorage<"u"&&localStorage.removeItem("user_name")}const oe=(G,Z)=>G.filter(K=>(K.dictionaryId||"default")===Z);function me(G){tt.call(this,l,G)}function fe(G){tt.call(this,l,G)}function de(G){tt.call(this,l,G)}const be=()=>t(12,b=!b),se=G=>O(G.id),X=()=>t(5,v=!1);function ae(){y=this.value,t(0,y)}const ge=()=>t(5,v=!1),Me=()=>t(5,v=!1),Ne=()=>t(8,L=!1);function Ce(){q=this.value,t(9,q)}const V=G=>G.key==="Enter"&&W(),pe=()=>t(8,L=!1),he=()=>t(8,L=!1),ce=()=>t(4,_="add"),ke=()=>t(4,_="study"),Te=()=>t(4,_="lists");return l.$$.update=()=>{var G;if(l.$$.dirty[0]&536870912&&t(2,r=k),l.$$.dirty[0]&268435460&&r){const Z={learned:m.learned.filter(K=>(K.dictionaryId||"default")===r),unlearned:m.unlearned.filter(K=>(K.dictionaryId||"default")===r),draft:(m.draft||[]).filter(K=>(K.dictionaryId||"default")===r)};Xe.updateDictionaryData(r,Z)}l.$$.dirty[0]&1073741824&&t(3,s=w),l.$$.dirty[0]&1&&t(16,o=y&&y.length>0),l.$$.dirty[0]&2&&t(15,c=I&&I.length>0),l.$$.dirty[0]&12&&s.length>0&&(!r||r==="")&&(s.find(K=>K.id==="default")?We.set("default"):s.length>0&&We.set(s[0].id)),l.$$.dirty[0]&12&&t(14,d=((G=s.find(Z=>Z.id===r))==null?void 0:G.name)||(s.length>0?"Выберите словарь":"Нет словарей")),l.$$.dirty[0]&268435460&&t(27,a=oe(m.learned,r)),l.$$.dirty[0]&268435460&&t(26,u=oe(m.unlearned,r)),l.$$.dirty[0]&268435460&&t(25,p=oe(m.draft||[],r)),l.$$.dirty[0]&234881024&&a.length+u.length+p.length,l.$$.dirty[0]&67108864&&t(13,h=u.length),l.$$.dirty[0]&33554432&&p.length},[y,I,r,s,_,v,C,T,L,q,E,S,b,h,d,c,o,N,H,A,P,W,O,J,re,p,u,a,m,k,w,me,fe,de,be,se,X,ae,ge,Me,Ne,Ce,V,pe,he,ce,ke,Te]}class Cs extends wt{constructor(e){super(),kt(this,e,ys,ws,at,{},null,[-1,-1])}}new Cs({target:document.getElementById("app")});
