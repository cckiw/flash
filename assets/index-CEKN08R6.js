var Bl=Object.defineProperty;var El=(l,e,t)=>e in l?Bl(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var xe=(l,e,t)=>El(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function ge(){}function Tl(l){return l()}function Nt(){return Object.create(null)}function je(l){l.forEach(Tl)}function Il(l){return typeof l=="function"}function at(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let ht;function Ge(l,e){return l===e?!0:(ht||(ht=document.createElement("a")),ht.href=e,l===ht.href)}function Ol(l){return Object.keys(l).length===0}function Ul(l,...e){if(l==null){for(const i of e)i(void 0);return ge}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Qe(l,e,t){l.$$.on_destroy.push(Ul(e,t))}function s(l,e){l.appendChild(e)}function M(l,e,t){l.insertBefore(e,t||null)}function I(l){l.parentNode&&l.parentNode.removeChild(l)}function Hl(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function u(l){return document.createElement(l)}function P(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function R(l){return document.createTextNode(l)}function g(){return R(" ")}function nt(){return R("")}function U(l,e,t,i){return l.addEventListener(e,t,i),()=>l.removeEventListener(e,t,i)}function Rl(l){return function(e){return e.preventDefault(),l.call(this,e)}}function $e(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function n(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Jl(l){return Array.from(l.childNodes)}function te(l,e){e=""+e,l.data!==e&&(l.data=e)}function Ae(l,e){l.value=e??""}function jl(l,e,t,i){l.style.setProperty(e,t,"")}function N(l,e,t){l.classList.toggle(e,!!t)}class Pl{constructor(e=!1){xe(this,"is_svg",!1);xe(this,"e");xe(this,"n");xe(this,"t");xe(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=P(t.nodeName):this.e=u(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)M(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(I)}}let pt;function dt(l){pt=l}function Ml(){if(!pt)throw new Error("Function called outside component initialization");return pt}function Dl(l){Ml().$$.on_mount.push(l)}function zl(l){Ml().$$.on_destroy.push(l)}function tt(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const rt=[],St=[];let ot=[];const At=[],Fl=Promise.resolve();let Lt=!1;function Wl(){Lt||(Lt=!0,Fl.then(Nl))}function Tt(l){ot.push(l)}const qt=new Set;let it=0;function Nl(){if(it!==0)return;const l=pt;do{try{for(;it<rt.length;){const e=rt[it];it++,dt(e),Vl(e.$$)}}catch(e){throw rt.length=0,it=0,e}for(dt(null),rt.length=0,it=0;St.length;)St.pop()();for(let e=0;e<ot.length;e+=1){const t=ot[e];qt.has(t)||(qt.add(t),t())}ot.length=0}while(rt.length);for(;At.length;)At.pop()();Lt=!1,qt.clear(),dt(l)}function Vl(l){if(l.fragment!==null){l.update(),je(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Tt)}}function Gl(l){const e=[],t=[];ot.forEach(i=>l.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),ot=e}const vt=new Set;let et;function Kl(){et={r:0,c:[],p:et}}function Xl(){et.r||je(et.c),et=et.p}function lt(l,e){l&&l.i&&(vt.delete(l),l.i(e))}function mt(l,e,t,i){if(l&&l.o){if(vt.has(l))return;vt.add(l),et.c.push(()=>{vt.delete(l),i&&(t&&l.d(1),i())}),l.o(e)}else i&&i()}function _t(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Yl(l,e){l.d(1),e.delete(l.key)}function Ql(l,e,t,i,r,o,c,d,a,f,p,h){let m=l.length,k=o.length,w=m;const _={};for(;w--;)_[l[w].key]=w;const v=[],C=new Map,q=new Map,S=[];for(w=k;w--;){const L=h(r,o,w),T=t(L);let b=c.get(T);b?S.push(()=>b.p(L,e)):(b=f(T,L),b.c()),C.set(T,v[w]=b),T in _&&q.set(T,Math.abs(w-_[T]))}const y=new Set,D=new Set;function E(L){lt(L,1),L.m(d,p),c.set(L.key,L),p=L.first,k--}for(;m&&k;){const L=v[k-1],T=l[m-1],b=L.key,O=T.key;L===T?(p=L.first,m--,k--):C.has(O)?!c.has(b)||y.has(b)?E(L):D.has(O)?m--:q.get(b)>q.get(O)?(D.add(b),E(L)):(y.add(O),m--):(a(T,c),m--)}for(;m--;){const L=l[m];C.has(L.key)||a(L,c)}for(;k;)E(v[k-1]);return je(S),v}function Mt(l){l&&l.c()}function gt(l,e,t){const{fragment:i,after_update:r}=l.$$;i&&i.m(e,t),Tt(()=>{const o=l.$$.on_mount.map(Tl).filter(Il);l.$$.on_destroy?l.$$.on_destroy.push(...o):je(o),l.$$.on_mount=[]}),r.forEach(Tt)}function yt(l,e){const t=l.$$;t.fragment!==null&&(Gl(t.after_update),je(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Zl(l,e){l.$$.dirty[0]===-1&&(rt.push(l),Wl(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function kt(l,e,t,i,r,o,c=null,d=[-1]){const a=pt;dt(l);const f=l.$$={fragment:null,ctx:[],props:o,update:ge,not_equal:r,bound:Nt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Nt(),dirty:d,skip_bound:!1,root:e.target||a.$$.root};c&&c(f.root);let p=!1;if(f.ctx=t?t(l,e.props||{},(h,m,...k)=>{const w=k.length?k[0]:m;return f.ctx&&r(f.ctx[h],f.ctx[h]=w)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](w),p&&Zl(l,h)),m}):[],f.update(),p=!0,je(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const h=Jl(e.target);f.fragment&&f.fragment.l(h),h.forEach(I)}else f.fragment&&f.fragment.c();e.intro&&lt(l.$$.fragment),gt(l,e.target,e.anchor),Nl()}dt(a)}class bt{constructor(){xe(this,"$$");xe(this,"$$set")}$destroy(){yt(this,1),this.$destroy=ge}$on(e,t){if(!Il(t))return ge;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Ol(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xl);const st=[];function wt(l,e=ge){let t;const i=new Set;function r(d){if(at(l,d)&&(l=d,t)){const a=!st.length;for(const f of i)f[1](),st.push(f,l);if(a){for(let f=0;f<st.length;f+=2)st[f][0](st[f+1]);st.length=0}}}function o(d){r(d(l))}function c(d,a=ge){const f=[d,a];return i.add(f),i.size===1&&(t=e(r,o)||ge),d(l),()=>{i.delete(f),i.size===0&&t&&(t(),t=null)}}return{set:r,update:o,subscribe:c}}const Ve="flash-cards-data";function $l(){const l=typeof localStorage<"u"?localStorage.getItem(Ve):null,e=l?JSON.parse(l):{learned:[],unlearned:[],draft:[]};e.cards&&e.cards.length>0&&(e.unlearned=[...e.unlearned,...e.cards],delete e.cards),e.draft||(e.draft=[]);const t=a=>a.map(f=>({...f,dictionaryId:f.dictionaryId||"default"}));e.learned=t(e.learned),e.unlearned=t(e.unlearned),e.draft=t(e.draft);const i=new Set,r=a=>a.filter(f=>i.has(f.id)?!1:(i.add(f.id),!0));e.learned=r(e.learned),e.unlearned=r(e.unlearned),e.draft=r(e.draft),typeof localStorage<"u"&&l&&localStorage.setItem(Ve,JSON.stringify(e));const{subscribe:o,set:c,update:d}=wt(e);return{subscribe:o,addCard:(a,f,p="",h="",m="default")=>{d(k=>{const w={id:Date.now(),word:a,translation:f,association:p,imageUrl:h,dictionaryId:m,createdAt:new Date().toISOString()},_={...k,unlearned:[...k.unlearned,w]};return localStorage.setItem(Ve,JSON.stringify(_)),_})},markAsLearned:a=>{d(f=>{const p=f.unlearned.find(m=>m.id===a);if(!p)return f;const h={...f,unlearned:f.unlearned.filter(m=>m.id!==a),learned:[...f.learned,{...p,learnedAt:new Date().toISOString()}]};return localStorage.setItem(Ve,JSON.stringify(h)),h})},markAsUnlearned:a=>{d(f=>{const p=f.unlearned.find(m=>m.id===a);if(!p)return f;const h={...f,unlearned:[...f.unlearned.filter(m=>m.id!==a),{...p,reviewedAt:new Date().toISOString()}]};return localStorage.setItem(Ve,JSON.stringify(h)),h})},moveToStudy:a=>{d(f=>{const p=f.learned.find(m=>m.id===a);if(!p)return f;const h={...f,learned:f.learned.filter(m=>m.id!==a),unlearned:[...f.unlearned,p]};return localStorage.setItem(Ve,JSON.stringify(h)),h})},moveAllToStudy:()=>{d(a=>{if(a.learned.length===0)return a;const f={...a,learned:[],unlearned:[...a.unlearned,...a.learned]};return localStorage.setItem(Ve,JSON.stringify(f)),f})},deleteCard:(a,f="unlearned")=>{d(p=>{const h={...p,[f]:p[f].filter(m=>m.id!==a)};return localStorage.setItem(Ve,JSON.stringify(h)),h})},editCard:(a,f,p)=>{d(h=>{const m={...h,[f]:h[f].map(k=>k.id===a?{...k,...p,updatedAt:new Date().toISOString()}:k)};return localStorage.setItem(Ve,JSON.stringify(m)),m})},addDraftCards:(a,f="default")=>{d(p=>{const h=new Set([...p.unlearned.map(_=>_.word.toLowerCase()),...p.learned.map(_=>_.word.toLowerCase()),...p.draft.map(_=>_.word.toLowerCase())]);let m=0;const k=a.filter(_=>_.trim()&&!h.has(_.trim().toLowerCase())).map(_=>({id:`draft_${Date.now()}_${m++}_${Math.random().toString(36).substr(2,9)}`,word:_.trim(),translation:"",association:"",imageUrl:"",dictionaryId:f,createdAt:new Date().toISOString(),isDraft:!0})),w={...p,draft:[...p.draft,...k]};return localStorage.setItem(Ve,JSON.stringify(w)),w})},activateCard:a=>{d(f=>{const p=f.draft.find(w=>w.id===a);if(!p)return f;const{isDraft:h,...m}=p,k={...f,draft:f.draft.filter(w=>w.id!==a),unlearned:[...f.unlearned,{...m,activatedAt:new Date().toISOString()}]};return localStorage.setItem(Ve,JSON.stringify(k)),k})},editDraftCard:(a,f)=>{d(p=>{var w,_;const h=p.draft.find(v=>v.id===a);if(!h)return p;const m={...h,...f,updatedAt:new Date().toISOString()};if(((w=m.translation)==null?void 0:w.trim())&&((_=m.imageUrl)==null?void 0:_.trim())){const{isDraft:v,...C}=m,q={...p,draft:p.draft.filter(S=>S.id!==a),unlearned:[...p.unlearned,{...C,activatedAt:new Date().toISOString()}]};return localStorage.setItem(Ve,JSON.stringify(q)),q}else{const v={...p,draft:p.draft.map(C=>C.id===a?m:C)};return localStorage.setItem(Ve,JSON.stringify(v)),v}})},reset:()=>{const a={learned:[],unlearned:[],draft:[]};localStorage.setItem(Ve,JSON.stringify(a)),c(a)},resetDictionary:a=>{d(f=>{const p={learned:f.learned.filter(h=>(h.dictionaryId||"default")!==a),unlearned:f.unlearned.filter(h=>(h.dictionaryId||"default")!==a),draft:f.draft.filter(h=>(h.dictionaryId||"default")!==a)};return localStorage.setItem(Ve,JSON.stringify(p)),p})},importCards:(a,f)=>{d(p=>{const h=a.unlearned||[],m=a.learned||[],k=a.draft||[],w=L=>L.map(T=>({...T,dictionaryId:f||"default"})),_=w(h),v=w(m),C=w(k),q=new Set([...p.unlearned.map(L=>L.word.toLowerCase()),...p.learned.map(L=>L.word.toLowerCase()),...p.draft.map(L=>L.word.toLowerCase())]),S=_.filter(L=>!q.has(L.word.toLowerCase())),y=v.filter(L=>!q.has(L.word.toLowerCase())),D=C.filter(L=>!q.has(L.word.toLowerCase())),E={learned:[...p.learned,...y],unlearned:[...p.unlearned,...S],draft:[...p.draft,...D]};return localStorage.setItem(Ve,JSON.stringify(E)),E})}}}const Je=$l(),en={en:"Английский",pt:"Португальский",es:"Испанский"},tn={en:"English",pt:"Portuguese",es:"Spanish"},ln=typeof localStorage<"u"&&localStorage.getItem("target_language")||"en",Ze=wt(ln);Ze.subscribe(l=>{typeof localStorage<"u"&&localStorage.setItem("target_language",l)});function Ye(l){return en[l]||l}function nn(l){return tn[l]||l}const ft="loaded-dictionaries",It="current_dictionary",sn=typeof localStorage<"u"&&localStorage.getItem(It)||"",We=wt(sn);We.subscribe(l=>{typeof localStorage<"u"&&(l?localStorage.setItem(It,l):localStorage.removeItem(It))});function rn(){const l=typeof localStorage<"u"?localStorage.getItem(ft):null,e=l?JSON.parse(l):[],{subscribe:t,set:i,update:r}=wt(e);return{subscribe:t,addDictionary:(o,c,d,a=!1)=>{r(f=>{if(f.find(k=>k.id===o))return f.map(k=>k.id===o?{...k,name:c,language:d,isImported:a}:k);const h={id:o,name:c,language:d,isImported:a},m=[...f,h];return typeof localStorage<"u"&&localStorage.setItem(ft,JSON.stringify(m)),m})},removeDictionary:o=>{r(c=>{const d=c.filter(a=>a.id!==o);return typeof localStorage<"u"&&localStorage.setItem(ft,JSON.stringify(d)),d})},clear:()=>{typeof localStorage<"u"&&localStorage.removeItem(ft),i([])},updateDictionaryData:(o,c)=>{r(d=>{const a=d.map(f=>f.id===o?{...f,data:c}:f);return typeof localStorage<"u"&&localStorage.setItem(ft,JSON.stringify(a)),a})}}}const Xe=rn();function on(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-1wg5uvi"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg> <span class="svelte-1wg5uvi">Нажмите, чтобы добавить изображение</span>',n(e,"class","image-placeholder svelte-1wg5uvi")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function an(l){let e,t,i,r;return{c(){e=u("img"),Ge(e.src,t=l[4])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","preview-image svelte-1wg5uvi")},m(o,c){M(o,e,c),i||(r=U(e,"error",l[21]),i=!0)},p(o,c){c[0]&16&&!Ge(e.src,t=o[4])&&n(e,"src",t)},d(o){o&&I(e),i=!1,r()}}}function Bt(l){let e;return{c(){e=u("div"),e.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
      Карточка добавлена!`,n(e,"class","success-toast svelte-1wg5uvi")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Et(l){let e,t,i,r,o,c=l[9]>0?`Импортировано ${l[9]} карточек!`:"Новых карточек не найдено",d;return{c(){e=u("div"),t=P("svg"),i=P("polyline"),r=P("line"),o=g(),d=R(c),n(i,"points","17 8 12 3 7 8"),n(r,"x1","12"),n(r,"y1","3"),n(r,"x2","12"),n(r,"y2","15"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast import svelte-1wg5uvi")},m(a,f){M(a,e,f),s(e,t),s(t,i),s(t,r),s(e,o),s(e,d)},p(a,f){f[0]&512&&c!==(c=a[9]>0?`Импортировано ${a[9]} карточек!`:"Новых карточек не найдено")&&te(d,c)},d(a){a&&I(e)}}}function Ot(l){let e,t,i,r,o,c,d,a,f,p=l[12]>0?`Добавлено ${l[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)",h;return{c(){e=u("div"),t=P("svg"),i=P("line"),r=P("line"),o=P("line"),c=P("line"),d=P("line"),a=P("line"),f=g(),h=R(p),n(i,"x1","8"),n(i,"y1","6"),n(i,"x2","21"),n(i,"y2","6"),n(r,"x1","8"),n(r,"y1","12"),n(r,"x2","21"),n(r,"y2","12"),n(o,"x1","8"),n(o,"y1","18"),n(o,"x2","21"),n(o,"y2","18"),n(c,"x1","3"),n(c,"y1","6"),n(c,"x2","3.01"),n(c,"y2","6"),n(d,"x1","3"),n(d,"y1","12"),n(d,"x2","3.01"),n(d,"y2","12"),n(a,"x1","3"),n(a,"y1","18"),n(a,"x2","3.01"),n(a,"y2","18"),n(t,"width","20"),n(t,"height","20"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(e,"class","success-toast bulk svelte-1wg5uvi")},m(m,k){M(m,e,k),s(e,t),s(t,i),s(t,r),s(t,o),s(t,c),s(t,d),s(t,a),s(e,f),s(e,h)},p(m,k){k[0]&4096&&p!==(p=m[12]>0?`Добавлено ${m[12]} слов на проработку!`:"Новых слов не найдено (возможно дубликаты)")&&te(h,p)},d(m){m&&I(e)}}}function Ut(l){let e,t,i,r,o,c,d,a,f,p,h,m,k,w,_,v,C,q,S,y,D,E,L,T=l[7]&&Ht(l),b=l[4]&&Rt(l);return{c(){e=u("div"),t=u("div"),i=u("div"),r=u("h2"),r.textContent="Добавить изображение",o=g(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=u("div"),f=u("div"),p=u("label"),p.textContent="Ссылка на изображение",h=g(),m=u("input"),k=g(),T&&T.c(),w=g(),_=u("div"),b&&b.c(),v=g(),C=u("button"),C.textContent="Отмена",q=g(),S=u("button"),y=R("Сохранить"),n(r,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(p,"for","imageUrl"),n(p,"class","svelte-1wg5uvi"),n(m,"id","imageUrl"),n(m,"type","url"),n(m,"placeholder","https://example.com/image.jpg"),n(m,"class","svelte-1wg5uvi"),n(f,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(C,"class","btn-secondary svelte-1wg5uvi"),n(S,"class","btn-primary svelte-1wg5uvi"),S.disabled=D=l[8]&&l[7],n(_,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(O,H){M(O,e,H),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,f),s(f,p),s(f,h),s(f,m),Ae(m,l[7]),s(a,k),T&&T.m(a,null),s(t,w),s(t,_),b&&b.m(_,null),s(_,v),s(_,C),s(_,q),s(_,S),s(S,y),E||(L=[U(c,"click",l[35]),U(m,"input",l[36]),U(C,"click",l[37]),U(S,"click",l[19]),U(t,"click",$e(l[30])),U(e,"click",l[38]),U(e,"keydown",l[39])],E=!0)},p(O,H){H[0]&128&&m.value!==O[7]&&Ae(m,O[7]),O[7]?T?T.p(O,H):(T=Ht(O),T.c(),T.m(a,null)):T&&(T.d(1),T=null),O[4]?b?b.p(O,H):(b=Rt(O),b.c(),b.m(_,v)):b&&(b.d(1),b=null),H[0]&384&&D!==(D=O[8]&&O[7])&&(S.disabled=D)},d(O){O&&I(e),T&&T.d(),b&&b.d(),E=!1,je(L)}}}function Ht(l){let e;function t(o,c){return o[8]?un:cn}let i=t(l),r=i(l);return{c(){e=u("div"),r.c(),n(e,"class","image-preview-container svelte-1wg5uvi")},m(o,c){M(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null)))},d(o){o&&I(e),r.d()}}}function cn(l){let e,t,i,r;return{c(){e=u("img"),Ge(e.src,t=l[7])||n(e,"src",t),n(e,"alt","Превью изображения"),n(e,"class","modal-image-preview svelte-1wg5uvi")},m(o,c){M(o,e,c),i||(r=[U(e,"error",l[21]),U(e,"load",l[22])],i=!0)},p(o,c){c[0]&128&&!Ge(e.src,t=o[7])&&n(e,"src",t)},d(o){o&&I(e),i=!1,je(r)}}}function un(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Не удалось загрузить изображение</span>',n(e,"class","image-error svelte-1wg5uvi")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function Rt(l){let e,t,i;return{c(){e=u("button"),e.textContent="Удалить",n(e,"class","btn-secondary danger svelte-1wg5uvi")},m(r,o){M(r,e,o),t||(i=U(e,"click",l[20]),t=!0)},p:ge,d(r){r&&I(e),t=!1,i()}}}function Jt(l){let e,t,i,r,o,c,d,a,f,p,h,m,k,w,_,v,C,q,S,y,D,E,L,T,b=(l[15]>0?l[15]:"")+"",O,H,B=l[15]===1?"слово":l[15]>1&&l[15]<5?"слова":l[15]>=5?"слов":"",j,W,V,A,J=l[15]>0&&jt(l);return{c(){e=u("div"),t=u("div"),i=u("div"),r=u("h2"),r.textContent="Загрузить список слов",o=g(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=u("div"),f=u("div"),f.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg> <p class="svelte-1wg5uvi">Введите слова списком — каждое слово на новой строке. Слова будут добавлены в раздел &quot;На проработку&quot;, где вы сможете добавить перевод и изображение.</p>',p=g(),h=u("div"),m=u("label"),k=R(`Слова
            `),J&&J.c(),w=g(),_=u("textarea"),v=g(),C=u("div"),q=u("button"),q.textContent="Отмена",S=g(),y=u("button"),D=P("svg"),E=P("line"),L=P("line"),T=R(`
          Добавить `),O=R(b),H=g(),j=R(B),n(r,"class","svelte-1wg5uvi"),n(c,"class","modal-close svelte-1wg5uvi"),n(i,"class","modal-header svelte-1wg5uvi"),n(f,"class","bulk-info svelte-1wg5uvi"),n(m,"for","bulkWords"),n(m,"class","svelte-1wg5uvi"),n(_,"id","bulkWords"),n(_,"placeholder",`serendipity
ephemeral
ubiquitous
eloquent
resilient`),n(_,"rows","10"),n(_,"class","bulk-textarea svelte-1wg5uvi"),n(h,"class","input-group svelte-1wg5uvi"),n(a,"class","modal-body svelte-1wg5uvi"),n(q,"class","btn-secondary svelte-1wg5uvi"),n(E,"x1","12"),n(E,"y1","5"),n(E,"x2","12"),n(E,"y2","19"),n(L,"x1","5"),n(L,"y1","12"),n(L,"x2","19"),n(L,"y2","12"),n(D,"width","18"),n(D,"height","18"),n(D,"viewBox","0 0 24 24"),n(D,"fill","none"),n(D,"stroke","currentColor"),n(D,"stroke-width","2"),n(y,"class","btn-primary svelte-1wg5uvi"),y.disabled=W=l[15]===0,n(C,"class","modal-actions svelte-1wg5uvi"),n(t,"class","modal bulk-modal svelte-1wg5uvi"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1wg5uvi"),n(e,"role","button"),n(e,"tabindex","-1")},m(se,re){M(se,e,re),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,f),s(a,p),s(a,h),s(h,m),s(m,k),J&&J.m(m,null),s(h,w),s(h,_),Ae(_,l[0]),s(t,v),s(t,C),s(C,q),s(C,S),s(C,y),s(y,D),s(D,E),s(D,L),s(y,T),s(y,O),s(y,H),s(y,j),V||(A=[U(c,"click",l[26]),U(_,"input",l[40]),U(q,"click",l[26]),U(y,"click",l[27]),U(t,"click",$e(l[29])),U(e,"click",l[26]),U(e,"keydown",l[41])],V=!0)},p(se,re){se[15]>0?J?J.p(se,re):(J=jt(se),J.c(),J.m(m,null)):J&&(J.d(1),J=null),re[0]&1&&Ae(_,se[0]),re[0]&32768&&b!==(b=(se[15]>0?se[15]:"")+"")&&te(O,b),re[0]&32768&&B!==(B=se[15]===1?"слово":se[15]>1&&se[15]<5?"слова":se[15]>=5?"слов":"")&&te(j,B),re[0]&32768&&W!==(W=se[15]===0)&&(y.disabled=W)},d(se){se&&I(e),J&&J.d(),V=!1,je(A)}}}function jt(l){let e,t,i,r=l[15]===1?"слово":l[15]<5?"слова":"слов",o;return{c(){e=u("span"),t=R(l[15]),i=g(),o=R(r),n(e,"class","word-count svelte-1wg5uvi")},m(c,d){M(c,e,d),s(e,t),s(e,i),s(e,o)},p(c,d){d[0]&32768&&te(t,c[15]),d[0]&32768&&r!==(r=c[15]===1?"слово":c[15]<5?"слова":"слов")&&te(o,r)},d(c){c&&I(e)}}}function fn(l){let e,t,i,r,o,c,d,a,f,p,h,m,k,w,_,v,C,q,S,y=l[16].toLowerCase()+"",D,E,L,T=l[1].length+"",b,O,H,B,j,W,V,A,J,se=l[2].length+"",re,Me,De,ue,fe,pe,Se,oe,he,Ee,me,Le=l[3].length+"",z,ve,ye,ne,ke,qe,G,Z,F,de,ae,Te,le,x,$=(l[1]||"Слово")+"",Y,ce,K,_e=(l[2]||"Перевод")+"",Oe,Ue,ee,be,Re,ie,Ie,ct,X;function Fe(Q,Ce){return Q[4]?an:on}let Ke=Fe(l),Pe=Ke(l),ze=l[5]&&Bt(),we=l[10]&&Et(l),He=l[13]&&Ot(l),Ne=l[6]&&Ut(l),Be=l[11]&&Jt(l);return{c(){e=u("input"),t=g(),i=u("div"),r=u("div"),o=u("div"),c=u("h1"),c.textContent="Новая карточка",d=g(),a=u("div"),f=u("button"),f.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',p=g(),h=u("button"),h.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wg5uvi"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>',m=g(),k=u("p"),k.textContent="Добавьте слово для изучения",w=g(),_=u("div"),v=u("form"),C=u("div"),q=u("label"),S=R("Слово ("),D=R(y),E=R(`)
          `),L=u("span"),b=R(T),O=R("/35"),H=g(),B=u("input"),j=g(),W=u("div"),V=u("label"),A=R(`Перевод
          `),J=u("span"),re=R(se),Me=R("/50"),De=g(),ue=u("input"),fe=g(),pe=u("div"),Se=u("label"),oe=R(`Ассоциация 
          `),he=u("span"),he.textContent="(необязательно)",Ee=g(),me=u("span"),z=R(Le),ve=R("/95"),ye=g(),ne=u("textarea"),ke=g(),qe=u("button"),qe.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        Добавить карточку`,G=g(),Z=u("div"),F=u("span"),F.textContent="Превью карточки",de=g(),ae=u("button"),Pe.c(),Te=g(),le=u("div"),x=u("div"),Y=R($),ce=g(),K=u("div"),Oe=R(_e),Ue=g(),ze&&ze.c(),ee=g(),we&&we.c(),be=g(),He&&He.c(),Re=g(),Ne&&Ne.c(),ie=g(),Be&&Be.c(),Ie=nt(),n(e,"type","file"),n(e,"accept",".json"),jl(e,"display","none"),n(e,"class","svelte-1wg5uvi"),n(c,"class","svelte-1wg5uvi"),n(f,"type","button"),n(f,"class","import-btn bulk svelte-1wg5uvi"),n(f,"title","Загрузить список слов"),n(h,"type","button"),n(h,"class","import-btn svelte-1wg5uvi"),n(h,"title","Импорт из JSON"),n(a,"class","header-actions svelte-1wg5uvi"),n(o,"class","header-top svelte-1wg5uvi"),n(k,"class","subtitle svelte-1wg5uvi"),n(r,"class","header svelte-1wg5uvi"),n(L,"class","char-count svelte-1wg5uvi"),N(L,"limit",l[1].length>=35),n(q,"for","word"),n(q,"class","svelte-1wg5uvi"),n(B,"id","word"),n(B,"type","text"),n(B,"placeholder","например: serendipity"),n(B,"maxlength","35"),B.required=!0,n(B,"class","svelte-1wg5uvi"),n(C,"class","input-group svelte-1wg5uvi"),n(J,"class","char-count svelte-1wg5uvi"),N(J,"limit",l[2].length>=50),n(V,"for","translation"),n(V,"class","svelte-1wg5uvi"),n(ue,"id","translation"),n(ue,"type","text"),n(ue,"placeholder","например: счастливая случайность"),n(ue,"maxlength","50"),ue.required=!0,n(ue,"class","svelte-1wg5uvi"),n(W,"class","input-group svelte-1wg5uvi"),n(he,"class","optional svelte-1wg5uvi"),n(me,"class","char-count svelte-1wg5uvi"),N(me,"limit",l[3].length>=95),n(Se,"for","association"),n(Se,"class","svelte-1wg5uvi"),n(ne,"id","association"),n(ne,"placeholder","например: представьте, как вы случайно находите клад под деревом"),n(ne,"maxlength","95"),n(ne,"rows","2"),n(ne,"class","svelte-1wg5uvi"),n(pe,"class","input-group svelte-1wg5uvi"),n(qe,"type","submit"),n(qe,"class","submit-btn svelte-1wg5uvi"),n(v,"class","form svelte-1wg5uvi"),n(F,"class","preview-label svelte-1wg5uvi"),n(x,"class","preview-word svelte-1wg5uvi"),n(K,"class","preview-translation svelte-1wg5uvi"),n(le,"class","card-content-preview svelte-1wg5uvi"),n(ae,"type","button"),n(ae,"class","card-preview svelte-1wg5uvi"),N(ae,"has-image",l[4]),n(Z,"class","card-preview-wrapper svelte-1wg5uvi"),n(_,"class","card-editor svelte-1wg5uvi"),n(i,"class","add-card-container svelte-1wg5uvi")},m(Q,Ce){M(Q,e,Ce),l[31](e),M(Q,t,Ce),M(Q,i,Ce),s(i,r),s(r,o),s(o,c),s(o,d),s(o,a),s(a,f),s(a,p),s(a,h),s(r,m),s(r,k),s(i,w),s(i,_),s(_,v),s(v,C),s(C,q),s(q,S),s(q,D),s(q,E),s(q,L),s(L,b),s(L,O),s(C,H),s(C,B),Ae(B,l[1]),s(v,j),s(v,W),s(W,V),s(V,A),s(V,J),s(J,re),s(J,Me),s(W,De),s(W,ue),Ae(ue,l[2]),s(v,fe),s(v,pe),s(pe,Se),s(Se,oe),s(Se,he),s(Se,Ee),s(Se,me),s(me,z),s(me,ve),s(pe,ye),s(pe,ne),Ae(ne,l[3]),s(v,ke),s(v,qe),s(_,G),s(_,Z),s(Z,F),s(Z,de),s(Z,ae),Pe.m(ae,null),s(ae,Te),s(ae,le),s(le,x),s(x,Y),s(le,ce),s(le,K),s(K,Oe),s(i,Ue),ze&&ze.m(i,null),s(i,ee),we&&we.m(i,null),s(i,be),He&&He.m(i,null),M(Q,Re,Ce),Ne&&Ne.m(Q,Ce),M(Q,ie,Ce),Be&&Be.m(Q,Ce),M(Q,Ie,Ce),ct||(X=[U(e,"change",l[24]),U(f,"click",l[25]),U(h,"click",l[23]),U(B,"input",l[32]),U(ue,"input",l[33]),U(ne,"input",l[34]),U(v,"submit",Rl(l[17])),U(ae,"click",l[18])],ct=!0)},p(Q,Ce){Ce[0]&65536&&y!==(y=Q[16].toLowerCase()+"")&&te(D,y),Ce[0]&2&&T!==(T=Q[1].length+"")&&te(b,T),Ce[0]&2&&N(L,"limit",Q[1].length>=35),Ce[0]&2&&B.value!==Q[1]&&Ae(B,Q[1]),Ce[0]&4&&se!==(se=Q[2].length+"")&&te(re,se),Ce[0]&4&&N(J,"limit",Q[2].length>=50),Ce[0]&4&&ue.value!==Q[2]&&Ae(ue,Q[2]),Ce[0]&8&&Le!==(Le=Q[3].length+"")&&te(z,Le),Ce[0]&8&&N(me,"limit",Q[3].length>=95),Ce[0]&8&&Ae(ne,Q[3]),Ke===(Ke=Fe(Q))&&Pe?Pe.p(Q,Ce):(Pe.d(1),Pe=Ke(Q),Pe&&(Pe.c(),Pe.m(ae,Te))),Ce[0]&2&&$!==($=(Q[1]||"Слово")+"")&&te(Y,$),Ce[0]&4&&_e!==(_e=(Q[2]||"Перевод")+"")&&te(Oe,_e),Ce[0]&16&&N(ae,"has-image",Q[4]),Q[5]?ze||(ze=Bt(),ze.c(),ze.m(i,ee)):ze&&(ze.d(1),ze=null),Q[10]?we?we.p(Q,Ce):(we=Et(Q),we.c(),we.m(i,be)):we&&(we.d(1),we=null),Q[13]?He?He.p(Q,Ce):(He=Ot(Q),He.c(),He.m(i,null)):He&&(He.d(1),He=null),Q[6]?Ne?Ne.p(Q,Ce):(Ne=Ut(Q),Ne.c(),Ne.m(ie.parentNode,ie)):Ne&&(Ne.d(1),Ne=null),Q[11]?Be?Be.p(Q,Ce):(Be=Jt(Q),Be.c(),Be.m(Ie.parentNode,Ie)):Be&&(Be.d(1),Be=null)},i:ge,o:ge,d(Q){Q&&(I(e),I(t),I(i),I(Re),I(ie),I(Ie)),l[31](null),Pe.d(),ze&&ze.d(),we&&we.d(),He&&He.d(),Ne&&Ne.d(Q),Be&&Be.d(Q),ct=!1,je(X)}}}function dn(l,e,t){let i,r,o,c,d;Qe(l,Je,z=>t(42,o=z)),Qe(l,Xe,z=>t(43,c=z)),Qe(l,Ze,z=>t(28,d=z));let a="",f="",p="",h="",m=!1,k=!1,w="",_=!1,v=0,C=!1,q=!1,S="",y=0,D=!1;function E(){if(a.trim()&&f.trim()){let z=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"";if(!(c.length>0)||!z||z===""){const ne=`${Ye("en")} (default)`;Xe.addDictionary("default",ne,"en",!1),We.set("default"),z="default"}const ye=z||"default";Je.addCard(a.trim(),f.trim(),p.trim(),h.trim(),ye),t(1,a=""),t(2,f=""),t(3,p=""),t(4,h=""),t(5,m=!0),setTimeout(()=>t(5,m=!1),2e3)}}function L(){t(7,w=h),t(8,_=!1),t(6,k=!0)}function T(){w.trim()&&t(4,h=w.trim()),t(6,k=!1)}function b(){t(4,h=""),t(7,w=""),t(6,k=!1)}function O(){t(8,_=!0)}function H(){t(8,_=!1)}let B;function j(){B.click()}function W(z){const ve=z.target.files[0];if(!ve)return;const ye=new FileReader;ye.onload=ne=>{var ke,qe,G;try{const Z=JSON.parse(ne.target.result),F=ve.name.replace(/\.json$/i,""),de=Z.language||"en";Z.language&&Ze.set(Z.language);let ae;de==="en"?ae="default":(ae=F,Je.resetDictionary(ae));const Te=(((ke=o.learned)==null?void 0:ke.length)||0)+(((qe=o.unlearned)==null?void 0:qe.length)||0)+(((G=o.draft)==null?void 0:G.length)||0);if(Je.importCards(Z,ae),de==="en"){if(!c.find(x=>x.id==="default")){const x=`${Ye("en")} (default)`;Xe.addDictionary("default",x,"en",!0)}We.set("default")}else{const le=`${F} (${Ye(de)})`;Xe.addDictionary(F,le,de,!0),We.set(F)}setTimeout(()=>{var x,$,Y;const le=(((x=o.learned)==null?void 0:x.length)||0)+((($=o.unlearned)==null?void 0:$.length)||0)+(((Y=o.draft)==null?void 0:Y.length)||0);t(9,v=le-Te),t(10,C=!0),setTimeout(()=>t(10,C=!1),3e3)},100)}catch{alert("Ошибка чтения файла. Убедитесь, что это корректный JSON файл.")}},ye.readAsText(ve),z.target.value=""}function V(){t(0,S=""),t(11,q=!0)}function A(){t(11,q=!1),t(0,S="")}function J(){var ve;const z=S.split(`
`).map(ye=>ye.trim()).filter(ye=>ye.length>0);if(z.length>0){const ye=typeof localStorage<"u"&&localStorage.getItem("current_dictionary")||"default";if(ye===""){const qe=`${Ye("en")} (default)`;Xe.addDictionary("default",qe,"en",!1),We.set("default")}const ne=ye,ke=((ve=o.draft)==null?void 0:ve.length)||0;Je.addDraftCards(z,ne),setTimeout(()=>{var G;const qe=((G=o.draft)==null?void 0:G.length)||0;t(12,y=qe-ke),t(13,D=!0),setTimeout(()=>t(13,D=!1),3e3)},100)}A()}function se(z){tt.call(this,l,z)}function re(z){tt.call(this,l,z)}function Me(z){St[z?"unshift":"push"](()=>{B=z,t(14,B)})}function De(){a=this.value,t(1,a)}function ue(){f=this.value,t(2,f)}function fe(){p=this.value,t(3,p)}const pe=()=>t(6,k=!1);function Se(){w=this.value,t(7,w)}const oe=()=>t(6,k=!1),he=()=>t(6,k=!1),Ee=z=>z.key==="Escape"&&t(6,k=!1);function me(){S=this.value,t(0,S)}const Le=z=>z.key==="Escape"&&A();return l.$$.update=()=>{l.$$.dirty[0]&268435456&&t(16,i=Ye(d)),l.$$.dirty[0]&1&&t(15,r=S.split(`
`).filter(z=>z.trim().length>0).length)},[S,a,f,p,h,m,k,w,_,v,C,q,y,D,B,r,i,E,L,T,b,O,H,j,W,V,A,J,d,se,re,Me,De,ue,fe,pe,Se,oe,he,Ee,me,Le]}class pn extends bt{constructor(e){super(),kt(this,e,dn,fn,at,{},null,[-1,-1])}}function mn(l){let e;return{c(){e=R("Добавьте карточки для начала")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function hn(l){let e;return{c(){e=R("Нет карточек с изображениями")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function vn(l){let e,t,i=l[2].length+"",r,o,c,d=l[0]&&l[2].length<l[3].length&&Pt();return{c(){e=R("Осталось карточек: "),t=u("span"),r=R(i),o=g(),d&&d.c(),c=nt(),n(t,"class","count svelte-1ipumql")},m(a,f){M(a,e,f),M(a,t,f),s(t,r),M(a,o,f),d&&d.m(a,f),M(a,c,f)},p(a,f){f[0]&4&&i!==(i=a[2].length+"")&&te(r,i),a[0]&&a[2].length<a[3].length?d||(d=Pt(),d.c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null)},d(a){a&&(I(e),I(t),I(o),I(c)),d&&d.d(a)}}}function Pt(l){let e;return{c(){e=u("span"),e.textContent="(с изображениями)",n(e,"class","filter-note svelte-1ipumql")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function zt(l){let e,t,i,r,o,c,d,a,f,p,h,m,k,w,_,v,C,q,S,y,D,E,L,T,b,O,H,B=!l[4]&&Ft();function j(A,J){return A[4]?_n:gn}let W=j(l),V=W(l);return{c(){e=u("div"),t=u("div"),i=u("button"),i.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',r=g(),o=u("h2"),o.textContent="Выбери тип упражнения",c=g(),d=u("div"),a=u("button"),f=u("span"),p=g(),h=u("div"),h.innerHTML='<span class="option-title svelte-1ipumql">Flash Cards</span> <span class="option-desc svelte-1ipumql">Классические карточки с переворотом</span>',m=g(),k=u("button"),w=u("span"),_=g(),v=u("div"),v.innerHTML='<span class="option-title svelte-1ipumql">Только изображения</span> <span class="option-desc svelte-1ipumql">Введите слово по изображению</span>',C=g(),q=u("button"),S=u("span"),y=g(),D=u("div"),E=u("span"),L=R(`Перевод предложения
                `),B&&B.c(),T=g(),b=u("span"),V.c(),n(i,"class","modal-close-btn svelte-1ipumql"),n(o,"class","modal-title svelte-1ipumql"),n(f,"class","option-radio svelte-1ipumql"),N(f,"checked",l[25]),n(h,"class","option-content svelte-1ipumql"),n(a,"class","exercise-option svelte-1ipumql"),N(a,"active",l[25]),n(w,"class","option-radio svelte-1ipumql"),N(w,"checked",l[0]),n(v,"class","option-content svelte-1ipumql"),n(k,"class","exercise-option svelte-1ipumql"),N(k,"active",l[0]),n(S,"class","option-radio svelte-1ipumql"),N(S,"checked",l[1]),N(S,"disabled",!l[4]),n(E,"class","option-title svelte-1ipumql"),n(b,"class","option-desc svelte-1ipumql"),n(D,"class","option-content svelte-1ipumql"),n(q,"class","exercise-option svelte-1ipumql"),N(q,"active",l[1]),N(q,"disabled",!l[4]),n(d,"class","settings-options svelte-1ipumql"),n(t,"class","settings-modal svelte-1ipumql"),n(t,"role","dialog"),n(t,"aria-modal","true"),n(e,"class","settings-overlay svelte-1ipumql"),n(e,"role","button"),n(e,"tabindex","-1")},m(A,J){M(A,e,J),s(e,t),s(t,i),s(t,r),s(t,o),s(t,c),s(t,d),s(d,a),s(a,f),s(a,p),s(a,h),s(d,m),s(d,k),s(k,w),s(k,_),s(k,v),s(d,C),s(d,q),s(q,S),s(q,y),s(q,D),s(D,E),s(E,L),B&&B.m(E,null),s(D,T),s(D,b),V.m(b,null),O||(H=[U(i,"click",l[55]),U(a,"click",l[27]),U(k,"click",l[28]),U(q,"click",l[29]),U(t,"click",$e(l[53])),U(e,"click",l[56]),U(e,"keydown",l[57])],O=!0)},p(A,J){J[0]&33554432&&N(f,"checked",A[25]),J[0]&33554432&&N(a,"active",A[25]),J[0]&1&&N(w,"checked",A[0]),J[0]&1&&N(k,"active",A[0]),J[0]&2&&N(S,"checked",A[1]),J[0]&16&&N(S,"disabled",!A[4]),A[4]?B&&(B.d(1),B=null):B||(B=Ft(),B.c(),B.m(E,null)),W===(W=j(A))&&V?V.p(A,J):(V.d(1),V=W(A),V&&(V.c(),V.m(b,null))),J[0]&2&&N(q,"active",A[1]),J[0]&16&&N(q,"disabled",!A[4])},d(A){A&&I(e),B&&B.d(),V.d(),O=!1,je(H)}}}function Ft(l){let e;return{c(){e=u("span"),e.textContent="AI",n(e,"class","ai-badge svelte-1ipumql")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function _n(l){let e,t=l[26].toLowerCase()+"",i;return{c(){e=R("Переведите предложение на "),i=R(t)},m(r,o){M(r,e,o),M(r,i,o)},p(r,o){o[0]&67108864&&t!==(t=r[26].toLowerCase()+"")&&te(i,t)},d(r){r&&(I(e),I(i))}}}function gn(l){let e;return{c(){e=R("Требуется AI токен")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function yn(l){let e;return{c(){e=u("div"),e.innerHTML='<div class="empty-icon svelte-1ipumql"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line></svg></div> <h2 class="svelte-1ipumql">Нет карточек для изучения</h2> <p class="svelte-1ipumql">Добавьте новые слова или верните карточки из списков</p>',n(e,"class","empty-state svelte-1ipumql")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function kn(l){let e;function t(o,c){return o[1]?Cn:o[0]?wn:bn}let i=t(l),r=i(l);return{c(){e=u("div"),r.c(),n(e,"class","card-area svelte-1ipumql"),N(e,"translation-mode",l[1]&&l[11])},m(o,c){M(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),c[0]&2050&&N(e,"translation-mode",o[1]&&o[11])},d(o){o&&I(e),r.d()}}}function bn(l){let e=l[23].id,t,i,r,o,c,d,a,f=Gt(l);return{c(){f.c(),t=g(),i=u("div"),r=u("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',o=g(),c=u("button"),c.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(r,"class","action-btn unknown svelte-1ipumql"),n(c,"class","action-btn known svelte-1ipumql"),n(i,"class","action-buttons svelte-1ipumql")},m(p,h){f.m(p,h),M(p,t,h),M(p,i,h),s(i,r),s(i,o),s(i,c),d||(a=[U(r,"click",l[35]),U(c,"click",l[34])],d=!0)},p(p,h){h[0]&8388608&&at(e,e=p[23].id)?(f.d(1),f=Gt(p),f.c(),f.m(t.parentNode,t)):f.p(p,h)},d(p){p&&(I(t),I(i)),f.d(p),d=!1,je(a)}}}function wn(l){let e,t,i,r,o,c,d,a,f,p,h,m,k,w,_,v,C=l[23].imageUrl&&Kt(l),q=l[9]&&Xt(l);return{c(){e=u("div"),t=u("div"),i=u("div"),C&&C.c(),r=g(),q&&q.c(),o=g(),c=u("div"),d=u("input"),f=g(),p=u("button"),h=P("svg"),m=P("polyline"),k=P("path"),n(i,"class","card-front has-image image-only svelte-1ipumql"),n(t,"class","card-inner svelte-1ipumql"),n(e,"class","card image-only-card svelte-1ipumql"),N(e,"correct",l[9]==="correct"),N(e,"incorrect",l[9]==="incorrect"),n(d,"type","text"),n(d,"class","answer-input svelte-1ipumql"),n(d,"placeholder","Введите слово..."),d.disabled=a=l[9]!==null,N(d,"correct",l[9]==="correct"),N(d,"incorrect",l[9]==="incorrect"),n(m,"points","9 11 12 14 22 4"),n(k,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(h,"width","24"),n(h,"height","24"),n(h,"viewBox","0 0 24 24"),n(h,"fill","none"),n(h,"stroke","currentColor"),n(h,"stroke-width","2"),n(p,"class","check-btn svelte-1ipumql"),p.disabled=w=!l[8].trim()||l[9]!==null,n(c,"class","answer-input-area svelte-1ipumql")},m(S,y){M(S,e,y),s(e,t),s(t,i),C&&C.m(i,null),s(i,r),q&&q.m(i,null),M(S,o,y),M(S,c,y),s(c,d),Ae(d,l[8]),s(c,f),s(c,p),s(p,h),s(h,m),s(h,k),_||(v=[U(d,"input",l[60]),U(d,"keydown",l[43]),U(p,"click",l[42])],_=!0)},p(S,y){S[23].imageUrl?C?C.p(S,y):(C=Kt(S),C.c(),C.m(i,r)):C&&(C.d(1),C=null),S[9]?q?q.p(S,y):(q=Xt(S),q.c(),q.m(i,null)):q&&(q.d(1),q=null),y[0]&512&&N(e,"correct",S[9]==="correct"),y[0]&512&&N(e,"incorrect",S[9]==="incorrect"),y[0]&512&&a!==(a=S[9]!==null)&&(d.disabled=a),y[0]&256&&d.value!==S[8]&&Ae(d,S[8]),y[0]&512&&N(d,"correct",S[9]==="correct"),y[0]&512&&N(d,"incorrect",S[9]==="incorrect"),y[0]&768&&w!==(w=!S[8].trim()||S[9]!==null)&&(p.disabled=w)},d(S){S&&(I(e),I(o),I(c)),C&&C.d(),q&&q.d(),_=!1,je(v)}}}function Cn(l){let e,t,i,r,o,c,d,a,f=l[23].translation+"",p,h,m,k,w,_,v,C,q,S,y,D=l[23].word+"",E,L,T,b=l[13]&&l[13]!=="grammar_error"&&Yt(l),O=l[18]&&Qt(),H=l[23].imageUrl&&Zt(l),B=l[23].association&&xt(l);function j(A,J){return A[17]?Dn:A[11]?Mn:In}let W=j(l),V=W(l);return{c(){e=u("div"),t=u("div"),i=u("div"),r=u("div"),o=u("div"),c=u("span"),c.textContent="Перевод",d=g(),a=u("h2"),p=R(f),h=g(),b&&b.c(),m=g(),O&&O.c(),k=g(),w=u("div"),H&&H.c(),_=g(),v=u("div"),C=u("span"),q=R(l[26]),S=g(),y=u("h2"),E=R(D),L=g(),B&&B.c(),T=g(),V.c(),n(c,"class","card-label svelte-1ipumql"),n(a,"class","card-word svelte-1ipumql"),n(o,"class","card-text-content svelte-1ipumql"),n(r,"class","card-front translation-front svelte-1ipumql"),n(C,"class","card-label svelte-1ipumql"),n(y,"class","card-word svelte-1ipumql"),n(v,"class","card-text-content svelte-1ipumql"),n(w,"class","card-back translation-back svelte-1ipumql"),N(w,"has-image",l[23].imageUrl),n(i,"class","card-inner svelte-1ipumql"),n(t,"class","card translation-card svelte-1ipumql"),N(t,"correct",l[13]==="correct"),N(t,"incorrect",l[13]==="incorrect"),N(t,"flipped",l[17]),n(e,"class","translation-exercise-layout svelte-1ipumql"),N(e,"with-input",l[11]),N(e,"card-flipped",l[17])},m(A,J){M(A,e,J),s(e,t),s(t,i),s(i,r),s(r,o),s(o,c),s(o,d),s(o,a),s(a,p),s(r,h),b&&b.m(r,null),s(r,m),O&&O.m(r,null),s(i,k),s(i,w),H&&H.m(w,null),s(w,_),s(w,v),s(v,C),s(C,q),s(v,S),s(v,y),s(y,E),s(v,L),B&&B.m(v,null),s(e,T),V.m(e,null)},p(A,J){J[0]&8388608&&f!==(f=A[23].translation+"")&&te(p,f),A[13]&&A[13]!=="grammar_error"?b?b.p(A,J):(b=Yt(A),b.c(),b.m(r,m)):b&&(b.d(1),b=null),A[18]?O||(O=Qt(),O.c(),O.m(r,null)):O&&(O.d(1),O=null),A[23].imageUrl?H?H.p(A,J):(H=Zt(A),H.c(),H.m(w,_)):H&&(H.d(1),H=null),J[0]&67108864&&te(q,A[26]),J[0]&8388608&&D!==(D=A[23].word+"")&&te(E,D),A[23].association?B?B.p(A,J):(B=xt(A),B.c(),B.m(v,null)):B&&(B.d(1),B=null),J[0]&8388608&&N(w,"has-image",A[23].imageUrl),J[0]&8192&&N(t,"correct",A[13]==="correct"),J[0]&8192&&N(t,"incorrect",A[13]==="incorrect"),J[0]&131072&&N(t,"flipped",A[17]),W===(W=j(A))&&V?V.p(A,J):(V.d(1),V=W(A),V&&(V.c(),V.m(e,null))),J[0]&2048&&N(e,"with-input",A[11]),J[0]&131072&&N(e,"card-flipped",A[17])},d(A){A&&I(e),b&&b.d(),O&&O.d(),H&&H.d(),B&&B.d(),V.d()}}}function Wt(l){let e,t;return{c(){e=u("img"),Ge(e.src,t=l[23].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-1ipumql")},m(i,r){M(i,e,r)},p(i,r){r[0]&8388608&&!Ge(e.src,t=i[23].imageUrl)&&n(e,"src",t)},d(i){i&&I(e)}}}function Vt(l){let e,t,i,r,o=l[23].association+"",c;return{c(){e=u("div"),t=u("span"),t.textContent="Ассоциация:",i=g(),r=u("p"),c=R(o),n(t,"class","association-label svelte-1ipumql"),n(r,"class","svelte-1ipumql"),n(e,"class","association svelte-1ipumql")},m(d,a){M(d,e,a),s(e,t),s(e,i),s(e,r),s(r,c)},p(d,a){a[0]&8388608&&o!==(o=d[23].association+"")&&te(c,o)},d(d){d&&I(e)}}}function Gt(l){let e,t,i,r,o,c,d,a,f=l[23].word+"",p,h,m,k,w,_,v,C,q,S,y=l[23].translation+"",D,E,L,T,b=l[23].imageUrl&&Wt(l),O=l[23].association&&Vt(l);return{c(){e=u("div"),t=u("div"),i=u("div"),r=u("div"),o=u("span"),c=R(l[26]),d=g(),a=u("h2"),p=R(f),h=g(),m=u("p"),m.textContent="Нажмите, чтобы увидеть перевод",k=g(),w=u("div"),b&&b.c(),_=g(),v=u("div"),C=u("span"),C.textContent="Перевод",q=g(),S=u("h2"),D=R(y),E=g(),O&&O.c(),n(o,"class","card-label svelte-1ipumql"),n(a,"class","card-word svelte-1ipumql"),n(m,"class","card-hint svelte-1ipumql"),n(r,"class","card-text-content svelte-1ipumql"),n(i,"class","card-front svelte-1ipumql"),n(C,"class","card-label svelte-1ipumql"),n(S,"class","card-word svelte-1ipumql"),n(v,"class","card-text-content svelte-1ipumql"),n(w,"class","card-back svelte-1ipumql"),N(w,"has-image",l[23].imageUrl),n(t,"class","card-inner svelte-1ipumql"),n(e,"class","card svelte-1ipumql"),n(e,"style",l[41]()),n(e,"role","button"),n(e,"tabindex","0"),N(e,"flipped",l[5]),N(e,"dragging",l[6]),N(e,"swipe-left",l[7]==="left"),N(e,"swipe-right",l[7]==="right")},m(H,B){M(H,e,B),s(e,t),s(t,i),s(i,r),s(r,o),s(o,c),s(r,d),s(r,a),s(a,p),s(r,h),s(r,m),s(t,k),s(t,w),b&&b.m(w,null),s(w,_),s(w,v),s(v,C),s(v,q),s(v,S),s(S,D),s(v,E),O&&O.m(v,null),L||(T=[U(e,"mousedown",l[31]),U(e,"mousemove",l[32]),U(e,"mouseup",l[33]),U(e,"mouseleave",l[33]),U(e,"touchstart",l[31]),U(e,"touchmove",l[32]),U(e,"touchend",l[33],{passive:!0}),U(e,"click",l[40]),U(e,"keydown",l[61])],L=!0)},p(H,B){B[0]&67108864&&te(c,H[26]),B[0]&8388608&&f!==(f=H[23].word+"")&&te(p,f),H[23].imageUrl?b?b.p(H,B):(b=Wt(H),b.c(),b.m(w,_)):b&&(b.d(1),b=null),B[0]&8388608&&y!==(y=H[23].translation+"")&&te(D,y),H[23].association?O?O.p(H,B):(O=Vt(H),O.c(),O.m(v,null)):O&&(O.d(1),O=null),B[0]&8388608&&N(w,"has-image",H[23].imageUrl),B[0]&32&&N(e,"flipped",H[5]),B[0]&64&&N(e,"dragging",H[6]),B[0]&128&&N(e,"swipe-left",H[7]==="left"),B[0]&128&&N(e,"swipe-right",H[7]==="right")},d(H){H&&I(e),b&&b.d(),O&&O.d(),L=!1,je(T)}}}function Kt(l){let e,t;return{c(){e=u("img"),Ge(e.src,t=l[23].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image-full svelte-1ipumql")},m(i,r){M(i,e,r)},p(i,r){r[0]&8388608&&!Ge(e.src,t=i[23].imageUrl)&&n(e,"src",t)},d(i){i&&I(e)}}}function Xt(l){let e;function t(o,c){return o[9]==="correct"?Sn:qn}let i=t(l),r=i(l);return{c(){e=u("div"),r.c(),n(e,"class","answer-overlay svelte-1ipumql"),N(e,"correct",l[9]==="correct"),N(e,"incorrect",l[9]==="incorrect")},m(o,c){M(o,e,c),r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),c[0]&512&&N(e,"correct",o[9]==="correct"),c[0]&512&&N(e,"incorrect",o[9]==="incorrect")},d(o){o&&I(e),r.d()}}}function qn(l){let e,t,i,r,o,c=l[23].word+"",d;return{c(){e=P("svg"),t=P("line"),i=P("line"),r=g(),o=u("span"),d=R(c),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1ipumql"),n(o,"class","svelte-1ipumql")},m(a,f){M(a,e,f),s(e,t),s(e,i),M(a,r,f),M(a,o,f),s(o,d)},p(a,f){f[0]&8388608&&c!==(c=a[23].word+"")&&te(d,c)},d(a){a&&(I(e),I(r),I(o))}}}function Sn(l){let e,t,i,r;return{c(){e=P("svg"),t=P("polyline"),i=g(),r=u("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1ipumql"),n(r,"class","svelte-1ipumql")},m(o,c){M(o,e,c),s(e,t),M(o,i,c),M(o,r,c)},p:ge,d(o){o&&(I(e),I(i),I(r))}}}function Yt(l){let e;function t(o,c){if(o[13]==="correct")return Tn;if(o[13]==="word_error")return Ln}let i=t(l),r=i&&i(l);return{c(){e=u("div"),r&&r.c(),n(e,"class","answer-overlay svelte-1ipumql"),N(e,"correct",l[13]==="correct"),N(e,"incorrect",l[13]==="word_error")},m(o,c){M(o,e,c),r&&r.m(e,null)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r&&r.d(1),r=i&&i(o),r&&(r.c(),r.m(e,null))),c[0]&8192&&N(e,"correct",o[13]==="correct"),c[0]&8192&&N(e,"incorrect",o[13]==="word_error")},d(o){o&&I(e),r&&r.d()}}}function Ln(l){let e,t,i,r,o,c,d,a,f,p,h;return{c(){e=P("svg"),t=P("line"),i=P("line"),r=g(),o=u("div"),c=u("span"),c.textContent="Ошибка в слове",d=g(),a=u("span"),f=R("Ожидалось: "),p=u("strong"),h=R(l[19]),n(t,"x1","18"),n(t,"y1","6"),n(t,"x2","6"),n(t,"y2","18"),n(i,"x1","6"),n(i,"y1","6"),n(i,"x2","18"),n(i,"y2","18"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1ipumql"),n(c,"class","error-title svelte-1ipumql"),n(p,"class","svelte-1ipumql"),n(a,"class","expected-word svelte-1ipumql"),n(o,"class","error-details svelte-1ipumql")},m(m,k){M(m,e,k),s(e,t),s(e,i),M(m,r,k),M(m,o,k),s(o,c),s(o,d),s(o,a),s(a,f),s(a,p),s(p,h)},p(m,k){k[0]&524288&&te(h,m[19])},d(m){m&&(I(e),I(r),I(o))}}}function Tn(l){let e,t,i,r;return{c(){e=P("svg"),t=P("polyline"),i=g(),r=u("span"),r.textContent="Правильно!",n(t,"points","20 6 9 17 4 12"),n(e,"width","48"),n(e,"height","48"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2"),n(e,"class","svelte-1ipumql"),n(r,"class","svelte-1ipumql")},m(o,c){M(o,e,c),s(e,t),M(o,i,c),M(o,r,c)},p:ge,d(o){o&&(I(e),I(i),I(r))}}}function Qt(l){let e;return{c(){e=u("div"),e.innerHTML='<div class="checking-spinner svelte-1ipumql"></div> <span class="svelte-1ipumql">Проверка...</span>',n(e,"class","answer-overlay checking svelte-1ipumql")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Zt(l){let e,t;return{c(){e=u("img"),Ge(e.src,t=l[23].imageUrl)||n(e,"src",t),n(e,"alt",""),n(e,"class","card-image svelte-1ipumql")},m(i,r){M(i,e,r)},p(i,r){r[0]&8388608&&!Ge(e.src,t=i[23].imageUrl)&&n(e,"src",t)},d(i){i&&I(e)}}}function xt(l){let e,t,i,r,o=l[23].association+"",c;return{c(){e=u("div"),t=u("span"),t.textContent="Ассоциация:",i=g(),r=u("p"),c=R(o),n(t,"class","association-label svelte-1ipumql"),n(r,"class","svelte-1ipumql"),n(e,"class","association svelte-1ipumql")},m(d,a){M(d,e,a),s(e,t),s(e,i),s(e,r),s(r,c)},p(d,a){a[0]&8388608&&o!==(o=d[23].association+"")&&te(c,o)},d(d){d&&I(e)}}}function In(l){let e,t,i,r,o,c;return{c(){e=u("div"),t=u("button"),t.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',i=g(),r=u("button"),r.innerHTML='<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="16 10 11 15 8 12"></polyline></svg>',n(t,"class","action-btn unknown svelte-1ipumql"),n(r,"class","action-btn known svelte-1ipumql"),n(e,"class","action-buttons svelte-1ipumql")},m(d,a){M(d,e,a),s(e,t),s(e,i),s(e,r),o||(c=[U(t,"click",l[36]),U(r,"click",l[34])],o=!0)},p:ge,d(d){d&&I(e),o=!1,je(c)}}}function Mn(l){let e,t,i,r,o=l[26].toLowerCase()+"",c,d,a,f,p,h,m,k,w,_;function v(y,D){return y[15]?Bn:y[16]?An:Nn}let C=v(l),q=C(l),S=!l[15]&&!l[16]&&$t(l);return{c(){e=u("div"),t=u("div"),i=u("span"),r=R("Переведите на "),c=R(o),d=R(":"),a=g(),q.c(),f=g(),S&&S.c(),p=g(),h=u("button"),m=R("Пропустить"),n(i,"class","sentence-label svelte-1ipumql"),n(t,"class","sentence-prompt svelte-1ipumql"),N(t,"loading",l[15]),N(t,"error",l[16]),n(h,"class","skip-sentence-btn svelte-1ipumql"),h.disabled=k=l[13]!==null||l[15]||l[18],n(e,"class","sentence-exercise svelte-1ipumql")},m(y,D){M(y,e,D),s(e,t),s(t,i),s(i,r),s(i,c),s(i,d),s(t,a),q.m(t,null),s(e,f),S&&S.m(e,null),s(e,p),s(e,h),s(h,m),w||(_=U(h,"click",l[36]),w=!0)},p(y,D){D[0]&67108864&&o!==(o=y[26].toLowerCase()+"")&&te(c,o),C===(C=v(y))&&q?q.p(y,D):(q.d(1),q=C(y),q&&(q.c(),q.m(t,null))),D[0]&32768&&N(t,"loading",y[15]),D[0]&65536&&N(t,"error",y[16]),!y[15]&&!y[16]?S?S.p(y,D):(S=$t(y),S.c(),S.m(e,p)):S&&(S.d(1),S=null),D[0]&303104&&k!==(k=y[13]!==null||y[15]||y[18])&&(h.disabled=k)},d(y){y&&I(e),q.d(),S&&S.d(),w=!1,_()}}}function Dn(l){let e,t,i,r;return{c(){e=u("div"),t=u("button"),t.textContent="Продолжить",n(t,"class","continue-btn svelte-1ipumql"),n(e,"class","card-back-actions svelte-1ipumql")},m(o,c){M(o,e,c),s(e,t),i||(r=U(t,"click",l[36]),i=!0)},p:ge,d(o){o&&I(e),i=!1,r()}}}function Nn(l){let e,t;return{c(){e=u("p"),t=R(l[14]),n(e,"class","sentence-text svelte-1ipumql")},m(i,r){M(i,e,r),s(e,t)},p(i,r){r[0]&16384&&te(t,i[14])},d(i){i&&I(e)}}}function An(l){let e,t,i,r,o,c;return{c(){e=u("p"),t=R(l[16]),i=g(),r=u("button"),r.textContent="Попробовать снова",n(e,"class","sentence-error svelte-1ipumql"),n(r,"class","retry-btn svelte-1ipumql")},m(d,a){M(d,e,a),s(e,t),M(d,i,a),M(d,r,a),o||(c=U(r,"click",l[58]),o=!0)},p(d,a){a[0]&65536&&te(t,d[16])},d(d){d&&(I(e),I(i),I(r)),o=!1,c()}}}function Bn(l){let e;return{c(){e=u("div"),e.innerHTML='<div class="loading-spinner svelte-1ipumql"></div> <span>Генерация предложения...</span>',n(e,"class","sentence-loading svelte-1ipumql")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function $t(l){let e;function t(o,c){return o[13]==="grammar_error"?On:En}let i=t(l),r=i(l);return{c(){r.c(),e=nt()},m(o,c){r.m(o,c),M(o,e,c)},p(o,c){i===(i=t(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&I(e),r.d(o)}}}function En(l){let e,t,i,r,o,c,d,a,f,p,h;return{c(){e=u("div"),t=u("input"),r=g(),o=u("button"),c=P("svg"),d=P("polyline"),a=P("path"),n(t,"type","text"),n(t,"class","answer-input sentence-input svelte-1ipumql"),n(t,"placeholder","Введите перевод..."),t.disabled=i=l[13]!==null||l[18],N(t,"correct",l[13]==="correct"),N(t,"incorrect",l[13]==="incorrect"),n(d,"points","9 11 12 14 22 4"),n(a,"d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"),n(c,"width","24"),n(c,"height","24"),n(c,"viewBox","0 0 24 24"),n(c,"fill","none"),n(c,"stroke","currentColor"),n(c,"stroke-width","2"),n(o,"class","check-btn svelte-1ipumql"),o.disabled=f=!l[12].trim()||l[13]!==null||l[18],n(e,"class","answer-input-area svelte-1ipumql")},m(m,k){M(m,e,k),s(e,t),Ae(t,l[12]),s(e,r),s(e,o),s(o,c),s(c,d),s(c,a),p||(h=[U(t,"input",l[59]),U(t,"keydown",l[38]),U(o,"click",l[37])],p=!0)},p(m,k){k[0]&270336&&i!==(i=m[13]!==null||m[18])&&(t.disabled=i),k[0]&4096&&t.value!==m[12]&&Ae(t,m[12]),k[0]&8192&&N(t,"correct",m[13]==="correct"),k[0]&8192&&N(t,"incorrect",m[13]==="incorrect"),k[0]&274432&&f!==(f=!m[12].trim()||m[13]!==null||m[18])&&(o.disabled=f)},d(m){m&&I(e),p=!1,je(h)}}}function On(l){let e,t,i,r,o,c,d,a,f,p,h,m;function k(v,C){return v[20]?Hn:Un}let w=k(l),_=w(l);return{c(){e=u("div"),t=u("div"),_.c(),i=g(),r=u("div"),o=u("span"),o.textContent="Правильный вариант:",c=g(),d=u("p"),a=R(l[21]),f=g(),p=u("button"),p.textContent="Продолжить",n(t,"class","user-sentence-error svelte-1ipumql"),n(o,"class","correction-label svelte-1ipumql"),n(d,"class","correction-text svelte-1ipumql"),n(r,"class","correction-block svelte-1ipumql"),n(p,"class","continue-btn svelte-1ipumql"),n(e,"class","grammar-error-block svelte-1ipumql")},m(v,C){M(v,e,C),s(e,t),_.m(t,null),s(e,i),s(e,r),s(r,o),s(r,c),s(r,d),s(d,a),s(e,f),s(e,p),h||(m=U(p,"click",l[39]),h=!0)},p(v,C){w===(w=k(v))&&_?_.p(v,C):(_.d(1),_=w(v),_&&(_.c(),_.m(t,null))),C[0]&2097152&&te(a,v[21])},d(v){v&&I(e),_.d(),h=!1,m()}}}function Un(l){let e,t;return{c(){e=u("span"),t=R(l[22]),n(e,"class","error-text svelte-1ipumql")},m(i,r){M(i,e,r),s(e,t)},p(i,r){r[0]&4194304&&te(t,i[22])},d(i){i&&I(e)}}}function Hn(l){let e,t=el(l[22],l[20])+"",i;return{c(){e=new Pl(!1),i=nt(),e.a=i},m(r,o){e.m(t,r,o),M(r,i,o)},p(r,o){o[0]&5242880&&t!==(t=el(r[22],r[20])+"")&&e.p(t)},d(r){r&&(I(i),e.d())}}}function Rn(l){let e,t,i,r,o,c,d,a,f,p,h,m;function k(y,D){return y[24]?vn:y[0]?hn:mn}let w=k(l),_=w(l),v=l[10]&&zt(l);function C(y,D){return y[24]&&y[23]?kn:yn}let q=C(l),S=q(l);return{c(){e=u("div"),t=u("div"),i=u("div"),r=u("h1"),r.textContent="Изучение",o=g(),c=u("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ipumql"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',d=g(),a=u("p"),_.c(),f=g(),v&&v.c(),p=g(),S.c(),n(r,"class","svelte-1ipumql"),n(c,"class","settings-btn svelte-1ipumql"),N(c,"active",l[10]),n(i,"class","header-top svelte-1ipumql"),n(a,"class","subtitle svelte-1ipumql"),n(t,"class","header svelte-1ipumql"),n(e,"class","flashcards-container svelte-1ipumql")},m(y,D){M(y,e,D),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),_.m(a,null),s(e,f),v&&v.m(e,null),s(e,p),S.m(e,null),h||(m=U(c,"click",l[54]),h=!0)},p(y,D){D[0]&1024&&N(c,"active",y[10]),w===(w=k(y))&&_?_.p(y,D):(_.d(1),_=w(y),_&&(_.c(),_.m(a,null))),y[10]?v?v.p(y,D):(v=zt(y),v.c(),v.m(e,p)):v&&(v.d(1),v=null),q===(q=C(y))&&S?S.p(y,D):(S.d(1),S=q(y),S&&(S.c(),S.m(e,null)))},i:ge,o:ge,d(y){y&&I(e),_.d(),v&&v.d(),S.d(),h=!1,m()}}}function Jn(l){const e=[...l];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function el(l,e){if(!e)return l;const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${t})`,"gi");return l.replace(i,'<span class="highlighted-error">$1</span>')}function jn(l,e,t){let i,r,o,c,d,a,f,p,h,m,k,w;Qe(l,Je,X=>t(50,m=X)),Qe(l,We,X=>t(51,k=X)),Qe(l,Ze,X=>t(52,w=X));let _=0,v=!1,C=0,q=0,S=!1,y=null,D=!1,E=!1,L="",T=null,b=!1;function O(){t(0,D=!1),t(1,E=!1),F()}function H(){D?t(0,D=!1):(t(0,D=!0),t(1,E=!1)),F()}function B(){c&&(E?t(1,E=!1):(t(1,E=!0),t(0,D=!1)),F())}let j=!1,W="",V=null,A="",J=!1,se=null,re=!1,Me=!1,De=null,ue=null,fe=null,pe=null,Se="";function oe(){t(45,Se=localStorage.getItem("ai_token")||"")}function he(){oe()}function Ee(X){X.key==="ai_token"&&oe()}let me;Dl(()=>{oe(),window.addEventListener("focus",he),window.addEventListener("storage",Ee),me=setInterval(()=>{b&&oe()},500)}),zl(()=>{window.removeEventListener("focus",he),window.removeEventListener("storage",Ee),me&&clearInterval(me)});async function Le(X,Fe){var Pe,ze,we,He;t(15,J=!0),t(16,se=null),t(14,A="");const Ke=`You are a ${r} language learning assistant. Student level: A1-A2 (beginner).

Task: Create ONE short and simple sentence in RUSSIAN that will need to be translated into ${r}.

${r} word: "${X}"
Russian translation: "${Fe}"

Requirements:
- The sentence must be in Russian
- The sentence must contain the word "${Fe}" (or its form)
- Length: 3-10 words
- Simple A1-A2 level grammar
- Use simple tenses (Present Simple, Past Simple, Future Simple, Present Continuous, Present Perfect)
- Avoid complex constructions

Reply ONLY with the sentence in Russian, without quotes or explanations.`;try{const Ne=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Se}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Ke}],max_tokens:100,temperature:.7})});if(!Ne.ok){const Q=await Ne.json().catch(()=>({}));throw new Error(((Pe=Q.error)==null?void 0:Pe.message)||`Ошибка API: ${Ne.status}`)}const Be=await Ne.json();if(t(14,A=((He=(we=(ze=Be.choices[0])==null?void 0:ze.message)==null?void 0:we.content)==null?void 0:He.trim())||""),!A)throw new Error("Пустой ответ от AI");if(Be.usage){const Q=Be.usage.prompt_tokens/1e6*.15,Ce=Be.usage.completion_tokens/1e6*.6,ut=Q+Ce,Ct=parseFloat(localStorage.getItem("ai_total_cost")||"0")+ut;localStorage.setItem("ai_total_cost",Ct.toString())}}catch(Ne){console.error("Ошибка генерации:",Ne),t(16,se=Ne.message),t(14,A="")}finally{t(15,J=!1)}}let z=[],ve=new Set,ye=d;function ne(X){D||(t(6,S=!0),C=X.type==="touchstart"?X.touches[0].clientX:X.clientX,t(7,y=null))}function ke(X){if(!S||D)return;q=(X.type==="touchmove"?X.touches[0].clientX:X.clientX)-C,q>50?t(7,y="right"):q<-50?t(7,y="left"):t(7,y=null)}function qe(){!S||D||(t(6,S=!1),Math.abs(q)>100&&p&&(q>0?G():Z()),q=0,t(7,y=null))}async function G(){if(p){if(E&&!j){t(11,j=!0),t(12,W=""),t(13,V=null),await Le(p.word,p.translation);return}Je.markAsLearned(p.id),F(),_>=f.length-1&&t(44,_=Math.max(0,f.length-2))}}function Z(){if(p){const X=p;t(46,z=[...z.filter(Fe=>Fe.id!==X.id),X]),Je.markAsUnlearned(X.id),F(),_>=f.length-1&&t(44,_=0)}}function F(){t(5,v=!1),t(8,L=""),t(9,T=null),t(11,j=!1),t(12,W=""),t(13,V=null),t(14,A=""),t(16,se=null),t(18,Me=!1),t(19,De=null),t(20,ue=null),t(21,fe=null),t(22,pe=null),t(17,re=!1)}function de(){if(p){if(E&&!re){t(17,re=!0);return}const X=p;t(46,z=[...z.filter(Fe=>Fe.id!==X.id),X]),Je.markAsUnlearned(X.id),F(),_>=f.length-1&&t(44,_=0)}}async function ae(X,Fe,Ke){var ze,we,He,Ne;const Pe=`You are a ${r} language teacher. Check the translation of a sentence from Russian to ${r}.

Russian sentence: "${Fe}"
Student's translation: "${X}"
Key word that must be used: "${Ke}"

Task: check the grammar of the sentence and its correspondence to the translation.
- DO NOT check punctuation (commas, periods)
- Check only grammatical errors (tenses, articles, word order, word forms)
- Check that the meaning matches the translation

Response format:
- If the sentence is grammatically correct and conveys the meaning — reply only: 0
- If there are errors — reply in this format:
ERROR: [part of the sentence with the error]
CORRECTION: [correct version of the entire sentence]

Reply ONLY in the specified format, without additional explanations.`;try{const Be=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Se}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:Pe}],max_tokens:200,temperature:.3})});if(!Be.ok){const ut=await Be.json().catch(()=>({}));throw new Error(((ze=ut.error)==null?void 0:ze.message)||`Ошибка API: ${Be.status}`)}const Q=await Be.json(),Ce=((Ne=(He=(we=Q.choices[0])==null?void 0:we.message)==null?void 0:He.content)==null?void 0:Ne.trim())||"";if(Q.usage){const ut=Q.usage.prompt_tokens/1e6*.15,Dt=Q.usage.completion_tokens/1e6*.6,Ct=ut+Dt,Al=parseFloat(localStorage.getItem("ai_total_cost")||"0");localStorage.setItem("ai_total_cost",(Al+Ct).toString())}return Ce}catch(Be){throw console.error("Ошибка проверки грамматики:",Be),Be}}async function Te(){if(!p||!W.trim())return;const X=W.trim(),Fe=p.word.toLowerCase(),Ke=X.toLowerCase();if(!new RegExp(`\\b${Fe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\w*\\b`,"i").test(Ke)){t(13,V="word_error"),t(19,De=p.word),t(20,ue=null),t(21,fe=null),setTimeout(()=>{const we=p;t(46,z=[...z.filter(He=>He.id!==we.id),we]),Je.markAsUnlearned(we.id),_>=f.length-1&&t(44,_=0),F()},3e3);return}t(18,Me=!0),t(19,De=null),t(20,ue=null),t(21,fe=null);try{const we=await ae(X,A,p.word);if(we==="0")t(13,V="correct"),setTimeout(()=>{Je.markAsLearned(p.id),_>=f.length-1&&t(44,_=Math.max(0,f.length-2)),F()},1500);else{t(13,V="grammar_error"),t(22,pe=X);const He=we.match(/ERROR:\s*(.+)/i),Ne=we.match(/CORRECTION:\s*(.+)/i);t(20,ue=He?He[1].trim():null),t(21,fe=Ne?Ne[1].trim():we)}}catch{t(13,V="correct"),setTimeout(()=>{Je.markAsLearned(p.id),_>=f.length-1&&t(44,_=Math.max(0,f.length-2)),F()},1500)}finally{t(18,Me=!1)}}function le(X){X.key==="Enter"&&j&&!Me&&V!=="grammar_error"&&Te()}function x(){if(p){const X=p;t(46,z=[...z.filter(Fe=>Fe.id!==X.id),X]),Je.markAsUnlearned(X.id),_>=f.length-1&&t(44,_=0),F()}}function $(){D||t(5,v=!v)}function Y(){if(!S)return"";const X=q*.05;return`transform: translateX(${q}px) rotate(${X}deg);`}function ce(){if(!p||!L.trim())return;const X=L.trim().toLowerCase()===p.word.toLowerCase();t(9,T=X?"correct":"incorrect"),setTimeout(()=>{X?G():Z()},1e3)}function K(X){X.key==="Enter"&&D&&ce()}function _e(X){tt.call(this,l,X)}const Oe=()=>t(10,b=!b),Ue=()=>t(10,b=!1),ee=()=>t(10,b=!1),be=X=>X.key==="Escape"&&t(10,b=!1),Re=()=>Le(p.word,p.translation);function ie(){W=this.value,t(12,W)}function Ie(){L=this.value,t(8,L)}const ct=X=>X.key==="Enter"&&$();return l.$$.update=()=>{if(l.$$.dirty[1]&2097152&&t(26,i=Ye(w)),l.$$.dirty[1]&2097152&&(r=nn(w)),l.$$.dirty[1]&16384&&t(4,c=Se&&Se.length>0),l.$$.dirty[0]&18&&!c&&E&&t(1,E=!1),l.$$.dirty[0]&3&&t(25,o=!D&&!E),l.$$.dirty[1]&1048576&&t(49,d=k||"default"),l.$$.dirty[1]&786432&&t(3,a=m.unlearned.filter(X=>(X.dictionaryId||"default")===d)),l.$$.dirty[0]&8|l.$$.dirty[1]&491520){const X=new Set(a.map(Pe=>Pe.id)),Fe=ye!==d,Ke=X.size!==ve.size||![...X].every(Pe=>ve.has(Pe));Fe||Ke?(t(46,z=Jn(a)),t(47,ve=X),t(44,_=0),t(48,ye=d)):t(46,z=z.map(Pe=>a.find(we=>we.id===Pe.id)||Pe))}l.$$.dirty[0]&1|l.$$.dirty[1]&32768&&t(2,f=D?z.filter(X=>X.imageUrl):z),l.$$.dirty[0]&4|l.$$.dirty[1]&8192&&t(23,p=f[_]),l.$$.dirty[0]&4&&t(24,h=f.length>0)},[D,E,f,a,c,v,S,y,L,T,b,j,W,V,A,J,se,re,Me,De,ue,fe,pe,p,h,o,i,O,H,B,Le,ne,ke,qe,G,Z,de,Te,le,x,$,Y,ce,K,_,Se,z,ve,ye,d,m,k,w,_e,Oe,Ue,ee,be,Re,ie,Ie,ct]}class Pn extends bt{constructor(e){super(),kt(this,e,jn,Rn,at,{},null,[-1,-1,-1])}}function tl(l,e,t){const i=l.slice();return i[61]=e[t],i}function ll(l){let e,t,i,r,o=l[7].length+"",c,d,a,f,p,h=l[8].length+"",m,k,w,_,v,C=l[6].length+"",q,S,y;return{c(){e=u("div"),t=u("button"),i=R(`На проработку
          `),r=u("span"),c=R(o),d=g(),a=u("button"),f=R(`На повторение
          `),p=u("span"),m=R(h),k=g(),w=u("button"),_=R(`Изученные
          `),v=u("span"),q=R(C),n(r,"class","badge svelte-1rdpxoy"),n(t,"class","dropdown-item svelte-1rdpxoy"),N(t,"active",l[0]==="draft"),n(p,"class","badge svelte-1rdpxoy"),n(a,"class","dropdown-item svelte-1rdpxoy"),N(a,"active",l[0]==="unlearned"),n(v,"class","badge svelte-1rdpxoy"),n(w,"class","dropdown-item svelte-1rdpxoy"),N(w,"active",l[0]==="learned"),n(e,"class","tab-dropdown-menu svelte-1rdpxoy")},m(D,E){M(D,e,E),s(e,t),s(t,i),s(t,r),s(r,c),s(e,d),s(e,a),s(a,f),s(a,p),s(p,m),s(e,k),s(e,w),s(w,_),s(w,v),s(v,q),S||(y=[U(t,"click",l[39]),U(a,"click",l[40]),U(w,"click",l[41])],S=!0)},p(D,E){E[0]&128&&o!==(o=D[7].length+"")&&te(c,o),E[0]&1&&N(t,"active",D[0]==="draft"),E[0]&256&&h!==(h=D[8].length+"")&&te(m,h),E[0]&1&&N(a,"active",D[0]==="unlearned"),E[0]&64&&C!==(C=D[6].length+"")&&te(q,C),E[0]&1&&N(w,"active",D[0]==="learned")},d(D){D&&I(e),S=!1,je(y)}}}function nl(l){let e,t,i;return{c(){e=u("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","search-clear svelte-1rdpxoy")},m(r,o){M(r,e,o),t||(i=U(e,"click",l[46]),t=!0)},p:ge,d(r){r&&I(e),t=!1,i()}}}function il(l){let e,t,i,r;return{c(){e=u("div"),t=u("button"),t.innerHTML=`<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
        Отправить все на повторение`,n(t,"class","bulk-action-btn svelte-1rdpxoy"),n(e,"class","bulk-actions svelte-1rdpxoy")},m(o,c){M(o,e,c),s(e,t),i||(r=U(t,"click",l[26]),i=!0)},p:ge,d(o){o&&I(e),i=!1,r()}}}function zn(l){let e,t,i,r,o,c;function d(v,C){return v[0]==="learned"?Gn:v[0]==="draft"?Vn:Wn}let a=d(l),f=a(l);function p(v,C){return v[0]==="learned"?Yn:v[0]==="draft"?Xn:Kn}let h=p(l),m=h(l);function k(v,C){return v[0]==="learned"?xn:v[0]==="draft"?Zn:Qn}let w=k(l),_=w(l);return{c(){e=u("div"),t=u("div"),f.c(),i=g(),r=u("h2"),m.c(),o=g(),c=u("p"),_.c(),n(t,"class","empty-icon svelte-1rdpxoy"),n(r,"class","svelte-1rdpxoy"),n(c,"class","svelte-1rdpxoy"),n(e,"class","empty-state svelte-1rdpxoy")},m(v,C){M(v,e,C),s(e,t),f.m(t,null),s(e,i),s(e,r),m.m(r,null),s(e,o),s(e,c),_.m(c,null)},p(v,C){a!==(a=d(v))&&(f.d(1),f=a(v),f&&(f.c(),f.m(t,null))),h!==(h=p(v))&&(m.d(1),m=h(v),m&&(m.c(),m.m(r,null))),w!==(w=k(v))&&(_.d(1),_=w(v),_&&(_.c(),_.m(c,null)))},d(v){v&&I(e),f.d(),m.d(),_.d()}}}function Fn(l){let e=[],t=new Map,i,r=_t(l[12]);const o=c=>c[61].id;for(let c=0;c<r.length;c+=1){let d=tl(l,r,c),a=o(d);t.set(a,e[c]=al(a,d))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=nt()},m(c,d){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,d);M(c,i,d)},p(c,d){d[0]&921601&&(r=_t(c[12]),e=Ql(e,d,o,1,c,r,t,i.parentNode,Yl,al,i,tl))},d(c){c&&I(i);for(let d=0;d<e.length;d+=1)e[d].d(c)}}}function Wn(l){let e,t,i,r;return{c(){e=P("svg"),t=P("circle"),i=P("line"),r=P("line"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"x1","12"),n(i,"y1","8"),n(i,"x2","12"),n(i,"y2","12"),n(r,"x1","12"),n(r,"y1","16"),n(r,"x2","12.01"),n(r,"y2","16"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(o,c){M(o,e,c),s(e,t),s(e,i),s(e,r)},d(o){o&&I(e)}}}function Vn(l){let e,t,i;return{c(){e=P("svg"),t=P("path"),i=P("path"),n(t,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(i,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){M(r,e,o),s(e,t),s(e,i)},d(r){r&&I(e)}}}function Gn(l){let e,t,i;return{c(){e=P("svg"),t=P("circle"),i=P("polyline"),n(t,"cx","12"),n(t,"cy","12"),n(t,"r","10"),n(i,"points","16 10 11 15 8 12"),n(e,"width","64"),n(e,"height","64"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","1.5")},m(r,o){M(r,e,o),s(e,t),s(e,i)},d(r){r&&I(e)}}}function Kn(l){let e;return{c(){e=R("Нет слов на повторение")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Xn(l){let e;return{c(){e=R("Нет слов на проработку")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Yn(l){let e;return{c(){e=R("Пока нет изученных слов")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Qn(l){let e;return{c(){e=R("Все слова успешно изучены!")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function Zn(l){let e;return{c(){e=R("Загрузите список слов на странице добавления")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function xn(l){let e;return{c(){e=R("Изучайте карточки, чтобы они появились здесь")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function $n(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',n(e,"class","card-thumbnail missing svelte-1rdpxoy")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function ei(l){let e,t,i;return{c(){e=u("div"),t=u("img"),Ge(t.src,i=l[61].imageUrl)||n(t,"src",i),n(t,"alt",""),n(t,"class","svelte-1rdpxoy"),n(e,"class","card-thumbnail svelte-1rdpxoy")},m(r,o){M(r,e,o),s(e,t)},p(r,o){o[0]&4096&&!Ge(t.src,i=r[61].imageUrl)&&n(t,"src",i)},d(r){r&&I(e)}}}function ti(l){let e;return{c(){e=u("p"),e.textContent="Добавьте перевод",n(e,"class","card-translation missing-text svelte-1rdpxoy")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function li(l){let e,t=l[61].translation+"",i;return{c(){e=u("p"),i=R(t),n(e,"class","card-translation svelte-1rdpxoy")},m(r,o){M(r,e,o),s(e,i)},p(r,o){o[0]&4096&&t!==(t=r[61].translation+"")&&te(i,t)},d(r){r&&I(e)}}}function sl(l){let e,t=l[61].association+"",i;return{c(){e=u("p"),i=R(t),n(e,"class","card-association svelte-1rdpxoy")},m(r,o){M(r,e,o),s(e,i)},p(r,o){o[0]&4096&&t!==(t=r[61].association+"")&&te(i,t)},d(r){r&&I(e)}}}function rl(l){let e,t,i,r,o,c,d,a,f,p;function h(C,q){var S;return q[0]&4096&&(r=null),r==null&&(r=!!((S=C[61].translation)!=null&&S.trim())),r?ii:ni}let m=h(l,[-1,-1,-1]),k=m(l);function w(C,q){var S;return q[0]&4096&&(f=null),f==null&&(f=!!((S=C[61].imageUrl)!=null&&S.trim())),f?ri:si}let _=w(l,[-1,-1,-1]),v=_(l);return{c(){var C,q;e=u("div"),t=u("span"),i=P("svg"),k.c(),o=R(`
                  Перевод`),c=g(),d=u("span"),a=P("svg"),v.c(),p=R(`
                  Картинка`),n(i,"width","12"),n(i,"height","12"),n(i,"viewBox","0 0 24 24"),n(i,"fill","none"),n(i,"stroke","currentColor"),n(i,"stroke-width","2"),n(t,"class","status-item svelte-1rdpxoy"),N(t,"complete",(C=l[61].translation)==null?void 0:C.trim()),n(a,"width","12"),n(a,"height","12"),n(a,"viewBox","0 0 24 24"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-width","2"),n(d,"class","status-item svelte-1rdpxoy"),N(d,"complete",(q=l[61].imageUrl)==null?void 0:q.trim()),n(e,"class","draft-status svelte-1rdpxoy")},m(C,q){M(C,e,q),s(e,t),s(t,i),k.m(i,null),s(t,o),s(e,c),s(e,d),s(d,a),v.m(a,null),s(d,p)},p(C,q){var S,y;m!==(m=h(C,q))&&(k.d(1),k=m(C),k&&(k.c(),k.m(i,null))),q[0]&4096&&N(t,"complete",(S=C[61].translation)==null?void 0:S.trim()),_!==(_=w(C,q))&&(v.d(1),v=_(C),v&&(v.c(),v.m(a,null))),q[0]&4096&&N(d,"complete",(y=C[61].imageUrl)==null?void 0:y.trim())},d(C){C&&I(e),k.d(),v.d()}}}function ni(l){let e;return{c(){e=P("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function ii(l){let e;return{c(){e=P("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function si(l){let e;return{c(){e=P("circle"),n(e,"cx","12"),n(e,"cy","12"),n(e,"r","10")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function ri(l){let e;return{c(){e=P("polyline"),n(e,"points","20 6 9 17 4 12")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function ol(l){let e,t,i;function r(){return l[48](l[61])}return{c(){e=u("button"),e.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',n(e,"class","action-btn return svelte-1rdpxoy"),n(e,"title","Вернуть на повторение")},m(o,c){M(o,e,c),t||(i=U(e,"click",r),t=!0)},p(o,c){l=o},d(o){o&&I(e),t=!1,i()}}}function al(l,e){let t,i,r,o,c=e[61].word+"",d,a,f,p,h,m,k,w,_,v,C,q,S;function y(V,A){if(V[61].imageUrl)return ei;if(V[0]==="draft")return $n}let D=y(e),E=D&&D(e);function L(V,A){if(V[61].translation)return li;if(V[0]==="draft")return ti}let T=L(e),b=T&&T(e),O=e[61].association&&sl(e),H=e[0]==="draft"&&rl(e);function B(){return e[47](e[61])}let j=e[0]==="learned"&&ol(e);function W(){return e[49](e[61])}return{key:l,first:null,c(){t=u("div"),E&&E.c(),i=g(),r=u("div"),o=u("h3"),d=R(c),a=g(),b&&b.c(),f=g(),O&&O.c(),p=g(),H&&H.c(),h=g(),m=u("div"),k=u("button"),k.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',w=g(),j&&j.c(),_=g(),v=u("button"),v.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>',C=g(),n(o,"class","card-word svelte-1rdpxoy"),n(r,"class","card-content svelte-1rdpxoy"),n(k,"class","action-btn edit svelte-1rdpxoy"),n(k,"title","Редактировать"),n(v,"class","action-btn delete svelte-1rdpxoy"),n(v,"title","Удалить"),n(m,"class","card-actions svelte-1rdpxoy"),n(t,"class","card-item svelte-1rdpxoy"),N(t,"draft-card",e[0]==="draft"),this.first=t},m(V,A){M(V,t,A),E&&E.m(t,null),s(t,i),s(t,r),s(r,o),s(o,d),s(r,a),b&&b.m(r,null),s(r,f),O&&O.m(r,null),s(r,p),H&&H.m(r,null),s(t,h),s(t,m),s(m,k),s(m,w),j&&j.m(m,null),s(m,_),s(m,v),s(t,C),q||(S=[U(k,"click",B),U(v,"click",W)],q=!0)},p(V,A){e=V,D===(D=y(e))&&E?E.p(e,A):(E&&E.d(1),E=D&&D(e),E&&(E.c(),E.m(t,i))),A[0]&4096&&c!==(c=e[61].word+"")&&te(d,c),T===(T=L(e))&&b?b.p(e,A):(b&&b.d(1),b=T&&T(e),b&&(b.c(),b.m(r,f))),e[61].association?O?O.p(e,A):(O=sl(e),O.c(),O.m(r,p)):O&&(O.d(1),O=null),e[0]==="draft"?H?H.p(e,A):(H=rl(e),H.c(),H.m(r,null)):H&&(H.d(1),H=null),e[0]==="learned"?j?j.p(e,A):(j=ol(e),j.c(),j.m(m,_)):j&&(j.d(1),j=null),A[0]&1&&N(t,"draft-card",e[0]==="draft")},d(V){V&&I(t),E&&E.d(),b&&b.d(),O&&O.d(),H&&H.d(),j&&j.d(),q=!1,je(S)}}}function cl(l){let e,t,i,r,o,c,d,a,f,p,h,m=l[15].toLowerCase()+"",k,w,_,v=l[2].length+"",C,q,S,y,D,E,L,T,b,O=l[3].length+"",H,B,j,W,V,A,J,se,re,Me,De,ue=l[4].length+"",fe,pe,Se,oe,he,Ee,me,Le,z,ve,ye,ne,ke=l[0]==="draft"&&l[3].trim()&&l[5].trim(),qe,G,Z,F,de,ae,Te,le,x=l[5]&&ul(l),$=ke&&fl();return{c(){e=u("div"),t=u("div"),i=u("div"),r=u("h2"),r.textContent="Редактировать карточку",o=g(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=u("div"),f=u("div"),p=u("label"),h=R("Слово ("),k=R(m),w=R(`)
            `),_=u("span"),C=R(v),q=R("/35"),S=g(),y=u("input"),D=g(),E=u("div"),L=u("label"),T=R(`Перевод
            `),b=u("span"),H=R(O),B=R("/50"),j=g(),W=u("input"),V=g(),A=u("div"),J=u("label"),se=R(`Ассоциация 
            `),re=u("span"),re.textContent="(необязательно)",Me=g(),De=u("span"),fe=R(ue),pe=R("/95"),Se=g(),oe=u("textarea"),he=g(),Ee=u("div"),me=u("label"),me.innerHTML=`Изображение 
            <span class="optional svelte-1rdpxoy">(URL)</span>`,Le=g(),z=u("input"),ve=g(),x&&x.c(),ye=g(),ne=u("div"),$&&$.c(),qe=g(),G=u("button"),G.textContent="Отмена",Z=g(),F=u("button"),de=R("Сохранить"),n(r,"class","svelte-1rdpxoy"),n(c,"class","modal-close svelte-1rdpxoy"),n(i,"class","modal-header svelte-1rdpxoy"),n(_,"class","char-count svelte-1rdpxoy"),N(_,"limit",l[2].length>=35),n(p,"for","editWord"),n(p,"class","svelte-1rdpxoy"),n(y,"id","editWord"),n(y,"type","text"),n(y,"placeholder","например: serendipity"),n(y,"maxlength","35"),y.required=!0,n(y,"class","svelte-1rdpxoy"),n(f,"class","input-group svelte-1rdpxoy"),n(b,"class","char-count svelte-1rdpxoy"),N(b,"limit",l[3].length>=50),n(L,"for","editTranslation"),n(L,"class","svelte-1rdpxoy"),n(W,"id","editTranslation"),n(W,"type","text"),n(W,"placeholder","например: счастливая случайность"),n(W,"maxlength","50"),W.required=!0,n(W,"class","svelte-1rdpxoy"),n(E,"class","input-group svelte-1rdpxoy"),n(re,"class","optional svelte-1rdpxoy"),n(De,"class","char-count svelte-1rdpxoy"),N(De,"limit",l[4].length>=95),n(J,"for","editAssociation"),n(J,"class","svelte-1rdpxoy"),n(oe,"id","editAssociation"),n(oe,"placeholder","например: представьте, как вы случайно находите клад"),n(oe,"maxlength","95"),n(oe,"rows","2"),n(oe,"class","svelte-1rdpxoy"),n(A,"class","input-group svelte-1rdpxoy"),n(me,"for","editImageUrl"),n(me,"class","svelte-1rdpxoy"),n(z,"id","editImageUrl"),n(z,"type","url"),n(z,"placeholder","https://example.com/image.jpg"),n(z,"class","svelte-1rdpxoy"),n(Ee,"class","input-group svelte-1rdpxoy"),n(a,"class","modal-body svelte-1rdpxoy"),n(G,"class","btn-secondary svelte-1rdpxoy"),n(F,"class","btn-primary svelte-1rdpxoy"),F.disabled=ae=!l[2].trim()||l[0]!=="draft"&&!l[3].trim(),n(ne,"class","modal-actions svelte-1rdpxoy"),n(t,"class","modal svelte-1rdpxoy"),n(t,"role","dialog"),n(e,"class","modal-overlay svelte-1rdpxoy"),n(e,"role","button"),n(e,"tabindex","-1")},m(Y,ce){M(Y,e,ce),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,f),s(f,p),s(p,h),s(p,k),s(p,w),s(p,_),s(_,C),s(_,q),s(f,S),s(f,y),Ae(y,l[2]),s(a,D),s(a,E),s(E,L),s(L,T),s(L,b),s(b,H),s(b,B),s(E,j),s(E,W),Ae(W,l[3]),s(a,V),s(a,A),s(A,J),s(J,se),s(J,re),s(J,Me),s(J,De),s(De,fe),s(De,pe),s(A,Se),s(A,oe),Ae(oe,l[4]),s(a,he),s(a,Ee),s(Ee,me),s(Ee,Le),s(Ee,z),Ae(z,l[5]),s(a,ve),x&&x.m(a,null),s(t,ye),s(t,ne),$&&$.m(ne,null),s(ne,qe),s(ne,G),s(ne,Z),s(ne,F),s(F,de),Te||(le=[U(c,"click",l[50]),U(y,"input",l[51]),U(W,"input",l[52]),U(oe,"input",l[53]),U(z,"input",l[54]),U(G,"click",l[55]),U(F,"click",l[21]),U(t,"click",$e(l[37])),U(e,"click",l[56]),U(e,"keydown",l[57])],Te=!0)},p(Y,ce){ce[0]&32768&&m!==(m=Y[15].toLowerCase()+"")&&te(k,m),ce[0]&4&&v!==(v=Y[2].length+"")&&te(C,v),ce[0]&4&&N(_,"limit",Y[2].length>=35),ce[0]&4&&y.value!==Y[2]&&Ae(y,Y[2]),ce[0]&8&&O!==(O=Y[3].length+"")&&te(H,O),ce[0]&8&&N(b,"limit",Y[3].length>=50),ce[0]&8&&W.value!==Y[3]&&Ae(W,Y[3]),ce[0]&16&&ue!==(ue=Y[4].length+"")&&te(fe,ue),ce[0]&16&&N(De,"limit",Y[4].length>=95),ce[0]&16&&Ae(oe,Y[4]),ce[0]&32&&z.value!==Y[5]&&Ae(z,Y[5]),Y[5]?x?x.p(Y,ce):(x=ul(Y),x.c(),x.m(a,null)):x&&(x.d(1),x=null),ce[0]&41&&(ke=Y[0]==="draft"&&Y[3].trim()&&Y[5].trim()),ke?$||($=fl(),$.c(),$.m(ne,qe)):$&&($.d(1),$=null),ce[0]&13&&ae!==(ae=!Y[2].trim()||Y[0]!=="draft"&&!Y[3].trim())&&(F.disabled=ae)},d(Y){Y&&I(e),x&&x.d(),$&&$.d(),Te=!1,je(le)}}}function ul(l){let e,t,i,r,o;function c(f,p){return f[11]?ai:oi}let d=c(l),a=d(l);return{c(){e=u("div"),a.c(),t=g(),i=u("button"),i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(i,"class","remove-image-btn svelte-1rdpxoy"),n(i,"title","Удалить изображение"),n(e,"class","image-preview-container svelte-1rdpxoy")},m(f,p){M(f,e,p),a.m(e,null),s(e,t),s(e,i),r||(o=U(i,"click",l[24]),r=!0)},p(f,p){d===(d=c(f))&&a?a.p(f,p):(a.d(1),a=d(f),a&&(a.c(),a.m(e,t)))},d(f){f&&I(e),a.d(),r=!1,o()}}}function oi(l){let e,t,i,r;return{c(){e=u("img"),Ge(e.src,t=l[5])||n(e,"src",t),n(e,"alt","Превью"),n(e,"class","modal-image-preview svelte-1rdpxoy")},m(o,c){M(o,e,c),i||(r=[U(e,"error",l[22]),U(e,"load",l[23])],i=!0)},p(o,c){c[0]&32&&!Ge(e.src,t=o[5])&&n(e,"src",t)},d(o){o&&I(e),i=!1,je(r)}}}function ai(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> <span>Ошибка загрузки</span>',n(e,"class","image-error svelte-1rdpxoy")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function fl(l){let e;return{c(){e=u("span"),e.innerHTML=`<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
            Карточка будет активирована`,n(e,"class","ready-hint svelte-1rdpxoy")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function ci(l){let e,t,i,r,o,c,d,a,f,p,h,m,k,w,_,v,C,q,S,y,D,E,L,T,b,O,H,B,j=l[7].length+"",W,V,A,J,se,re,Me,De,ue,fe=l[8].length+"",pe,Se,oe,he,Ee,me,Le,z=l[6].length+"",ve,ye,ne,ke,qe,G,Z,F,de,ae,Te,le,x,$,Y,ce,K=l[9]&&ll(l),_e=l[1]&&nl(l),Oe=l[0]==="learned"&&l[6].length>0&&il(l);function Ue(ie,Ie){return ie[12].length>0?Fn:zn}let ee=Ue(l),be=ee(l),Re=l[10]&&cl(l);return{c(){e=u("div"),t=u("div"),i=u("div"),r=u("h1"),r.textContent="Мои карточки",o=g(),c=u("button"),c.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1rdpxoy"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',d=g(),a=u("p"),a.textContent="Управляйте вашими словами",f=g(),p=u("div"),h=u("button"),m=u("span"),k=R(l[14]),w=g(),_=u("span"),v=R(l[13]),C=g(),q=P("svg"),S=P("polyline"),y=g(),K&&K.c(),D=g(),E=u("div"),L=u("button"),T=P("svg"),b=P("path"),O=P("path"),H=R(`
      На проработку
      `),B=u("span"),W=R(j),V=g(),A=u("button"),J=P("svg"),se=P("circle"),re=P("line"),Me=P("line"),De=R(`
      На повторение
      `),ue=u("span"),pe=R(fe),Se=g(),oe=u("button"),he=P("svg"),Ee=P("polyline"),me=R(`
      Изученные
      `),Le=u("span"),ve=R(z),ye=g(),ne=u("div"),ke=P("svg"),qe=P("circle"),G=P("line"),Z=g(),F=u("input"),de=g(),_e&&_e.c(),ae=g(),Oe&&Oe.c(),Te=g(),le=u("div"),be.c(),x=g(),Re&&Re.c(),$=nt(),n(r,"class","svelte-1rdpxoy"),n(c,"class","export-btn svelte-1rdpxoy"),n(c,"title","Экспорт в JSON"),n(i,"class","header-top svelte-1rdpxoy"),n(a,"class","subtitle svelte-1rdpxoy"),n(t,"class","header svelte-1rdpxoy"),n(m,"class","dropdown-label svelte-1rdpxoy"),n(_,"class","dropdown-badge svelte-1rdpxoy"),n(S,"points","6 9 12 15 18 9"),n(q,"class","dropdown-arrow svelte-1rdpxoy"),n(q,"width","16"),n(q,"height","16"),n(q,"viewBox","0 0 24 24"),n(q,"fill","none"),n(q,"stroke","currentColor"),n(q,"stroke-width","2"),N(q,"open",l[9]),n(h,"class","tab-dropdown-btn svelte-1rdpxoy"),n(p,"class","tabs-mobile svelte-1rdpxoy"),n(b,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),n(O,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),n(T,"width","18"),n(T,"height","18"),n(T,"viewBox","0 0 24 24"),n(T,"fill","none"),n(T,"stroke","currentColor"),n(T,"stroke-width","2"),n(B,"class","badge svelte-1rdpxoy"),n(L,"class","tab svelte-1rdpxoy"),N(L,"active",l[0]==="draft"),n(se,"cx","12"),n(se,"cy","12"),n(se,"r","10"),n(re,"x1","12"),n(re,"y1","8"),n(re,"x2","12"),n(re,"y2","12"),n(Me,"x1","12"),n(Me,"y1","16"),n(Me,"x2","12.01"),n(Me,"y2","16"),n(J,"width","18"),n(J,"height","18"),n(J,"viewBox","0 0 24 24"),n(J,"fill","none"),n(J,"stroke","currentColor"),n(J,"stroke-width","2"),n(ue,"class","badge svelte-1rdpxoy"),n(A,"class","tab svelte-1rdpxoy"),N(A,"active",l[0]==="unlearned"),n(Ee,"points","20 6 9 17 4 12"),n(he,"width","18"),n(he,"height","18"),n(he,"viewBox","0 0 24 24"),n(he,"fill","none"),n(he,"stroke","currentColor"),n(he,"stroke-width","2"),n(Le,"class","badge svelte-1rdpxoy"),n(oe,"class","tab svelte-1rdpxoy"),N(oe,"active",l[0]==="learned"),n(E,"class","tabs-desktop svelte-1rdpxoy"),n(qe,"cx","11"),n(qe,"cy","11"),n(qe,"r","8"),n(G,"x1","21"),n(G,"y1","21"),n(G,"x2","16.65"),n(G,"y2","16.65"),n(ke,"class","search-icon svelte-1rdpxoy"),n(ke,"width","18"),n(ke,"height","18"),n(ke,"viewBox","0 0 24 24"),n(ke,"fill","none"),n(ke,"stroke","currentColor"),n(ke,"stroke-width","2"),n(F,"type","text"),n(F,"class","search-input svelte-1rdpxoy"),n(F,"placeholder","Поиск слова..."),n(ne,"class","search-box svelte-1rdpxoy"),n(le,"class","cards-list svelte-1rdpxoy"),n(e,"class","lists-container svelte-1rdpxoy")},m(ie,Ie){M(ie,e,Ie),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(e,f),s(e,p),s(p,h),s(h,m),s(m,k),s(h,w),s(h,_),s(_,v),s(h,C),s(h,q),s(q,S),s(p,y),K&&K.m(p,null),s(e,D),s(e,E),s(E,L),s(L,T),s(T,b),s(T,O),s(L,H),s(L,B),s(B,W),s(E,V),s(E,A),s(A,J),s(J,se),s(J,re),s(J,Me),s(A,De),s(A,ue),s(ue,pe),s(E,Se),s(E,oe),s(oe,he),s(he,Ee),s(oe,me),s(oe,Le),s(Le,ve),s(e,ye),s(e,ne),s(ne,ke),s(ke,qe),s(ke,G),s(ne,Z),s(ne,F),Ae(F,l[1]),s(ne,de),_e&&_e.m(ne,null),s(e,ae),Oe&&Oe.m(e,null),s(e,Te),s(e,le),be.m(le,null),M(ie,x,Ie),Re&&Re.m(ie,Ie),M(ie,$,Ie),Y||(ce=[U(c,"click",l[25]),U(h,"click",l[38]),U(L,"click",l[42]),U(A,"click",l[43]),U(oe,"click",l[44]),U(F,"input",l[45])],Y=!0)},p(ie,Ie){Ie[0]&16384&&te(k,ie[14]),Ie[0]&8192&&te(v,ie[13]),Ie[0]&512&&N(q,"open",ie[9]),ie[9]?K?K.p(ie,Ie):(K=ll(ie),K.c(),K.m(p,null)):K&&(K.d(1),K=null),Ie[0]&128&&j!==(j=ie[7].length+"")&&te(W,j),Ie[0]&1&&N(L,"active",ie[0]==="draft"),Ie[0]&256&&fe!==(fe=ie[8].length+"")&&te(pe,fe),Ie[0]&1&&N(A,"active",ie[0]==="unlearned"),Ie[0]&64&&z!==(z=ie[6].length+"")&&te(ve,z),Ie[0]&1&&N(oe,"active",ie[0]==="learned"),Ie[0]&2&&F.value!==ie[1]&&Ae(F,ie[1]),ie[1]?_e?_e.p(ie,Ie):(_e=nl(ie),_e.c(),_e.m(ne,null)):_e&&(_e.d(1),_e=null),ie[0]==="learned"&&ie[6].length>0?Oe?Oe.p(ie,Ie):(Oe=il(ie),Oe.c(),Oe.m(e,Te)):Oe&&(Oe.d(1),Oe=null),ee===(ee=Ue(ie))&&be?be.p(ie,Ie):(be.d(1),be=ee(ie),be&&(be.c(),be.m(le,null))),ie[10]?Re?Re.p(ie,Ie):(Re=cl(ie),Re.c(),Re.m($.parentNode,$)):Re&&(Re.d(1),Re=null)},i:ge,o:ge,d(ie){ie&&(I(e),I(x),I($)),K&&K.d(),_e&&_e.d(),Oe&&Oe.d(),be.d(),Re&&Re.d(ie),Y=!1,je(ce)}}}function ui(l,e,t){let i,r,o,c,d,a,f,p,h,m,k,w,_;Qe(l,Ze,K=>t(34,k=K)),Qe(l,Je,K=>t(35,w=K)),Qe(l,We,K=>t(36,_=K));let v="draft",C="",q=!1;const S={draft:"На проработку",unlearned:"На повторение",learned:"Изученные"};function y(K){t(0,v=K),t(9,q=!1)}let D=!1,E=null,L="",T="",b="",O="",H=!1,B="",j="",W="",V="";function A(K){Je.moveToStudy(K)}function J(K){Je.deleteCard(K,v)}function se(K){t(27,E=K),t(2,L=K.word),t(3,T=K.translation||""),t(4,b=K.association||""),t(5,O=K.imageUrl||""),t(28,B=K.word),t(29,j=K.translation||""),t(30,W=K.association||""),t(31,V=K.imageUrl||""),t(11,H=!1),t(10,D=!0)}function re(K=!1){!K&&c&&!confirm("У вас есть несохранённые изменения. Закрыть без сохранения?")||(t(10,D=!1),t(27,E=null))}function Me(){t(10,D=!1),t(27,E=null)}function De(){L.trim()&&E&&(v==="draft"?Je.editDraftCard(E.id,{word:L.trim(),translation:T.trim(),association:b.trim(),imageUrl:O.trim()}):T.trim()&&Je.editCard(E.id,v,{word:L.trim(),translation:T.trim(),association:b.trim(),imageUrl:O.trim()}),Me())}function ue(){t(11,H=!0)}function fe(){t(11,H=!1)}function pe(){t(5,O="")}function Se(){const K={learned:a,unlearned:f,draft:p,language:k||"en",exportedAt:new Date().toISOString()},_e=JSON.stringify(K,null,2),Oe=new Blob([_e],{type:"application/json"}),Ue=URL.createObjectURL(Oe),ee=document.createElement("a");ee.href=Ue,ee.download=`flash-words-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(Ue)}function oe(){a.length>0&&confirm(`Отправить все ${a.length} слов на повторение?`)&&Je.moveAllToStudy()}function he(K){tt.call(this,l,K)}const Ee=()=>t(9,q=!q),me=()=>y("draft"),Le=()=>y("unlearned"),z=()=>y("learned"),ve=()=>t(0,v="draft"),ye=()=>t(0,v="unlearned"),ne=()=>t(0,v="learned");function ke(){C=this.value,t(1,C)}const qe=()=>t(1,C=""),G=K=>se(K),Z=K=>A(K.id),F=K=>J(K.id),de=()=>re();function ae(){L=this.value,t(2,L)}function Te(){T=this.value,t(3,T)}function le(){b=this.value,t(4,b)}function x(){O=this.value,t(5,O)}const $=()=>re(),Y=()=>re(),ce=K=>K.key==="Escape"&&re();return l.$$.update=()=>{l.$$.dirty[1]&8&&t(15,i=Ye(k)),l.$$.dirty[0]&1&&t(14,r=S[v]),l.$$.dirty[1]&32&&t(33,d=_||"default"),l.$$.dirty[1]&20&&t(7,p=(w.draft||[]).filter(K=>(K.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(8,f=w.unlearned.filter(K=>(K.dictionaryId||"default")===d)),l.$$.dirty[1]&20&&t(6,a=w.learned.filter(K=>(K.dictionaryId||"default")===d)),l.$$.dirty[0]&449&&t(13,o=v==="draft"?p.length:v==="unlearned"?f.length:a.length),l.$$.dirty[0]&2013265980|l.$$.dirty[1]&1&&(c=E&&(L!==B||T!==j||b!==W||O!==V)),l.$$.dirty[0]&449&&t(32,h=v==="learned"?a:v==="unlearned"?f:p),l.$$.dirty[0]&2|l.$$.dirty[1]&2&&t(12,m=C.trim()?h.filter(K=>K.word.toLowerCase().includes(C.toLowerCase())||K.translation&&K.translation.toLowerCase().includes(C.toLowerCase())):h)},[v,C,L,T,b,O,a,p,f,q,D,H,m,o,r,i,y,A,J,se,re,De,ue,fe,pe,Se,oe,E,B,j,W,V,h,d,k,w,_,he,Ee,me,Le,z,ve,ye,ne,ke,qe,G,Z,F,de,ae,Te,le,x,$,Y,ce]}class fi extends bt{constructor(e){super(),kt(this,e,ui,ci,at,{},null,[-1,-1,-1])}}function dl(l,e,t){const i=l.slice();return i[52]=e[t],i}function pl(l){let e;return{c(){e=u("span"),n(e,"class","user-indicator svelte-1ufnfyq")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function ml(l){let e;return{c(){e=u("span"),n(e,"class","token-indicator svelte-1ufnfyq")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function hl(l){let e,t,i;function r(d,a){return d[3].length===0?pi:di}let o=r(l),c=o(l);return{c(){e=u("div"),c.c(),n(e,"class","dictionary-dropdown svelte-1ufnfyq")},m(d,a){M(d,e,a),c.m(e,null),t||(i=U(e,"click",$e(l[33])),t=!0)},p(d,a){o===(o=r(d))&&c?c.p(d,a):(c.d(1),c=o(d),c&&(c.c(),c.m(e,null)))},d(d){d&&I(e),c.d(),t=!1,i()}}}function di(l){let e,t=_t(l[3]),i=[];for(let r=0;r<t.length;r+=1)i[r]=_l(dl(l,t,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=nt()},m(r,o){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,o);M(r,e,o)},p(r,o){if(o[0]&4194316){t=_t(r[3]);let c;for(c=0;c<t.length;c+=1){const d=dl(r,t,c);i[c]?i[c].p(d,o):(i[c]=_l(d),i[c].c(),i[c].m(e.parentNode,e))}for(;c<i.length;c+=1)i[c].d(1);i.length=t.length}},d(r){r&&I(e),Hl(i,r)}}}function pi(l){let e;return{c(){e=u("div"),e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ufnfyq"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> <p class="svelte-1ufnfyq">Загрузите словарь или добавьте карточку слова</p>',n(e,"class","dropdown-empty svelte-1ufnfyq")},m(t,i){M(t,e,i)},p:ge,d(t){t&&I(e)}}}function vl(l){let e,t;return{c(){e=P("svg"),t=P("polyline"),n(t,"points","20 6 9 17 4 12"),n(e,"width","16"),n(e,"height","16"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(i,r){M(i,e,r),s(e,t)},d(i){i&&I(e)}}}function _l(l){let e,t,i=l[52].name+"",r,o,c,d,a,f=l[2]===l[52].id&&vl();function p(){return l[35](l[52])}return{c(){e=u("button"),t=u("span"),r=R(i),o=g(),f&&f.c(),c=g(),n(e,"class","dropdown-item svelte-1ufnfyq"),N(e,"active",l[2]===l[52].id)},m(h,m){M(h,e,m),s(e,t),s(t,r),s(e,o),f&&f.m(e,null),s(e,c),d||(a=U(e,"click",p),d=!0)},p(h,m){l=h,m[0]&8&&i!==(i=l[52].name+"")&&te(r,i),l[2]===l[52].id?f||(f=vl(),f.c(),f.m(e,c)):f&&(f.d(1),f=null),m[0]&12&&N(e,"active",l[2]===l[52].id)},d(h){h&&I(e),f&&f.d(),d=!1,a()}}}function gl(l){let e,t,i,r,o,c,d,a,f,p,h,m,k,w,_,v,C,q,S,y,D,E,L=l[16]&&yl(l),T=l[7]>0&&kl(l);function b(B,j){return B[6]?hi:mi}let O=b(l),H=O(l);return{c(){e=u("div"),t=u("div"),i=u("div"),r=u("h2"),r.textContent="AI Токен",o=g(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=u("div"),f=u("p"),f.textContent="Введите ваш API ключ для использования AI-функций",p=g(),h=u("div"),m=u("input"),k=g(),L&&L.c(),w=g(),T&&T.c(),_=g(),v=u("div"),C=u("button"),C.textContent="Отмена",q=g(),S=u("button"),H.c(),n(r,"class","svelte-1ufnfyq"),n(c,"class","modal-close svelte-1ufnfyq"),n(i,"class","modal-header svelte-1ufnfyq"),n(f,"class","modal-description svelte-1ufnfyq"),n(m,"type","password"),n(m,"class","token-input svelte-1ufnfyq"),n(m,"placeholder","sk-..."),n(h,"class","token-input-wrapper svelte-1ufnfyq"),n(a,"class","modal-body svelte-1ufnfyq"),n(C,"class","cancel-btn svelte-1ufnfyq"),n(S,"class","save-btn svelte-1ufnfyq"),S.disabled=y=!l[0].trim(),N(S,"saved",l[6]),n(v,"class","modal-footer svelte-1ufnfyq"),n(t,"class","modal svelte-1ufnfyq"),n(e,"class","modal-overlay svelte-1ufnfyq")},m(B,j){M(B,e,j),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,f),s(a,p),s(a,h),s(h,m),Ae(m,l[0]),s(h,k),L&&L.m(h,null),s(a,w),T&&T.m(a,null),s(t,_),s(t,v),s(v,C),s(v,q),s(v,S),H.m(S,null),D||(E=[U(c,"click",l[36]),U(m,"input",l[37]),U(C,"click",l[38]),U(S,"click",l[18]),U(t,"click",$e(l[32])),U(e,"click",l[39])],D=!0)},p(B,j){j[0]&1&&m.value!==B[0]&&Ae(m,B[0]),B[16]?L?L.p(B,j):(L=yl(B),L.c(),L.m(h,null)):L&&(L.d(1),L=null),B[7]>0?T?T.p(B,j):(T=kl(B),T.c(),T.m(a,null)):T&&(T.d(1),T=null),O!==(O=b(B))&&(H.d(1),H=O(B),H&&(H.c(),H.m(S,null))),j[0]&1&&y!==(y=!B[0].trim())&&(S.disabled=y),j[0]&64&&N(S,"saved",B[6])},d(B){B&&I(e),L&&L.d(),T&&T.d(),H.d(),D=!1,je(E)}}}function yl(l){let e,t,i;return{c(){e=u("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-1ufnfyq"),n(e,"title","Очистить токен")},m(r,o){M(r,e,o),t||(i=U(e,"click",l[19]),t=!0)},p:ge,d(r){r&&I(e),t=!1,i()}}}function kl(l){let e,t,i,r,o,c=Ll(l[7])+"",d;return{c(){e=u("div"),t=u("div"),i=u("span"),i.textContent="Стоимость всех запросов:",r=g(),o=u("span"),d=R(c),n(i,"class","cost-label svelte-1ufnfyq"),n(o,"class","cost-value svelte-1ufnfyq"),n(t,"class","cost-row svelte-1ufnfyq"),n(e,"class","cost-info svelte-1ufnfyq")},m(a,f){M(a,e,f),s(e,t),s(t,i),s(t,r),s(t,o),s(o,d)},p(a,f){f[0]&128&&c!==(c=Ll(a[7])+"")&&te(d,c)},d(a){a&&I(e)}}}function mi(l){let e;return{c(){e=R("Сохранить")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function hi(l){let e,t,i;return{c(){e=P("svg"),t=P("polyline"),i=R(`
              Сохранено`),n(t,"points","20 6 9 17 4 12"),n(e,"width","18"),n(e,"height","18"),n(e,"viewBox","0 0 24 24"),n(e,"fill","none"),n(e,"stroke","currentColor"),n(e,"stroke-width","2")},m(r,o){M(r,e,o),s(e,t),M(r,i,o)},d(r){r&&(I(e),I(i))}}}function bl(l){let e,t,i,r,o,c,d,a,f,p,h,m,k,w,_,v,C,q,S,y,D,E,L=l[9]&&wl(l),T=l[10]&&Cl(l),b=l[1]&&ql(l);function O(j,W){return j[11]?_i:vi}let H=O(l),B=H(l);return{c(){e=u("div"),t=u("div"),i=u("div"),r=u("h2"),r.textContent="Загрузить слова",o=g(),c=u("button"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',d=g(),a=u("div"),f=u("p"),f.textContent="Введите код для загрузки слов из персонального файла",p=g(),h=u("div"),m=u("input"),k=g(),L&&L.c(),w=g(),T&&T.c(),_=g(),b&&b.c(),v=g(),C=u("div"),q=u("button"),q.textContent="Отмена",S=g(),y=u("button"),B.c(),n(r,"class","svelte-1ufnfyq"),n(c,"class","modal-close svelte-1ufnfyq"),n(i,"class","modal-header svelte-1ufnfyq"),n(f,"class","modal-description svelte-1ufnfyq"),n(m,"type","text"),n(m,"class","token-input user-input svelte-1ufnfyq"),n(m,"placeholder","например: mycode"),N(m,"error",l[10]),n(h,"class","token-input-wrapper svelte-1ufnfyq"),n(a,"class","modal-body svelte-1ufnfyq"),n(q,"class","cancel-btn svelte-1ufnfyq"),n(y,"class","save-btn svelte-1ufnfyq"),y.disabled=l[11],n(C,"class","modal-footer svelte-1ufnfyq"),n(t,"class","modal svelte-1ufnfyq"),n(e,"class","modal-overlay svelte-1ufnfyq")},m(j,W){M(j,e,W),s(e,t),s(t,i),s(i,r),s(i,o),s(i,c),s(t,d),s(t,a),s(a,f),s(a,p),s(a,h),s(h,m),Ae(m,l[9]),s(h,k),L&&L.m(h,null),s(a,w),T&&T.m(a,null),s(a,_),b&&b.m(a,null),s(t,v),s(t,C),s(C,q),s(C,S),s(C,y),B.m(y,null),D||(E=[U(c,"click",l[40]),U(m,"input",l[41]),U(m,"keydown",l[42]),U(q,"click",l[43]),U(y,"click",l[21]),U(t,"click",$e(l[31])),U(e,"click",l[44])],D=!0)},p(j,W){W[0]&512&&m.value!==j[9]&&Ae(m,j[9]),W[0]&1024&&N(m,"error",j[10]),j[9]?L?L.p(j,W):(L=wl(j),L.c(),L.m(h,null)):L&&(L.d(1),L=null),j[10]?T?T.p(j,W):(T=Cl(j),T.c(),T.m(a,_)):T&&(T.d(1),T=null),j[1]?b?b.p(j,W):(b=ql(j),b.c(),b.m(a,null)):b&&(b.d(1),b=null),H!==(H=O(j))&&(B.d(1),B=H(j),B&&(B.c(),B.m(y,null))),W[0]&2048&&(y.disabled=j[11])},d(j){j&&I(e),L&&L.d(),T&&T.d(),b&&b.d(),B.d(),D=!1,je(E)}}}function wl(l){let e,t,i;return{c(){e=u("button"),e.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',n(e,"class","clear-token-btn svelte-1ufnfyq"),n(e,"title","Очистить")},m(r,o){M(r,e,o),t||(i=U(e,"click",l[24]),t=!0)},p:ge,d(r){r&&I(e),t=!1,i()}}}function Cl(l){let e,t;return{c(){e=u("p"),t=R(l[10]),n(e,"class","error-text svelte-1ufnfyq")},m(i,r){M(i,e,r),s(e,t)},p(i,r){r[0]&1024&&te(t,i[10])},d(i){i&&I(e)}}}function ql(l){let e,t,i,r,o,c,d,a;return{c(){e=u("div"),t=P("svg"),i=P("polyline"),r=g(),o=u("span"),c=R("Загружены слова: "),d=u("strong"),a=R(l[1]),n(i,"points","20 6 9 17 4 12"),n(t,"width","16"),n(t,"height","16"),n(t,"viewBox","0 0 24 24"),n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-width","2"),n(d,"class","svelte-1ufnfyq"),n(e,"class","current-user-info svelte-1ufnfyq")},m(f,p){M(f,e,p),s(e,t),s(t,i),s(e,r),s(e,o),s(o,c),s(o,d),s(d,a)},p(f,p){p[0]&2&&te(a,f[1])},d(f){f&&I(e)}}}function vi(l){let e;return{c(){e=R("Загрузить")},m(t,i){M(t,e,i)},d(t){t&&I(e)}}}function _i(l){let e,t;return{c(){e=u("span"),t=R(`
              Загрузка...`),n(e,"class","loading-spinner-small svelte-1ufnfyq")},m(i,r){M(i,e,r),M(i,t,r)},d(i){i&&(I(e),I(t))}}}function gi(l){let e,t;return e=new fi({}),{c(){Mt(e.$$.fragment)},m(i,r){gt(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){mt(e.$$.fragment,i),t=!1},d(i){yt(e,i)}}}function yi(l){let e,t;return e=new Pn({}),{c(){Mt(e.$$.fragment)},m(i,r){gt(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){mt(e.$$.fragment,i),t=!1},d(i){yt(e,i)}}}function ki(l){let e,t;return e=new pn({}),{c(){Mt(e.$$.fragment)},m(i,r){gt(e,i,r),t=!0},i(i){t||(lt(e.$$.fragment,i),t=!0)},o(i){mt(e.$$.fragment,i),t=!1},d(i){yt(e,i)}}}function Sl(l){let e,t;return{c(){e=u("span"),t=R(l[13]),n(e,"class","study-badge svelte-1ufnfyq")},m(i,r){M(i,e,r),s(e,t)},p(i,r){r[0]&8192&&te(t,i[13])},d(i){i&&I(e)}}}function bi(l){let e,t,i,r,o,c,d,a,f,p,h,m,k,w,_,v,C,q,S,y,D,E,L,T,b,O,H,B,j,W,V,A,J,se,re,Me,De,ue,fe,pe,Se,oe,he,Ee,me,Le,z,ve,ye,ne,ke,qe,G,Z,F,de,ae,Te,le=l[15]&&pl(),x=l[16]&&ml(),$=l[12]&&hl(l),Y=l[5]&&gl(l),ce=l[8]&&bl(l);const K=[ki,yi,gi],_e=[];function Oe(ee,be){return ee[4]==="add"?0:ee[4]==="study"?1:ee[4]==="lists"?2:-1}~(fe=Oe(l))&&(pe=_e[fe]=K[fe](l));let Ue=l[13]>0&&Sl(l);return{c(){e=u("div"),t=u("div"),i=g(),r=u("nav"),o=u("div"),o.innerHTML='<svg width="32" height="32" viewBox="0 0 100 100"><defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#6366f1"></stop><stop offset="100%" style="stop-color:#a855f7"></stop></linearGradient></defs><rect width="100" height="100" rx="20" fill="url(#logoGrad)"></rect><text x="50" y="65" font-family="Arial" font-size="50" font-weight="bold" fill="white" text-anchor="middle">F</text></svg> <span class="brand-name svelte-1ufnfyq">Flash Words</span>',c=g(),d=u("div"),a=u("button"),f=P("svg"),p=P("path"),h=g(),le&&le.c(),m=g(),k=u("button"),w=P("svg"),_=P("path"),v=P("polyline"),C=P("polyline"),q=P("polyline"),S=P("polyline"),y=P("line"),D=g(),x&&x.c(),E=g(),L=u("div"),T=u("button"),b=P("svg"),O=P("path"),H=P("path"),B=g(),j=u("span"),W=R(l[14]),V=g(),A=P("svg"),J=P("polyline"),se=g(),$&&$.c(),re=g(),Y&&Y.c(),Me=g(),ce&&ce.c(),De=g(),ue=u("main"),pe&&pe.c(),Se=g(),oe=u("nav"),he=u("button"),he.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ufnfyq"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg> <span class="svelte-1ufnfyq">Добавить</span>',Ee=g(),me=u("button"),Le=u("div"),z=P("svg"),ve=P("rect"),ye=P("path"),ne=P("path"),ke=g(),Ue&&Ue.c(),qe=g(),G=u("span"),G.textContent="Изучать",Z=g(),F=u("button"),F.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1ufnfyq"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> <span class="svelte-1ufnfyq">Списки</span>',n(t,"class","background-pattern svelte-1ufnfyq"),n(o,"class","nav-brand svelte-1ufnfyq"),n(p,"d","M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"),n(f,"width","20"),n(f,"height","20"),n(f,"viewBox","0 0 24 24"),n(f,"fill","none"),n(f,"stroke","currentColor"),n(f,"stroke-width","2"),n(a,"class","user-btn svelte-1ufnfyq"),n(a,"title","Ввести промокод"),N(a,"has-user",l[15]),n(_,"d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"),n(v,"points","7.5 4.21 12 6.81 16.5 4.21"),n(C,"points","7.5 19.79 7.5 14.6 3 12"),n(q,"points","21 12 16.5 14.6 16.5 19.79"),n(S,"points","3.27 6.96 12 12.01 20.73 6.96"),n(y,"x1","12"),n(y,"y1","22.08"),n(y,"x2","12"),n(y,"y2","12"),n(w,"width","20"),n(w,"height","20"),n(w,"viewBox","0 0 24 24"),n(w,"fill","none"),n(w,"stroke","currentColor"),n(w,"stroke-width","2"),n(k,"class","ai-token-btn svelte-1ufnfyq"),n(k,"title","Настройка AI токена"),N(k,"has-token",l[16]),n(O,"d","M4 19.5A2.5 2.5 0 0 1 6.5 17H20"),n(H,"d","M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"),n(b,"width","18"),n(b,"height","18"),n(b,"viewBox","0 0 24 24"),n(b,"fill","none"),n(b,"stroke","currentColor"),n(b,"stroke-width","2"),n(j,"class","dictionary-label svelte-1ufnfyq"),n(J,"points","6 9 12 15 18 9"),n(A,"class","dropdown-arrow svelte-1ufnfyq"),n(A,"width","14"),n(A,"height","14"),n(A,"viewBox","0 0 24 24"),n(A,"fill","none"),n(A,"stroke","currentColor"),n(A,"stroke-width","2"),N(A,"open",l[12]),n(T,"class","dictionary-btn svelte-1ufnfyq"),n(T,"title","Выбрать словарь"),N(T,"has-dictionary",l[2]),n(L,"class","dictionary-selector svelte-1ufnfyq"),n(d,"class","nav-stats svelte-1ufnfyq"),n(r,"class","navbar svelte-1ufnfyq"),n(ue,"class","main-content svelte-1ufnfyq"),n(he,"class","nav-item svelte-1ufnfyq"),N(he,"active",l[4]==="add"),n(ve,"x","2"),n(ve,"y","4"),n(ve,"width","20"),n(ve,"height","16"),n(ve,"rx","2"),n(ye,"d","M12 8v8"),n(ne,"d","M8 12h8"),n(z,"width","28"),n(z,"height","28"),n(z,"viewBox","0 0 24 24"),n(z,"fill","none"),n(z,"stroke","currentColor"),n(z,"stroke-width","2"),n(z,"class","svelte-1ufnfyq"),n(Le,"class","study-btn-inner svelte-1ufnfyq"),n(G,"class","svelte-1ufnfyq"),n(me,"class","nav-item study svelte-1ufnfyq"),N(me,"active",l[4]==="study"),n(F,"class","nav-item svelte-1ufnfyq"),N(F,"active",l[4]==="lists"),n(oe,"class","bottom-nav svelte-1ufnfyq"),n(e,"class","app svelte-1ufnfyq")},m(ee,be){M(ee,e,be),s(e,t),s(e,i),s(e,r),s(r,o),s(r,c),s(r,d),s(d,a),s(a,f),s(f,p),s(a,h),le&&le.m(a,null),s(d,m),s(d,k),s(k,w),s(w,_),s(w,v),s(w,C),s(w,q),s(w,S),s(w,y),s(k,D),x&&x.m(k,null),s(d,E),s(d,L),s(L,T),s(T,b),s(b,O),s(b,H),s(T,B),s(T,j),s(j,W),s(T,V),s(T,A),s(A,J),s(L,se),$&&$.m(L,null),s(e,re),Y&&Y.m(e,null),s(e,Me),ce&&ce.m(e,null),s(e,De),s(e,ue),~fe&&_e[fe].m(ue,null),s(e,Se),s(e,oe),s(oe,he),s(oe,Ee),s(oe,me),s(me,Le),s(Le,z),s(z,ve),s(z,ye),s(z,ne),s(Le,ke),Ue&&Ue.m(Le,null),s(me,qe),s(me,G),s(oe,Z),s(oe,F),de=!0,ae||(Te=[U(a,"click",l[20]),U(k,"click",l[17]),U(T,"click",$e(l[34])),U(he,"click",l[45]),U(me,"click",l[46]),U(F,"click",l[47]),U(e,"click",l[23])],ae=!0)},p(ee,be){ee[15]?le||(le=pl(),le.c(),le.m(a,null)):le&&(le.d(1),le=null),(!de||be[0]&32768)&&N(a,"has-user",ee[15]),ee[16]?x||(x=ml(),x.c(),x.m(k,null)):x&&(x.d(1),x=null),(!de||be[0]&65536)&&N(k,"has-token",ee[16]),(!de||be[0]&16384)&&te(W,ee[14]),(!de||be[0]&4096)&&N(A,"open",ee[12]),(!de||be[0]&4)&&N(T,"has-dictionary",ee[2]),ee[12]?$?$.p(ee,be):($=hl(ee),$.c(),$.m(L,null)):$&&($.d(1),$=null),ee[5]?Y?Y.p(ee,be):(Y=gl(ee),Y.c(),Y.m(e,Me)):Y&&(Y.d(1),Y=null),ee[8]?ce?ce.p(ee,be):(ce=bl(ee),ce.c(),ce.m(e,De)):ce&&(ce.d(1),ce=null);let Re=fe;fe=Oe(ee),fe!==Re&&(pe&&(Kl(),mt(_e[Re],1,1,()=>{_e[Re]=null}),Xl()),~fe?(pe=_e[fe],pe||(pe=_e[fe]=K[fe](ee),pe.c()),lt(pe,1),pe.m(ue,null)):pe=null),(!de||be[0]&16)&&N(he,"active",ee[4]==="add"),ee[13]>0?Ue?Ue.p(ee,be):(Ue=Sl(ee),Ue.c(),Ue.m(Le,null)):Ue&&(Ue.d(1),Ue=null),(!de||be[0]&16)&&N(me,"active",ee[4]==="study"),(!de||be[0]&16)&&N(F,"active",ee[4]==="lists")},i(ee){de||(lt(pe),de=!0)},o(ee){mt(pe),de=!1},d(ee){ee&&I(e),le&&le.d(),x&&x.d(),$&&$.d(),Y&&Y.d(),ce&&ce.d(),~fe&&_e[fe].d(),Ue&&Ue.d(),ae=!1,je(Te)}}}function Ll(l){return l<.01?`$${l.toFixed(6)}`:l<1?`$${l.toFixed(4)}`:`$${l.toFixed(2)}`}function wi(l,e,t){let i,r,o,c,d,a,f,p,h,m,k,w;Qe(l,Je,G=>t(28,m=G)),Qe(l,We,G=>t(29,k=G)),Qe(l,Xe,G=>t(30,w=G));let _="study",v=!1,C="",q=!1,S=0,y=!1,D="",E="",L=!1,T="",b=!1;function O(){typeof localStorage<"u"&&t(7,S=parseFloat(localStorage.getItem("ai_total_cost")||"0")),t(5,v=!0)}function H(){typeof localStorage<"u"&&(localStorage.setItem("ai_token",C),t(6,q=!0),setTimeout(()=>{t(6,q=!1),t(5,v=!1)},1e3))}function B(){t(0,C=""),typeof localStorage<"u"&&localStorage.removeItem("ai_token")}function j(){t(9,D=T),t(10,E=""),t(8,y=!0)}async function W(){if(!D.trim()){t(1,T=""),typeof localStorage<"u"&&localStorage.removeItem("user_name"),t(8,y=!1);return}t(11,L=!0),t(10,E="");try{const Z=await fetch(`/flash/words/${D.trim()}.json`);if(!Z.ok)throw new Error("Файл не найден");const F=await Z.json(),de=F.language||"en";F.language&&Ze.set(F.language),t(1,T=D.trim()),typeof localStorage<"u"&&localStorage.setItem("user_name",T);let ae;if(de==="en"?ae="default":(ae=T,Je.resetDictionary(ae)),Je.importCards(F,ae),de==="en"){if(!i.find(le=>le.id==="default")){const le=`${Ye("en")} (default)`;Xe.addDictionary("default",le,"en",!1)}We.set("default")}else{const Te=`${T} (${Ye(de)})`;Xe.addDictionary(T,Te,de,!1),We.set(T)}t(8,y=!1)}catch{t(10,E=`Файл "${D.trim()}.json" не найден`)}finally{t(11,L=!1)}}async function V(G){if(!G){We.set(""),t(12,b=!1);return}const Z=i.find(F=>F.id===G);if(Z){We.set(G),Z.language&&Ze.set(Z.language),t(12,b=!1);return}t(11,L=!0);try{const de=await fetch(`/flash/words/${G}.json`);if(!de.ok)throw new Error("Файл не найден");const ae=await de.json(),Te=ae.language||"en";ae.language&&Ze.set(ae.language);let le;if(Te==="en"?le="default":(le=G,Je.resetDictionary(le)),Je.importCards(ae,le),Te==="en"){if(!i.find($=>$.id==="default")){const $=`${Ye("en")} (default)`;Xe.addDictionary("default",$,"en",!1)}We.set("default")}else{const x=`${G} (${Ye(Te)})`;Xe.addDictionary(G,x,Te,!1),We.set(G)}t(12,b=!1)}catch(F){console.error("Ошибка загрузки словаря:",F),alert(`Ошибка загрузки словаря "${G}"`)}finally{t(11,L=!1)}}function A(G){if(G===r){t(12,b=!1);return}V(G)}Dl(()=>{if(!i.find(Z=>Z.id==="default")){const Z=`${Ye("en")} (default)`;Xe.addDictionary("default",Z,"en",!1),(!r||r==="")&&We.set("default")}if(r){const Z=i.find(F=>F.id===r);Z&&(Z.isImported||r==="default")?Z.language&&Ze.set(Z.language):V(r)}else{We.set("default");const Z=i.find(F=>F.id==="default");Z&&Z.language&&Ze.set(Z.language)}});function J(G){b&&!G.target.closest(".dictionary-selector")&&t(12,b=!1)}function se(){t(9,D=""),t(1,T=""),typeof localStorage<"u"&&localStorage.removeItem("user_name")}const re=(G,Z)=>G.filter(F=>(F.dictionaryId||"default")===Z);function Me(G){tt.call(this,l,G)}function De(G){tt.call(this,l,G)}function ue(G){tt.call(this,l,G)}const fe=()=>t(12,b=!b),pe=G=>A(G.id),Se=()=>t(5,v=!1);function oe(){C=this.value,t(0,C)}const he=()=>t(5,v=!1),Ee=()=>t(5,v=!1),me=()=>t(8,y=!1);function Le(){D=this.value,t(9,D)}const z=G=>G.key==="Enter"&&W(),ve=()=>t(8,y=!1),ye=()=>t(8,y=!1),ne=()=>t(4,_="add"),ke=()=>t(4,_="study"),qe=()=>t(4,_="lists");return l.$$.update=()=>{var G;if(l.$$.dirty[0]&536870912&&t(2,r=k),l.$$.dirty[0]&268435460&&r){const Z={learned:m.learned.filter(F=>(F.dictionaryId||"default")===r),unlearned:m.unlearned.filter(F=>(F.dictionaryId||"default")===r),draft:(m.draft||[]).filter(F=>(F.dictionaryId||"default")===r)};Xe.updateDictionaryData(r,Z)}l.$$.dirty[0]&1073741824&&t(3,i=w),l.$$.dirty[0]&1&&t(16,o=C&&C.length>0),l.$$.dirty[0]&2&&t(15,c=T&&T.length>0),l.$$.dirty[0]&12&&i.length>0&&(!r||r==="")&&(i.find(F=>F.id==="default")?We.set("default"):i.length>0&&We.set(i[0].id)),l.$$.dirty[0]&12&&t(14,d=((G=i.find(Z=>Z.id===r))==null?void 0:G.name)||(i.length>0?"Выберите словарь":"Нет словарей")),l.$$.dirty[0]&268435460&&t(27,a=re(m.learned,r)),l.$$.dirty[0]&268435460&&t(26,f=re(m.unlearned,r)),l.$$.dirty[0]&268435460&&t(25,p=re(m.draft||[],r)),l.$$.dirty[0]&234881024&&a.length+f.length+p.length,l.$$.dirty[0]&67108864&&t(13,h=f.length),l.$$.dirty[0]&33554432&&p.length},[C,T,r,i,_,v,q,S,y,D,E,L,b,h,d,c,o,O,H,B,j,W,A,J,se,p,f,a,m,k,w,Me,De,ue,fe,pe,Se,oe,he,Ee,me,Le,z,ve,ye,ne,ke,qe]}class Ci extends bt{constructor(e){super(),kt(this,e,wi,bi,at,{},null,[-1,-1])}}new Ci({target:document.getElementById("app")});
